# Install latest clang with extra tools.
# Look at utils/prepare-environment/install-clang.sh

sudo apt-get install jq

cd build
CC=clang CXX=clang++ cmake ..

cd ..

jq '.[] | .file' build/compile_commands.json | grep -v -F 'contrib' | head -n1 | xargs -I{} clang-tidy {} -p build -header-filter='dbms|libs' -checks='boost-*,bugprone-*,clang-analyzer-*,performance-*'
