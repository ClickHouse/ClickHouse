DROP USER IF EXISTS u1, u2@hostB, u2@'192.168.0.0/16', u2@'192.168.0.0/255.255.0.0', u2@'192.168.%.%', u3;
DROP ROLE IF EXISTS r1, r2;

CREATE USER u1;
SHOW CREATE USER u1;
ALTER USER u1 HOST NAME 'hostA' SETTINGS max_memory_usage = 1000000000 READONLY;
SHOW CREATE USER u1;
ALTER USER u1 HOST REGEXP 'host.*' SETTINGS max_result_rows MIN 10000 MAX 20000, readonly = 1 ACCOUNT LOCK;
SHOW CREATE USER u1;
ALTER USER u1 HOST IP '192.168.1.0/24';
SHOW CREATE USER u1;
ALTER USER u1 ACCOUNT UNLOCK SETTINGS NONE HOST ANY;
SHOW CREATE USER u1;
CREATE ROLE r1, r2;
GRANT r1,r2 TO u1;
ALTER USER u1 DEFAULT ROLE r1;
SHOW CREATE USER u1;
ALTER USER u1 DEFAULT ROLE ALL;
SHOW CREATE USER u1;
ALTER USER u1 IDENTIFY BY 'abc';
SHOW CREATE USER u1;
ALTER USER u1 IDENTIFY WITH PLAINTEXT_PASSWORD BY 'abc';
SHOW CREATE USER u1;
ALTER USER u1 IDENTIFY WITH NO_PASSWORD;
SHOW CREATE USER u1;


CREATE USER u2@hostB;
CREATE USER u2@'192.168.0.0/16';
CREATE USER u2@'192.168.0.0/255.255.0.0';
CREATE USER u2@'192.168.%.%';
SHOW CREATE USER u2@hostB;
SHOW CREATE USER u2@'192.168.0.0/16';
SHOW CREATE USER u2@'192.168.0.0/255.255.0.0';
SHOW CREATE USER u2@'192.168.%.%';

CREATE USER u3 DEFAULT ROLE r1, r2;
SHOW CREATE USER u3;
SHOW GRANTS FOR u3;

DROP USER u1, u2@hostB, u2@'192.168.0.0/16', u2@'192.168.0.0/255.255.0.0', u2@'192.168.%.%', u3;
DROP ROLE r1, r2;
