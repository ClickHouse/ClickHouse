<test>
    <name>distinct_count_aggregation_comparison</name>
    <substitutions>
        <substitution>
            <name>group_scale</name>
            <values>
                <value>1000000</value>
                <value>100000</value>
                <value>10000</value>
                <value>1000</value>
                <value>100</value>
                <value>10</value>
            </values>
        </substitution>
    </substitutions>

    <!-- Using BY and TOTALS -->
    <query>SELECT uniqExact(Title), uniqExact(Title BY UserID % {group_scale}), uniqExact(Title TOTALS) FROM  test.hits GROUP BY CounterID % 13, UserID % {group_scale} FORMAT Null</query>

    <!-- Using window functions -->
    <query>SELECT DISTINCT uniqExact(Title) OVER (PARTITION BY CounterID % 13, UserID % {group_scale}), uniqExact(Title) OVER (PARTITION BY UserID % {group_scale}), uniqExact(Title) OVER () FROM  test.hits FORMAT Null</query>

    <!-- Using grouping sets -->
    <query>SELECT uniqExact(Title) FROM  test.hits GROUP BY GROUPING SETS((CounterID % 13, UserID % {group_scale}), (CounterID % 13),()) FORMAT Null</query>
</test>
