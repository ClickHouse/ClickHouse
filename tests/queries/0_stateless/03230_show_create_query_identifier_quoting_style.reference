Settings: default
CREATE TABLE default.uk_price_paid\n(\n    `Table` String,\n    `Engine` String,\n    `price` UInt32,\n    `date` Date,\n    `postcode1` LowCardinality(String),\n    `postcode2` LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    `is_new` UInt8,\n    `duration` Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `locality` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            date,\n            price\n        ORDER BY \n            town,\n            date\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, date)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    `price` UInt32,\n    `date` Date,\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String)\n)\nAS SELECT\n    price,\n    date,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY month\nORDER BY month\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(date) AS month\nSELECT\n    month,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY month
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    `date` DateTime64,\n    `variable` Decimal32(2),\n    `fixed` Decimal32(2),\n    `bank` Decimal32(2)\n)\nPRIMARY KEY date\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: always & Backticks
CREATE TABLE `default`.`uk_price_paid`\n(\n    `Table` String,\n    `Engine` String,\n    `price` UInt32,\n    `date` Date,\n    `postcode1` LowCardinality(String),\n    `postcode2` LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    `is_new` UInt8,\n    `duration` Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `locality` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String),\n    INDEX `county_index` `county` TYPE set(10) GRANULARITY 1,\n    PROJECTION `town_date_projection`\n    (\n        SELECT \n            `town`,\n            `date`,\n            `price`\n        ORDER BY \n            `town`,\n            `date`\n    ),\n    PROJECTION `handy_aggs_projection`\n    (\n        SELECT \n            avg(`price`),\n            max(`price`),\n            sum(`price`)\n        GROUP BY `town`\n    )\n)\nENGINE = MergeTree\nORDER BY (`postcode1`, `postcode2`, `date`)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW `default`.`prices_by_year_view` TO default.prices_by_year_dest\n(\n    `price` UInt32,\n    `date` Date,\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String)\n)\nAS SELECT\n    `price`,\n    `date`,\n    `addr1`,\n    `addr2`,\n    `street`,\n    `town`,\n    `district`,\n    `county`\nFROM `default`.`uk_price_paid`
CREATE TABLE `default`.`uk_prices_aggs_dest`\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(`min`, UInt32),\n    `max_price` SimpleAggregateFunction(`max`, UInt32),\n    `volume` AggregateFunction(`count`, UInt32),\n    `avg_price` AggregateFunction(`avg`, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY `month`\nORDER BY `month`\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW `default`.`uk_prices_aggs_view` TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(`min`, UInt32),\n    `max_price` SimpleAggregateFunction(`max`, UInt32),\n    `volume` AggregateFunction(`count`, UInt32),\n    `avg_price` AggregateFunction(`avg`, UInt32)\n)\nAS WITH toStartOfMonth(`date`) AS `month`\nSELECT\n    `month`,\n    minSimpleState(`price`) AS `min_price`,\n    maxSimpleState(`price`) AS `max_price`,\n    countState(`price`) AS `volume`,\n    avgState(`price`) AS `avg_price`\nFROM `default`.`uk_price_paid`\nGROUP BY `month`
CREATE DICTIONARY `default`.`uk_mortgage_rates_dict`\n(\n    `date` DateTime64,\n    `variable` Decimal32(2),\n    `fixed` Decimal32(2),\n    `bank` Decimal32(2)\n)\nPRIMARY KEY `date`\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: user_display & Backticks
CREATE TABLE default.uk_price_paid\n(\n    `Table` String,\n    `Engine` String,\n    price UInt32,\n    `date` Date,\n    postcode1 LowCardinality(String),\n    postcode2 LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    is_new UInt8,\n    duration Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    locality LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            `date`,\n            price\n        ORDER BY \n            town,\n            `date`\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, `date`)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    price UInt32,\n    `date` Date,\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String)\n)\nAS SELECT\n    price,\n    `date`,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    `month` Date,\n    min_price SimpleAggregateFunction(`min`, UInt32),\n    max_price SimpleAggregateFunction(`max`, UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY `month`\nORDER BY `month`\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    min_price SimpleAggregateFunction(`min`, UInt32),\n    max_price SimpleAggregateFunction(`max`, UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(`date`) AS `month`\nSELECT\n    `month`,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY `month`
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    `date` DateTime64,\n    variable Decimal32(2),\n    fixed Decimal32(2),\n    bank Decimal32(2)\n)\nPRIMARY KEY `date`\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: when_necessary & Backticks
CREATE TABLE default.uk_price_paid\n(\n    `Table` String,\n    `Engine` String,\n    `price` UInt32,\n    `date` Date,\n    `postcode1` LowCardinality(String),\n    `postcode2` LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    `is_new` UInt8,\n    `duration` Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `locality` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            date,\n            price\n        ORDER BY \n            town,\n            date\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, date)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    `price` UInt32,\n    `date` Date,\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String)\n)\nAS SELECT\n    price,\n    date,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY month\nORDER BY month\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(date) AS month\nSELECT\n    month,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY month
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    `date` DateTime64,\n    `variable` Decimal32(2),\n    `fixed` Decimal32(2),\n    `bank` Decimal32(2)\n)\nPRIMARY KEY date\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: always & DoubleQuotes
CREATE TABLE "default"."uk_price_paid"\n(\n    "Table" String,\n    "Engine" String,\n    "price" UInt32,\n    "date" Date,\n    "postcode1" LowCardinality(String),\n    "postcode2" LowCardinality(String),\n    "type" Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    "is_new" UInt8,\n    "duration" Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    "addr1" String,\n    "addr2" String,\n    "street" LowCardinality(String),\n    "locality" LowCardinality(String),\n    "town" LowCardinality(String),\n    "district" LowCardinality(String),\n    "county" LowCardinality(String),\n    INDEX "county_index" "county" TYPE set(10) GRANULARITY 1,\n    PROJECTION "town_date_projection"\n    (\n        SELECT \n            "town",\n            "date",\n            "price"\n        ORDER BY \n            "town",\n            "date"\n    ),\n    PROJECTION "handy_aggs_projection"\n    (\n        SELECT \n            avg("price"),\n            max("price"),\n            sum("price")\n        GROUP BY "town"\n    )\n)\nENGINE = MergeTree\nORDER BY ("postcode1", "postcode2", "date")\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW "default"."prices_by_year_view" TO default.prices_by_year_dest\n(\n    "price" UInt32,\n    "date" Date,\n    "addr1" String,\n    "addr2" String,\n    "street" LowCardinality(String),\n    "town" LowCardinality(String),\n    "district" LowCardinality(String),\n    "county" LowCardinality(String)\n)\nAS SELECT\n    "price",\n    "date",\n    "addr1",\n    "addr2",\n    "street",\n    "town",\n    "district",\n    "county"\nFROM "default"."uk_price_paid"
CREATE TABLE "default"."uk_prices_aggs_dest"\n(\n    "month" Date,\n    "min_price" SimpleAggregateFunction("min", UInt32),\n    "max_price" SimpleAggregateFunction("max", UInt32),\n    "volume" AggregateFunction("count", UInt32),\n    "avg_price" AggregateFunction("avg", UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY "month"\nORDER BY "month"\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW "default"."uk_prices_aggs_view" TO default.uk_prices_aggs_dest\n(\n    "month" Date,\n    "min_price" SimpleAggregateFunction("min", UInt32),\n    "max_price" SimpleAggregateFunction("max", UInt32),\n    "volume" AggregateFunction("count", UInt32),\n    "avg_price" AggregateFunction("avg", UInt32)\n)\nAS WITH toStartOfMonth("date") AS "month"\nSELECT\n    "month",\n    minSimpleState("price") AS "min_price",\n    maxSimpleState("price") AS "max_price",\n    countState("price") AS "volume",\n    avgState("price") AS "avg_price"\nFROM "default"."uk_price_paid"\nGROUP BY "month"
CREATE DICTIONARY "default"."uk_mortgage_rates_dict"\n(\n    "date" DateTime64,\n    "variable" Decimal32(2),\n    "fixed" Decimal32(2),\n    "bank" Decimal32(2)\n)\nPRIMARY KEY "date"\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: user_display & DoubleQuotes
CREATE TABLE default.uk_price_paid\n(\n    "Table" String,\n    "Engine" String,\n    price UInt32,\n    "date" Date,\n    postcode1 LowCardinality(String),\n    postcode2 LowCardinality(String),\n    "type" Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    is_new UInt8,\n    duration Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    locality LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            "date",\n            price\n        ORDER BY \n            town,\n            "date"\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, "date")\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    price UInt32,\n    "date" Date,\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String)\n)\nAS SELECT\n    price,\n    "date",\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    "month" Date,\n    min_price SimpleAggregateFunction("min", UInt32),\n    max_price SimpleAggregateFunction("max", UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY "month"\nORDER BY "month"\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    "month" Date,\n    min_price SimpleAggregateFunction("min", UInt32),\n    max_price SimpleAggregateFunction("max", UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth("date") AS "month"\nSELECT\n    "month",\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY "month"
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    "date" DateTime64,\n    variable Decimal32(2),\n    fixed Decimal32(2),\n    bank Decimal32(2)\n)\nPRIMARY KEY "date"\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: when_necessary & DoubleQuotes
CREATE TABLE default.uk_price_paid\n(\n    "Table" String,\n    "Engine" String,\n    "price" UInt32,\n    "date" Date,\n    "postcode1" LowCardinality(String),\n    "postcode2" LowCardinality(String),\n    "type" Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    "is_new" UInt8,\n    "duration" Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    "addr1" String,\n    "addr2" String,\n    "street" LowCardinality(String),\n    "locality" LowCardinality(String),\n    "town" LowCardinality(String),\n    "district" LowCardinality(String),\n    "county" LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            date,\n            price\n        ORDER BY \n            town,\n            date\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, date)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    "price" UInt32,\n    "date" Date,\n    "addr1" String,\n    "addr2" String,\n    "street" LowCardinality(String),\n    "town" LowCardinality(String),\n    "district" LowCardinality(String),\n    "county" LowCardinality(String)\n)\nAS SELECT\n    price,\n    date,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    "month" Date,\n    "min_price" SimpleAggregateFunction(min, UInt32),\n    "max_price" SimpleAggregateFunction(max, UInt32),\n    "volume" AggregateFunction(count, UInt32),\n    "avg_price" AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY month\nORDER BY month\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    "month" Date,\n    "min_price" SimpleAggregateFunction(min, UInt32),\n    "max_price" SimpleAggregateFunction(max, UInt32),\n    "volume" AggregateFunction(count, UInt32),\n    "avg_price" AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(date) AS month\nSELECT\n    month,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY month
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    "date" DateTime64,\n    "variable" Decimal32(2),\n    "fixed" Decimal32(2),\n    "bank" Decimal32(2)\n)\nPRIMARY KEY date\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: always & BackticksMySQL
CREATE TABLE `default`.`uk_price_paid`\n(\n    `Table` String,\n    `Engine` String,\n    `price` UInt32,\n    `date` Date,\n    `postcode1` LowCardinality(String),\n    `postcode2` LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    `is_new` UInt8,\n    `duration` Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `locality` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String),\n    INDEX `county_index` `county` TYPE set(10) GRANULARITY 1,\n    PROJECTION `town_date_projection`\n    (\n        SELECT \n            `town`,\n            `date`,\n            `price`\n        ORDER BY \n            `town`,\n            `date`\n    ),\n    PROJECTION `handy_aggs_projection`\n    (\n        SELECT \n            avg(`price`),\n            max(`price`),\n            sum(`price`)\n        GROUP BY `town`\n    )\n)\nENGINE = MergeTree\nORDER BY (`postcode1`, `postcode2`, `date`)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW `default`.`prices_by_year_view` TO default.prices_by_year_dest\n(\n    `price` UInt32,\n    `date` Date,\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String)\n)\nAS SELECT\n    `price`,\n    `date`,\n    `addr1`,\n    `addr2`,\n    `street`,\n    `town`,\n    `district`,\n    `county`\nFROM `default`.`uk_price_paid`
CREATE TABLE `default`.`uk_prices_aggs_dest`\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(`min`, UInt32),\n    `max_price` SimpleAggregateFunction(`max`, UInt32),\n    `volume` AggregateFunction(`count`, UInt32),\n    `avg_price` AggregateFunction(`avg`, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY `month`\nORDER BY `month`\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW `default`.`uk_prices_aggs_view` TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(`min`, UInt32),\n    `max_price` SimpleAggregateFunction(`max`, UInt32),\n    `volume` AggregateFunction(`count`, UInt32),\n    `avg_price` AggregateFunction(`avg`, UInt32)\n)\nAS WITH toStartOfMonth(`date`) AS `month`\nSELECT\n    `month`,\n    minSimpleState(`price`) AS `min_price`,\n    maxSimpleState(`price`) AS `max_price`,\n    countState(`price`) AS `volume`,\n    avgState(`price`) AS `avg_price`\nFROM `default`.`uk_price_paid`\nGROUP BY `month`
CREATE DICTIONARY `default`.`uk_mortgage_rates_dict`\n(\n    `date` DateTime64,\n    `variable` Decimal32(2),\n    `fixed` Decimal32(2),\n    `bank` Decimal32(2)\n)\nPRIMARY KEY `date`\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: user_display & BackticksMySQL
CREATE TABLE default.uk_price_paid\n(\n    `Table` String,\n    `Engine` String,\n    price UInt32,\n    `date` Date,\n    postcode1 LowCardinality(String),\n    postcode2 LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    is_new UInt8,\n    duration Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    locality LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            `date`,\n            price\n        ORDER BY \n            town,\n            `date`\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, `date`)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    price UInt32,\n    `date` Date,\n    addr1 String,\n    addr2 String,\n    street LowCardinality(String),\n    town LowCardinality(String),\n    district LowCardinality(String),\n    county LowCardinality(String)\n)\nAS SELECT\n    price,\n    `date`,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    `month` Date,\n    min_price SimpleAggregateFunction(`min`, UInt32),\n    max_price SimpleAggregateFunction(`max`, UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY `month`\nORDER BY `month`\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    min_price SimpleAggregateFunction(`min`, UInt32),\n    max_price SimpleAggregateFunction(`max`, UInt32),\n    volume AggregateFunction(count, UInt32),\n    avg_price AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(`date`) AS `month`\nSELECT\n    `month`,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY `month`
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    `date` DateTime64,\n    variable Decimal32(2),\n    fixed Decimal32(2),\n    bank Decimal32(2)\n)\nPRIMARY KEY `date`\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
Settings: when_necessary & BackticksMySQL
CREATE TABLE default.uk_price_paid\n(\n    `Table` String,\n    `Engine` String,\n    `price` UInt32,\n    `date` Date,\n    `postcode1` LowCardinality(String),\n    `postcode2` LowCardinality(String),\n    `type` Enum8(\'other\' = 0, \'terraced\' = 1, \'semi-detached\' = 2, \'detached\' = 3, \'flat\' = 4),\n    `is_new` UInt8,\n    `duration` Enum8(\'unknown\' = 0, \'freehold\' = 1, \'leasehold\' = 2),\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `locality` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String),\n    INDEX county_index county TYPE set(10) GRANULARITY 1,\n    PROJECTION town_date_projection\n    (\n        SELECT \n            town,\n            date,\n            price\n        ORDER BY \n            town,\n            date\n    ),\n    PROJECTION handy_aggs_projection\n    (\n        SELECT \n            avg(price),\n            max(price),\n            sum(price)\n        GROUP BY town\n    )\n)\nENGINE = MergeTree\nORDER BY (postcode1, postcode2, date)\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.prices_by_year_view TO default.prices_by_year_dest\n(\n    `price` UInt32,\n    `date` Date,\n    `addr1` String,\n    `addr2` String,\n    `street` LowCardinality(String),\n    `town` LowCardinality(String),\n    `district` LowCardinality(String),\n    `county` LowCardinality(String)\n)\nAS SELECT\n    price,\n    date,\n    addr1,\n    addr2,\n    street,\n    town,\n    district,\n    county\nFROM default.uk_price_paid
CREATE TABLE default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nENGINE = AggregatingMergeTree\nPRIMARY KEY month\nORDER BY month\nSETTINGS index_granularity = 8192
CREATE MATERIALIZED VIEW default.uk_prices_aggs_view TO default.uk_prices_aggs_dest\n(\n    `month` Date,\n    `min_price` SimpleAggregateFunction(min, UInt32),\n    `max_price` SimpleAggregateFunction(max, UInt32),\n    `volume` AggregateFunction(count, UInt32),\n    `avg_price` AggregateFunction(avg, UInt32)\n)\nAS WITH toStartOfMonth(date) AS month\nSELECT\n    month,\n    minSimpleState(price) AS min_price,\n    maxSimpleState(price) AS max_price,\n    countState(price) AS volume,\n    avgState(price) AS avg_price\nFROM default.uk_price_paid\nGROUP BY month
CREATE DICTIONARY default.uk_mortgage_rates_dict\n(\n    `date` DateTime64,\n    `variable` Decimal32(2),\n    `fixed` Decimal32(2),\n    `bank` Decimal32(2)\n)\nPRIMARY KEY date\nSOURCE(CLICKHOUSE(TABLE \'uk_mortgage_rates\'))\nLIFETIME(MIN 0 MAX 2628000000)\nLAYOUT(COMPLEX_KEY_HASHED())
