<?xml version="1.0" encoding="utf-8"?>

<clickhouse>
    <logger>
        <level>test</level>
    </logger>

    <storage_configuration>
        <disks>
            <s3>
                <type>s3</type>
                <endpoint>http://minio1:9001/root/old-style-prefix/with-several-section/</endpoint>
                <access_key_id>minio</access_key_id>
                <secret_access_key>minio123</secret_access_key>
            </s3>
            <s3_plain>
                <type>s3_plain</type>
                <endpoint>http://minio1:9001/root/data/s3_pain_key_prefix</endpoint>
                <access_key_id>minio</access_key_id>
                <secret_access_key>minio123</secret_access_key>
                <s3_allow_native_copy>true</s3_allow_native_copy>
            </s3_plain>
            <s3_template_key>
                <type>s3</type>
                <endpoint>http://minio1:9001/root/</endpoint>
                <access_key_id>minio</access_key_id>
                <secret_access_key>minio123</secret_access_key>
                <key_compatibility_prefix>old-style-prefix/with-several-section</key_compatibility_prefix>
                <key_template>[a-z]{3}-first-random-part/new-style-prefix/constant-part/[a-z]{3}/[a-z]{29}</key_template>
            </s3_template_key>
        </disks>

        <policies>
            <s3>
                <volumes>
                    <main>
                        <disk>s3</disk>
                    </main>
                </volumes>
            </s3>
            <s3_plain>
                <volumes>
                    <main>
                        <disk>s3_plain</disk>
                    </main>
                </volumes>
            </s3_plain>
            <s3_template_key>
                <volumes>
                    <main>
                        <disk>s3_template_key</disk>
                    </main>
                </volumes>
            </s3_template_key>
        </policies>
    </storage_configuration>

    <merge_tree>
        <storage_policy>s3</storage_policy>
    </merge_tree>
</clickhouse>
