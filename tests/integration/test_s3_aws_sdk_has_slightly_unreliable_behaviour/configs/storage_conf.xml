<clickhouse>
    <logger>
        <level>test</level>
    </logger>

    <storage_configuration>
        <disks>
            <s3>
                <type>s3</type>
                <!-- Use custom S3 endpoint -->
                <endpoint>http://resolver:8080/root/data/</endpoint>
                <access_key_id>minio</access_key_id>
                <secret_access_key>ClickHouse_Minio_P@ssw0rd</secret_access_key>
                <!-- ClickHouse starts earlier than custom S3 endpoint. Skip access check to avoid fail on start-up -->
                <skip_access_check>true</skip_access_check>
                <!-- Avoid extra retries to speed up tests -->
                <!-- never set retry_attempts to 0, as it disables retries on all errors including sporadic timeouts -->
                <retry_attempts>2</retry_attempts>
                <skip_access_check>true</skip_access_check>
            </s3>
        </disks>

        <policies>
            <s3>
                <volumes>
                    <main>
                        <disk>s3</disk>
                    </main>
                </volumes>
            </s3>
        </policies>
    </storage_configuration>
    <merge_tree>
        <storage_policy>s3</storage_policy>
    </merge_tree>
</clickhouse>
