<clickhouse>
    <storage_configuration>
        <disks>
            <s3>
                <type>s3</type>
                <endpoint>http://minio1:9001/root/data/</endpoint>
                <access_key_id>minio</access_key_id>
                <secret_access_key>ClickHouse_Minio_P@ssw0rd</secret_access_key>
            </s3>
            <cache_s3>
                <type>cache</type>
                <disk>s3</disk>
                <max_size>100000000</max_size>
                <path>./cache_s3/</path>
                <cache_on_write_operations>1</cache_on_write_operations>
            </cache_s3>
        </disks>
        <policies>
            <s3>
                <volumes>
                    <main>
                        <disk>cache_s3</disk>
                    </main>
                </volumes>
            </s3>
        </policies>
    </storage_configuration>

    <merge_tree>
        <min_bytes_for_wide_part>0</min_bytes_for_wide_part>
        <allow_remote_fs_zero_copy_replication>true</allow_remote_fs_zero_copy_replication>
        <ratio_of_defaults_for_sparse_serialization>1.0</ratio_of_defaults_for_sparse_serialization>
    </merge_tree>

    <remote_servers>
        <cluster>
            <shard>
                <replica>
                    <host>node1</host>
                    <port>9000</port>
                </replica>
                <replica>
                    <host>node2</host>
                    <port>9000</port>
                </replica>
                <replica>
                    <host>node3</host>
                    <port>9000</port>
                </replica>
            </shard>
        </cluster>
    </remote_servers>

    <macros>
        <shard>0</shard>
    </macros>

    <database_atomic_delay_before_drop_table_sec>3</database_atomic_delay_before_drop_table_sec>
    <database_atomic_drop_error_cooldown_sec>0</database_atomic_drop_error_cooldown_sec>
</clickhouse>
