<clickhouse>
    <!-- Test depends on timezone -->
    <timezone>Asia/Istanbul</timezone>
    <!-- retention scheme for GraphiteMergeTree engine-->
    <graphite_rollup>
        <path_column_name>metric</path_column_name>
        <time_column_name>timestamp</time_column_name>
        <value_column_name>value</value_column_name>
        <version_column_name>updated</version_column_name>
        <pattern>
            <rule_type>plain</rule_type>
            <regexp>\.count$</regexp>
            <function>sum</function>
        </pattern>
        <pattern>
            <rule_type>plain</rule_type>
            <regexp>\.max$</regexp>
            <function>max</function>
        </pattern>
        <pattern>
            <rule_type>plain</rule_type>
            <regexp>^five_min\.</regexp>
            <retention>
                <age>0</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>5184000</age>
                <precision>3600</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>14400</precision>
            </retention>
        </pattern>
        <pattern>
            <rule_type>plain</rule_type>
            <regexp>^one_min</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </pattern>
        <pattern>
            <rule_type>tagged</rule_type>
            <regexp><![CDATA[[\?&]retention=one_min(&.*)?$]]></regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </pattern>
        <pattern>
            <rule_type>tag_list</rule_type>
            <regexp>retention=five_min</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>5184000</age>
                <precision>3600</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>14400</precision>
            </retention>
        </pattern>
        <pattern>
            <rule_type>tagged</rule_type>
            <regexp>^for_taggged</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </pattern>
        <pattern>
            <rule_type>all</rule_type>
            <regexp>^ten_min\.</regexp>
            <function>sum</function>
            <retention>
                <age>0</age>
                <precision>600</precision>
            </retention>
            <retention>
                <age>5184000</age>
                <precision>7200</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>28800</precision>
            </retention>
        </pattern>        
    </graphite_rollup>
</clickhouse>
