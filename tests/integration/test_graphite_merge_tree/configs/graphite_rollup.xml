<clickhouse>
    <!-- Test depends on timezone -->
    <timezone>Asia/Istanbul</timezone>
    <!-- retention scheme for GraphiteMergeTree engine-->
    <graphite_rollup>
        <path_column_name>metric</path_column_name>
        <time_column_name>timestamp</time_column_name>
        <value_column_name>value</value_column_name>
        <version_column_name>updated</version_column_name>
        <pattern>
            <regexp>\.count$</regexp>
            <function>sum</function>
        </pattern>
        <pattern>
            <regexp>\.max$</regexp>
            <function>max</function>
        </pattern>
        <pattern>
          <regexp>^five_min\.</regexp>
          <retention>
              <age>0</age>
              <precision>300</precision>
          </retention>
          <retention>
              <age>5184000</age>
              <precision>3600</precision>
          </retention>
          <retention>
              <age>31536000</age>
              <precision>14400</precision>
          </retention>
        </pattern>
        <pattern>
            <regexp>^one_min</regexp>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </pattern>
    </graphite_rollup>
    <graphite_rollup_with_default>
        <path_column_name>metric</path_column_name>
        <time_column_name>timestamp</time_column_name>
        <value_column_name>value</value_column_name>
        <version_column_name>updated</version_column_name>
        <pattern>
            <regexp>\.count$</regexp>
            <function>sum</function>
        </pattern>
        <pattern>
            <regexp>\.max$</regexp>
            <function>max</function>
        </pattern>
        <default>
            <function>any</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </default>
    </graphite_rollup_with_default>
    <graphite_rollup_broken>
        <path_column_name>metric</path_column_name>
        <time_column_name>timestamp</time_column_name>
        <value_column_name>value</value_column_name>
        <version_column_name>updated</version_column_name>
        <default>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>7776000</age>
                <precision>300</precision>
            </retention>
            <retention>
                <age>31536000</age>
                <precision>600</precision>
            </retention>
        </default>
    </graphite_rollup_broken>
    <graphite_rollup_wrong_age_precision>
        <path_column_name>metric</path_column_name>
        <time_column_name>timestamp</time_column_name>
        <value_column_name>value</value_column_name>
        <version_column_name>updated</version_column_name>
        <default>
            <function>avg</function>
            <retention>
                <age>0</age>
                <precision>60</precision>
            </retention>
            <retention>
                <age>36000</age>
                <precision>600</precision>
            </retention>
            <retention>
                <age>72000</age>
                <precision>300</precision>
            </retention>
        </default>
    </graphite_rollup_wrong_age_precision>
</clickhouse>
