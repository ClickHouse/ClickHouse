services:
  gcs:
    image: fsouza/fake-gcs-server:latest
    command:
      - -scheme
      - http
      - -port
      - "4443"
      - -public-host
      - gcs
    ports:
      - 4443:4443
    healthcheck:
      test: ["CMD-SHELL", "wget -qO- http://localhost:4443/storage/v1/b >/dev/null 2>&1"]
      interval: 1s
      timeout: 1s
      retries: 10

volumes:
  gcs-data:
