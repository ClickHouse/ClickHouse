<clickhouse>
    <!-- Reduce number of threads to avoid possible OOM under ASan

         NOTE: there will be still lots of threads since TCPHandler uses it's own
         pool, so there will be at least 2x more.
    -->
    <background_distributed_schedule_pool_size>1</background_distributed_schedule_pool_size>
    <background_pool_size>1</background_pool_size>
    <background_move_pool_size>1</background_move_pool_size>
    <background_fetches_pool_size>1</background_fetches_pool_size>
    <background_buffer_flush_schedule_pool_size>1</background_buffer_flush_schedule_pool_size>
    <background_schedule_pool_size>1</background_schedule_pool_size>
    <background_merges_mutations_concurrency_ratio>1</background_merges_mutations_concurrency_ratio>
    <merge_tree>
        <number_of_free_entries_in_pool_to_lower_max_size_of_merge>1</number_of_free_entries_in_pool_to_lower_max_size_of_merge>
        <number_of_free_entries_in_pool_to_execute_mutation>1</number_of_free_entries_in_pool_to_execute_mutation>
    </merge_tree>
    <max_thread_pool_size>200</max_thread_pool_size>
    <max_concurrent_queries>200</max_concurrent_queries>

    <query_masking_rules remove="remove"/>
    <query_thread_log remove="remove"/>
    <query_log remove="remove" />
    <query_views_log remove="remove" />
    <metric_log remove="remove"/>
    <text_log remove="remove"/>
    <trace_log remove="remove"/>
    <asynchronous_metric_log remove="remove" />
    <session_log remove="remove" />
    <part_log remove="remove" />
    <crash_log remove="remove" />
    <opentelemetry_span_log remove="remove" />
    <zookeeper_log remove="remove" />
    <transactions_info_log remove="remove" />

    <remote_servers>
        <one_shard>
            <shard>
                <internal_replication>true</internal_replication>
                <replica>
                    <host>node1_r1</host>
                    <port>9000</port>
                </replica>
                <replica>
                    <host>node1_r2</host>
                    <port>9000</port>
                </replica>
            </shard>
        </one_shard>
        <two_shards>
            <shard>
                <internal_replication>true</internal_replication>
                <replica>
                    <host>node1_r1</host>
                    <port>9000</port>
                </replica>
                <replica>
                    <host>node1_r2</host>
                    <port>9000</port>
                </replica>
            </shard>
            <shard>
                <replica>
                    <host>node2_r1</host>
                    <port>9000</port>
                </replica>
                <replica>
                    <host>node2_r2</host>
                    <port>9000</port>
                </replica>
            </shard>
        </two_shards>
    </remote_servers>
</clickhouse>
