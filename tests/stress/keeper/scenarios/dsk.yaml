version: 1
defaults:
  duration: 120
  topology: 3
scenarios:
  - id: DSK-01
    name: Tiered latest_* disks
    topology: 3
    workload: { config: workloads/prod_mix.yaml, duration: 180 }
    gates:
      - { type: single_leader }
    requires: [minio]

  - id: DSK-02
    name: "old_* â†’ new migration"
    topology: 3
    workload: { config: workloads/prod_mix.yaml, duration: 180 }
    gates:
      - { type: single_leader }
    requires: [minio]

  - id: DSK-03
    name: Log caches thresholds respected
    topology: 3
    workload: { config: workloads/prod_mix.yaml, duration: 120 }
    gates:
      - { type: single_leader }

  - id: DSK-04
    name: S3/tiered move failures
    topology: 3
    workload: { config: workloads/prod_mix.yaml, duration: 180 }
    faults:
      - { kind: netem, on: all, delay_ms: 500, loss_pct: 5, duration_s: 120 }
    gates:
      - { type: single_leader }
    requires: [minio]
