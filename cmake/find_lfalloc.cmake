if (ENABLE_LFALLOC)
    if (NOT EXISTS "${ClickHouse_SOURCE_DIR}/contrib/lfalloc/src/lf_allocX64.h")
        message (FATAL_ERROR "submodule contrib/lfalloc is missing. to fix try run: \n git submodule update --init --recursive")
    endif()
    if (ENABLE_JEMALLOC OR ENABLE_TCMALLOC)
        message (FATAL_ERROR "ENABLE_LFALLOC and (ENABLE_JEMALLOC or ENABLE_TCMALLOC) are set to true, leave only one")
    endif ()
    set (USE_LFALLOC 1)
    set (LFALLOC_LIBRARIES "lfalloc")
    if (SANITIZE OR ARCH_ARM OR ARCH_32 OR ARCH_PPC64LE)
        message (FATAL_ERROR "lfalloc cannot be used with sanitizers or other platforms than X86_64")
    endif ()
endif ()
