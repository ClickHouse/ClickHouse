There is no handle /files

Use / or /ping for health checks.
Or /replicas_status for more sophisticated health checks.

Send queries from your program with POST method or GET /?query=...

Use clickhouse-client:

For interactive data analysis:
    clickhouse-client

For batch query processing:
    clickhouse-client --query='SELECT 1' > result
    clickhouse-client < query > result
