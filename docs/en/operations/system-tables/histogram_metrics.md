---
description: 'This table contains histogram metrics that can be calculated instantly
  and exported in the Prometheus format. It is always up to date.'
keywords: ['system table', 'histogram_metrics']
slug: /operations/system-tables/histogram_metrics
title: 'system.histogram_metrics'
doc_type: 'reference'
---

import SystemTableCloud from '@site/docs/_snippets/_system_table_cloud.md';

# histogram_metrics {#histogram_metrics}

<SystemTableCloud/>

This table contains histogram metrics that can be calculated instantly and exported in the Prometheus format. It is always up to date. Replaces the deprecated `system.latency_log`.

Columns:

<!--AUTOGENERATED_START-->
<!--AUTOGENERATED_END-->

**Example**

You can use a query like this to export all the histogram metrics in the Prometheus format.
```sql
SELECT
  metric AS name,
  toFloat64(value) AS value,
  description AS help,
  labels,
  'histogram' AS type
FROM system.histogram_metrics
FORMAT Prometheus
```

## Metric descriptions {#metric_descriptions}

### keeper_response_time_ms_bucket {#keeper_response_time_ms_bucket}
The response time of Keeper, in milliseconds.

### keeper_client_queue_duration_milliseconds_bucket {#keeper_client_queue_duration_milliseconds_bucket}
Time requests spend waiting to be enqueued and waiting in the queue before being processed by the Keeper client, in milliseconds.

### keeper_receive_request_time_milliseconds_bucket {#keeper_receive_request_time_milliseconds_bucket}
Time to receive and parse a request from the client in the Keeper TCP handler, in milliseconds.

### keeper_dispatcher_requests_queue_time_milliseconds_bucket {#keeper_dispatcher_requests_queue_time_milliseconds_bucket}
Time a request spends in the Keeper dispatcher requests queue, in milliseconds.

### keeper_write_pre_commit_time_milliseconds_bucket {#keeper_write_pre_commit_time_milliseconds_bucket}
Time to preprocess a write request before Raft commit, in milliseconds.

### keeper_write_commit_time_milliseconds_bucket {#keeper_write_commit_time_milliseconds_bucket}
Time to process a write request after Raft commit, in milliseconds.

### keeper_dispatcher_responses_queue_time_milliseconds_bucket {#keeper_dispatcher_responses_queue_time_milliseconds_bucket}
Time a response spends in the Keeper dispatcher responses queue, in milliseconds.

### keeper_send_response_time_milliseconds_bucket {#keeper_send_response_time_milliseconds_bucket}
Time to send a response to the client in the Keeper TCP handler (includes queueing and writing to socket), in milliseconds.

### keeper_read_wait_for_write_time_milliseconds_bucket {#keeper_read_wait_for_write_time_milliseconds_bucket}
Time a read request waits for the write request it depends on to complete, in milliseconds.

### keeper_read_process_time_milliseconds_bucket {#keeper_read_process_time_milliseconds_bucket}
Time to process a read request in Keeper, in milliseconds.

### keeper_batch_size_elements_bucket {#keeper_batch_size_elements_bucket}
Batch size sent to Raft, in elements.

### keeper_batch_size_bytes_bucket {#keeper_batch_size_bytes_bucket}
Batch size sent to Raft, in bytes.

**See Also**
- [system.asynchronous_metrics](/operations/system-tables/asynchronous_metrics) — Contains periodically calculated metrics.
- [system.events](/operations/system-tables/events) — Contains a number of events that occurred.
- [system.metric_log](/operations/system-tables/metric_log) — Contains a history of metrics values from tables `system.metrics` and `system.events`.
- [Monitoring](../../operations/monitoring.md) — Base concepts of ClickHouse monitoring.
