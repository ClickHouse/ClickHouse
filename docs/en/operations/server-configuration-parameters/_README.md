# Autogenerated server settings

`settings.md` for global server settings is autogenerated from the script 
on [docs repo](https://github.com/ClickHouse/clickhouse-docs/blob/main/scripts/settings/autogenerate-settings.sh)

This file is unique in that not all global configuration settings can be found
in `system.server_settings`.

For the normal and session settings, corresponding files `Core/Settings.cpp` and
`Core/FormatFactorySettings.h` contain all relevant settings. As a result, system
table `system.settings` shows all normal settings and format settings.
The same is not true for `ServerSettings.cpp`, i.e. there are server settings 
outside that file. For example the query cache settings. They are documented 
publicly but they are not part of `ServerSettings.cpp` or 
`system.server_settings`. The main reason for this is that server settings can 
be nested, e.g. for query_cache settings you could have this XML documentation:

```yaml
<query_cache>
    <max_size_in_bytes>1073741824</max_size_in_bytes>
    <max_entries>1024</max_entries>
    <max_entry_size_in_bytes>1048576</max_entry_size_in_bytes>
    <max_entry_size_in_rows>30000000</max_entry_size_in_rows>
</query_cache>
```

ClickHouse ships with a template configuration file ([here](https://github.com/ClickHouse/ClickHouse/blob/master/programs/server/config.xml)) ... as you can see, the _majority_ of server settings is nested. (Note that even the template configuration file contains only a subset of all server settings).

There is no principal reason why the nesting itself could not be represented in 
`ServerSettings.cpp`. The reason it is not done is that nesting can come with 
additional constraints, depending on the setting. E.g. in the query cache example
above, each sub-tag (e.g. `<max_size_in_bytes>`) may occur at most once below
`<query_cache>`. Such constraints can be different for other nested structures,
for example, the logging configuration may contain this XML:

```xml
<levels>
    <logger>
        <name>ContextAccess (default)</name>
        <level>none</level>
    </logger>
    <logger>
        <name>DatabaseOrdinary (test)</name>
        <level>none</level>
    </logger>
    [...]
</levels>
```

Note how `<logger>` occurs arbitrarily many times below `<levels>`. Such 
constraints are too complex to express in ServerSettings.cpp

## Auto-generation of global server settings

As a result of the above, you will find the server settings which are not found
in `system.server_settings` documented in file `_server_settings_outside_source.md`

The auto-generation script reads these in, combines them with the ones from
`system.settings` and appends the formatted settings to `settings.md`.

As such, if you need to make a change to the settings you see on the [server settings](clickhouse.com/docs/operations/server-configuration-parameters/)
page, you will need to check if the setting is in `system.server_settings`. If 
it is, then please edit the setting description in the source code documentation
in [`ServerSettings.cpp`](https://github.com/ClickHouse/ClickHouse/blob/master/src/Core/ServerSettings.cpp)
or else edit `_server_settings_outside_source.md`.
