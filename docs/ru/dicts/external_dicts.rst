.. _dicts-external_dicts:

***************
Внешние словари
***************

Существует возможность подключать собственные словари из различных источников данных. Источником данных для словаря может быть локальный текстовый/исполняемый файл, HTTP(s) ресурс или другая СУБД. Подробнее смотрите в разделе ":ref:`dicts-external_dicts_dict_sources`".

ClickHouse:

 * Полностью или частично хранит словари в оперативной памяти.
 * Периодически обновляет их и динамически подгружает отсутствующие значения. Т.е. словари можно подгружать динамически.

Конфигурация внешних словарей находится в одном или нескольких файлах. Путь к конфигурации указывается в параметре :ref:`server_settings-dictionaries_config`.

Словари могут загружаться при старте сервера или при первом использовании, в зависимости от настройки :ref:`server_settings-dictionaries_lazy_load`.

Конфигурационный файл словарей имеет вид:

.. code-block:: xml

  <yandex>
      <comment>Необязательный элемент с любым содержимым. Игнорируется сервером ClickHouse.</comment>

      <!-- Необязательный элемент, файл с подстановками -->
      <include_from>/etc/metrika.xml</include_from>
      
      <dictionary>
          <!-- Конфигурация словаря -->
      </dictionary>

      ...

      <dictionary>
          <!-- Конфигурация словаря -->
      </dictionary>
  </yandex>

В одном файле можно :ref:`сконфигурировать <dicts-external_dicts_dict>` произвольное количество словарей. Формат файла сохраняется даже если словарь один (т.е. ``<yandex><dictionary> <!--configuration--> </dictionary></yandex>``).

Смотрите также ":ref:`ext_dict_functions`" .

.. attention:: Вы можете преобразовывать значения по небольшому словарю, описав его в запросе ``SELECT`` (см. функцию ":ref:`other_functions-transform`"). Эта функциональность не связана с внешними словарями.

.. toctree::
    :glob:
   
    external_dicts_dict*
