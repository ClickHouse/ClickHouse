.. _dicts-external_dicts_dict_lifetime:

*******************
Обновление словарей
*******************

ClickHouse периодически обновляет словари. Интервал обновления для полностью загружаемых словарей и интервал инвалидации для кэшируемых словарей определяется в теге ``<lifetime>`` в секундах.

Обновление словарей (кроме загрузки при первом использовании) не блокирует запросы, во время обновления используется старая версия словаря. Если при обновлении возникнет ошибка, то ошибка пишется в лог сервера, а запросы продолжат использовать старую версию словарей.

Пример настройки:

.. code-block:: xml

  <dictionary>
      ...
      <lifetime>300</lifetime>
      ...
  </dictionary>


Настройка ``<lifetime>0</lifetime>`` запрещает обновление словарей.


Можно задать интервал, внутри которого ClickHouse равномерно-случайно выберет время для обновления. Это необходимо для распределения нагрузки на источник словаря при обновлении на большом количестве серверов.

Пример настройки:

.. code-block:: xml

  <dictionary>
      ...
      <lifetime>
          <min>300</min>
          <max>360</max>
      </lifetime>
      ...
  </dictionary>
