---
toc_priority: 46
toc_title: Working with maps
---

# Функции для работы с контейнерами map {#functions-for-working-with-tuple-maps}

## mapAdd(Tuple(Array, Array), Tuple(Array, Array) [, ...]) {#function-mapadd}

Собирает все ключи и суммирует соответствующие значения.

Аргументы представляют собой контейнеры двух массивов, где элементы в первом массиве - это ключи, а второй массив содержит значения для каждого ключа.
Все массивы ключей должны иметь один и тот же тип, а все массивы значений должны содержать элементы, которые можно приводить к одному типу (Int64, UInt64 или Float64).
Общий приведенный тип используется в качестве типа для результирующего массива.

Возвращает один контейнер, где первый массив содержит отсортированные ключи, а второй массив содержит значения.

```sql
SELECT mapAdd(([toUInt8(1), 2], [1, 1]), ([toUInt8(1), 2], [1, 1])) as res, toTypeName(res) as type;
```

```text
┌─res───────────┬─type───────────────────────────────┐
│ ([1,2],[2,2]) │ Tuple(Array(UInt8), Array(UInt64)) │
└───────────────┴────────────────────────────────────┘
```

## mapSubtract(Tuple(Array, Array), Tuple(Array, Array) [, ...]) {#function-mapsubtract}

Собирает все ключи и вычитает соответствующие значения.

Аргументы представляют собой контейнеры двух массивов, где элементы в первом массиве - это ключи, а второй массив содержит значения для каждого ключа.
Все массивы ключей должны иметь один и тот же тип, а все массивы значений должны содержать элементы, которые можно приводить к одному типу (Int64, UInt64 или Float64).
Общий приведенный тип используется в качестве типа для результирующего массива.

Возвращает один контейнер, где первый массив содержит отсортированные ключи, а второй массив содержит значения.

```sql
SELECT mapSubtract(([toUInt8(1), 2], [toInt32(1), 1]), ([toUInt8(1), 2], [toInt32(2), 1])) as res, toTypeName(res) as type;
```

```text
┌─res────────────┬─type──────────────────────────────┐
│ ([1,2],[-1,0]) │ Tuple(Array(UInt8), Array(Int64)) │
└────────────────┴───────────────────────────────────┘
```

## mapPopulateSeries {#function-mappopulateseries}

Синтаксис: 
`mapPopulateSeries((keys : Array(<IntegerType>), values : Array(<IntegerType>)[, max : <IntegerType>])`

Генерирует контейнер map, где ключи-это серия чисел, от минимальных до максимальных ключей (или аргумент `max`, если он указан), взятых из массива `keys` с размером шага один, и соответствующие значения, взятые из массива `values`. Если значение не указано для ключа, то в результирующем map используется значение по умолчанию.
Для повторяющихся ключей только первое значение (в порядке появления) ассоциируется с ключом.

Количество элементов в `keys` и `values` должно быть одинаковым для каждой строки.

Возвращает контейнер из двух массивов: ключи в отсортированном порядке и значения соответствующих ключей.

```sql
select mapPopulateSeries([1,2,4], [11,22,44], 5) as res, toTypeName(res) as type;
```

```text
┌─res──────────────────────────┬─type──────────────────────────────┐
│ ([1,2,3,4,5],[11,22,0,44,0]) │ Tuple(Array(UInt8), Array(UInt8)) │
└──────────────────────────────┴───────────────────────────────────┘
```
