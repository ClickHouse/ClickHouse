



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-0.17.3, mkdocs-material-2.2.1">
    
    
      
        <title>How to write  C++ code - ClickHouse Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.ac64251e.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/custom.css">
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="white" data-md-color-accent="white">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">

  <!-- Yandex.Metrika counter -->
  <script type="text/javascript">
      (function (d, w, c) {
          (w[c] = w[c] || []).push(function() {
              try {
                  w.yaCounter18343495 = new Ya.Metrika2({
                      id:18343495,
                      clickmap:true,
                      trackLinks:true,
                      accurateTrackBounce:true,
                      webvisor: true
                  });
              } catch(e) { }
          });
          var n = d.getElementsByTagName("script")[0],
              s = d.createElement("script"),
              f = function () { n.parentNode.insertBefore(s, n); };
          s.type = "text/javascript";
          s.async = true;
          s.src = "https://mc.yandex.ru/metrika/tag.js";
          if (w.opera == "[object Opera]") {
              d.addEventListener("DOMContentLoaded", f, false);
          } else { f(); }
      })(document, window, "yandex_metrika_callbacks2");
  </script>
  <noscript>
      <div><img src="https://mc.yandex.ru/watch/18343495" style="position:absolute; left:-9999px;" alt=""/></div>
  </noscript>
  <!-- /Yandex.Metrika counter -->

  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="/" title="ClickHouse Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.svg" width="40" height="40">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ClickHouse Documentation
              </span>
              <span class="md-header-nav__topic">
                How to write  C++ code
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            <script type="text/javascript">
                if (window.location.pathname.indexOf('/ru/') >= 0) {
                  url = window.location.pathname.replace('/ru/', '/en/');
                  text = "<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"30\" viewBox=\"0,0 25,15\" style=\"border:1px solid #eee;margin: .8rem 0 0 -1.25rem;\">\n" +
                      "<rect width=\"25\" height=\"15\" fill=\"#00247d\"></rect>\n" +
                      "<path d=\"M 0,0 L 25,15 M 25,0 L 0,15\" stroke=\"#fff\" stroke-width=\"3\"></path>\n" +
                      "<path d=\"M 12.5,0 V 15 M 0,7.5 H 25\" stroke=\"#fff\" stroke-width=\"5\"></path>\n" +
                      "<path d=\"M 12.5,0 V 15 M 0,7.5 H 25\" stroke=\"#cf142b\" stroke-width=\"3\"></path>\n" +
                      "</svg>";
                  title = "Switch to English"
                }else{
                  url = window.location.pathname.replace('/en/', '/ru/');
                  text = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 10 6\" width=\"50\" height=\"30\" style=\"border: 1px solid #eee;margin: .8rem 0 0 -1.25rem\">\n" +
                      "<rect fill=\"#fff\" width=\"10\" height=\"3\"></rect>\n" +
                      "<rect fill=\"#d52b1e\" y=\"3\" width=\"10\" height=\"3\"></rect>\n" +
                      "<rect fill=\"#0039a6\" y=\"2\" width=\"10\" height=\"2\"></rect>\n" +
                      "</svg>";
                  title = "Переключить на русский язык"
               }
               document.write('<a href="' + url + '" title="' + title + '" class="md-flex__ellipsis md-header-nav__title">' + text + '</a>')
             </script>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    ClickHouse Documentation
  </label>

  <ul class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item md-nav__item--active">
      <script type="text/javascript">
        if (window.location.pathname.indexOf('/ru/') >= 0) {
          if (window.location.pathname.indexOf('/single/') >= 0) {
            document.write("<a href=\"../../../\" class=\"md-nav__link md-nav__link--active\">Многостраничная версия</a>")
          } else {
            document.write("<a href=\"../../single/\" class=\"md-nav__link md-nav__link--active\">Одностраничная версия</a>")
          }
        }else{
          if (window.location.pathname.indexOf('/single/') >= 0) {
            document.write("<a href=\"../../../\" class=\"md-nav__link md-nav__link--active\">Multi page version</a>")
          }else{
            document.write("<a href=\"../../single/\" class=\"md-nav__link md-nav__link--active\">Single page version</a>")
          }
        }
     </script>
    </li>
    <li class="md-nav__item md-nav__item--active">
      <a href="https://github.com/yandex/ClickHouse/" rel="external nofollow" target="_blank" class="md-nav__link">
        <script type="text/javascript">
        if (window.location.pathname.indexOf('/ru/') >= 0) {
          document.write('Исходники ClickHouse');
        } else {
          document.write('ClickHouse sources');
        }
     </script>
      </a>
    </li>
  </ul>

  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="ClickHouse" class="md-nav__link">
      ClickHouse
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Introduction
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Introduction
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/distinctive_features/" title="Distinctive features of ClickHouse" class="md-nav__link">
      Distinctive features of ClickHouse
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/features_considered_disadvantages/" title="ClickHouse features that can be considered disadvantages" class="md-nav__link">
      ClickHouse features that can be considered disadvantages
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/ya_metrika_task/" title="The Yandex.Metrica task" class="md-nav__link">
      The Yandex.Metrica task
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/possible_silly_questions/" title="Everything you were afraid to ask" class="md-nav__link">
      Everything you were afraid to ask
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/performance/" title="Performance" class="md-nav__link">
      Performance
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/" title="Deploying and running" class="md-nav__link">
      Deploying and running
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Testing data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        Testing data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/ontime/" title="OnTime" class="md-nav__link">
      OnTime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/nyc_taxi/" title="New York Taxi data" class="md-nav__link">
      New York Taxi data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/amplab_benchmark/" title="AMPLab Big Data Benchmark" class="md-nav__link">
      AMPLab Big Data Benchmark
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/wikistat/" title="WikiStat" class="md-nav__link">
      WikiStat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/criteo/" title="Terabyte click logs from Criteo" class="md-nav__link">
      Terabyte click logs from Criteo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../getting_started/example_datasets/star_schema/" title="Star Schema Benchmark" class="md-nav__link">
      Star Schema Benchmark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/" title="Command-line client" class="md-nav__link">
      Command-line client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/http_interface/" title="HTTP interface" class="md-nav__link">
      HTTP interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/jdbc/" title="JDBC driver" class="md-nav__link">
      JDBC driver
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/tcp/" title="Native interface (TCP)" class="md-nav__link">
      Native interface (TCP)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/third-party_client_libraries/" title="Libraries from third-party developers" class="md-nav__link">
      Libraries from third-party developers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/third-party_gui/" title="Visual interfaces from third-party developers" class="md-nav__link">
      Visual interfaces from third-party developers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Query language
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Query language
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../query_language/queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../query_language/syntax/" title="Syntax" class="md-nav__link">
      Syntax
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Table engines
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Table engines
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/tinylog/" title="TinyLog" class="md-nav__link">
      TinyLog
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/log/" title="Log" class="md-nav__link">
      Log
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/memory/" title="Memory" class="md-nav__link">
      Memory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/mergetree/" title="MergeTree" class="md-nav__link">
      MergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/custom_partitioning_key/" title="Custom partitioning key" class="md-nav__link">
      Custom partitioning key
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/replacingmergetree/" title="ReplacingMergeTree" class="md-nav__link">
      ReplacingMergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/summingmergetree/" title="SummingMergeTree" class="md-nav__link">
      SummingMergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/aggregatingmergetree/" title="AggregatingMergeTree" class="md-nav__link">
      AggregatingMergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/collapsingmergetree/" title="CollapsingMergeTree" class="md-nav__link">
      CollapsingMergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/graphitemergetree/" title="GraphiteMergeTree" class="md-nav__link">
      GraphiteMergeTree
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/replication/" title="Data replication" class="md-nav__link">
      Data replication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/distributed/" title="Distributed" class="md-nav__link">
      Distributed
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/dictionary/" title="Dictionary" class="md-nav__link">
      Dictionary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/merge/" title="Merge" class="md-nav__link">
      Merge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/buffer/" title="Buffer" class="md-nav__link">
      Buffer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/file/" title="File" class="md-nav__link">
      File
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/join/" title="Join" class="md-nav__link">
      Join
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/view/" title="View" class="md-nav__link">
      View
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/materializedview/" title="MaterializedView" class="md-nav__link">
      MaterializedView
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/kafka/" title="Kafka" class="md-nav__link">
      Kafka
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/mysql/" title="MySQL" class="md-nav__link">
      MySQL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_engines/external_data/" title="External data for query processing" class="md-nav__link">
      External data for query processing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      System tables
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        System tables
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.one/" title="system.one" class="md-nav__link">
      system.one
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.numbers/" title="system.numbers" class="md-nav__link">
      system.numbers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.numbers_mt/" title="system.numbers_mt" class="md-nav__link">
      system.numbers_mt
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.databases/" title="system.databases" class="md-nav__link">
      system.databases
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.tables/" title="system.tables" class="md-nav__link">
      system.tables
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.columns/" title="system.columns" class="md-nav__link">
      system.columns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.parts/" title="system.parts" class="md-nav__link">
      system.parts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.processes/" title="system.processes" class="md-nav__link">
      system.processes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.merges/" title="system.merges" class="md-nav__link">
      system.merges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.events/" title="system.events" class="md-nav__link">
      system.events
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.metrics/" title="system.metrics" class="md-nav__link">
      system.metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.asynchronous_metrics/" title="system.asynchronous_metrics" class="md-nav__link">
      system.asynchronous_metrics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.replicas/" title="system.replicas" class="md-nav__link">
      system.replicas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.dictionaries/" title="system.dictionaries" class="md-nav__link">
      system.dictionaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.clusters/" title="system.clusters" class="md-nav__link">
      system.clusters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.functions/" title="system.functions" class="md-nav__link">
      system.functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.settings/" title="system.settings" class="md-nav__link">
      system.settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../system_tables/system.zookeeper/" title="system.zookeeper" class="md-nav__link">
      system.zookeeper
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Table functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Table functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_functions/remote/" title="remote" class="md-nav__link">
      remote
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_functions/merge/" title="merge" class="md-nav__link">
      merge
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../table_functions/numbers/" title="numbers" class="md-nav__link">
      numbers
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Formats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Formats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/tabseparated/" title="TabSeparated" class="md-nav__link">
      TabSeparated
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/tabseparatedraw/" title="TabSeparatedRaw" class="md-nav__link">
      TabSeparatedRaw
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/tabseparatedwithnames/" title="TabSeparatedWithNames" class="md-nav__link">
      TabSeparatedWithNames
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/tabseparatedwithnamesandtypes/" title="TabSeparatedWithNamesAndTypes" class="md-nav__link">
      TabSeparatedWithNamesAndTypes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/csv/" title="CSV" class="md-nav__link">
      CSV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/csvwithnames/" title="CSVWithNames" class="md-nav__link">
      CSVWithNames
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/values/" title="Values" class="md-nav__link">
      Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/vertical/" title="Vertical" class="md-nav__link">
      Vertical
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/verticalraw/" title="VerticalRaw" class="md-nav__link">
      VerticalRaw
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/json/" title="JSON" class="md-nav__link">
      JSON
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/jsoncompact/" title="JSONCompact" class="md-nav__link">
      JSONCompact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/jsoneachrow/" title="JSONEachRow" class="md-nav__link">
      JSONEachRow
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/tskv/" title="TSKV" class="md-nav__link">
      TSKV
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/pretty/" title="Pretty" class="md-nav__link">
      Pretty
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/prettycompact/" title="PrettyCompact" class="md-nav__link">
      PrettyCompact
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/prettycompactmonoblock/" title="PrettyCompactMonoBlock" class="md-nav__link">
      PrettyCompactMonoBlock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/prettynoescapes/" title="PrettyNoEscapes" class="md-nav__link">
      PrettyNoEscapes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/prettyspace/" title="PrettySpace" class="md-nav__link">
      PrettySpace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/rowbinary/" title="RowBinary" class="md-nav__link">
      RowBinary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/native/" title="Native" class="md-nav__link">
      Native
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/null/" title="Null" class="md-nav__link">
      Null
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/xml/" title="XML" class="md-nav__link">
      XML
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../formats/capnproto/" title="CapnProto" class="md-nav__link">
      CapnProto
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Data types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Data types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/int_uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="md-nav__link">
      UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/float/" title="Float32, Float64" class="md-nav__link">
      Float32, Float64
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/boolean/" title="Boolean values" class="md-nav__link">
      Boolean values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/string/" title="String" class="md-nav__link">
      String
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/fixedstring/" title="FixedString(N)" class="md-nav__link">
      FixedString(N)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/date/" title="Date" class="md-nav__link">
      Date
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/datetime/" title="DateTime" class="md-nav__link">
      DateTime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/enum/" title="Enum" class="md-nav__link">
      Enum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/array/" title="Array(T)" class="md-nav__link">
      Array(T)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/nested_data_structures/aggregatefunction/" title="AggregateFunction(name, types_of_arguments...)" class="md-nav__link">
      AggregateFunction(name, types_of_arguments...)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/tuple/" title="Tuple(T1, T2, ...)" class="md-nav__link">
      Tuple(T1, T2, ...)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-13" type="checkbox" id="nav-10-13">
    
    <label class="md-nav__link" for="nav-10-13">
      Nested data structures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-13">
        Nested data structures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/nested_data_structures/nested/" title="Nested(Name1 Type1, Name2 Type2, ...)" class="md-nav__link">
      Nested(Name1 Type1, Name2 Type2, ...)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10-14" type="checkbox" id="nav-10-14">
    
    <label class="md-nav__link" for="nav-10-14">
      Special data types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-10-14">
        Special data types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/special_data_types/expression/" title="Expression" class="md-nav__link">
      Expression
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../data_types/special_data_types/set/" title="Set" class="md-nav__link">
      Set
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../operators/" title="Operators" class="md-nav__link">
      Operators
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-12" type="checkbox" id="nav-12">
    
    <label class="md-nav__link" for="nav-12">
      Functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-12">
        Functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/arithmetic_functions/" title="Arithmetic functions" class="md-nav__link">
      Arithmetic functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/comparison_functions/" title="Comparison functions" class="md-nav__link">
      Comparison functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/logical_functions/" title="Logical functions" class="md-nav__link">
      Logical functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/type_conversion_functions/" title="Type conversion functions" class="md-nav__link">
      Type conversion functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/date_time_functions/" title="Functions for working with dates and times" class="md-nav__link">
      Functions for working with dates and times
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/string_functions/" title="Functions for working with strings" class="md-nav__link">
      Functions for working with strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/string_search_functions/" title="Functions for searching strings" class="md-nav__link">
      Functions for searching strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/string_replace_functions/" title="Functions for searching and replacing in strings" class="md-nav__link">
      Functions for searching and replacing in strings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/conditional_functions/" title="Conditional functions" class="md-nav__link">
      Conditional functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/math_functions/" title="Mathematical functions" class="md-nav__link">
      Mathematical functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/rounding_functions/" title="Rounding functions" class="md-nav__link">
      Rounding functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/array_functions/" title="Functions for working with arrays" class="md-nav__link">
      Functions for working with arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/splitting_merging_functions/" title="Functions for splitting and merging strings and arrays" class="md-nav__link">
      Functions for splitting and merging strings and arrays
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/bit_functions/" title="Bit functions" class="md-nav__link">
      Bit functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/hash_functions/" title="Hash functions" class="md-nav__link">
      Hash functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/random_functions/" title="Functions for generating pseudo-random numbers" class="md-nav__link">
      Functions for generating pseudo-random numbers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/encoding_functions/" title="Encoding functions" class="md-nav__link">
      Encoding functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/url_functions/" title="Functions for working with URLs" class="md-nav__link">
      Functions for working with URLs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/ip_address_functions/" title="Functions for working with IP addresses" class="md-nav__link">
      Functions for working with IP addresses
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/json_functions/" title="Functions for working with JSON." class="md-nav__link">
      Functions for working with JSON.
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/higher_order_functions/" title="Higher-order functions" class="md-nav__link">
      Higher-order functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/other_functions/" title="Other functions" class="md-nav__link">
      Other functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/ext_dict_functions/" title="Functions for working with external dictionaries" class="md-nav__link">
      Functions for working with external dictionaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/ym_dict_functions/" title="Functions for working with Yandex.Metrica dictionaries" class="md-nav__link">
      Functions for working with Yandex.Metrica dictionaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/in_functions/" title="Functions for implementing the IN operator" class="md-nav__link">
      Functions for implementing the IN operator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../functions/array_join/" title="arrayJoin function" class="md-nav__link">
      arrayJoin function
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-13" type="checkbox" id="nav-13">
    
    <label class="md-nav__link" for="nav-13">
      Aggregate functions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-13">
        Aggregate functions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../agg_functions/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../agg_functions/reference/" title="Function reference" class="md-nav__link">
      Function reference
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../agg_functions/combinators/" title="Aggregate function combinators" class="md-nav__link">
      Aggregate function combinators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../agg_functions/parametric_functions/" title="Parametric aggregate functions" class="md-nav__link">
      Parametric aggregate functions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14">
    
    <label class="md-nav__link" for="nav-14">
      Dictionaries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        Dictionaries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-14-2" type="checkbox" id="nav-14-2">
    
    <label class="md-nav__link" for="nav-14-2">
      External dictionaries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-14-2">
        External dictionaries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts/" title="General desription" class="md-nav__link">
      General desription
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts_dict/" title="Configuring an external dictionary" class="md-nav__link">
      Configuring an external dictionary
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts_dict_layout/" title="Storing dictionaries in memory" class="md-nav__link">
      Storing dictionaries in memory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts_dict_lifetime/" title="Dictionary updates" class="md-nav__link">
      Dictionary updates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts_dict_sources/" title="Sources of external dictionaries" class="md-nav__link">
      Sources of external dictionaries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/external_dicts_dict_structure/" title="Dictionary key and fields" class="md-nav__link">
      Dictionary key and fields
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../dicts/internal_dicts/" title="Internal dictionaries" class="md-nav__link">
      Internal dictionaries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15" type="checkbox" id="nav-15">
    
    <label class="md-nav__link" for="nav-15">
      Operation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-15">
        Operation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/access_rights/" title="Access rights" class="md-nav__link">
      Access rights
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/configuration_files/" title="Configuration files" class="md-nav__link">
      Configuration files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/quotas/" title="Quotas" class="md-nav__link">
      Quotas
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/tips/" title="Usage recommendations" class="md-nav__link">
      Usage recommendations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15-5" type="checkbox" id="nav-15-5">
    
    <label class="md-nav__link" for="nav-15-5">
      Server configuration parameters
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-15-5">
        Server configuration parameters
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/server_settings/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/server_settings/settings/" title="Server settings" class="md-nav__link">
      Server settings
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-15-6" type="checkbox" id="nav-15-6">
    
    <label class="md-nav__link" for="nav-15-6">
      Settings
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-15-6">
        Settings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/settings/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/settings/query_complexity/" title="Restrictions on query complexity" class="md-nav__link">
      Restrictions on query complexity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/settings/settings/" title="Settings" class="md-nav__link">
      Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../operations/settings/settings_profiles/" title="Settings profiles" class="md-nav__link">
      Settings profiles
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-16" type="checkbox" id="nav-16">
    
    <label class="md-nav__link" for="nav-16">
      Utilites
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-16">
        Utilites
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../utils/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../utils/clickhouse-copier/" title="clickhouse-copier" class="md-nav__link">
      clickhouse-copier
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../utils/clickhouse-local/" title="clickhouse-local" class="md-nav__link">
      clickhouse-local
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-17" type="checkbox" id="nav-17" checked>
    
    <label class="md-nav__link" for="nav-17">
      ClickHouse Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-17">
        ClickHouse Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../architecture/" title="Overview of ClickHouse architecture" class="md-nav__link">
      Overview of ClickHouse architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build/" title="How to build ClickHouse on Linux" class="md-nav__link">
      How to build ClickHouse on Linux
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../build_osx/" title="How to build ClickHouse on Mac OS X" class="md-nav__link">
      How to build ClickHouse on Mac OS X
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        How to write  C++ code
      </label>
    
    <a href="./" title="How to write  C++ code" class="md-nav__link md-nav__link--active">
      How to write  C++ code
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-recommendations" title="General recommendations" class="md-nav__link">
    General recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatting" title="Formatting" class="md-nav__link">
    Formatting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" title="Comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names" title="Names" class="md-nav__link">
    Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-write-code" title="How to write code" class="md-nav__link">
    How to write code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unused-features-of-c" title="Unused features of C++" class="md-nav__link">
    Unused features of C++
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platform" title="Platform" class="md-nav__link">
    Platform
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" title="Tools" class="md-nav__link">
    Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-recommendations_1" title="General recommendations" class="md-nav__link">
    General recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-recommendations" title="Additional recommendations" class="md-nav__link">
    Additional recommendations
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="How to run ClickHouse tests" class="md-nav__link">
      How to run ClickHouse tests
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
  </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-recommendations" title="General recommendations" class="md-nav__link">
    General recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#formatting" title="Formatting" class="md-nav__link">
    Formatting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" title="Comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#names" title="Names" class="md-nav__link">
    Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-write-code" title="How to write code" class="md-nav__link">
    How to write code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#unused-features-of-c" title="Unused features of C++" class="md-nav__link">
    Unused features of C++
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#platform" title="Platform" class="md-nav__link">
    Platform
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tools" title="Tools" class="md-nav__link">
    Tools
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#libraries" title="Libraries" class="md-nav__link">
    Libraries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-recommendations_1" title="General recommendations" class="md-nav__link">
    General recommendations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-recommendations" title="Additional recommendations" class="md-nav__link">
    Additional recommendations
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  
                    <a href="https://github.com/yandex/ClickHouse/edit/master/docs/en/development/style.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                  
                
                
                <h1 id="how-to-write-c-code">How to write C++ code</h1>
<h2 id="general-recommendations">General recommendations</h2>
<p><strong>1.</strong> The following are recommendations, not requirements.</p>
<p><strong>2.</strong> If you are editing code, it makes sense to follow the formatting of the existing code.</p>
<p><strong>3.</strong> Code style is needed for consistency. Consistency makes it easier to read the code, and it also makes it easier to search the code.</p>
<p><strong>4.</strong> Many of the rules do not have logical reasons; they are dictated by established practices.</p>
<h2 id="formatting">Formatting</h2>
<p><strong>1.</strong> Most of the formatting will be done automatically by <code>clang-format</code>.</p>
<p><strong>2.</strong> Indents are 4 spaces. Configure your development environment so that a tab adds four spaces.</p>
<p><strong>3.</strong> A left curly bracket must be separated on a new line. (And the right one, as well.)</p>
<div class="codehilite"><pre><span></span><span class="kr">inline</span> <span class="kt">void</span> <span class="nf">readBoolText</span><span class="p">(</span><span class="kt">bool</span> <span class="o">&amp;</span> <span class="n">x</span><span class="p">,</span> <span class="n">ReadBuffer</span> <span class="o">&amp;</span> <span class="n">buf</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">char</span> <span class="n">tmp</span> <span class="o">=</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
    <span class="n">readChar</span><span class="p">(</span><span class="n">tmp</span><span class="p">,</span> <span class="n">buf</span><span class="p">);</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">tmp</span> <span class="o">!=</span> <span class="sc">&#39;0&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p><strong>4.</strong>
But if the entire function body is quite short (a single statement), you can place it entirely on one line if you wish. Place spaces around curly braces (besides the space at the end of the line).</p>
<div class="codehilite"><pre><span></span><span class="kr">inline</span> <span class="kt">size_t</span> <span class="nf">mask</span><span class="p">()</span> <span class="k">const</span>                <span class="p">{</span> <span class="k">return</span> <span class="n">buf_size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
<span class="kr">inline</span> <span class="kt">size_t</span> <span class="nf">place</span><span class="p">(</span><span class="n">HashValue</span> <span class="n">x</span><span class="p">)</span> <span class="k">const</span>    <span class="p">{</span> <span class="k">return</span> <span class="n">x</span> <span class="o">&amp;</span> <span class="n">mask</span><span class="p">();</span> <span class="p">}</span>
</pre></div>


<p><strong>5.</strong> For functions, don't put spaces around brackets.</p>
<div class="codehilite"><pre><span></span><span class="kt">void</span> <span class="nf">reinsert</span><span class="p">(</span><span class="k">const</span> <span class="n">Value</span> <span class="o">&amp;</span> <span class="n">x</span><span class="p">)</span>
<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">[</span><span class="n">place_value</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>
</pre></div>


<p><strong>6.</strong> When using statements such as <code>if</code>, <code>for</code>, and <code>while</code> (unlike function calls), put a space before the opening bracket.</p>
<p><code>cpp
 for (size_t i = 0; i &lt; rows; i += storage.index_granularity)</code></p>
<p><strong>7.</strong> Put spaces around binary operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, ...), as well as the ternary operator <code>?:</code>.</p>
<div class="codehilite"><pre><span></span><span class="n">UInt16</span> <span class="n">year</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
<span class="n">UInt8</span> <span class="n">month</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
<span class="n">UInt8</span> <span class="n">day</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">-</span> <span class="sc">&#39;0&#39;</span><span class="p">);</span>
</pre></div>


<p><strong>8.</strong> If a line feed is entered, put the operator on a new line and increase the indent before it.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">elapsed_ns</span><span class="p">)</span>
    <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; (&quot;</span>
         <span class="o">&lt;&lt;</span> <span class="n">rows_read_on_server</span> <span class="o">*</span> <span class="mi">1000000000</span> <span class="o">/</span> <span class="n">elapsed_ns</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; rows/s., &quot;</span>
        <span class="o">&lt;&lt;</span> <span class="n">bytes_read_on_server</span> <span class="o">*</span> <span class="mf">1000.0</span> <span class="o">/</span> <span class="n">elapsed_ns</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; MB/s.) &quot;</span><span class="p">;</span>
</pre></div>


<p><strong>9.</strong> You can use spaces for alignment within a line, if desired.</p>
<div class="codehilite"><pre><span></span><span class="n">dst</span><span class="p">.</span><span class="n">ClickLogID</span>         <span class="o">=</span> <span class="n">click</span><span class="p">.</span><span class="n">LogID</span><span class="p">;</span>
<span class="n">dst</span><span class="p">.</span><span class="n">ClickEventID</span>       <span class="o">=</span> <span class="n">click</span><span class="p">.</span><span class="n">EventID</span><span class="p">;</span>
<span class="n">dst</span><span class="p">.</span><span class="n">ClickGoodEvent</span>     <span class="o">=</span> <span class="n">click</span><span class="p">.</span><span class="n">GoodEvent</span><span class="p">;</span>
</pre></div>


<p><strong>10.</strong> Don't use spaces around the operators <code>.</code>, <code>-&gt;</code> .</p>
<p>If necessary, the operator can be wrapped to the next line. In this case, the offset in front of it is increased.</p>
<p><strong>11.</strong> Do not use a space to separate unary operators (<code>-</code>, <code>+</code>, <code>*</code>, <code>&amp;</code>, ...) from the argument.</p>
<p><strong>12.</strong> Put a space after a comma, but not before it. The same rule goes for a semicolon inside a for expression.</p>
<p><strong>13.</strong> Do not use spaces to separate the <code>[]</code> operator.</p>
<p><strong>14.</strong> In a <code>template &lt;...&gt;</code> expression, use a space between <code>template</code> and <code>&lt;</code>. No spaces after <code>&lt;</code> or before <code>&gt;</code>.</p>
<div class="codehilite"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="n">TValue</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">AggregatedStatElement</span>
<span class="p">{}</span>
</pre></div>


<p><strong>15.</strong> In classes and structures, public, private, and protected are written on the same level as the <code>class/struct</code>, but all other internal elements should be deeper.</p>
<div class="codehilite"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">class</span> <span class="nc">MultiVersion</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
    <span class="c1">/// Version of object for usage. shared_ptr manage lifetime of version.</span>
    <span class="k">using</span> <span class="n">Version</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="k">const</span> <span class="n">T</span><span class="o">&gt;</span><span class="p">;</span>
    <span class="p">...</span>
<span class="p">}</span>
</pre></div>


<p><strong>16.</strong> If the same namespace is used for the entire file, and there isn't anything else significant, an offset is not necessary  inside namespace.</p>
<p><strong>17.</strong> If the block for <code>if</code>, <code>for</code>, <code>while</code>... expressions consists of a single statement, you don't need to use curly brackets. Place the statement on a separate line, instead. The same is true for a nested if, for, while... statement. But if the inner statement contains curly brackets or else, the external block should be written in curly brackets.</p>
<div class="codehilite"><pre><span></span><span class="c1">/// Finish write.</span>
<span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="o">&amp;</span> <span class="nl">stream</span> <span class="p">:</span> <span class="n">streams</span><span class="p">)</span>
    <span class="n">stream</span><span class="p">.</span><span class="n">second</span><span class="o">-&gt;</span><span class="n">finalize</span><span class="p">();</span>
</pre></div>


<p><strong>18.</strong> There should be any spaces at the ends of lines.</p>
<p><strong>19.</strong> Sources are UTF-8 encoded.</p>
<p><strong>20.</strong> Non-ASCII characters can be used in string literals.</p>
<div class="codehilite"><pre><span></span><span class="o">&lt;&lt;</span> <span class="s">&quot;, &quot;</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">timer</span><span class="p">.</span><span class="n">elapsed</span><span class="p">()</span> <span class="o">/</span> <span class="n">chunks_stats</span><span class="p">.</span><span class="n">hits</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="s">&quot; μsec/hit.&quot;</span><span class="p">;</span>
</pre></div>


<p><strong>21.</strong> Do not write multiple expressions in a single line.</p>
<p><strong>22.</strong> Group sections of code inside functions and separate them with no more than one empty line.</p>
<p><strong>23.</strong> Separate functions, classes, and so on with one or two empty lines.</p>
<p><strong>24.</strong> A <code>const</code> (related to a value) must be written before the type name.</p>
<div class="codehilite"><pre><span></span><span class="c1">//correct</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">pos</span>
<span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">s</span>
<span class="c1">//incorrect</span>
<span class="kt">char</span> <span class="k">const</span> <span class="o">*</span> <span class="n">pos</span>
</pre></div>


<p><strong>25.</strong> When declaring a pointer or reference, the <code>*</code> and <code>&amp;</code> symbols should be separated by spaces on both sides.</p>
<div class="codehilite"><pre><span></span><span class="c1">//correct</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">pos</span>
<span class="c1">//incorrect</span>
<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">pos</span>
<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">pos</span>
</pre></div>


<p><strong>26.</strong> When using template types, alias them with the <code>using</code> keyword (except in the simplest cases).</p>
<p>In other words, the template parameters are specified only in <code>using</code> and aren't repeated in the code.</p>
<p><code>using</code> can be declared locally, such as inside a function.</p>
<div class="codehilite"><pre><span></span><span class="c1">//correct</span>
<span class="k">using</span> <span class="n">FileStreams</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Stream</span><span class="o">&gt;&gt;</span><span class="p">;</span>
<span class="n">FileStreams</span> <span class="n">streams</span><span class="p">;</span>
<span class="c1">//incorrect</span>
<span class="n">std</span><span class="o">::</span><span class="n">map</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Stream</span><span class="o">&gt;&gt;</span> <span class="n">streams</span><span class="p">;</span>
</pre></div>


<p><strong>27.</strong> Do not declare several variables of different types in one statement.</p>
<div class="codehilite"><pre><span></span><span class="c1">//incorrect</span>
<span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">y</span><span class="p">;</span>
</pre></div>


<p><strong>28.</strong> Do not use C-style casts.</p>
<div class="codehilite"><pre><span></span><span class="c1">//incorrect</span>
<span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">c</span> <span class="o">&lt;&lt;</span><span class="p">;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="c1">//correct</span>
<span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>


<p><strong>29.</strong> In classes and structs, group members and functions separately inside each visibility scope.</p>
<p><strong>30.</strong> For small classes and structs, it is not necessary to separate the method declaration from the implementation.</p>
<p>The same is true for small methods in any classes or structs.</p>
<p>For templated classes and structs, don't separate the method declarations from the implementation (because otherwise they must be defined in the same translation unit).</p>
<p><strong>31.</strong> You can wrap lines at 140 characters, instead of 80.</p>
<p><strong>32.</strong> Always use the prefix increment/decrement operators if postfix is not required.</p>
<div class="codehilite"><pre><span></span><span class="k">for</span> <span class="p">(</span><span class="n">Names</span><span class="o">::</span><span class="n">const_iterator</span> <span class="n">it</span> <span class="o">=</span> <span class="n">column_names</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="n">it</span> <span class="o">!=</span> <span class="n">column_names</span><span class="p">.</span><span class="n">end</span><span class="p">();</span> <span class="o">++</span><span class="n">it</span><span class="p">)</span>
</pre></div>


<h2 id="comments">Comments</h2>
<p><strong>1.</strong> Be sure to add comments for all non-trivial parts of code.</p>
<p>This is very important. Writing the comment might help you realize that the code isn't necessary, or that it is designed wrong.</p>
<div class="codehilite"><pre><span></span><span class="cm">/** Part of piece of memory, that can be used.</span>
<span class="cm">  * For example, if internal_buffer is 1MB, and there was only 10 bytes loaded to buffer from file for reading,</span>
<span class="cm">  * then working_buffer will have size of only 10 bytes</span>
<span class="cm">  * (working_buffer.end() will point to the position right after those 10 bytes available for read).</span>
<span class="cm">*/</span>
</pre></div>


<p><strong>2.</strong> Comments can be as detailed as necessary.</p>
<p><strong>3.</strong> Place comments before the code they describe. In rare cases, comments can come after the code, on the same line.</p>
<div class="codehilite"><pre><span></span><span class="cm">/** Parses and executes the query.</span>
<span class="cm">*/</span>
<span class="kt">void</span> <span class="n">executeQuery</span><span class="p">(</span>
    <span class="n">ReadBuffer</span> <span class="o">&amp;</span> <span class="n">istr</span><span class="p">,</span> <span class="c1">/// Where to read the query from (and data for INSERT, if applicable)</span>
    <span class="n">WriteBuffer</span> <span class="o">&amp;</span> <span class="n">ostr</span><span class="p">,</span> <span class="c1">/// Where to write the result</span>
    <span class="n">Context</span> <span class="o">&amp;</span> <span class="n">context</span><span class="p">,</span> <span class="c1">/// DB, tables, data types, engines, functions, aggregate functions...</span>
    <span class="n">BlockInputStreamPtr</span> <span class="o">&amp;</span> <span class="n">query_plan</span><span class="p">,</span> <span class="c1">/// A description of query processing can be included here</span>
    <span class="n">QueryProcessingStage</span><span class="o">::</span><span class="n">Enum</span> <span class="n">stage</span> <span class="o">=</span> <span class="n">QueryProcessingStage</span><span class="o">::</span><span class="n">Complete</span> <span class="c1">/// The last stage to process the SELECT query to</span>
    <span class="p">)</span>
</pre></div>


<p><strong>4.</strong> Comments should be written in English only.</p>
<p><strong>5.</strong> If you are writing a library, include detailed comments explaining it in the main header file.</p>
<p><strong>6.</strong> Do not add comments that do not provide additional information. In particular, do not leave empty comments like this:</p>
<div class="codehilite"><pre><span></span><span class="cm">/*</span>
<span class="cm">* Procedure Name:</span>
<span class="cm">* Original procedure name:</span>
<span class="cm">* Author:</span>
<span class="cm">* Date of creation:</span>
<span class="cm">* Dates of modification:</span>
<span class="cm">* Modification authors:</span>
<span class="cm">* Original file name:</span>
<span class="cm">* Purpose:</span>
<span class="cm">* Intent:</span>
<span class="cm">* Designation:</span>
<span class="cm">* Classes used:</span>
<span class="cm">* Constants:</span>
<span class="cm">* Local variables:</span>
<span class="cm">* Parameters:</span>
<span class="cm">* Date of creation:</span>
<span class="cm">* Purpose:</span>
<span class="cm">*/</span>
</pre></div>


<p>The example is borrowed from  <a href="http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/">http://home.tamk.fi/~jaalto/course/coding-style/doc/unmaintainable-code/</a>.</p>
<p><strong>7.</strong> Do not write garbage comments (author, creation date ..) at the beginning of each file.</p>
<p><strong>8.</strong> Single-line comments begin with three slashes: <code>///</code>  and multi-line comments begin with <code>/**</code>. These comments are considered "documentation".</p>
<p>Note: You can use Doxygen to generate documentation from these comments. But Doxygen is not generally used because it is more convenient to navigate the code in the IDE.</p>
<p><strong>9.</strong> Multi-line comments must not have empty lines at the beginning and end (except the line that closes a multi-line comment).</p>
<p><strong>10.</strong> For commenting out code, use basic comments, not "documenting" comments.</p>
<p><strong>11.</strong> Delete the commented out parts of the code before commiting.</p>
<p><strong>12.</strong> Do not use profanity in comments or code.</p>
<p><strong>13.</strong> Do not use uppercase letters. Do not use excessive punctuation.</p>
<div class="codehilite"><pre><span></span><span class="c1">/// WHAT THE FAIL???</span>
</pre></div>


<p><strong>14.</strong> Do not make delimeters from comments.</p>
<div class="codehilite"><pre><span></span>///******************************************************
</pre></div>


<p><strong>15.</strong> Do not start discussions in comments.</p>
<div class="codehilite"><pre><span></span>/// Why did you do this stuff?
</pre></div>


<p><strong>16.</strong> There's no need to write a comment at the end of a block describing what it was about.</p>
<div class="codehilite"><pre><span></span>/// for
</pre></div>


<h2 id="names">Names</h2>
<p><strong>1.</strong> The names of variables and class members use lowercase letters with underscores.</p>
<div class="codehilite"><pre><span></span><span class="kt">size_t</span> <span class="n">max_block_size</span><span class="p">;</span>
</pre></div>


<p><strong>2.</strong> The names of functions (methods) use camelCase beginning with a lowercase letter.</p>
<div class="codehilite"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">getName</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span> <span class="k">return</span> <span class="s">&quot;Memory&quot;</span><span class="p">;</span> <span class="p">}</span>
</pre></div>


<p><strong>3.</strong> The names of classes (structures) use CamelCase beginning with an uppercase letter. Prefixes other than I are not used for interfaces.</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">StorageMemory</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IStorage</span>
</pre></div>


<p><strong>4.</strong> The names of usings follow the same rules as classes, or you can add _t at the end.</p>
<p><strong>5.</strong> Names of template type arguments for simple cases: T; T, U; T1, T2.</p>
<p>For more complex cases, either follow the rules for class names, or add the prefix T.</p>
<div class="codehilite"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="k">typename</span> <span class="n">TKey</span><span class="p">,</span> <span class="k">typename</span> <span class="n">TValue</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">AggregatedStatElement</span>
</pre></div>


<p><strong>6.</strong> Names of template constant arguments: either follow the rules for variable names, or use N in simple cases.</p>
<div class="codehilite"><pre><span></span><span class="k">template</span> <span class="o">&lt;</span><span class="kt">bool</span> <span class="n">without_www</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">ExtractDomain</span>
</pre></div>


<p><strong>7.</strong> For abstract classes (interfaces) you can add the I prefix.</p>
<div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">IBlockInputStream</span>
</pre></div>


<p><strong>8.</strong> If you use a variable locally, you can use the short name.</p>
<p>In other cases, use a descriptive name that conveys the meaning.</p>
<div class="codehilite"><pre><span></span><span class="kt">bool</span> <span class="n">info_successfully_loaded</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</pre></div>


<p><strong>9.</strong> <code>define</code>‘s should be in ALL_CAPS with underscores. The same is true for global constants.</p>
<div class="codehilite"><pre><span></span><span class="cp">#define MAX_SRC_TABLE_NAMES_TO_STORE 1000</span>
</pre></div>


<p><strong>10.</strong> File names should use the same style as their contents.</p>
<p>If a file contains a single class, name the file the same way as the class, in CamelCase.</p>
<p>If the file contains a single function, name the file the same way as the function, in camelCase.</p>
<p><strong>11.</strong> If the name contains an abbreviation, then:</p>
<ul>
<li>For variable names, the abbreviation should use lowercase letters <code>mysql_connection</code> (not <code>mySQL_connection</code>).</li>
<li>For names of classes and functions, keep the uppercase letters in the abbreviation <code>MySQLConnection</code> (not <code>MySqlConnection</code>).</li>
</ul>
<p><strong>12.</strong> Constructor arguments that are used just to initialize the class members should be named the same way as the class members, but with an underscore at the end.</p>
<div class="codehilite"><pre><span></span><span class="n">FileQueueProcessor</span><span class="p">(</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">path_</span><span class="p">,</span>
    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">prefix_</span><span class="p">,</span>
    <span class="n">std</span><span class="o">::</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">FileHandler</span><span class="o">&gt;</span> <span class="n">handler_</span><span class="p">)</span>
    <span class="o">:</span> <span class="n">path</span><span class="p">(</span><span class="n">path_</span><span class="p">),</span>
    <span class="n">prefix</span><span class="p">(</span><span class="n">prefix_</span><span class="p">),</span>
    <span class="n">handler</span><span class="p">(</span><span class="n">handler_</span><span class="p">),</span>
    <span class="n">log</span><span class="p">(</span><span class="o">&amp;</span><span class="n">Logger</span><span class="o">::</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;FileQueueProcessor&quot;</span><span class="p">))</span>
<span class="p">{</span>
<span class="p">}</span>
</pre></div>


<p>The underscore suffix can be omitted if the argument is not used in the constructor body.</p>
<p><strong>13.</strong> There is no difference in the names of local variables and class members (no prefixes required).</p>
<div class="codehilite"><pre><span></span><span class="n">timer</span> <span class="p">(</span><span class="n">not</span> <span class="n">m_timer</span><span class="p">)</span>
</pre></div>


<p><strong>14.</strong> Constants in enums use CamelCase beginning with an uppercase letter. ALL_CAPS is also allowed. If the enum is not local, use enum class.</p>
<div class="codehilite"><pre><span></span><span class="k">enum</span> <span class="k">class</span> <span class="nc">CompressionMethod</span>
<span class="p">{</span>
    <span class="n">QuickLZ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">LZ4</span>     <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>


<p><strong>15.</strong> All names must be in English. Transliteration of Russian words is not allowed.</p>
<div class="codehilite"><pre><span></span><span class="n">not</span> <span class="n">Stroka</span>
</pre></div>


<p><strong>16.</strong> Abbreviations are acceptable if they are well known (when you can easily find the meaning of the abbreviation in Wikipedia or in a search engine).</p>
<div class="codehilite"><pre><span></span>`AST`, `SQL`.

Not `NVDH` (some random letters)
</pre></div>


<p>Incomplete words are acceptable if the shortened version is common use.</p>
<p>You can also use an abbreviation if the full name is included next to it in the comments.</p>
<p><strong>17.</strong> File names with C++ source code must have the <code>.cpp</code> extension. Header files must have the <code>.h</code> extension.</p>
<h2 id="how-to-write-code">How to write code</h2>
<p><strong>1.</strong> Memory management.</p>
<p>Manual memory deallocation (delete) can only be used in library code.</p>
<p>In library code, the delete operator can only be used in destructors.</p>
<p>In application code, memory must be freed by the object that owns it.</p>
<p>Examples:</p>
<ul>
<li>The easiest way is to place an object on the stack, or make it a member of another class.</li>
<li>For a large number of small objects, use containers.</li>
<li>For automatic deallocation of a small number of objects that reside in the heap, use shared_ptr/unique_ptr.</li>
</ul>
<p><strong>2.</strong> Resource management.</p>
<p>Use RAII and see the previous point.</p>
<p><strong>3.</strong> Error handling.</p>
<p>Use exceptions. In most cases, you only need to throw an exception, and don't need to catch it (because of RAII).</p>
<p>In offline data processing applications, it's often acceptable to not catch exceptions.</p>
<p>In servers that handle user requests, it's usually enough to catch exceptions at the top level of the connection handler.</p>
<div class="codehilite"><pre><span></span><span class="c1">/// If there were no other calculations yet, do it synchronously</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">started</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">calculate</span><span class="p">();</span>
    <span class="n">started</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">else</span>    <span class="c1">/// If the calculations are already in progress, wait for results</span>
    <span class="n">pool</span><span class="p">.</span><span class="n">wait</span><span class="p">();</span>

<span class="k">if</span> <span class="p">(</span><span class="n">exception</span><span class="p">)</span>
    <span class="n">exception</span><span class="o">-&gt;</span><span class="n">rethrow</span><span class="p">();</span>
</pre></div>


<p>Never hide exceptions without handling. Never just blindly put all exceptions to log.</p>
<p>Not <code>catch (...) {}</code>.</p>
<p>If you need to ignore some exceptions, do so only for specific ones and rethrow the rest.</p>
<div class="codehilite"><pre><span></span><span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">DB</span><span class="o">::</span><span class="n">Exception</span> <span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">code</span><span class="p">()</span> <span class="o">==</span> <span class="n">ErrorCodes</span><span class="o">::</span><span class="n">UNKNOWN_AGGREGATE_FUNCTION</span><span class="p">)</span>
        <span class="k">return</span> <span class="k">nullptr</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">throw</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>When using functions with response codes or errno, always check the result and throw an exception in case of error.</p>
<div class="codehilite"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">!=</span> <span class="n">close</span><span class="p">(</span><span class="n">fd</span><span class="p">))</span>
    <span class="n">throwFromErrno</span><span class="p">(</span><span class="s">&quot;Cannot close file &quot;</span> <span class="o">+</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">ErrorCodes</span><span class="o">::</span><span class="n">CANNOT_CLOSE_FILE</span><span class="p">);</span>
</pre></div>


<p>Asserts are not used.</p>
<p><strong>4.</strong> Exception types.</p>
<p>There is no need to use complex exception hierarchy in application code. The exception text should be understandable to a system administrator.</p>
<p><strong>5.</strong> Throwing exceptions from destructors.</p>
<p>This is not recommended, but it is allowed.</p>
<p>Use the following options:</p>
<ul>
<li>Create a (done() or finalize()) function that will do all the work in advance that might lead to an exception. If that function was called, there should be no exceptions in the destructor later.</li>
<li>Tasks that are too complex (such as sending messages over the network) can be put in separate method that the class user will have to call before destruction.</li>
<li>If there is an exception in the destructor, it’s better to log it than to hide it (if the logger is available).</li>
<li>In simple applications, it is acceptable to rely on std::terminate (for cases of noexcept by default in C++11) to handle exceptions.</li>
</ul>
<p><strong>6.</strong> Anonymous code blocks.</p>
<p>You can create a separate code block inside a single function in order to make certain variables local, so that the destructors are called when exiting the block.</p>
<div class="codehilite"><pre><span></span><span class="n">Block</span> <span class="n">block</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">in</span><span class="o">-&gt;</span><span class="n">read</span><span class="p">();</span>

<span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span> <span class="n">lock</span><span class="p">(</span><span class="n">mutex</span><span class="p">);</span>
    <span class="n">data</span><span class="p">.</span><span class="n">ready</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">data</span><span class="p">.</span><span class="n">block</span> <span class="o">=</span> <span class="n">block</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">ready_any</span><span class="p">.</span><span class="n">set</span><span class="p">();</span>
</pre></div>


<p><strong>7.</strong> Multithreading.</p>
<p>For offline data processing applications:</p>
<ul>
<li>Try to get the best possible performance on a single CPU core. You can then parallelize your code if necessary.</li>
</ul>
<p>In server applications:</p>
<ul>
<li>Use the thread pool to process requests. At this point, we haven't had any tasks that required userspace context switching.</li>
</ul>
<p>Fork is not used for parallelization.</p>
<p><strong>8.</strong> Synchronizing threads.</p>
<p>Often it is possible to make different threads use different memory cells (even better: different cache lines,) and to not use any thread synchronization (except joinAll).</p>
<p>If synchronization is required, in most cases, it is sufficient to use mutex under lock_guard.</p>
<p>In other cases use system synchronization primitives. Do not use busy wait.</p>
<p>Atomic operations should be used only in the simplest cases.</p>
<p>Do not try to implement lock-free data structures unless it is your primary area of expertise.</p>
<p><strong>9.</strong> Pointers vs references.</p>
<p>In most cases, prefer references.</p>
<p><strong>10.</strong> const.</p>
<p>Use constant references, pointers to constants, <code>const_iterator</code>, <code>const</code> methods.</p>
<p>Consider <code>const</code> to be default and use non-const only when necessary.</p>
<p>When passing variable by value, using <code>const</code> usually does not make sense.</p>
<p><strong>11.</strong> unsigned.</p>
<p>Use <code>unsigned</code>, if needed.</p>
<p><strong>12.</strong> Numeric types</p>
<p>Use <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code>, <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code>, and <code>size_t</code>, <code>ssize_t</code>, <code>ptrdiff_t</code>.</p>
<p>Don't use <code>signed/unsigned long</code>, <code>long long</code>, <code>short</code>, <code>signed char</code>, <code>unsigned char</code>, or <code>char</code> types for numbers.</p>
<p><strong>13.</strong> Passing arguments.</p>
<p>Pass complex values by reference (including <code>std::string</code>).</p>
<p>If a function captures ownership of an objected created in the heap, make the argument type <code>shared_ptr</code> or <code>unique_ptr</code>.</p>
<p><strong>14.</strong> Returning values.</p>
<p>In most cases, just use return. Do not write <code>[return std::move(res)]{.strike}</code>.</p>
<p>If the function allocates an object on heap and returns it, use <code>shared_ptr</code> or <code>unique_ptr</code>.</p>
<p>In rare cases you might need to return the value via an argument. In this case, the argument should be a reference.</p>
<div class="codehilite"><pre><span></span><span class="nx">using</span> <span class="nx">AggregateFunctionPtr</span> <span class="o">=</span> <span class="nx">std</span><span class="o">::</span><span class="nx">shared_ptr</span><span class="o">&lt;</span><span class="nx">IAggregateFunction</span><span class="o">&gt;</span><span class="p">;</span>

<span class="cm">/** Creates an aggregate function by name.</span>
<span class="cm"> */</span>
<span class="kr">class</span> <span class="nx">AggregateFunctionFactory</span>
<span class="p">{</span>
<span class="kr">public</span><span class="o">:</span>
   <span class="nx">AggregateFunctionFactory</span><span class="p">();</span>
   <span class="nx">AggregateFunctionPtr</span> <span class="nx">get</span><span class="p">(</span><span class="kr">const</span> <span class="nb">String</span> <span class="o">&amp;</span> <span class="nx">name</span><span class="p">,</span> <span class="kr">const</span> <span class="nx">DataTypes</span> <span class="o">&amp;</span> <span class="nx">argument_types</span><span class="p">)</span> <span class="kr">const</span><span class="p">;</span>
</pre></div>


<p><strong>15.</strong> namespace.</p>
<p>There is no need to use a separate namespace for application code or small libraries.</p>
<p>or small libraries.</p>
<p>For medium to large libraries, put everything in the namespace.</p>
<p>You can use the additional detail namespace in a library's <code>.h</code> file to hide implementation details.</p>
<p>In a <code>.cpp</code> file, you can use the static or anonymous namespace to hide symbols.</p>
<p>You can also use namespace for enums to prevent its names from polluting the outer namespace, but it’s better to use the enum class.</p>
<p><strong>16.</strong> Delayed initialization.</p>
<p>If arguments are required for initialization then do not write a default constructor.</p>
<p>If later you’ll need to delay initialization, you can add a default constructor that will create an invalid object. Or, for a small number of objects, you can use <code>shared_ptr/unique_ptr</code>.</p>
<div class="codehilite"><pre><span></span><span class="n">Loader</span><span class="p">(</span><span class="n">DB</span><span class="o">::</span><span class="n">Connection</span> <span class="o">*</span> <span class="n">connection_</span><span class="p">,</span> <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">&amp;</span> <span class="n">query</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">max_block_size_</span><span class="p">);</span>

<span class="c1">/// For delayed initialization</span>
<span class="n">Loader</span><span class="p">()</span> <span class="p">{}</span>
</pre></div>


<p><strong>17.</strong> Virtual functions.</p>
<p>If the class is not intended for polymorphic use, you do not need to make functions virtual. This also applies to the destructor.</p>
<p><strong>18.</strong> Encodings.</p>
<p>Use UTF-8 everywhere. Use <code>std::string</code>and<code>char *</code>. Do not use <code>std::wstring</code>and<code>wchar_t</code>.</p>
<p><strong>19.</strong> Logging.</p>
<p>See the examples everywhere in the code.</p>
<p>Before committing, delete all meaningless and debug logging, and any other types of debug output.</p>
<p>Logging in cycles should be avoided, even on the Trace level.</p>
<p>Logs must be readable at any logging level.</p>
<p>Logging should only be used in application code, for the most part.</p>
<p>Log messages must be written in English.</p>
<p>The log should preferably be understandable for the system administrator.</p>
<p>Do not use profanity in the log.</p>
<p>Use UTF-8 encoding in the log. In rare cases you can use non-ASCII characters in the log.</p>
<p><strong>20.</strong> I/O.</p>
<p>Don't use iostreams in internal cycles that are critical for application performance (and never use stringstream).</p>
<p>Use the DB/IO library instead.</p>
<p><strong>21.</strong> Date and time.</p>
<p>See the <code>DateLUT</code> library.</p>
<p><strong>22.</strong> include.</p>
<p>Always use <code>#pragma once</code> instead of include guards.</p>
<p><strong>23.</strong> using.</p>
<p>The <code>using namespace</code> is not used.</p>
<p>It's fine if you are 'using' something specific, but make it local inside a class or function.</p>
<p><strong>24.</strong> Do not use trailing return type for functions unless necessary.</p>
<div class="codehilite"><pre><span></span>[auto f() -&amp;gt; void;]{.strike}
</pre></div>


<p><strong>25.</strong> Do not declare and init variables like this:</p>
<div class="codehilite"><pre><span></span><span class="k">auto</span> <span class="n">s</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">{</span><span class="s">&quot;Hello&quot;</span><span class="p">};</span>
</pre></div>


<p>Do it like this:</p>
<div class="codehilite"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Hello&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span><span class="p">{</span><span class="s">&quot;Hello&quot;</span><span class="p">};</span>
</pre></div>


<p><strong>26.</strong> For virtual functions, write <code>virtual</code> in the base class, but write <code>override</code> in descendent classes.</p>
<h2 id="unused-features-of-c">Unused features of C++</h2>
<p><strong>1.</strong> Virtual inheritance is not used.</p>
<p><strong>2.</strong> Exception specifiers from C++03 are not used.</p>
<p><strong>3.</strong> Function try block is not used, except for the main function in tests.</p>
<h2 id="platform">Platform</h2>
<p><strong>1.</strong> We write code for a specific platform.</p>
<p>But other things being equal, cross-platform or portable code is preferred.</p>
<p><strong>2.</strong> The language is C++17.</p>
<p><strong>3.</strong> The compiler is <code>gcc</code>. At this time (December 2017), the code is compiled using version 7.2. (It can also be compiled using clang 5.)</p>
<p>The standard library is used (implementation of <code>libstdc++</code> or <code>libc++</code>).</p>
<p><strong>4.</strong> OS: Linux Ubuntu, not older than Precise.</p>
<p><strong>5.</strong> Code is written for x86_64 CPU architecture.</p>
<p>The CPU instruction set is the minimum supported set among our servers. Currently, it is SSE 4.2.</p>
<p><strong>6.</strong> Use <code>-Wall -Wextra -Werror</code> compilation flags.</p>
<p><strong>7.</strong> Use static linking with all libraries except those that are difficult to connect to statically (see the output of the <code>ldd</code> command).</p>
<p><strong>8.</strong> Code is developed and debugged with release settings.</p>
<h2 id="tools">Tools</h2>
<p><strong>1.</strong> <code>KDevelop</code> is a good IDE.</p>
<p><strong>2.</strong> For debugging, use <code>gdb</code>, <code>valgrind</code> (<code>memcheck</code>), <code>strace</code>, <code>-fsanitize=</code>, ..., <code>tcmalloc_minimal_debug</code>.</p>
<p><strong>3.</strong> For profiling, use Linux Perf <code>valgrind</code> (<code>callgrind</code>), <code>strace-cf</code>.</p>
<p><strong>4.</strong> Sources are in Git.</p>
<p><strong>5.</strong> Compilation is managed by <code>CMake</code>.</p>
<p><strong>6.</strong> Releases are in <code>deb</code> packages.</p>
<p><strong>7.</strong> Commits to master must not break the build.</p>
<p>Though only selected revisions are considered workable.</p>
<p><strong>8.</strong> Make commits as often as possible, even if the code is only partially ready.</p>
<p>Use branches for this purpose.</p>
<p>If your code is not buildable yet, exclude it from the build before pushing to master. You'll need to finish it or remove it from master within a few days.</p>
<p><strong>9.</strong> For non-trivial changes, used branches and publish them on the server.</p>
<p><strong>10.</strong> Unused code is removed from the repository.</p>
<h2 id="libraries">Libraries</h2>
<p><strong>1.</strong> The C++14 standard library is used (experimental extensions are fine), as well as boost and Poco frameworks.</p>
<p><strong>2.</strong> If necessary, you can use any well-known libraries available in the OS package.</p>
<p>If there is a good solution already available, then use it, even if it means you have to install another library.</p>
<p>(But be prepared to remove bad libraries from code.)</p>
<p><strong>3.</strong> You can install a library that isn't in the packages, if the packages don't have what you need or have an outdated version or the wrong type of compilation.</p>
<p><strong>4.</strong> If the library is small and doesn't have its own complex build system, put the source files in the contrib folder.</p>
<p><strong>5.</strong> Preference is always given to libraries that are  already used.</p>
<h2 id="general-recommendations_1">General recommendations</h2>
<p><strong>1.</strong> Write as little code as possible.</p>
<p><strong>2.</strong> Try the simplest solution.</p>
<p><strong>3.</strong> Don't write code until you know how it's going to work and how the inner loop will function.</p>
<p><strong>4.</strong> In the simplest cases, use 'using' instead of classes or structs.</p>
<p><strong>5.</strong> If possible, do not write copy constructors, assignment operators, destructors (other than a virtual one, if the class contains at least one virtual function), mpve-constructors and move assignment operators. In other words, the compiler-generated functions must work correctly. You can use 'default'.</p>
<p><strong>6.</strong> Code simplification is encouraged. Reduce the size of your code where possible.</p>
<h2 id="additional-recommendations">Additional recommendations</h2>
<p><strong>1.</strong> Explicit <code>std::</code> for types from <code>stddef.h</code> is not recommended.</p>
<p>We recommend writing <code>size_t</code> instead <code>std::size_t</code> because it's shorter.</p>
<p>But if you prefer, <code>std::</code> is acceptable.</p>
<p><strong>2.</strong> Explicit <code>std::</code> for functions from the standard C library is not recommended.</p>
<p>Write <code>memcpy</code> instead of <code>std::memcpy</code>.</p>
<p>The reason is that there are similar non-standard functions, such as <code>memmem</code>. We do use these functions on occasion. These functions do not exist in namespace <code>std</code>.</p>
<p>If you write <code>std::memcpy</code> instead of <code>memcpy</code> everywhere, then <code>memmem</code> without <code>std::</code> will look awkward.</p>
<p>Nevertheless, <code>std::</code> is allowed if you prefer it.</p>
<p><strong>3.</strong> Using functions from C when the ones are available in the standard C++ library.</p>
<p>This is acceptable if it is more efficient.</p>
<p>For example, use <code>memcpy</code> instead of <code>std::copy</code> for copying large chunks of memory.</p>
<p><strong>4.</strong> Multiline function arguments.</p>
<p>Any of the following wrapping styles are allowed:</p>
<div class="codehilite"><pre><span></span><span class="n">function</span><span class="p">(</span>
    <span class="n">T1</span> <span class="n">x1</span><span class="p">,</span>
    <span class="n">T2</span> <span class="n">x2</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">function</span><span class="p">(</span>
    <span class="kt">size_t</span> <span class="n">left</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">right</span><span class="p">,</span>
    <span class="k">const</span> <span class="o">&amp;</span> <span class="n">RangesInDataParts</span> <span class="n">ranges</span><span class="p">,</span>
    <span class="kt">size_t</span> <span class="n">limit</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">function</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">left</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">right</span><span class="p">,</span>
    <span class="k">const</span> <span class="o">&amp;</span> <span class="n">RangesInDataParts</span> <span class="n">ranges</span><span class="p">,</span>
    <span class="kt">size_t</span> <span class="n">limit</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">function</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">left</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">right</span><span class="p">,</span>
        <span class="k">const</span> <span class="o">&amp;</span> <span class="n">RangesInDataParts</span> <span class="n">ranges</span><span class="p">,</span>
        <span class="kt">size_t</span> <span class="n">limit</span><span class="p">)</span>
</pre></div>


<div class="codehilite"><pre><span></span><span class="n">function</span><span class="p">(</span>
        <span class="kt">size_t</span> <span class="n">left</span><span class="p">,</span>
        <span class="kt">size_t</span> <span class="n">right</span><span class="p">,</span>
        <span class="k">const</span> <span class="o">&amp;</span> <span class="n">RangesInDataParts</span> <span class="n">ranges</span><span class="p">,</span>
        <span class="kt">size_t</span> <span class="n">limit</span><span class="p">)</span>
</pre></div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../build_osx/" title="How to build ClickHouse on Mac OS X" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                How to build ClickHouse on Mac OS X
              </span>
            </div>
          </a>
        
        
          <a href="../tests/" title="How to run ClickHouse tests" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                How to run ClickHouse tests
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            ©2016–2018 Yandex LLC
          </div>
        
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.5165553b.js"></script>
      
      <script>app.initialize({version:"0.17.3",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>