---
machine_translated: true
machine_translated_rev: d734a8e46ddd7465886ba4133bff743c55190626
toc_priority: 78
toc_title: '2018'
---

## ClickHouseリリース18.16 {#clickhouse-release-18-16}

### ClickHouseリリース18.16.1、2018-12-21 {#clickhouse-release-18-16-1-2018-12-21}

#### バグ修正: {#bug-fixes}

-   ODBCソースで辞書を更新する際の問題を引き起こしたエラーを修正しました。 [\#3825](https://github.com/ClickHouse/ClickHouse/issues/3825), [\#3829](https://github.com/ClickHouse/ClickHouse/issues/3829)
-   集計関数のjitコンパイルは、lowcardinality列で動作するようになりました。 [\#3838](https://github.com/ClickHouse/ClickHouse/issues/3838)

#### 改善: {#improvements}

-   を追加しました `low_cardinality_allow_in_native_format` 設定(デフォルトで有効)。 無効にすると、LowCardinality列はSELECTクエリでは通常の列に変換され、INSERTクエリでは通常の列が必要になります。 [\#3879](https://github.com/ClickHouse/ClickHouse/pull/3879)

#### ビルドの改善: {#build-improvements}

-   MacOSとARM上のビルドの修正。

### ClickHouseリリース18.16.0、2018-12-14 {#clickhouse-release-18-16-0-2018-12-14}

#### 新しい機能: {#new-features}

-   `DEFAULT` 式の評価のために欠けるのはデータの読み込みに半構造の入力形式 (`JSONEachRow`, `TSKV`). この機能は、 `insert_sample_with_metadata` 設定。 [\#3555](https://github.com/ClickHouse/ClickHouse/pull/3555)
-   その `ALTER TABLE` クエリは現在、 `MODIFY ORDER BY` テーブル列を追加または削除するときの並べ替えキーの変更のアクション。 これは、 `MergeTree` 家族を追加タスクの場合はこのソートキー、など `SummingMergeTree`, `AggregatingMergeTree`、というように。 [\#3581](https://github.com/ClickHouse/ClickHouse/pull/3581) [\#3755](https://github.com/ClickHouse/ClickHouse/pull/3755)
-   のテーブルのため `MergeTree` これで、別の並べ替えキーを指定できます (`ORDER BY`)および索引 (`PRIMARY KEY`). ソートキーはインデックスよりも長くできます。 [\#3581](https://github.com/ClickHouse/ClickHouse/pull/3581)
-   を追加しました `hdfs` テーブル機能および `HDFS` テーブルエンジンの輸出入データHDFS. [chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/3617)
-   Base64での作業のための機能を追加しました: `base64Encode`, `base64Decode`, `tryBase64Decode`. [Alexander Krasheninnikov](https://github.com/ClickHouse/ClickHouse/pull/3350)
-   これで、パラメータを使用しての精度を設定できます `uniqCombined` 集約関数（HyperLogLogセルの数を選択する）。 [\#3406](https://github.com/ClickHouse/ClickHouse/pull/3406)
-   を追加しました `system.contributors` ClickHouseでコミットを行ったすべてのユーザーの名前を含むテーブル。 [\#3452](https://github.com/ClickHouse/ClickHouse/pull/3452)
-   のパーティションを省略する機能を追加しました `ALTER TABLE ... FREEZE` クエリをバックアップするには、全ての仕切ります。 [\#3514](https://github.com/ClickHouse/ClickHouse/pull/3514)
-   追加 `dictGet` と `dictGetOrDefault` 戻り値の型を指定する必要のない関数。 タイプは、辞書記述から自動的に決定されます。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3564)
-   これで、テーブルの説明で列のコメントを指定し、次の方法で変更できます `ALTER`. [\#3377](https://github.com/ClickHouse/ClickHouse/pull/3377)
-   読書はのために支えられる `Join` 単純なキーで表を入力します。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   これで、オプションを指定できます `join_use_nulls`, `max_rows_in_join`, `max_bytes_in_join`、と `join_overflow_mode` 作成するとき `Join` タイプテーブル。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   を追加しました `joinGet` を使用できるようにする関数 `Join` 辞書のようにテーブルを入力します。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   を追加しました `partition_key`, `sorting_key`, `primary_key`、と `sampling_key` に列 `system.tables` テーブルのための情報を提供するテーブル鍵となります。 [\#3609](https://github.com/ClickHouse/ClickHouse/pull/3609)
-   を追加しました `is_in_partition_key`, `is_in_sorting_key`, `is_in_primary_key`、と `is_in_sampling_key` に列 `system.columns` テーブル。 [\#3609](https://github.com/ClickHouse/ClickHouse/pull/3609)
-   を追加しました `min_time` と `max_time` に列 `system.parts` テーブル。 これらのカラムは人口がパーティショニングキーは表現で構成され `DateTime` 列。 [Emmanuel Donin de Rosière](https://github.com/ClickHouse/ClickHouse/pull/3800)

#### バグ修正: {#bug-fixes-1}

-   の修正とパフォーマンスの改善 `LowCardinality` データ型。 `GROUP BY` を使用して `LowCardinality(Nullable(...))`. の値を取得する `extremes`. 高階関数の処理。 `LEFT ARRAY JOIN`. 分散 `GROUP BY`. 返される関数 `Array`. の実行 `ORDER BY`. への書き込み `Distributed` テーブル(nicelulu)。 下位互換性のための `INSERT` 実装する古いクライアントからのクエリ `Native` プロトコル のサポート `LowCardinality` のために `JOIN`. した場合の性能改善作業を単一のストリームです。 [\#3823](https://github.com/ClickHouse/ClickHouse/pull/3823) [\#3803](https://github.com/ClickHouse/ClickHouse/pull/3803) [\#3799](https://github.com/ClickHouse/ClickHouse/pull/3799) [\#3769](https://github.com/ClickHouse/ClickHouse/pull/3769) [\#3744](https://github.com/ClickHouse/ClickHouse/pull/3744) [\#3681](https://github.com/ClickHouse/ClickHouse/pull/3681) [\#3651](https://github.com/ClickHouse/ClickHouse/pull/3651) [\#3649](https://github.com/ClickHouse/ClickHouse/pull/3649) [\#3641](https://github.com/ClickHouse/ClickHouse/pull/3641) [\#3632](https://github.com/ClickHouse/ClickHouse/pull/3632) [\#3568](https://github.com/ClickHouse/ClickHouse/pull/3568) [\#3523](https://github.com/ClickHouse/ClickHouse/pull/3523) [\#3518](https://github.com/ClickHouse/ClickHouse/pull/3518)
-   どのように固定 `select_sequential_consistency` オプションの作品。 従来、この設定が可能になり、不完全な結果が返され始めてから書き込み新しいパーティション [\#2863](https://github.com/ClickHouse/ClickHouse/pull/2863)
-   DDL実行時にデータベースが正しく指定されている `ON CLUSTER` クエリと `ALTER UPDATE/DELETE`. [\#3772](https://github.com/ClickHouse/ClickHouse/pull/3772) [\#3460](https://github.com/ClickHouse/ClickHouse/pull/3460)
-   データベースが正しく指定されたサブクエリの中でも色々と用意が必要なもの。 [\#3521](https://github.com/ClickHouse/ClickHouse/pull/3521)
-   でバグを修正しました `PREWHERE` と `FINAL` のために `VersionedCollapsingMergeTree`. [7167bfd7](https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1)
-   今すぐ使用できます `KILL QUERY` テーブルがロックされるのを待っているため、まだ開始されていないクエリを取り消す。 [\#3517](https://github.com/ClickHouse/ClickHouse/pull/3517)
-   クロックが真夜中に戻った場合の日付と時刻の計算を修正しました（これはイランで起こり、1981年から1983年にモスクワで起こりました）。 以前は、これは一日早く必要以上にリセットされる時間につながった、また、テキスト形式での日付と時刻の誤った書式設定を引き起こしました。 [\#3819](https://github.com/ClickHouse/ClickHouse/pull/3819)
-   いくつかのケースで修正されたバグ `VIEW` データベースを省略するサブクエリ。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3521)
-   Aから同時に読み取るときの競合状態を修正しました `MATERIALIZED VIEW` を削除する。 `MATERIALIZED VIEW` 内部を締めないことが原因で `MATERIALIZED VIEW`. [\#3404](https://github.com/ClickHouse/ClickHouse/pull/3404) [\#3694](https://github.com/ClickHouse/ClickHouse/pull/3694)
-   エラーを修正しました `Lock handler cannot be nullptr.` [\#3689](https://github.com/ClickHouse/ClickHouse/pull/3689)
-   固定クエリ処理 `compile_expressions` オプションを有効にすると(このデフォルトで有効です). のような非決定的な定数式 `now` 機能は展開されなくなりました。 [\#3457](https://github.com/ClickHouse/ClickHouse/pull/3457)
-   非定数スケールの引数を指定するとクラッシュする問題を修正しました `toDecimal32/64/128` 機能。
-   と配列を挿入しようとするとエラーを修正しました `NULL` の要素 `Values` 型の列にフォーマットする `Array` なし `Nullable` （もし `input_format_values_interpret_expressions` = 1). [\#3487](https://github.com/ClickHouse/ClickHouse/pull/3487) [\#3503](https://github.com/ClickHouse/ClickHouse/pull/3503)
-   固定連続エラーログイン `DDLWorker` ZooKeeperが利用できない場合。 [8f50c620](https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2)
-   の戻り値の型を修正しました `quantile*` からの機能 `Date` と `DateTime` 引数のタイプ。 [\#3580](https://github.com/ClickHouse/ClickHouse/pull/3580)
-   修正された `WITH` 式のない単純なエイリアスを指定する場合の句。 [\#3570](https://github.com/ClickHouse/ClickHouse/pull/3570)
-   名前付きサブクエリと修飾された列名を持つクエリの処理を修正しました `enable_optimize_predicate_expression` は有効です。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3588)
-   エラーを修正しました `Attempt to attach to nullptr thread group` マテリアライズドビューで作業する場合。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3623)
-   特定の不正な引数を渡すときにクラッシュを修正しました。 `arrayReverse` 機能。 [73e3a7b6](https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871)
-   のバッファオーバーフローを修正 `extractURLParameter` 機能。 パフォーマンスの向上 ゼロバイトを含む文字列の正しい処理を追加しました。 [141e9799](https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5)
-   バッファオーバーフローを修正 `lowerUTF8` と `upperUTF8` 機能。 これらの関数を実行する機能を削除しました `FixedString` 型引数。 [\#3662](https://github.com/ClickHouse/ClickHouse/pull/3662)
-   削除時のレアな競合状態を修正しました `MergeTree` テーブル。 [\#3680](https://github.com/ClickHouse/ClickHouse/pull/3680)
-   から読むときに競合状態を修正しました `Buffer` テーブルと同時に実行 `ALTER` または `DROP` ターゲットテーブルです。 [\#3719](https://github.com/ClickHouse/ClickHouse/pull/3719)
-   場合は、固定segfault `max_temporary_non_const_columns` 制限を超えました。 [\#3788](https://github.com/ClickHouse/ClickHouse/pull/3788)

#### 改善: {#improvements-1}

-   サーバーは、処理された構成ファイルを `/etc/clickhouse-server/` ディレクトリ。 代わりに、それらを保存します `preprocessed_configs` ディレクトリ内 `path`. これはことを意味します `/etc/clickhouse-server/` ディレク `clickhouse` ユーザーが改善されます。 [\#2443](https://github.com/ClickHouse/ClickHouse/pull/2443)
-   その `min_merge_bytes_to_use_direct_io` optionはデフォルトで10GiBに設定されています。 MergeTreeファミリーからテーブルの大部分を形成するマージは、 `O_DIRECT` 過度のページキャッシュの削除を防止するモード。 [\#3504](https://github.com/ClickHouse/ClickHouse/pull/3504)
-   テーブルの非常に多数がある場合に加速サーバーの開始。 [\#3398](https://github.com/ClickHouse/ClickHouse/pull/3398)
-   接続プールとhttpを追加しました `Keep-Alive` レプリカ間の接続のため。 [\#3594](https://github.com/ClickHouse/ClickHouse/pull/3594)
-   クエリの構文が無効な場合は、 `400 Bad Request` コードは `HTTP` インターフェイス(500返還し上げます。 [31bc680a](https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab)
-   その `join_default_strictness` オプションは `ALL` 互換性のためにデフォルトで。 [120e2cbe](https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe)
-   ログの削除先 `stderr` から `re2` 無効または複雑な正規表現のライブラリ。 [\#3723](https://github.com/ClickHouse/ClickHouse/pull/3723)
-   のために追加 `Kafka` テーブルエンジン:Kafkaからの読み取りを開始する前にサブスクリプションを確認します。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3396)
-   その `cityHash64`, `farmHash64`, `metroHash64`, `sipHash64`, `halfMD5`, `murmurHash2_32`, `murmurHash2_64`, `murmurHash3_32`、と `murmurHash3_64` 関数は現在、任意の数の引数とタプルの形の引数に対して機能します。 [\#3451](https://github.com/ClickHouse/ClickHouse/pull/3451) [\#3519](https://github.com/ClickHouse/ClickHouse/pull/3519)
-   その `arrayReverse` 関数は現在、配列の任意のタイプで動作します。 [73e3a7b6](https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871)
-   オプションのパラメーターを追加しました。 `timeSlots` 機能。 [Kirill Shvakov](https://github.com/ClickHouse/ClickHouse/pull/3724)
-   のために `FULL` と `RIGHT JOIN`、を `max_block_size` 設定は、右のテーブルからの非結合データのストリームに使用されます。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3699)
-   を追加しました `--secure` コマンドライン引数in `clickhouse-benchmark` と `clickhouse-performance-test` TLSを有効にする。 [\#3688](https://github.com/ClickHouse/ClickHouse/pull/3688) [\#3690](https://github.com/ClickHouse/ClickHouse/pull/3690)
-   Aの構造のときの型変換 `Buffer` type tableは、コピー先のテーブルの構造と一致しません。 [Vitaly Baranov](https://github.com/ClickHouse/ClickHouse/pull/3603)
-   を追加しました `tcp_keep_alive_timeout` オプションをキープアライブパケットの後、運動不足のために指定された時間間隔で出ています。 [\#3441](https://github.com/ClickHouse/ClickHouse/pull/3441)
-   パーティションキーの値の不要なクォートを削除しました。 `system.parts` テーブルが単一の列で構成されている場合。 [\#3652](https://github.com/ClickHouse/ClickHouse/pull/3652)
-   モジュロ機能はのために働きます `Date` と `DateTime` データ型。 [\#3385](https://github.com/ClickHouse/ClickHouse/pull/3385)
-   の同義語を追加しました `POWER`, `LN`, `LCASE`, `UCASE`, `REPLACE`, `LOCATE`, `SUBSTR`、と `MID` 機能。 [\#3774](https://github.com/ClickHouse/ClickHouse/pull/3774) [\#3763](https://github.com/ClickHouse/ClickHouse/pull/3763) いくつかの関数名は、SQL標準との互換性のために大文字と小文字を区別しません。 構文砂糖を追加しました `SUBSTRING(expr FROM start FOR length)` SQLとの互換性のために。 [\#3804](https://github.com/ClickHouse/ClickHouse/pull/3804)
-   に能力を追加しました `mlock` 対応するメモリページ `clickhouse-server` メモリから強制的に解放されないようにするための実行可能コード。 この機能はデフォルトでは無効です。 [\#3553](https://github.com/ClickHouse/ClickHouse/pull/3553)
-   した場合の性能改善からの読み出し `O_DIRECT` （とともに `min_bytes_to_use_direct_io` オプション有効)。 [\#3405](https://github.com/ClickHouse/ClickHouse/pull/3405)
-   の改善された性能 `dictGet...OrDefault` 定数キー引数と非定数既定の引数の関数。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3563)
-   その `firstSignificantSubdomain` 関数は現在、ドメインを処理します `gov`, `mil`、と `edu`. [Igor Hatarist](https://github.com/ClickHouse/ClickHouse/pull/3601) パフォーマンスの向上 [\#3628](https://github.com/ClickHouse/ClickHouse/pull/3628)
-   起動するためのカスタム環境変数を指定する機能 `clickhouse-server` を使用して `SYS-V init.d` 定義によるスクリプト `CLICKHOUSE_PROGRAM_ENV` で `/etc/default/clickhouse`.
    [Pavlo Bashynskyi](https://github.com/ClickHouse/ClickHouse/pull/3612)
-   Clickhouse-server initスクリプトの戻りコードを修正します。 [\#3516](https://github.com/ClickHouse/ClickHouse/pull/3516)
-   その `system.metrics` テーブルは今持っている `VersionInteger` メトリック、および `system.build_options` 追加された行があります `VERSION_INTEGER` これには、ClickHouseバージョンの数値形式が含まれます。 `18016000`. [\#3644](https://github.com/ClickHouse/ClickHouse/pull/3644)
-   比較する能力を削除しました `Date` 型番号のようなエラーの可能性を回避 `date = 2018-12-17` 日付の前後の引用符が誤って省略されている場所。 [\#3687](https://github.com/ClickHouse/ClickHouse/pull/3687)
-   のようなステートフルな関数の動作を修正 `rowNumberInAllBlocks`. 彼らは以前に起因するクエリ分析中に開始に一つの数より大きかった結果を出力します。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3729)
-   この `force_restore_data` ファイルは削除できません。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3794)

#### ビルドの改善: {#build-improvements-1}

-   更新された `jemalloc` 潜在的なメモリリークを修正するライブラリ。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3557)
-   プロファイル `jemalloc` ビルドをデバッグするには、既定で有効になります。 [2cc82f5c](https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15)
-   ときにのみ統合テストを実行する機能を追加しました `Docker` は、システムにインス [\#3650](https://github.com/ClickHouse/ClickHouse/pull/3650)
-   選択クエリでファズ式テストを追加しました。 [\#3442](https://github.com/ClickHouse/ClickHouse/pull/3442)
-   コミットのストレステストを追加しました。 [\#3438](https://github.com/ClickHouse/ClickHouse/pull/3438)
-   Dockerイメージでclickhouse-serverを起動する方法を改善しました。 [Elghazal Ahmed](https://github.com/ClickHouse/ClickHouse/pull/3663)
-   のためのdocker画像の追加支援のための初期化データベース用のファイルを `/docker-entrypoint-initdb.d` ディレクトリ。 [コンスタンチン-レベデフ](https://github.com/ClickHouse/ClickHouse/pull/3695)
-   ARM上のビルドの修正。 [\#3709](https://github.com/ClickHouse/ClickHouse/pull/3709)

#### 下位互換性のない変更: {#backward-incompatible-changes}

-   比較する能力を削除しました `Date` 数字で入力します。 代わりに `toDate('2018-12-18') = 17883` 明示的な型変換を使用する必要があります `= toDate(17883)` [\#3687](https://github.com/ClickHouse/ClickHouse/pull/3687)

## ClickHouseリリース18.14 {#clickhouse-release-18-14}

### ClickHouseリリース18.14.19、2018-12-19 {#clickhouse-release-18-14-19-2018-12-19}

#### バグ修正: {#bug-fixes-2}

-   ODBCソースで辞書を更新する際の問題を引き起こしたエラーを修正しました。 [\#3825](https://github.com/ClickHouse/ClickHouse/issues/3825), [\#3829](https://github.com/ClickHouse/ClickHouse/issues/3829)
-   DDL実行時にデータベースが正しく指定されている `ON CLUSTER` クエリ。 [\#3460](https://github.com/ClickHouse/ClickHouse/pull/3460)
-   場合は、固定segfault `max_temporary_non_const_columns` 制限を超えました。 [\#3788](https://github.com/ClickHouse/ClickHouse/pull/3788)

#### ビルドの改善: {#build-improvements-2}

-   ARM上のビルドの修正。

### ClickHouseリリース18.14.18、2018-12-04 {#clickhouse-release-18-14-18-2018-12-04}

#### バグ修正: {#bug-fixes-3}

-   固定エラーで `dictGet...` タイプの辞書の関数 `range`、引数の一方が定数であり、他方が定数でない場合。 [\#3751](https://github.com/ClickHouse/ClickHouse/pull/3751)
-   メッセー `netlink: '...': attribute type 1 has an invalid length` Linuxカーネルログに印刷するには、linuxカーネルの新鮮なバージョンでのみ起こっていました。 [\#3749](https://github.com/ClickHouse/ClickHouse/pull/3749)
-   機能の固定segfault `empty` の議論のために `FixedString` タイプ。 [ダニエルダオ-クアン-ミン](https://github.com/ClickHouse/ClickHouse/pull/3703)
-   の大きな値を使用して過度のメモリ割り当てを修正 `max_query_size` 設定(メモリチャンクの `max_query_size` バイトは一度に事前に割り当てられました）。 [\#3720](https://github.com/ClickHouse/ClickHouse/pull/3720)

#### ビルドの変更: {#build-changes}

-   固定の構築をllvm/clangライブラリのバージョン7のosのパッケージ(これらのライブラリを利用しています実行時のクエリを集める [\#3582](https://github.com/ClickHouse/ClickHouse/pull/3582)

### ClickHouseリリース18.14.17、2018-11-30 {#clickhouse-release-18-14-17-2018-11-30}

#### バグ修正: {#bug-fixes-4}

-   固定の場合には、odbc橋工程終了しなかったのサーバーです。 [\#3642](https://github.com/ClickHouse/ClickHouse/pull/3642)
-   に固定同期挿入 `Distributed` リモートテーブルの列リストとは異なる列リストを持つテーブル。 [\#3673](https://github.com/ClickHouse/ClickHouse/pull/3673)
-   MergeTreeテーブルをドロップしたときにクラッシュする稀な競合状態を修正しました。 [\#3643](https://github.com/ClickHouse/ClickHouse/pull/3643)
-   クエリスレッドの作成が失敗した場合のクエリのデッドロックを修正しました `Resource temporarily unavailable` エラー。 [\#3643](https://github.com/ClickHouse/ClickHouse/pull/3643)
-   の固定解析 `ENGINE` ときの句 `CREATE AS table` 構文が使用され、 `ENGINE` の前に句が指定されました。 `AS table` （エラーの結果、指定されたエンジンが無視されました）。 [\#3692](https://github.com/ClickHouse/ClickHouse/pull/3692)

### ClickHouseリリース18.14.15、2018-11-21 {#clickhouse-release-18-14-15-2018-11-21}

#### バグ修正: {#bug-fixes-5}

-   メモリチャンクのサイズは、型の列を逆シリアル化しながら過大評価されました `Array(String)` それはにつながる “Memory limit exceeded” エラー。 この問題はバージョン18.12.13に登場しました。 [\#3589](https://github.com/ClickHouse/ClickHouse/issues/3589)

### ClickHouseリリース18.14.14、2018-11-20 {#clickhouse-release-18-14-14-2018-11-20}

#### バグ修正: {#bug-fixes-6}

-   固定 `ON CLUSTER` クエリがクラスタ設定の確保(フラグ `<secure>`). [\#3599](https://github.com/ClickHouse/ClickHouse/pull/3599)

#### ビルドの変更: {#build-changes-1}

-   問題を修正しました（システムからのllvm-7、macos) [\#3582](https://github.com/ClickHouse/ClickHouse/pull/3582)

### ClickHouseリリース18.14.13、2018-11-08 {#clickhouse-release-18-14-13-2018-11-08}

#### バグ修正: {#bug-fixes-7}

-   修正された `Block structure mismatch in MergingSorted stream` エラー。 [\#3162](https://github.com/ClickHouse/ClickHouse/issues/3162)
-   固定 `ON CLUSTER` クラスタ設定でセキュリティで保護された接続がオンになっている場合のクエリ `<secure>` フラグ）。 [\#3465](https://github.com/ClickHouse/ClickHouse/pull/3465)
-   使用されるクエリのエラーを修正しました `SAMPLE`, `PREWHERE` とエイリアス列。 [\#3543](https://github.com/ClickHouse/ClickHouse/pull/3543)
-   レアを修正しました `unknown compression method` エラー時 `min_bytes_to_use_direct_io` 設定は有効でした。 [3544](https://github.com/ClickHouse/ClickHouse/pull/3544)

#### 性能の改善: {#performance-improvements}

-   とクエリの固定パフォーマンス回帰 `GROUP BY` AMD EPYCプロセッサで実行するときのUInt16またはDate型の列の数。 [Igor Lapko](https://github.com/ClickHouse/ClickHouse/pull/3512)
-   長い文字列を処理するクエリのパフォーマン [\#3530](https://github.com/ClickHouse/ClickHouse/pull/3530)

#### ビルドの改善: {#build-improvements-3}

-   Arcadiaビルドを簡素化するための改善。 [\#3475](https://github.com/ClickHouse/ClickHouse/pull/3475), [\#3535](https://github.com/ClickHouse/ClickHouse/pull/3535)

### ClickHouseリリース18.14.12、2018-11-02 {#clickhouse-release-18-14-12-2018-11-02}

#### バグ修正: {#bug-fixes-8}

-   固定クラッシュに当社では豊富な種類の名前のないサブクエリ. [\#3505](https://github.com/ClickHouse/ClickHouse/pull/3505)
-   不正なクエリを生成する修正（空の `WHERE` 句)外部データベースを照会するとき。 [ホティッド](https://github.com/ClickHouse/ClickHouse/pull/3477)
-   ODBC辞書で間違ったタイムアウト値を使用して修正。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3511)

### ClickHouseリリース18.14.11、2018-10-29 {#clickhouse-release-18-14-11-2018-10-29}

#### バグ修正: {#bug-fixes-9}

-   エラーを修正しました `Block structure mismatch in UNION stream: different number of columns` 制限クエリで。 [\#2156](https://github.com/ClickHouse/ClickHouse/issues/2156)
-   固定誤差が統合データテーブルを含む配列内の入れ子構造です。 [\#3397](https://github.com/ClickHouse/ClickHouse/pull/3397)
-   修正された不正なクエリの結果 `merge_tree_uniform_read_distribution` 設定は無効になっています(既定で有効になっています)。 [\#3429](https://github.com/ClickHouse/ClickHouse/pull/3429)
-   ネイティブ形式の分散テーブルへの挿入エラーを修正しました。 [\#3411](https://github.com/ClickHouse/ClickHouse/issues/3411)

### ClickHouseリリース18.14.10、2018-10-23 {#clickhouse-release-18-14-10-2018-10-23}

-   その `compile_expressions` 既定では、設定(式のJITコンパイル)は無効になっています。 [\#3410](https://github.com/ClickHouse/ClickHouse/pull/3410)
-   その `enable_optimize_predicate_expression` 設定はデフォルトでは無効です。

### ClickHouseリリース18.14.9、2018-10-16 {#clickhouse-release-18-14-9-2018-10-16}

#### 新しい機能: {#new-features-1}

-   その `WITH CUBE` の修飾子 `GROUP BY` （代替構文 `GROUP BY CUBE(...)` また利用できます）。 [\#3172](https://github.com/ClickHouse/ClickHouse/pull/3172)
-   を追加しました `formatDateTime` 機能。 [Alexandr Krasheninnikov](https://github.com/ClickHouse/ClickHouse/pull/2770)
-   を追加しました `JDBC` テーブルエンジンと `jdbc` 表関数(clickhouse-jdbc-bridgeのインストールが必要) [Alexandr Krasheninnikov](https://github.com/ClickHouse/ClickHouse/pull/3210)
-   ISO週番号を操作するための機能を追加しました: `toISOWeek`, `toISOYear`, `toStartOfISOYear`、と `toDayOfYear`. [\#3146](https://github.com/ClickHouse/ClickHouse/pull/3146)
-   今すぐ使用できます `Nullable` の列 `MySQL` と `ODBC` テーブル。 [\#3362](https://github.com/ClickHouse/ClickHouse/pull/3362)
-   ネストされたデータ構造は、ネストされたオブジェ `JSONEachRow` フォーマット。 を追加しました `input_format_import_nested_json` 設定。 [ベロマン雲館](https://github.com/ClickHouse/ClickHouse/pull/3144)
-   並列処理は、多くの利用可能です `MATERIALIZED VIEW`sデータを挿入するとき。 を見る `parallel_view_processing` 設定。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3208)
-   を追加しました `SYSTEM FLUSH LOGS` クエリ(次のようなシステムテーブルへの強制ログフラッシュ `query_log`) [\#3321](https://github.com/ClickHouse/ClickHouse/pull/3321)
-   これで、事前定義を使用できます `database` と `table` 宣言するときのマクロ `Replicated` テーブル。 [\#3251](https://github.com/ClickHouse/ClickHouse/pull/3251)
-   読む能力を追加しました `Decimal` 工学表記で値を入力します(十の累乗を示します)。 [\#3153](https://github.com/ClickHouse/ClickHouse/pull/3153)

#### 実験の特徴: {#experimental-features}

-   のgroup by句の最適化 `LowCardinality data types.` [\#3138](https://github.com/ClickHouse/ClickHouse/pull/3138)
-   のための式の最適化された計算 `LowCardinality data types.` [\#3200](https://github.com/ClickHouse/ClickHouse/pull/3200)

#### 改善: {#improvements-2}

-   クエリのメモリ消費量を大幅に削減 `ORDER BY` と `LIMIT`. を見る `max_bytes_before_remerge_sort` 設定。 [\#3205](https://github.com/ClickHouse/ClickHouse/pull/3205)
-   の不在で `JOIN` (`LEFT`, `INNER`, …), `INNER JOIN` が想定される。 [\#3147](https://github.com/ClickHouse/ClickHouse/pull/3147)
-   修飾されたアスタリスクは `JOIN`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/3202)
-   その `ODBC` テーブルエンジンが正しく選択の方法のために引用識別子のSQL方言のリモートデータベースです。 [Alexandr Krasheninnikov](https://github.com/ClickHouse/ClickHouse/pull/3210)
-   その `compile_expressions` 既定では、設定(式のJITコンパイル)が有効になっています。
-   同時drop database/table if existsとcreate database/table if not existsの動作を修正しました。 以前は、 `CREATE DATABASE ... IF NOT EXISTS` クエリが返すエラーメッセージ “File … already exists”、と `CREATE TABLE ... IF NOT EXISTS` と `DROP TABLE IF EXISTS` クエリが返されます `Table ... is creating or attaching right now`. [\#3101](https://github.com/ClickHouse/ClickHouse/pull/3101)
-   MYSQLまたはODBCテーブルからクエリを実行するときに、定数の右半分を持つLIKE式がリモートサーバーに渡されます。 [\#3182](https://github.com/ClickHouse/ClickHouse/pull/3182)
-   MYSQLおよびODBCテーブルからクエリを実行すると、WHERE句の定数式との比較がリモートサーバーに渡されます。 以前は、定数との比較のみが渡されました。 [\#3182](https://github.com/ClickHouse/ClickHouse/pull/3182)
-   端末の行幅の正しい計算 `Pretty` 象形文字の文字列を含む形式。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/3257).
-   `ON CLUSTER` 指定することができるため `ALTER UPDATE` クエリ。
-   性能向上のためのデータを読み込むには `JSONEachRow` フォーマット。 [\#3332](https://github.com/ClickHouse/ClickHouse/pull/3332)
-   の同義語を追加しました `LENGTH` と `CHARACTER_LENGTH` 互換性のための機能。 その `CONCAT` 関数では、大文字と小文字は区別されなくなりました。 [\#3306](https://github.com/ClickHouse/ClickHouse/pull/3306)
-   を追加しました `TIMESTAMP` の同義語 `DateTime` タイプ。 [\#3390](https://github.com/ClickHouse/ClickHouse/pull/3390)
-   ログ行がクエリに関連していない場合でも、サーバーログには常にquery\_id用に予約された領域があります。 それによる解析サーバーテキストログとして第三者ツールです。
-   クエリによるメモリ消費は、次のレベルの整数のギガバイトを超えるとログに記録されます。 [\#3205](https://github.com/ClickHouse/ClickHouse/pull/3205)
-   追加の互換性モードの場合はライブラリを使用するネイティブプロトコルを送の少ないカラムによる間違い、サーバーの期待に挿入モードです。 このシナリオは、clickhouse-cppライブラリを使用する場合に可能でした。 従来、このシナリオのサーバーンダリングする能力があります。 [\#3171](https://github.com/ClickHouse/ClickHouse/pull/3171)
-   ユーザー定義のwhere式 `clickhouse-copier`、今使用することができ `partition_key` エイリアス(追加フィルタリングによるソーステーブルの分割). これがなければならないときに便利でのパーティショニングスキーマの変化の中で複製、変更するわけです。 [\#3166](https://github.com/ClickHouse/ClickHouse/pull/3166)
-   のワークフロー `Kafka` エンジンとして、バックグラウンドスレッドプールのために自動的に減速のデータを読高ます。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3215).
-   読書のためのサポート `Tuple` と `Nested` 以下のような構造体の値 `struct` で `Cap'n'Proto format`. [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3216)
-   トップレベルドメインのリスト `firstSignificantSubdomain` 機能の現在のドメイン `biz`. [デカシール](https://github.com/ClickHouse/ClickHouse/pull/3219)
-   外部辞書の設定で, `null_value` デフォルトのデータ型の値として解釈されます。 [\#3330](https://github.com/ClickHouse/ClickHouse/pull/3330)
-   のサポート `intDiv` と `intDivOrZero` 機能のための `Decimal`. [b48402e8](https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264)
-   のサポート `Date`, `DateTime`, `UUID`、と `Decimal` のキーとしてタイプします `sumMap` 集計関数。 [\#3281](https://github.com/ClickHouse/ClickHouse/pull/3281)
-   のサポート `Decimal` 外部ディクショナリのデータ型。 [\#3324](https://github.com/ClickHouse/ClickHouse/pull/3324)
-   のサポート `Decimal` データタイプ `SummingMergeTree` テーブル。 [\#3348](https://github.com/ClickHouse/ClickHouse/pull/3348)
-   のための追加された専門分野 `UUID` で `if`. [\#3366](https://github.com/ClickHouse/ClickHouse/pull/3366)
-   数を減らしましたの `open` と `close` システムコールからの読み取り `MergeTree table`. [\#3283](https://github.com/ClickHouse/ClickHouse/pull/3283)
-   A `TRUNCATE TABLE` クエリは任意のレプリカで実行できます(クエリはリーダーレプリカに渡されます)。 [Kirill Shvakov](https://github.com/ClickHouse/ClickHouse/pull/3375)

#### バグ修正: {#bug-fixes-10}

-   との問題を修正しました `Dictionary` テーブルのため `range_hashed` 辞書だ このエラーはバージョン18.12.17で発生しました。 [\#1702](https://github.com/ClickHouse/ClickHouse/pull/1702)
-   ロード時にエラーを修正 `range_hashed` 辞書(メッセージ `Unsupported type Nullable (...)`). このエラーはバージョン18.12.17で発生しました。 [\#3362](https://github.com/ClickHouse/ClickHouse/pull/3362)
-   で修正されたエラー `pointInPolygon` 多数の頂点が互いに近接して配置されているポリゴンの不正確な計算の蓄積による関数。 [\#3331](https://github.com/ClickHouse/ClickHouse/pull/3331) [\#3341](https://github.com/ClickHouse/ClickHouse/pull/3341)
-   データパーツをマージした後、結果のパーツのチェックサムが別のレプリカで同じマージの結果と異なる場合、マージの結果が削除され、データパーツが別のレプリ しかし、データパーツをダウンロードした後、そのパーツがすでに存在するというエラーのため（マージ後にデータパーツが何らかの遅延で削除されたため）、ワーキング これにより、同じデータを周期的にダウンロードしようとした。 [\#3194](https://github.com/ClickHouse/ClickHouse/pull/3194)
-   クエリによる総メモリ消費の誤った計算を修正しました（誤った計算のために、 `max_memory_usage_for_all_queries` 設定が間違って働いたと `MemoryTracking` メトリックの値が正しくない)。 このエラーはバージョン18.12.13で発生しました。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3344)
-   の機能を修正しました `CREATE TABLE ... ON CLUSTER ... AS SELECT ...` このエラーはバージョン18.12.13で発生しました。 [\#3247](https://github.com/ClickHouse/ClickHouse/pull/3247)
-   のためのデータ構造の固定不要な準備 `JOIN`サーバー上では、クエリを開始するサーバー上の `JOIN` リモートサーバーでのみ実行されます。 [\#3340](https://github.com/ClickHouse/ClickHouse/pull/3340)
-   で修正されたバグ `Kafka` エンジン：データの読み取りを開始するときの例外後のデッドロック、完了時のロック [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3215).
-   のために `Kafka` テーブル、オプション `schema` のスキー `Cap'n'Proto` フォーマット)。 [Vojtech Splichal](https://github.com/ClickHouse/ClickHouse/pull/3150)
-   ZooKeeperサーバーのアンサンブルに、接続を受け入れるがハンドシェイクに応答する代わりにすぐに閉じるサーバーがある場合、ClickHouseは別のサーバーを接続することを 以前は、これはエラーを生成しました `Cannot read all data. Bytes read: 0. Bytes expected: 4.` サーバーは起動できませんでした [8218cf3a](https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9)
-   ZooKeeperサーバーの集合にDNSクエリがエラーを返すサーバーが含まれている場合、これらのサーバーは無視されます。 [17b8e209](https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29)
-   固定型変換の間 `Date` と `DateTime` データを挿入するとき `VALUES` フォーマット(if `input_format_values_interpret_expressions = 1`). 以前は、Unixエポック時間の日数の数値とUnixタイムスタンプの間で変換が行われ、予期しない結果が生じました。 [\#3229](https://github.com/ClickHouse/ClickHouse/pull/3229)
-   間の補正型変換 `Decimal` そして整数数。 [\#3211](https://github.com/ClickHouse/ClickHouse/pull/3211)
-   で修正されたエラー `enable_optimize_predicate_expression` 設定。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3231)
-   デフォルト以外のcsv区切り記号が使用されている場合、浮動小数点数を使用したcsv形式の解析エラーが修正されました `;` [\#3155](https://github.com/ClickHouse/ClickHouse/pull/3155)
-   修正された `arrayCumSumNonNegative` 関数（アキュムレータがゼロより小さい場合、負の値は累積されません）。 [Aleksey Studnev](https://github.com/ClickHouse/ClickHouse/pull/3163)
-   固定方法 `Merge` テーブルの上に動作 `Distributed` 使用する場合のテーブル `PREWHERE`. [\#3165](https://github.com/ClickHouse/ClickHouse/pull/3165)
-   のバグ修正 `ALTER UPDATE` クエリ。
-   で修正されたバグ `odbc` バージョン18.12に登場したテーブル関数。 [\#3197](https://github.com/ClickHouse/ClickHouse/pull/3197)
-   との集計関数の動作を修正しました `StateArray` コンビネーター [\#3188](https://github.com/ClickHouse/ClickHouse/pull/3188)
-   分割するときにクラッシュを修正 `Decimal` ゼロによる値。 [69dd6609](https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179)
-   以下を使用した操作のタイプの固定出力 `Decimal` そして整数引数。 [\#3224](https://github.com/ClickHouse/ClickHouse/pull/3224)
-   中にsegfaultを修正しました `GROUP BY` に `Decimal128`. [3359ba06](https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a)
-   その `log_query_threads` 設定(クエリ実行の各スレッドに関する情報のロギング)は、次の場合にのみ有効になります `log_queries` オプション(照会に関する情報のロギング)は1に設定されます。 ので、 `log_query_threads` このオプションは既定で有効になっています。 [\#3241](https://github.com/ClickHouse/ClickHouse/pull/3241)
-   分位数集計関数の分散操作におけるエラーを修正しました(エラーメッセージ `Not found column quantile...`). [292a8855](https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664)
-   同時にバージョン18.12.17サーバーと古いサーバーのクラスタで作業するときの互換性の問題を修正しました。 固定長および固定長以外のキーを持つ分散クエリの場合、集計するデータが大量にあった場合、返されるデータは常に完全に集計されるとは限りません [\#3254](https://github.com/ClickHouse/ClickHouse/pull/3254)
-   の置換の処理を修正しました。 `clickhouse-performance-test` クエリにテストで宣言された置換の一部のみが含まれている場合。 [\#3263](https://github.com/ClickHouse/ClickHouse/pull/3263)
-   使用時にエラーが修正されました `FINAL` と `PREWHERE`. [\#3298](https://github.com/ClickHouse/ClickHouse/pull/3298)
-   使用時にエラーが修正されました `PREWHERE` 中に追加された列の上に `ALTER`. [\#3298](https://github.com/ClickHouse/ClickHouse/pull/3298)
-   の不在のためのチェックを追加しました `arrayJoin` のために `DEFAULT` と `MATERIALIZED` 式。 以前は, `arrayJoin` データ挿入時にエラーが発生しました。 [\#3337](https://github.com/ClickHouse/ClickHouse/pull/3337)
-   の不在のためのチェックを追加しました `arrayJoin` で `PREWHERE` 句。 以前は、このようなメッセージに `Size ... doesn't match` または `Unknown compression method` クエリを実行するとき。 [\#3357](https://github.com/ClickHouse/ClickHouse/pull/3357)
-   修正されたsegfaultは、置換された最適化の後にまれに発生する可能性があり、式の中で対応すると等価性評価からチェーン。 [liuyimin-bytedance](https://github.com/ClickHouse/ClickHouse/pull/3339)
-   マイナーな訂正への `clickhouse-benchmark` 実行されたクエリの数は、シャットダウン時および反復回数を制限するために、より正確に計算されるようになりました。 [\#3351](https://github.com/ClickHouse/ClickHouse/pull/3351) [\#3352](https://github.com/ClickHouse/ClickHouse/pull/3352)

#### 下位互換性のない変更: {#backward-incompatible-changes-1}

-   削除された `allow_experimental_decimal_type` オプション。 その `Decimal` データ型は、デフォルトで使用できます。 [\#3329](https://github.com/ClickHouse/ClickHouse/pull/3329)

## ClickHouseリリース18.12 {#clickhouse-release-18-12}

### ClickHouseリリース18.12.17,2018-09-16 {#clickhouse-release-18-12-17-2018-09-16}

#### 新しい機能: {#new-features-2}

-   `invalidate_query` (外部ディクショナリを更新する必要があるかどうかを確認するクエリを指定する機能)。 `clickhouse` ソース。 [\#3126](https://github.com/ClickHouse/ClickHouse/pull/3126)
-   使用する機能を追加しました `UInt*`, `Int*`、と `DateTime` データ型(データ型と共に `Date` タイプ）として `range_hashed` 範囲の境界を定義する外部ディクショナリキー。 さて `NULL` 開いている範囲を指定するために使用できます。 [Vasily Nemkov](https://github.com/ClickHouse/ClickHouse/pull/3123)
-   その `Decimal` タイプ今サポート `var*` と `stddev*` 集計関数。 [\#3129](https://github.com/ClickHouse/ClickHouse/pull/3129)
-   その `Decimal` タイプに対応しま数理機能 (`exp`, `sin` というように。) [\#3129](https://github.com/ClickHouse/ClickHouse/pull/3129)
-   その `system.part_log` テーブルは今持っている `partition_id` コラム [\#3089](https://github.com/ClickHouse/ClickHouse/pull/3089)

#### バグ修正: {#bug-fixes-11}

-   `Merge` 今正しくオンに動作します `Distributed` テーブル。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3159)
-   固定された非互換性（上の不要な依存関係 `glibc` クリックハウスを実行することが不可能になったバージョン） `Ubuntu Precise` と古いバージョン。 この非互換性はバージョン18.12.13で発生しました。 [\#3130](https://github.com/ClickHouse/ClickHouse/pull/3130)
-   で修正されたエラー `enable_optimize_predicate_expression` 設定。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3107)
-   18.12.13より前のバージョンのレプリカのクラスターを操作し、新しいバージョンのテーブルの新しいレプリカをサーバーに作成する際に、下位互換性の問題を `Can not clone replica, because the ... updated to new ClickHouse version` これは論理的ですが、起こるべきではありません）。 [\#3122](https://github.com/ClickHouse/ClickHouse/pull/3122)

#### 下位互換性のない変更: {#backward-incompatible-changes-2}

-   その `enable_optimize_predicate_expression` optionはデフォルトで有効になっています（これは楽観的です）。 列名の検索に関連するクエリ分析エラーが発生した場合は、次のように設定します `enable_optimize_predicate_expression` に0. [冬張](https://github.com/ClickHouse/ClickHouse/pull/3107)

### ClickHouseリリース18.12.14,2018-09-13 {#clickhouse-release-18-12-14-2018-09-13}

#### 新しい機能: {#new-features-3}

-   のサポートを追加 `ALTER UPDATE` クエリ。 [\#3035](https://github.com/ClickHouse/ClickHouse/pull/3035)
-   を追加しました `allow_ddl` DDLクエリへのユーザーのアクセスを制限するオプション。 [\#3104](https://github.com/ClickHouse/ClickHouse/pull/3104)
-   を追加しました `min_merge_bytes_to_use_direct_io` のための選択 `MergeTree` マージの合計サイズのしきい値を設定することができます（しきい値を超えると、データパーツファイルはO\_DIRECTを使用して処理されます）。 [\#3117](https://github.com/ClickHouse/ClickHouse/pull/3117)
-   その `system.merges` システムテーブルは現在 `partition_id` コラム [\#3099](https://github.com/ClickHouse/ClickHouse/pull/3099)

#### 改善 {#improvements-3}

-   場合のデータ部分を据え置き期間中、突然変異なダウンロードによるレプリカ. [\#3103](https://github.com/ClickHouse/ClickHouse/pull/3103)
-   オートコンプリートは、操作時に設定の名前に使用できます `clickhouse-client`. [\#3106](https://github.com/ClickHouse/ClickHouse/pull/3106)

#### バグ修正: {#bug-fixes-12}

-   の要素である配列のサイズのチェックを追加しました `Nested` 挿入時にfieldsを入力します。 [\#3118](https://github.com/ClickHouse/ClickHouse/pull/3118)
-   と外部辞書を更新するエラーを修正しました `ODBC` ソースと `hashed` ストレージ。 このエラーはバージョン18.12.13で発生しました。
-   クエリから一時テーブルを作成するときにクラッシュする問題を修正 `IN` 条件。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3098)
-   持つことができる配列の集計関数のエラーを修正しました `NULL` 要素。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3097)

### ClickHouseリリース18.12.13,2018-09-10 {#clickhouse-release-18-12-13-2018-09-10}

#### 新しい機能: {#new-features-4}

-   を追加しました `DECIMAL(digits, scale)` データ型 (`Decimal32(scale)`, `Decimal64(scale)`, `Decimal128(scale)`). 有効にするには、次の設定を使用します `allow_experimental_decimal_type`. [\#2846](https://github.com/ClickHouse/ClickHouse/pull/2846) [\#2970](https://github.com/ClickHouse/ClickHouse/pull/2970) [\#3008](https://github.com/ClickHouse/ClickHouse/pull/3008) [\#3047](https://github.com/ClickHouse/ClickHouse/pull/3047)
-   新しい `WITH ROLLUP` の修飾子 `GROUP BY` （代替構文: `GROUP BY ROLLUP(...)`). [\#2948](https://github.com/ClickHouse/ClickHouse/pull/2948)
-   JOINを使用したクエリでは、スター文字はSQL標準に準拠してすべてのテーブルの列のリストに展開されます。 古い動作を復元するには、以下を設定します `asterisk_left_columns_only` ユーザー構成レベルで1に設定します。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2787)
-   テーブ [冬張](https://github.com/ClickHouse/ClickHouse/pull/2907)
-   Clickhouseクライアントのタブを押してオートコンプリート。 [Sergey Shcherbin](https://github.com/ClickHouse/ClickHouse/pull/2447)
-   Clickhouse-client内のCtrl+Cは、入力されたクエリをクリアします。 [\#2877](https://github.com/ClickHouse/ClickHouse/pull/2877)
-   を追加しました `join_default_strictness` 設定(値: `"`, `'any'`, `'all'`). これにより、指定しないでください `ANY` または `ALL` のために `JOIN`. [\#2982](https://github.com/ClickHouse/ClickHouse/pull/2982)
-   クエリ処理に関連するサーバーログの各行には、クエリidが表示されます。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   これでclickhouse-clientでクエリ実行ログを取得できるようになりました。 `send_logs_level` 設定）。 分散クエリ処理では、ログはすべてのサーバからカスケード接続されます。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.query_log` と `system.processes` (`SHOW PROCESSLIST`)クエリを実行するときに変更されたすべての設定に関する情報が表に表示されるようになりました。 `Settings` データ）。 を追加しました `log_query_settings` 設定。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.query_log` と `system.processes` テーブルには、クエリの実行に参加しているスレッドの数に関する情報が表示されます。 `thread_numbers` 列）。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   追加 `ProfileEvents` ネットワーク上の読み取りと書き込み、およびディスクへの読み取りと書き込みに費やされる時間、ネットワークエラーの数、およびネットワーク帯域幅が [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   追加 `ProfileEvents`rusageのシステムメトリックスを含むカウンター(ユーザー空間のCPU使用率、カーネル、ページフォールト、およびコンテキストスイッチに関する情報を取得できます)、 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `ProfileEvents` カウンタは、クエリごとにグローバルに適用され、クエリごとにリソース消費を詳細にプロファイルできるように、クエリ実行スレッドごとに適用され [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   を追加しました `system.query_thread_log` 各クエリ実行スレッドに関する情報を含むテーブル。 を追加しました `log_query_threads` 設定。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.metrics` と `system.events` 表現を内蔵しております。 [\#3016](https://github.com/ClickHouse/ClickHouse/pull/3016)
-   を追加しました `arrayEnumerateDense` 機能。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2975)
-   を追加しました `arrayCumSumNonNegative` と `arrayDifference` 機能。 [Aleksey Studnev](https://github.com/ClickHouse/ClickHouse/pull/2942)
-   を追加しました `retention` 集計関数。 [Sundy Li](https://github.com/ClickHouse/ClickHouse/pull/2887)
-   これで、プラス演算子を使用して集計関数の状態を追加（マージ）し、集計関数の状態に非負の定数を掛けることができます。 [\#3062](https://github.com/ClickHouse/ClickHouse/pull/3062) [\#3034](https://github.com/ClickHouse/ClickHouse/pull/3034)
-   MergeTreeファミリーのテーブルに仮想列が追加されました `_partition_id`. [\#3089](https://github.com/ClickHouse/ClickHouse/pull/3089)

#### 実験の特徴: {#experimental-features-1}

-   を追加しました `LowCardinality(T)` データ型。 このデー [\#2830](https://github.com/ClickHouse/ClickHouse/pull/2830)
-   JITコンパイルされた関数のキャッシュと、コンパイル前の使用回数のカウンターを追加しました。 式をJITコンパイルするには、 `compile_expressions` 設定。 [\#2990](https://github.com/ClickHouse/ClickHouse/pull/2990) [\#3077](https://github.com/ClickHouse/ClickHouse/pull/3077)

#### 改善: {#improvements-4}

-   放棄されたレプリカがある場合、複製ログの無制限の蓄積の問題を修正しました。 長いラグを持つレプリカの効果的な復旧モードを追加しました。
-   改善された性能の `GROUP BY` 複数の集約フィールドがある場合、一方がstringで、他方が固定長の場合。
-   使用時のパフォーマンスの向上 `PREWHERE` そして、式の暗黙的な転送で `PREWHERE`.
-   テキスト形式の解析性能の向上 (`CSV`, `TSV`). [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2977) [\#2980](https://github.com/ClickHouse/ClickHouse/pull/2980)
-   バイナリ形式での文字列と配列の読み取りパフォーマンスの向上。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2955)
-   クエリのパフォーマンスの向上とメモリ消費の削減 `system.tables` と `system.columns` 単一のサーバー上のテーブルの非常に大きな数がある場合。 [\#2953](https://github.com/ClickHouse/ClickHouse/pull/2953)
-   エラーが発生するクエリの大きなストリームの場合のパフォーマンスの問題を修正しました `_dl_addr` 機能は目に見えます `perf top` しかし、サーバーは多くのCPUを使用していません）。 [\#2938](https://github.com/ClickHouse/ClickHouse/pull/2938)
-   条件はビューにキャストされます(以下の場合 `enable_optimize_predicate_expression` が有効になっている)。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2907)
-   の機能の改善 `UUID` データ型。 [\#3074](https://github.com/ClickHouse/ClickHouse/pull/3074) [\#2985](https://github.com/ClickHouse/ClickHouse/pull/2985)
-   その `UUID` データ型は、-Alchemist辞書でサポートされています。 [\#2822](https://github.com/ClickHouse/ClickHouse/pull/2822)
-   その `visitParamExtractRaw` 関数は入れ子構造で正しく動作します。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2974)
-   とき `input_format_skip_unknown_fields` 設定が有効になっています。 `JSONEachRow` フォーマットはスキップされます。 [BlahGeek](https://github.com/ClickHouse/ClickHouse/pull/2958)
-   のための `CASE` 条件付きの式を省略できるようになりました `ELSE` に相当します `ELSE NULL`. [\#2920](https://github.com/ClickHouse/ClickHouse/pull/2920)
-   ZooKeeperで作業するときに操作タイムアウトを設定できます。 [urykhy](https://github.com/ClickHouse/ClickHouse/pull/2971)
-   のオフセットを指定できます `LIMIT n, m` として `LIMIT n OFFSET m`. [\#2840](https://github.com/ClickHouse/ClickHouse/pull/2840)
-   を使用することができ `SELECT TOP n` 代替としての構文 `LIMIT`. [\#2840](https://github.com/ClickHouse/ClickHouse/pull/2840)
-   システムテーブルに書き込むキューのサイズが大きくなるため、 `SystemLog parameter queue is full` エラーは頻繁に発生しません。
-   その `windowFunnel` 集計機能に対応しまイベントが複数の条件です。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2801)
-   重複する列は、 `USING` のための節 `JOIN`. [\#3006](https://github.com/ClickHouse/ClickHouse/pull/3006)
-   `Pretty` フォーマットは現在、幅によって列の配置に制限があります。 を使用 `output_format_pretty_max_column_pad_width` 設定。 値が広い場合、それはまだその全体が表示されますが、テーブル内の他のセルが広すぎることはありません。 [\#3003](https://github.com/ClickHouse/ClickHouse/pull/3003)
-   その `odbc` テーブル機能することはできなくなるようです指定のデータベースのスキーマの名前です。 [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2885)
-   で指定されたユーザ名を使用する機能を追加しました `clickhouse-client` 設定ファイル。 [Vladimir Kozbin](https://github.com/ClickHouse/ClickHouse/pull/2909)
-   その `ZooKeeperExceptions` カウンター分割された三つのカウンター: `ZooKeeperUserExceptions`, `ZooKeeperHardwareExceptions`、と `ZooKeeperOtherExceptions`.
-   `ALTER DELETE` クエリはマテリアライズドビュ
-   のために定期的に `ReplicatedMergeTree` テーブルは非常に多数があるとき周期的な負荷スパイクを避けるために `ReplicatedMergeTree` テーブル。
-   のサポート `ATTACH TABLE ... ON CLUSTER` クエリ。 [\#3025](https://github.com/ClickHouse/ClickHouse/pull/3025)

#### バグ修正: {#bug-fixes-13}

-   との問題を修正しました `Dictionary` テーブル `Size of offsets doesn't match size of column` または `Unknown compression method` 例外）。 このバグはバージョ [\#2913](https://github.com/ClickHouse/ClickHouse/issues/2913)
-   マージ時のバグを修正 `CollapsingMergeTree` データパーツのいずれかが空の場合(これらのパーツはマージ中に形成されます。 `ALTER DELETE` すべてのデータが削除された場合)、 `vertical` マージにはアルゴリズムを使用した。 [\#3049](https://github.com/ClickHouse/ClickHouse/pull/3049)
-   中に競合状態を修正しました `DROP` または `TRUNCATE` のために `Memory` 同時のテーブル `SELECT` サーバーがクラッシュする可能性があります。 このバグはバージョン1.1.54388に登場しました。 [\#3038](https://github.com/ClickHouse/ClickHouse/pull/3038)
-   挿入するときにデータが失われる可能性を修正しました `Replicated` テーブルの場合 `Session is expired` エラーが返されるデータ損失を検出することができますの `ReplicatedDataLoss` メトリック）。 このエラーはバージョン1.1.54378で発生しました。 [\#2939](https://github.com/ClickHouse/ClickHouse/pull/2939) [\#2949](https://github.com/ClickHouse/ClickHouse/pull/2949) [\#2964](https://github.com/ClickHouse/ClickHouse/pull/2964)
-   中にセグメントフォールトを修正 `JOIN ... ON`. [\#3000](https://github.com/ClickHouse/ClickHouse/pull/3000)
-   カラム名を検索する際のエラーを修正しました `WHERE` 式は完全に修飾された列名で構成されます。 `WHERE table.column`. [\#2994](https://github.com/ClickHouse/ClickHouse/pull/2994)
-   修正された “Not found column” サブクエリを持つIN式で構成される単一の列がリモートサーバーから要求された場合に、分散クエリを実行するときに発生したエラーです。 [\#3087](https://github.com/ClickHouse/ClickHouse/pull/3087)
-   修正された `Block structure mismatch in UNION stream: different number of columns` シャードの一方がローカルで、他方がローカルでない場合に分散クエリに対して発生したエラー、および移動の最適化 `PREWHERE` トリガーされます。 [\#2226](https://github.com/ClickHouse/ClickHouse/pull/2226) [\#3037](https://github.com/ClickHouse/ClickHouse/pull/3037) [\#3055](https://github.com/ClickHouse/ClickHouse/pull/3055) [\#3065](https://github.com/ClickHouse/ClickHouse/pull/3065) [\#3073](https://github.com/ClickHouse/ClickHouse/pull/3073) [\#3090](https://github.com/ClickHouse/ClickHouse/pull/3090) [\#3093](https://github.com/ClickHouse/ClickHouse/pull/3093)
-   修正された `pointInPolygon` 非凸多角形の特定のケースの関数です。 [\#2910](https://github.com/ClickHouse/ClickHouse/pull/2910)
-   比較時の誤った結果を修正しました `nan` 整数で。 [\#3024](https://github.com/ClickHouse/ClickHouse/pull/3024)
-   のエラーを修正しました `zlib-ng` まれにsegfaultにつながる可能性のあるライブラリ。 [\#2854](https://github.com/ClickHouse/ClickHouse/pull/2854)
-   テーブルに挿入するときにメモリリークを修正しました `AggregateFunction` 列、集計関数の状態が単純でない場合（メモリを別々に割り当てる）、単一の挿入要求が複数の小さなブロックになる場合。 [\#3084](https://github.com/ClickHouse/ClickHouse/pull/3084)
-   同じを作成し、削除する際の競合状態を修正しました `Buffer` または `MergeTree` 同時のテーブル。
-   タプルなどの特定の非自明な型で構成されたタプルを比較するときに、segfaultの可能性を修正しました。 [\#2989](https://github.com/ClickHouse/ClickHouse/pull/2989)
-   特定の実行時にsegfaultの可能性を修正しました `ON CLUSTER` クエリ。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2960)
-   のエラーを修正しました `arrayDistinct` 機能のための `Nullable` 配列要素。 [\#2845](https://github.com/ClickHouse/ClickHouse/pull/2845) [\#2937](https://github.com/ClickHouse/ClickHouse/pull/2937)
-   その `enable_optimize_predicate_expression` オプションは現在、正しく `SELECT *`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/2929)
-   ZooKeeperセッションを再初期化するときにsegfaultを修正しました。 [\#2917](https://github.com/ClickHouse/ClickHouse/pull/2917)
-   固定性ブロックが飼育係.
-   修正コードをネストしたデータ構造 `SummingMergeTree`.
-   集計関数の状態にメモリを割り当てるとき、整列が正しく考慮され、集計関数の状態を実装するときに整列を必要とする操作を使用することがで [chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/2808)

#### セキュリティ修正: {#security-fix}

-   ODBCデータソースの安全な使用。 ODBCドライバとの対話では、 `clickhouse-odbc-bridge` プロセス。 誤りや第三者ODBCドライバーにな問題となるとサーバの安定性や脆弱性があります。 [\#2828](https://github.com/ClickHouse/ClickHouse/pull/2828) [\#2879](https://github.com/ClickHouse/ClickHouse/pull/2879) [\#2886](https://github.com/ClickHouse/ClickHouse/pull/2886) [\#2893](https://github.com/ClickHouse/ClickHouse/pull/2893) [\#2921](https://github.com/ClickHouse/ClickHouse/pull/2921)
-   のファイルパスの修正された誤った検証 `catBoostPool` テーブル機能。 [\#2894](https://github.com/ClickHouse/ClickHouse/pull/2894)
-   システムテーブルの内容 (`tables`, `databases`, `parts`, `columns`, `parts_columns`, `merges`, `mutations`, `replicas`、と `replication_queue`)フィルタによると、ユーザーの設定データベースへのアクセス (`allow_databases`). [冬張](https://github.com/ClickHouse/ClickHouse/pull/2856)

#### 下位互換性のない変更: {#backward-incompatible-changes-3}

-   JOINを使用したクエリでは、スター文字はSQL標準に準拠してすべてのテーブルの列のリストに展開されます。 古い動作を復元するには、以下を設定します `asterisk_left_columns_only` ユーザー構成レベルで1に設定します。

#### ビルドの変更: {#build-changes-2}

-   ほとんどの統合テス
-   コードのスタイルチェックによって解決することができます
-   その `memcpy` 実装は、CentOS7/Fedoraをビルドするときに正しく選択されます。 [エティエンシャンペティエ](https://github.com/ClickHouse/ClickHouse/pull/2912)
-   Clangをビルドに使用するときは、次の警告が表示されます `-Weverything` 通常のものに加えて、追加されています `-Wall-Wextra -Werror`. [\#2957](https://github.com/ClickHouse/ClickHouse/pull/2957)
-   ビルドのデバッグには、 `jemalloc` debugオプション。
-   のインタフェースを図書館との交流の飼育係で宣言されていく。 [\#2950](https://github.com/ClickHouse/ClickHouse/pull/2950)

## ClickHouseリリース18.10 {#clickhouse-release-18-10}

### ClickHouseリリース18.10.3、2018-08-13 {#clickhouse-release-18-10-3-2018-08-13}

#### 新しい機能: {#new-features-5}

-   Httpsは複製に使用できます。 [\#2760](https://github.com/ClickHouse/ClickHouse/pull/2760)
-   機能を追加しました `murmurHash2_64`, `murmurHash3_32`, `murmurHash3_64`、と `murmurHash3_128` 既存のものに加えて `murmurHash2_32`. [\#2791](https://github.com/ClickHouse/ClickHouse/pull/2791)
-   ClickHouse ODBCドライバでのNull許容型のサポート (`ODBCDriver2` 出力フォーマット)。 [\#2834](https://github.com/ClickHouse/ClickHouse/pull/2834)
-   のサポート `UUID` キー列に。

#### 改善: {#improvements-5}

-   クラスターは、設定ファイルから削除されたときに、サーバーを再起動せずに削除できます。 [\#2777](https://github.com/ClickHouse/ClickHouse/pull/2777)
-   外部辞書は、設定ファイルから削除されたときにサーバーを再起動せずに削除できます。 [\#2779](https://github.com/ClickHouse/ClickHouse/pull/2779)
-   追加 `SETTINGS` のサポート `Kafka` テーブルエンジン。 [Alexander Marshalov](https://github.com/ClickHouse/ClickHouse/pull/2781)
-   のための改善 `UUID` データ型(まだ完了していない)。 [\#2618](https://github.com/ClickHouse/ClickHouse/pull/2618)
-   の併合の後の空の部品のためのサポート `SummingMergeTree`, `CollapsingMergeTree` と `VersionedCollapsingMergeTree` エンジン [\#2815](https://github.com/ClickHouse/ClickHouse/pull/2815)
-   完了した変異の古いレコードが削除されます (`ALTER DELETE`). [\#2784](https://github.com/ClickHouse/ClickHouse/pull/2784)
-   を追加しました `system.merge_tree_settings` テーブル。 [Kirill Shvakov](https://github.com/ClickHouse/ClickHouse/pull/2841)
-   その `system.tables` 表現の依存関係列: `dependencies_database` と `dependencies_table`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/2851)
-   を追加しました `max_partition_size_to_drop` 設定オプション。 [\#2782](https://github.com/ClickHouse/ClickHouse/pull/2782)
-   を追加しました `output_format_json_escape_forward_slashes` オプション。 [Alexander Bocharov](https://github.com/ClickHouse/ClickHouse/pull/2812)
-   を追加しました `max_fetch_partition_retries_count` 設定。 [\#2831](https://github.com/ClickHouse/ClickHouse/pull/2831)
-   を追加しました `prefer_localhost_replica` ローカルレプリカの設定を無効にし、プロセス間の対話を行わずにローカルレプリカに移動するための設定。 [\#2832](https://github.com/ClickHouse/ClickHouse/pull/2832)
-   その `quantileExact` 集計関数の戻り値 `nan` 空の上の集約の場合 `Float32` または `Float64` セット。 [Sundy Li](https://github.com/ClickHouse/ClickHouse/pull/2855)

#### バグ修正: {#bug-fixes-14}

-   それは不可能な接続を確立するために作られたodbcの接続文字列パラメータの不要なエスケープを削除しました。 このエラーはバージョン18.6.0で発生しました。
-   処理のロジックを修正しました `REPLACE PARTITION` 複製キュー内のコマンド。 がある場合は二つ `REPLACE` コマンドと同じパーティション、間違ったロジックが原因の一つの複製のキューは行われなくなります。 [\#2814](https://github.com/ClickHouse/ClickHouse/pull/2814)
-   すべてのデータ部分が空であったときにマージのバグを修正しました(マージまたはから形成された部分 `ALTER DELETE` すべてのデータが削除された場合）。 このバグに登場したバージョン18.1.0. [\#2930](https://github.com/ClickHouse/ClickHouse/pull/2930)
-   同時実行のエラーを修正しました `Set` または `Join`. [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2823)
-   修正された `Block structure mismatch in UNION stream: different number of columns` のために発生したエラー `UNION ALL` サブクエリ内のクエリのいずれかの場合 `SELECT` クエリを含む複製のカラム名をとります。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2094)
-   MySQLサーバに接続するときに例外が発生した場合、メモリリークを修正しました。
-   クエリエラーの場合に修正された不正なclickhouse-クライアント応答コード。
-   固定誤動作の実現の景色を含む異なるものとみなされます。 [\#2795](https://github.com/ClickHouse/ClickHouse/issues/2795)

#### 下位互換性のない変更 {#backward-incompatible-changes-4}

-   除去支援のためのチェックテーブルのクエリのために配布します。

#### ビルドの変更: {#build-changes-3}

-   アロケータが置き換えられました: `jemalloc` の代りに今使用されます `tcmalloc`. いくつかのシナリオでは、この増加は20％まで高速化します。 しかし、20％まで減速したクエリがあります。 いくつかのシナリオでは、メモリ消費量が約10％削減され、安定性が向上しました。 非常に競争の激しい負荷では、ユーザスペースとシステムでのCPU使用率はわずかに増加します。 [\#2773](https://github.com/ClickHouse/ClickHouse/pull/2773)
-   サブモジュールからのlibresslの使用。 [\#1983](https://github.com/ClickHouse/ClickHouse/pull/1983) [\#2807](https://github.com/ClickHouse/ClickHouse/pull/2807)
-   サブモジュールからのunixodbcの使用。 [\#2789](https://github.com/ClickHouse/ClickHouse/pull/2789)
-   サブモジュールからのmariadb-connector-cの使用。 [\#2785](https://github.com/ClickHouse/ClickHouse/pull/2785)
-   テストデータの可用性に依存する機能テストファイルをリポジトリに追加しました（当面はテストデータ自体なし）。

## ClickHouseリリース18.6 {#clickhouse-release-18-6}

### ClickHouseリリース18.6.0、2018-08-02 {#clickhouse-release-18-6-0-2018-08-02}

#### 新しい機能: {#new-features-6}

-   JOIN ON構文のON式のサポートが追加されました:
    `JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]`
    式は、and演算子によって結合された等量の連鎖でなければなりません。 等式の各辺は、いずれかのテーブルの列に対する任意の式にすることができます。 完全修飾列名の使用がサポートされています (`table.name`, `database.table.name`, `table_alias.name`, `subquery_alias.name`)右のテーブルのために。 [\#2742](https://github.com/ClickHouse/ClickHouse/pull/2742)
-   HTTPSで有効にする必要があります。 [\#2760](https://github.com/ClickHouse/ClickHouse/pull/2760)

#### 改善: {#improvements-6}

-   サーバにパッチ部品のバージョンです。 データのパッチ版コンポーネントが `system.processes` と `query_log`. [\#2646](https://github.com/ClickHouse/ClickHouse/pull/2646)

## ClickHouseリリース18.5 {#clickhouse-release-18-5}

### ClickHouseリリース18.5.1、2018-07-31 {#clickhouse-release-18-5-1-2018-07-31}

#### 新しい機能: {#new-features-7}

-   ハッシュ関数を追加しました `murmurHash2_32` [\#2756](https://github.com/ClickHouse/ClickHouse/pull/2756).

#### 改善: {#improvements-7}

-   今すぐ使用できます `from_env` [\#2741](https://github.com/ClickHouse/ClickHouse/pull/2741) 環境変数から設定ファイルの値を設定する属性。
-   大文字と小文字を区別しないバージョンの追加 `coalesce`, `ifNull`、と `nullIf functions` [\#2752](https://github.com/ClickHouse/ClickHouse/pull/2752).

#### バグ修正: {#bug-fixes-15}

-   レプリカを起動する際のバグを修正 [\#2759](https://github.com/ClickHouse/ClickHouse/pull/2759).

## ClickHouseリリース18.4 {#clickhouse-release-18-4}

### ClickHouseリリース18.4.0、2018-07-28 {#clickhouse-release-18-4-0-2018-07-28}

#### 新しい機能: {#new-features-8}

-   追加されたシステム表: `formats`, `data_type_families`, `aggregate_function_combinators`, `table_functions`, `table_engines`, `collations` [\#2721](https://github.com/ClickHouse/ClickHouse/pull/2721).
-   Aの引数としてテーブルの代わりにテーブル関数を使用する機能を追加しました `remote` または `cluster table function` [\#2708](https://github.com/ClickHouse/ClickHouse/pull/2708).
-   のサポート `HTTP Basic` 複製プロトコルでの認証 [\#2727](https://github.com/ClickHouse/ClickHouse/pull/2727).
-   その `has` 関数は、現在の配列の数値を検索することができます `Enum` 値 [Maxim Khrisanfov](https://github.com/ClickHouse/ClickHouse/pull/2699).
-   支援のための追加は任意のメッセージセパレータから読み取る際の `Kafka` [アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2701).

#### 改善: {#improvements-8}

-   その `ALTER TABLE t DELETE WHERE` WHERE条件の影響を受けないデータ部分は、クエリで書き換えられません [\#2694](https://github.com/ClickHouse/ClickHouse/pull/2694).
-   その `use_minimalistic_checksums_in_zookeeper` のための選択 `ReplicatedMergeTree` テーブルはデフォルトで有効です。 この設定は、バージョン1.1.54378、2018-04-16で追加されました。 1.1.54378より古いバージョンはインストールできなくなりました。
-   実行のサポート `KILL` と `OPTIMIZE` 指定するクエリ `ON CLUSTER` [冬張](https://github.com/ClickHouse/ClickHouse/pull/2689).

#### バグ修正: {#bug-fixes-16}

-   エラーを修正しました `Column ... is not under an aggregate function and not in GROUP BY` IN式を使用した集計の場合。 このバグに登場したバージョン18.1.0. ([bbdd780b](https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2))
-   のバグを修正しました `windowFunnel aggregate function` [冬張](https://github.com/ClickHouse/ClickHouse/pull/2735).
-   のバグを修正しました `anyHeavy` 集計関数 ([a2101df2](https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee))
-   固定サーバークラッシュを使用する場合 `countArray()` 集計関数。

#### 下位互換性のない変更: {#backward-incompatible-changes-5}

-   変数のための `Kafka` エンジンは `Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])` に `Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])`. テーブルが使用する場合 `kafka_schema` または `kafka_num_consumers` メタデータファイルを手動で編集する必要があります `path/metadata/database/table.sql` と追加 `kafka_row_delimiter` 変数との `''` 値。

## ClickHouseリリース18.1 {#clickhouse-release-18-1}

### ClickHouseリリース18.1.0、2018-07-23 {#clickhouse-release-18-1-0-2018-07-23}

#### 新しい機能: {#new-features-9}

-   のサポート `ALTER TABLE t DELETE WHERE` 非レプリケートされたMergeTreeテーブルのクエリ ([\#2634](https://github.com/ClickHouse/ClickHouse/pull/2634)).
-   の任意の型のサポート `uniq*` 集約関数のファミリ ([\#2010](https://github.com/ClickHouse/ClickHouse/issues/2010)).
-   比較演算子での任意の型のサポート ([\#2026](https://github.com/ClickHouse/ClickHouse/issues/2026)).
-   その `users.xml` ファイルは、サブネットマス `10.0.0.1/255.255.255.0`. これは、中央にゼロを持つIPv6ネットワークのマスクを使用する場合に必要です ([\#2637](https://github.com/ClickHouse/ClickHouse/pull/2637)).
-   を追加しました `arrayDistinct` 機能 ([\#2670](https://github.com/ClickHouse/ClickHouse/pull/2670)).
-   SummingMergeTreeエンジンは、AggregateFunctionタイプの列を処理できるようになりました ([Constantin S.Pan](https://github.com/ClickHouse/ClickHouse/pull/2566)).

#### 改善: {#improvements-9}

-   リリースバージョンの採番スキーマを変更。 今、最初の部分は、リリースの年（a.d.、モスクワタイムゾーン、マイナス2000）が含まれ、第二の部分は、主要な変更（ほとんどのリリースで増加）のための番号が含ま リリースは、changelogに特に明記されていない限り、後方互換性があります。
-   浮動小数点数の文字列への変換を高速化 ([アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2664)).
-   パースエラーのために挿入中に一部の行がスキップされた場合(これは、 `input_allow_errors_num` と `input_allow_errors_ratio` スキップされた行の数がサーバーログに書き込まれるようになりました ([Leonardo Cecchi](https://github.com/ClickHouse/ClickHouse/pull/2669)).

#### バグ修正: {#bug-fixes-17}

-   一時表のtruncateコマンドを修正しました ([アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2624)).
-   固定アロの飼育係顧客の図書館で発生した場合またはネットワークエラーを読みながら対応 ([c315200](https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947)).
-   Nullable型へのキャスト中にエラーが修正されました ([\#1322](https://github.com/ClickHouse/ClickHouse/issues/1322)).
-   の誤った結果を修正しました `maxIntersection()` 間隔の境界が一致したときの関数 ([Michael Furmur](https://github.com/ClickHouse/ClickHouse/pull/2657)).
-   関数引数のor式チェーンの誤った変換を修正しました ([chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/2663)).
-   クエリのパフォーマンスの低下を修正 `IN (subquery)` 別のサブクエリ内の式 ([\#2571](https://github.com/ClickHouse/ClickHouse/issues/2571)).
-   を使用する分散クエリで異なるバージョンを持つサーバー間の非互換性を修正 `CAST` 大文字でない関数 ([fe8c4d6](https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5)).
-   外部dbmsへのクエリに対する識別子のクォートの欠落を追加しました ([\#2635](https://github.com/ClickHouse/ClickHouse/issues/2635)).

#### 下位互換性のない変更: {#backward-incompatible-changes-6}

-   数値ゼロを含む文字列をdatetimeに変換することはできません。 例えば: `SELECT toDateTime('0')`. これはまた、 `DateTime DEFAULT '0'` テーブルでは動作しません。 `<null_value>0</null_value>` 辞書で。 解決策:置換 `0` と `0000-00-00 00:00:00`.

## ClickHouseリリース1.1 {#clickhouse-release-1-1}

### ClickHouseリリース1.1.54394,2018-07-12 {#clickhouse-release-1-1-54394-2018-07-12}

#### 新しい機能: {#new-features-10}

-   を追加しました `histogram` 集計関数 ([ミハイル-スリン](https://github.com/ClickHouse/ClickHouse/pull/2521)).
-   さて `OPTIMIZE TABLE ... FINAL` パーティションを指定せずに使用できます `ReplicatedMergeTree` ([アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2600)).

#### バグ修正: {#bug-fixes-18}

-   ネットワークまたはディスクに負荷がある場合に、より大きなパーツをダウンロードすることができなくなった（パーツをダウンロードするための周期的な このエラーはバージョン1.1.54388で発生しました。
-   テーブルに重複データブロックを挿入した場合、zookeeperでchrootを使用する際の問題を修正しました。
-   その `has` Nullable要素を持つ配列の関数が正しく動作するようになりました ([\#2115](https://github.com/ClickHouse/ClickHouse/issues/2115)).
-   その `system.tables` テーブルが正しく動作に用いた場合に配布します。 その `metadata_modification_time` と `engine_full` 列は現在、非仮想です。 これらの列のみがテーブルから照会された場合に発生するエラーを修正しました。
-   固定どのように空 `TinyLog` テーブル動作後に挿入し、空データブロック ([\#2563](https://github.com/ClickHouse/ClickHouse/issues/2563)).
-   その `system.zookeeper` ZooKeeperのノードの値がNULLの場合、テーブルは機能します。

### ClickHouseリリース1.1.54390、2018-07-06 {#clickhouse-release-1-1-54390-2018-07-06}

#### 新しい機能: {#new-features-11}

-   クエリは次の場所で送信できます `multipart/form-data` フォーマット `query` これは、外部データもクエリ処理のために送信される場合に便利です ([Olga Hvostikova](https://github.com/ClickHouse/ClickHouse/pull/2490)).
-   CSV形式でデータを読み込むときに、単一引quotesまたは二重引用符の処理を有効または無効にする機能を追加しました。 これを設定することができます `format_csv_allow_single_quotes` と `format_csv_allow_double_quotes` 設定 ([アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2574)).
-   さて `OPTIMIZE TABLE ... FINAL` 使用可能を指定せずに、パーティションのための非期待の `MergeTree` ([アモスの鳥](https://github.com/ClickHouse/ClickHouse/pull/2599)).

#### 改善: {#improvements-10}

-   性能向上、メモリーの消耗を減らし、正しいメモリ消費の位置姿勢トラッキング用のオペレーターがテーブル-インデックスを使用できる ([\#2584](https://github.com/ClickHouse/ClickHouse/pull/2584)).
-   データパーツの追加時にチェックサムの冗長チェックを削除しました。 これは、多数のレプリカがある場合に重要です。
-   のサポートを追加 `Array(Tuple(...))` のための議論 `arrayEnumerateUniq` 機能 ([\#2573](https://github.com/ClickHouse/ClickHouse/pull/2573)).
-   追加 `Nullable` のサポート `runningDifference` 機能 ([\#2594](https://github.com/ClickHouse/ClickHouse/pull/2594)).
-   非常に多数の式がある場合のクエリ分析パフォーマンスが改善されました ([\#2572](https://github.com/ClickHouse/ClickHouse/pull/2572)).
-   マージのためのデータパーツの高速選択 `ReplicatedMergeTree` テーブル。 ZooKeeperセッションの迅速な復旧 ([\#2597](https://github.com/ClickHouse/ClickHouse/pull/2597)).
-   その `format_version.txt` ファイル `MergeTree` これは、ファイルなしでディレクトリ構造をコピーした後にClickHouseを起動すると意味があります ([シプリアン-ハックマン](https://github.com/ClickHouse/ClickHouse/pull/2593)).

#### バグ修正: {#bug-fixes-19}

-   サーバを再起動する前に、それが不可能なセッションとテーブルの読み取り専用状態を回復するために作ることができるzookeeperでの作業のバグを修正し
-   セッションが中断された場合、古いノードが削除されないことがzookeeperでの作業時のバグを修正しました。
-   のエラーを修正しました `quantileTDigest` Float引数の関数（このバグはバージョン1.1.54388で導入されました) ([ミハイル-スリン](https://github.com/ClickHouse/ClickHouse/pull/2553)).
-   同じサイズの符号付き整数と符号なし整数の間で型を変換するための関数内に主キー列がある場合、mergetreeテーブルのインデックスのバグを修正しまし ([\#2603](https://github.com/ClickHouse/ClickHouse/pull/2603)).
-   固定segfaultの場合 `macros` 使用されますが、設定ファイルにはありません ([\#2570](https://github.com/ClickHouse/ClickHouse/pull/2570)).
-   デフォル ([\#2583](https://github.com/ClickHouse/ClickHouse/pull/2583)).
-   ときに発生したバグを修正 `use_index_for_in_with_subqueries` 設定が無効になりました。

#### セキュリティ修正: {#security-fix-1}

-   MySQLに接続したときにファイルを送信できなくなりました (`LOAD DATA LOCAL INFILE`).

### ClickHouseリリース1.1.54388、2018-06-28 {#clickhouse-release-1-1-54388-2018-06-28}

#### 新しい機能: {#new-features-12}

-   のサポート `ALTER TABLE t DELETE WHERE` クエリーのための複製です。 を追加しました `system.mutations` このタイプのクエリの進行状況を追跡するテーブル。
-   のサポート `ALTER TABLE t [REPLACE|ATTACH] PARTITION` \*MergeTreeテーブルのクエリ。
-   のサポート `TRUNCATE TABLE` クエリ ([冬張](https://github.com/ClickHouse/ClickHouse/pull/2260))
-   新しいいくつか `SYSTEM` 複製テーブルのクエリ (`RESTART REPLICAS`, `SYNC REPLICA`, `[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]`).
-   MySQLエンジンと対応するテーブル関数を使用してテーブルに書き込む機能を追加しました ([sundy-li](https://github.com/ClickHouse/ClickHouse/pull/2294)).
-   を追加しました `url()` テーブル機能および `URL` 表エンジン ([Alexander Sapin](https://github.com/ClickHouse/ClickHouse/pull/2501)).
-   を追加しました `windowFunnel` 集計関数 ([sundy-li](https://github.com/ClickHouse/ClickHouse/pull/2352)).
-   新しい `startsWith` と `endsWith` 文字列の関数 ([Vadim Plakhtinsky](https://github.com/ClickHouse/ClickHouse/pull/2429)).
-   その `numbers()` テーブル機能することはできなくなるようです指定のオフセット ([冬張](https://github.com/ClickHouse/ClickHouse/pull/2535)).
-   パスワードに `clickhouse-client` 対話的に入力できます。
-   サーバログをsyslogに送信できるようになりました ([Alexander Krasheninnikov](https://github.com/ClickHouse/ClickHouse/pull/2459)).
-   共有ライブラリソースによる辞書のログインのサポート ([Alexander Sapin](https://github.com/ClickHouse/ClickHouse/pull/2472)).
-   カスタムcsvデリミタのサポート ([Ivan Zhukov](https://github.com/ClickHouse/ClickHouse/pull/2263))
-   を追加しました `date_time_input_format` 設定。 この設定を次のように切り替えると `'best_effort'`、DateTime値は、幅広い形式で読み込まれます。
-   を追加しました `clickhouse-obfuscator` データの難読化のためのユーティリティ。 使用例:パフォーマンステストで使用されるデータの公開。

#### 実験の特徴: {#experimental-features-2}

-   計算する機能を追加しました `and` 引数が必要な場所のみ ([Anastasia Tsarkova](https://github.com/ClickHouse/ClickHouse/pull/2272))
-   JITコへのネイティブコードが可能となりますので一部表現 ([pyosunit description in lists](https://github.com/ClickHouse/ClickHouse/pull/2277)).

#### バグ修正: {#bug-fixes-20}

-   クエリの重複が表示されなくなりました `DISTINCT` と `ORDER BY`.
-   とのクエリ `ARRAY JOIN` と `arrayFilter` もはや間違った結果を返さない。
-   固定の読み込み時にエラー配列カラムからの入れ子構造 ([\#2066](https://github.com/ClickHouse/ClickHouse/issues/2066)).
-   HAVING句でクエリを分析する際のエラーを修正しました `HAVING tuple IN (...)`.
-   誤りを修正で解析する場合、クエリを処理するクラウドの場合再帰的別名になります。
-   すべての行をフィルタリングするprewhereの条件でreplacingmergetreeから読み取るときにエラーが修正されました ([\#2525](https://github.com/ClickHouse/ClickHouse/issues/2525)).
-   ユーザープロファイルの設定が適用されていない使用時のセッションを行うhttpのインタフェース。
-   Clickhouse-localのコマンドラインパラメータから設定を適用する方法を修正しました。
-   の飼育係お客様の図書館におけるその使用は、セッションタイムアウトサーバから受信した.
-   バグ修正の飼育係ライブラリとクライアントが待ってサーバの応答のものより長いタイムアウト.
-   パーティションキー列の条件を持つクエリのパーツの固定pruning定 ([\#2342](https://github.com/ClickHouse/ClickHouse/issues/2342)).
-   マージは、後に可能になりました `CLEAR COLUMN IN PARTITION` ([\#2315](https://github.com/ClickHouse/ClickHouse/issues/2315)).
-   ODBCテーブル関数の型マッピングが修正されました ([sundy-li](https://github.com/ClickHouse/ClickHouse/pull/2268)).
-   型の比較が修正されました `DateTime` タイムゾーンの有無にかかわらず ([Alexander Bocharov](https://github.com/ClickHouse/ClickHouse/pull/2400)).
-   の固定構文解析とフォーマット `CAST` オペレーター
-   分散テーブルエンジンのマテリアライズドビューへの挿入を修正 ([Babacar Diassé](https://github.com/ClickHouse/ClickHouse/pull/2411)).
-   からデータを書き込む際の競合状態を修正しました `Kafka` エンジンを実現しの景色 ([楊関劉](https://github.com/ClickHouse/ClickHouse/pull/2448)).
-   Remote()テーブル機能のSSRFを修正しました。
-   の固定終了動作 `clickhouse-client` 複数行モード ([\#2510](https://github.com/ClickHouse/ClickHouse/issues/2510)).

#### 改善: {#improvements-11}

-   背景の業務を複製のテーブルを用いて行ったスレッドプールの代わりに別のスレッド ([Silviu Caragea](https://github.com/ClickHouse/ClickHouse/pull/1722)).
-   LZ4圧縮パフォーマンスの向上。
-   多数の結合およびサブクエリを含むクエリの分析を高速化します。
-   ネットワークエラーが多すぎると、dnsキャッシュが自動的に更新されます。
-   テーブル挿入は、マテリアライズドビューのいずれかに挿入ができない場合、パーツが多すぎるために発生しなくなりました。
-   イベントカウンターの不一致を修正しました `Query`, `SelectQuery`、と `InsertQuery`.
-   のような式 `tuple IN (SELECT tuple)` タプルの型が一致する場合は許可されます。
-   サーバーとの複製のテーブルでかかわらず、飼育係の設定.
-   使用可能なcpuコアの数を計算するときに、cgroupの制限が考慮されるようになりました ([Atri Sharma](https://github.com/ClickHouse/ClickHouse/pull/2325)).
-   Systemd設定ファイルに設定ディレクトリのchownを追加しました ([Mikhail Shiryaev](https://github.com/ClickHouse/ClickHouse/pull/2421)).

#### ビルドの変更: {#build-changes-4}

-   Gcc8コンパイラはビルドに使用できます。
-   サブモジュールからllvmを構築する機能を追加しました。
-   Librdkafkaライブラリのバージョンがv0.11.4に更新されました。
-   システムlibcpuidライブラリを使用する機能を追加しました。 ライブラリのバージョンは0.4.0に更新されました。
-   ベクトルクラスライブラリを使用してビルドを修正 ([Babacar Diassé](https://github.com/ClickHouse/ClickHouse/pull/2274)).
-   Cmakeはninjaのファイルをデフォルトで生成するようになりました `-G Ninja`).
-   Libtermcapの代わりにlibtinfoライブラリを使用する機能を追加しました ([Georgy Kondratiev](https://github.com/ClickHouse/ClickHouse/pull/2519)).
-   Fedoraの生皮におけるヘッダファイルの競合を修正しました ([\#2520](https://github.com/ClickHouse/ClickHouse/issues/2520)).

#### 下位互換性のない変更: {#backward-incompatible-changes-7}

-   でエスケープ削除 `Vertical` と `Pretty*` フォーマットおよび削除 `VerticalRaw` フォーマット。
-   バージョン1.1.54388(またはそれより新しい)のサーバーと古いバージョンのサーバーが分散クエリで同時に使用され、クエリに分散クエリが存在する場合 `cast(x, 'Type')` なしの式 `AS` キーワードと単語を持っていません `cast` 大文字では、次のようなメッセージで例外がスローされます `Not found column cast(0, 'UInt8') in block`. 解決方法:クラスター全体のサーバーを更新します。

### ClickHouseリリース1.1.54385,2018-06-01 {#clickhouse-release-1-1-54385-2018-06-01}

#### バグ修正: {#bug-fixes-21}

-   場合によっては、zookeeperの操作がブロックされるエラーを修正しました。

### ClickHouseリリース1.1.54383、2018-05-22 {#clickhouse-release-1-1-54383-2018-05-22}

#### バグ修正: {#bug-fixes-22}

-   固定減速のレプリケーションのキューにした場合には多くのレプリカ.

### ClickHouseリリース1.1.54381,2018-05-14 {#clickhouse-release-1-1-54381-2018-05-14}

#### バグ修正: {#bug-fixes-23}

-   固定、ノードの漏洩、飼育係がclickhouse失接続を飼育係サーバーです。

### ClickHouseリリース1.1.54380、2018-04-21 {#clickhouse-release-1-1-54380-2018-04-21}

#### 新しい機能: {#new-features-13}

-   テーブル機能を追加しました `file(path, format, structure)`. バイトを読み取る例 `/dev/urandom`: ``` ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q "SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10" ```.

#### 改善: {#improvements-12}

-   サブクエリは `()` クエリの可読性を高めるための括弧。 例えば: `(SELECT 1) UNION ALL (SELECT 1)`.
-   シンプル `SELECT` からのクエリ `system.processes` テーブルはに含まれていません `max_concurrent_queries` 限界だ

#### バグ修正: {#bug-fixes-24}

-   の誤った動作を修正しました `IN` から選択するときの演算子 `MATERIALIZED VIEW`.
-   修正フィルタリングパーテーションによるインデックスのように表現 `partition_key_column IN (...)`.
-   実行できない問題を修正 `OPTIMIZE` リーダー以外のレプリカに対するクエリ `REANAME` テーブルの上に行った。
-   実行時承認エラーを修正しました `OPTIMIZE` または `ALTER` リーダー以外のレプリカに対するクエリ。
-   固定凍結の `KILL QUERY`.
-   ZooKeeperクライアントライブラリのエラーを修正し、ウォッチの喪失、分散DDLキューのフリーズ、およびレプリケーションキューのスローダウンが空でない場合に発生 `chroot` 接頭辞は、ZooKeeperの設定で使用されます。

#### 下位互換性のない変更: {#backward-incompatible-changes-8}

-   のような式のサポートを削除 `(a, b) IN (SELECT (a, b))` （同等の式を使用できます `(a, b) IN (SELECT a, b)`). 以前のリリースでは、これらの式は未定につながった `WHERE` フィルタリングが起こっている。

### ClickHouseリリース1.1.54378、2018-04-16 {#clickhouse-release-1-1-54378-2018-04-16}

#### 新しい機能: {#new-features-14}

-   ログレベルは、サーバーを再起動せずに変更できます。
-   を追加しました `SHOW CREATE DATABASE` クエリ。
-   その `query_id` に渡すことができます `clickhouse-client` （elBroom）。
-   新しい設定: `max_network_bandwidth_for_all_users`.
-   のサポートを追加 `ALTER TABLE ... PARTITION ...` のために `MATERIALIZED VIEW`.
-   システムテーブルに非圧縮形式のデータパーツのサイズに関する情報を追加しました。
-   サーバ間の暗号化支援のための分散型のテーブル (`<secure>1</secure>` レプリカの設定で `<remote_servers>`).
-   のためのテーブルのレベルの設定 `ReplicatedMergeTree` Zookeeperに格納されているデータの量を最小限にするために、家族: : `use_minimalistic_checksums_in_zookeeper = 1`
-   の構成 `clickhouse-client` プロンプト 既定では、サーバー名がプロンプトに出力されます。 サーバーの表示名を変更することができます。 それはまたで送られます `X-ClickHouse-Display-Name` HTTPヘッダ（キリルShvakov）。
-   複数のコンマ区切り `topics` 指定することができる `Kafka` エンジン（トビアスアダムソン)
-   クエリが停止した場合 `KILL QUERY` または `replace_running_query` クライアントは、 `Query was canceled` 不完全な結果の代わりに例外。

#### 改善: {#improvements-13}

-   `ALTER TABLE ... DROP/DETACH PARTITION` クエリは、レプリケーションキューの先頭で実行されます。
-   `SELECT ... FINAL` と `OPTIMIZE ... FINAL` テーブルに単一のデータ部分がある場合でも使用できます。
-   A `query_log` それは（キリルShvakov）手動で削除された場合、テーブルがその場で再作成されます。
-   その `lengthUTF8` 関数はより速く実行されます（zhang2014）。
-   の同期挿入物の改善された性能 `Distributed` テーブル (`insert_distributed_sync = 1`）破片の非常に大きな数がある場合。
-   サーバーは `send_timeout` と `receive_timeout` クライアントから設定し、クライアントに接続するときにそれらを適用します（逆の順序で適用されます：サーバーソケット `send_timeout` に設定される。 `receive_timeout` クライアントから受け取った値、およびその逆）。
-   非同期挿入のためのより強い衝突の回復に `Distributed` テーブル。
-   の戻り値の型 `countEqual` 関数の変更元 `UInt32` に `UInt64` (谢磊).

#### バグ修正: {#bug-fixes-25}

-   とエラーを修正しました `IN` 式の左側が `Nullable`.
-   正しい結果は返される利用時のタプルと `IN` タプルコンポーネントの一部がテーブルインデックスにある場合。
-   その `max_execution_time` limitは現在、分散クエリで正しく動作します。
-   複合列のサイズを計算する際のエラーを修正しました `system.columns` テーブル。
-   固定エラーの作成時に一時テーブル `CREATE TEMPORARY TABLE IF NOT EXISTS.`
-   固定エラー `StorageKafka` (\#\#2075)
-   固定サーバのクラッシュからでは無効引数の特定の集ます。
-   エラーを修正しました。 `DETACH DATABASE` バックグラウ `ReplicatedMergeTree` テーブル。
-   `Too many parts` 状態は、集約されたマテリアライズドビュー（\#\#2084）に挿入すると発生する可能性が低くなります。
-   置換の後に同じレベルの別の置換が必要な場合は、config内の置換の再帰的な処理を修正しました。
-   メタデータファイルの構文を修正しました。 `VIEW` これは次のクエリを使用します `UNION ALL`.
-   `SummingMergeTree` が正しく動作のための集計の入れ子データ構造との複合鍵があります。
-   固定の可能性、レースの条件を選択する際にはリーダー `ReplicatedMergeTree` テーブル。

#### ビルドの変更: {#build-changes-5}

-   ビルドのサポート `ninja` 代わりに `make` と用途 `ninja` デフォルトのビルリリースなどで行っています。
-   パッケージ名変更: `clickhouse-server-base` で `clickhouse-common-static`; `clickhouse-server-common` で `clickhouse-server`; `clickhouse-common-dbg` で `clickhouse-common-static-dbg`. インストールするには、 `clickhouse-server clickhouse-client`. 古い名前のパッケージは、下位互換性のためにリポジトリにロードされます。

#### 下位互換性のない変更: {#backward-incompatible-changes-9}

-   削除され、特別の解釈で表現場配列を指定することができます。 以前は、式 `arr IN (set)` として解釈された “at least one `arr` element belongs to the `set`”. 新しいバ `arrayExists(x -> x IN (set), arr)`.
-   ソケットオプションの不正な使用を無効にします `SO_REUSEPORT` Pocoライブラリでデフォルトで正しく有効になっていません。 Linuxでは、アドレスを同時に指定する理由はもはやないことに注意してください `::` と `0.0.0.0` for listen – use just `::` これにより、IPv4とIPv6の両方の接続をリッスンすることができます（デフォルトのカーネル設定設定で）。 もできますに帰属する為には、以前のバージョンを指定する `<listen_reuse_port>1</listen_reuse_port>` 設定で。

### ClickHouseリリース1.1.54370、2018-03-16 {#clickhouse-release-1-1-54370-2018-03-16}

#### 新しい機能: {#new-features-15}

-   を追加しました `system.macros` 設定ファイルが変更されたときのマクロのテーブルと自動更新。
-   を追加しました `SYSTEM RELOAD CONFIG` クエリ。
-   を追加しました `maxIntersections(left_col, right_col)` 同時に交差する区間の最大数を返す集計関数 `[left; right]`. その `maxIntersectionsPosition(left, right)` 関数の先頭を返します “maximum” 間隔。 ([Michael Furmur](https://github.com/ClickHouse/ClickHouse/pull/2012)).

#### 改善: {#improvements-14}

-   Aにデータを挿入するとき `Replicated` テーブルに対する要求が少なくなる。 `ZooKeeper` (ユーザレベルのエラーのほとんどは、 `ZooKeeper` ログ）。
-   データセットのエイリアスを作成する機能を追加しました。 例えば: `WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10`.

#### バグ修正: {#bug-fixes-26}

-   修正された `Illegal PREWHERE` マージテーブルからの読み取りエラー `Distributed`テーブル。
-   IPv4専用のDockerコンテナでclickhouse-serverを起動できるようにする修正を追加しました。
-   システムか `system.parts_columns tables.`
-   に同期挿入中に削除されたダブルバッファリング `Distributed` 接続がタイムアウトする原因となった可能性のあるテーブル。
-   になるバグを修正し過度に長い待ちきレプリカを定めるものであ `SELECT` クエリ。
-   固定間違った日付で `system.parts` テーブル。
-   それは不可能でデータを挿入するために作られたバグを修正 `Replicated` テーブルの場合 `chroot` した空の構成 `ZooKeeper` クラスター
-   空の垂直統合アルゴリズムを修正しました `ORDER BY` テーブル。
-   リモートテーブルへのクエリでディクショナリを使用する機能を復元しました。 この機能はリリース1.1.54362で失われました。
-   のようなクエリの動作を復元 `SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)` ときの右側 `IN` リモートを使うべきです `default.table` くます。 この動作られた版1.1.54358.
-   の無関係なエラーレベルのログを削除しました `Not found column ... in block`.

### Clickhouseリリース1.1.54362,2018-03-11 {#clickhouse-release-1-1-54362-2018-03-11}

#### 新しい機能: {#new-features-16}

-   集計なし `GROUP BY` 空のセット(以下のような)の場合 `SELECT count(*) FROM table WHERE 0` これで、sql標準に準拠して、集計関数のnull値を持つ行がある結果が返されるようになりました。 古い動作を復元するには(空の結果を返す)、次のように設定します `empty_result_for_aggregation_by_empty_set` 1になります。
-   のための追加された型変換 `UNION ALL`. 異なるエイリアス名は `SELECT` の位置 `UNION ALL` を遵のSQL標準装備。
-   任意の式がサポートされます `LIMIT BY` 句。 これまでは、以下の結果の列のみを使用することができました `SELECT`.
-   の指標 `MergeTree` 表は次の場合に使用されます `IN` 主キーの列からの式のタプルに適用されます。 例えば: `WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)` （アナスタシヤTsarkova）。
-   を追加しました `clickhouse-copier` ツールのコピーとクラスター reshardingデータ(β).
-   一貫性のあるハッシュ機能を追加: `yandexConsistentHash`, `jumpConsistentHash`, `sumburConsistentHash`. ものとして使用できshardingキーを減らすため、ネットワークトラフィックの中でその後のreshardings.
-   機能追加: `arrayAny`, `arrayAll`, `hasAny`, `hasAll`, `arrayIntersect`, `arrayResize`.
-   を追加しました `arrayCumSum` 関数(Javi Santana)。
-   を追加しました `parseDateTimeBestEffort`, `parseDateTimeBestEffortOrZero`、と `parseDateTimeBestEffortOrNull` さまざまな形式のテキストを含む文字列からDateTimeを読み取る関数。
-   データは、更新中に外部の辞書から部分的にリロードすることができます（前回のダウンロードよりも指定されたフィールドの値が大きいレコードのみをロー
-   を追加しました `cluster` テーブル機能。 例えば: `cluster(cluster_name, db, table)`. その `remote` テーブル機能で、クラスター名の最初の引数として、指定された場合は、識別子です。
-   その `remote` と `cluster` テーブル関数は以下で使用できます `INSERT` クエリ。
-   を追加しました `create_table_query` と `engine_full` への仮想列 `system.tables`テーブル。 その `metadata_modification_time` 列は仮想です。
-   を追加しました `data_path` と `metadata_path` 列へ `system.tables`と`system.databases` テーブル、および追加された `path` コラムへの `system.parts` と `system.parts_columns` テーブル。
-   のマージに関する追加情報を追加しました。 `system.part_log` テーブル。
-   任意のパーティショニングキーを使用できます。 `system.query_log` テーブル（キリルShvakov）。
-   その `SHOW TABLES` クエリの現在も仮設ます。 追加された一時テーブルと `is_temporary` コラムへの `system.tables` （zhang2014）。
-   追加 `DROP TEMPORARY TABLE` と `EXISTS TEMPORARY TABLE` クエリ（zhang2014）。
-   のサポート `SHOW CREATE TABLE` 一時テーブル（zhang2014）のため。
-   を追加しました `system_profile` 内部プロセスで使用される設定の構成パラメーター。
-   読み込みのサポート `object_id` 属性として `MongoDB` 辞書（パベルLitvinenko）。
-   読む `null` 外部ディクショナリのデータを読み込むときのデフォルト値として `MongoDB` ソース（パベルLitvinenko）。
-   読む `DateTime` の値 `Values` 一重引quotesのないUnixタイムスタンプからの形式。
-   サポート `remote` レプリカの一部が要求されたテーブルが欠落している場合のテーブル関数。
-   構成設定は、実行時にコマンドラインでオーバーライドできます `clickhouse-server`. 例えば: `clickhouse-server -- --logger.level=information`.
-   実装された `empty` aからの関数 `FixedString` 引数：文字列が完全にヌルバイト（zhang2014）で構成されている場合、関数は1を返します。
-   を追加しました `listen_try`一部のアドレスがリッスンできない場合は、少なくとも一つのリッスンアドレスをリッスンするための設定パラメータ(IPv4またはIPv6のサポートが
-   を追加しました `VersionedCollapsingMergeTree` テーブルエンジン。
-   の行と任意の数値型のサポート `library` 辞書ソース。
-   `MergeTree` テーブルは主キーなしで使用できます（指定する必要があります `ORDER BY tuple()`).
-   A `Nullable` タイプは `CAST` 非に-`Nullable` 引数が指定されていない場合はtype `NULL`.
-   `RENAME TABLE` 以下のために実行できます `VIEW`.
-   を追加しました `throwIf` 機能。
-   を追加しました `odbc_default_field_size` ODBCソースからロードされた値の最大サイズを拡張できるオプション(既定では1024)。
-   その `system.processes` テーブルと `SHOW PROCESSLIST` 今すぐ `is_cancelled` と `peak_memory_usage` 列。

#### 改善: {#improvements-15}

-   結果の制限とクォータは、以下の中間データには適用されなくなりました `INSERT SELECT` クエリまたは `SELECT` サブクエリー
-   偽のトリガーが少ない `force_restore_data` 状態をの点検した場合 `Replicated` サーバーの起動時のテーブル。
-   を追加しました `allow_distributed_ddl` オプション。
-   非決定的関数は、次の式では使用できません `MergeTree` テーブルキー。
-   からの置換を伴うファイル `config.d` ディレクト
-   の改善された性能 `arrayElement` 要素の一つとして空の配列を持つ定数多次元配列の場合の関数。 例えば: `[[1], []][x]`.
-   サーバの開始に高速化した現在の使用時に設定ファイルの非常に大き換(例えば、非常に大きなリストのipネットワーク).
-   クエリを実行する場合、テーブル値関数は一度実行されます。 以前は, `remote` と `mysql` テーブル機能評価を行い、同じクエリを取得するにはテーブル構造からのリモートサーバーです。
-   その `MkDocs` ドキュメントジェネレータを使用します。
-   テーブルの列を削除しようとすると `DEFAULT`/`MATERIALIZED` 他の列の式は、例外がスローされる（zhang2014）。
-   テキスト形式の空行を0の数値として解析する機能を追加しました `Float` データ型。 この機能は以前は利用可能でしたが、リリース1.1.54342で失われました。
-   `Enum` 値は次の場所で使用できます。 `min`, `max`, `sum` といくつかの他の機能。 このような場合は、対応する数値を使用します。 この機能は以前は利用可能でしたが、リリース1.1.54337で失われました。
-   追加 `max_expanded_ast_elements` 再帰的にエイリアスを展開した後にASTのサイズを制限する。

#### バグ修正: {#bug-fixes-27}

-   サブクエリから不要な列が誤って削除された場合、またはサブクエリを含むサブクエリから削除されなかった場合 `UNION ALL`.
-   のためのマージのバグを修正しました `ReplacingMergeTree` テーブル。
-   固定synchronousの挿入 `Distributed` テーブル (`insert_distributed_sync = 1`).
-   特定の用途のための固定segfault `FULL` と `RIGHT JOIN` サブクエリに重複する列がある場合。
-   特定の用途のための固定segfault `replace_running_query` と `KILL QUERY`.
-   の順序を修正しました `source` と `last_exception` の列 `system.dictionaries` テーブル。
-   ときにバグを修正 `DROP DATABASE` クエリを削除しなかったファイルとメタデータを指すものとします。
-   修正された `DROP DATABASE` のためのクエリ `Dictionary` データベース
-   固定の低精度 `uniqHLL12` と `uniqCombined` 100万のアイテム（アレックスBocharov）より大きな基数のための機能。
-   固定の計算の暗黙のデフォルト値が必要な場合には同時に計算デフォルトの明示的な表現 `INSERT` クエリ（zhang2014）。
-   まれなケースを修正するときにクエリ `MergeTree` テーブルは終えることができなかった(chenxing-xc)。
-   実行しているときに発生したクラッシュを修正 `CHECK` のためのクエリ `Distributed` すべてのシャードがローカルの場合はテーブル(chenxing.xc）。
-   正規表現を使用する関数で、わずかなパフォーマンス回帰を修正しました。
-   複雑な式から多次元配列を作成する際のパフォーマンスの回帰を修正しました。
-   余分な原因となるバグを修正しました `FORMAT` に表示されるセクション `.sql` ファイ
-   その原因となったバグを修正 `max_table_size_to_drop` 削除しようとするときに適用する制限 `MATERIALIZED VIEW` 明示的に指定されたテーブルを調べる。
-   古いクライアントとの非互換性を修正しました(古いクライアン `DateTime('timezone')` 彼らは理解していないタイプ）。
-   読み込み時のバグを修正 `Nested` を使用して追加された構造体の列要素 `ALTER` しかし、これらの列の条件が移動したときに、古いパーティションでは空です `PREWHERE`.
-   時の不具合を修正フィルタリングテーブルによる仮想 `_table` クエリの列 `Merge` テーブル。
-   使用する際のバグを修正しました `ALIAS` の列 `Distributed` テーブル。
-   から集計関数を持つクエリのための動的コンパイルが不可能になったバグを修正 `quantile` 家族
-   クエリ実行パイプラインの競合状態を修正しました。 `Merge` 多数のテーブルを持つテーブル、および使用時 `GLOBAL` サブクエリー
-   に異なるサイズの配列を渡すときにクラッシュを修正 `arrayReduce` 複数の引数から集約関数を使用する場合の関数です。
-   とのクエリの使用を禁止 `UNION ALL` で `MATERIALIZED VIEW`.
-   の初期化中にエラーを修正しました `part_log` サーバ起動時のシステムテーブル(デフォルト, `part_log` が無効になっています)。

#### 下位互換性のない変更: {#backward-incompatible-changes-10}

-   削除された `distributed_ddl_allow_replicated_alter` オプション。 この動作は既定で有効になっています。
-   削除された `strict_insert_defaults` 設定。 この機能を使用している場合は、次のように記述します `clickhouse-feedback@yandex-team.com`.
-   削除された `UnsortedMergeTree` エンジン。

### Clickhouseリリース1.1.54343、2018-02-05 {#clickhouse-release-1-1-54343-2018-02-05}

-   分散ddlクエリおよび分散テーブルのコンストラクタでクラスタ名を定義するためのマクロの追加: `CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')`.
-   今のようなクエリ `SELECT ... FROM table WHERE expr IN (subquery)` を使用して処理されます `table` インデックス
-   処理能の重複を挿入する場合はを再現し、テーブルではなく実行を複製します。

### Clickhouseリリース1.1.54342、2018-01-22 {#clickhouse-release-1-1-54342-2018-01-22}

このリリースには、以前のリリース1.1.54337のバグ修正が含まれています:

-   1.1.54337の回帰を修正しました：デフォルトのユーザーが読み取り専用アクセスを持っている場合、サーバーは、メッセージで起動することを拒否 `Cannot create database in readonly mode`.
-   1.1.54337の回帰を修正しました：systemdを持つシステムでは、設定に関係なく常にsyslogにログが書き込まれます。d
-   ドッカー画像で間違ったデフォルト設定：1.1.54337での回帰を修正しました。
-   GraphiteMergeTreeの非決定的動作を修正しました（ログメッセージで見ることができます `Data after merge is not byte-identical to the data on another replicas`).
-   なることがある不具合を修正しつ一貫性のない合併後最適なクエリーの複製のテーブル(きめて発見されたログメッセージ `Part ... intersects the previous part`).
-   バッファーの表現は正常に動作が実現列の先テーブル（zhang2014).
-   NULLの実装のバグを修正しました。

### Clickhouseリリース1.1.54337、2018-01-18 {#clickhouse-release-1-1-54337-2018-01-18}

#### 新しい機能: {#new-features-17}

-   多次元配列およびタプルの格納に対するサポートが追加されました (`Tuple` テーブル内のデータ型)。
-   テーブル関数のサポート `DESCRIBE` と `INSERT` クエリ。 サブクエリのサポートが追加されました `DESCRIBE`. 例: `DESC TABLE remote('host', default.hits)`; `DESC TABLE (SELECT 1)`; `INSERT INTO TABLE FUNCTION remote('host', default.hits)`. のサポート `INSERT INTO TABLE` に加えて `INSERT INTO`.
-   タイムゾーンのサポートの改善。 その `DateTime` データ型は、テキスト形式の解析と書式設定に使用されるタイムゾーンで注釈を付けることができます。 例えば: `DateTime('Europe/Moscow')`. タイムゾーンが指定されている場合 `DateTime` 引数を指定すると、戻り値の型はタイムゾーンを追跡し、値は期待どおりに表示されます。
-   機能を追加しました `toTimeZone`, `timeDiff`, `toQuarter`, `toRelativeQuarterNum`. その `toRelativeHour`/`Minute`/`Second` 関数はtypeの値を取ることができます `Date` 引数として。 その `now` 関数名は大文字と小文字が区別されます。
-   を追加しました `toStartOfFifteenMinutes` 機能（キリルShvakov）。
-   を追加しました `clickhouse format` ツールのためのフォーマットのクエリ.
-   を追加しました `format_schema_path` configuration parameter (Marek Vavruşa). It is used for specifying a schema in `Cap'n Proto` フォーマット。 スキーマファイ
-   設定置換のサポートが追加されました (`incl` と `conf.d`）外部辞書やモデル（パベルYakunin）の構成のために。
-   のドキュメントと列を追加しました `system.settings` テーブル（キリルShvakov）。
-   を追加しました `system.parts_columns` 各データ部分の列サイズに関する情報を持つテーブル `MergeTree` テーブル。
-   を追加しました `system.models` loadedに関する情報を含む表 `CatBoost` 機械学習モデル。
-   を追加しました `mysql` と `odbc` テーブル機能と対応 `MySQL` と `ODBC` テーブルエンジン この機能はベータ段階です。
-   型の引数を渡す可能性を追加しました `AggregateFunction` のための `groupArray` 集計関数（集計関数の状態の配列を作成できます）。
-   削除の制限を様々に組み合わせて集計機能combinators. たとえば、次のものを使用できます `avgForEachIf` 同様に `avgIfForEach` 集計機能の異なる行動です。
-   その `-ForEach` 集合関数combinatorのは、複数の引数の集約関数の場合に拡張されます。
-   の集計関数のサポートを追加しました `Nullable` 引数をもた場合は、関数が返す非-`Nullable` 結果（Silviu Carageaの貢献を追加しました）。 例えば: `groupArray`, `groupUniqArray`, `topK`.
-   を追加しました `max_client_network_bandwidth` のために `clickhouse-client` （キリルShvakov）。
-   ユーザーの `readonly = 2` setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT…) (Kirill Shvakov).
-   複数の消費者を使用するためのサポートを追加 `Kafka` エンジン。 の拡張構成オプション `Kafka` (Marek Vavruša).
-   を追加しました `intExp3` と `intExp4` 機能。
-   を追加しました `sumKahan` 集計関数。
-   ここで、\*number\*は数値型です。
-   のサポートを追加 `WITH` aの句 `INSERT SELECT` クエリ（著者：zhang2014）。
-   追加された設定: `http_connection_timeout`, `http_send_timeout`, `http_receive_timeout`. 特に、これらの設定のためのデータのダウンロードパーツのレプリケーション. を変更する設定できる高速フェイルオーバーの場合はネットワークが過負荷状態で運転されています。
-   のサポートを追加 `ALTER` テーブルの型 `Null` （アナスタシヤTsarkova）。
-   その `reinterpretAsString` 関数は、メモリに連続して格納されているすべてのデータ型に対して拡張されます。
-   を追加しました `--silent` のための選択 `clickhouse-local` ツール。 Stderrでクエリ実行情報を出力しないようにします。
-   Typeの値を読み取るためのサポートを追加 `Date` fromテキストの形式で、月の月または日が二桁(Amos Bird)ではなく一桁の数字を使用して指定されています。

#### パフォーマンスの最適化: {#performance-optimizations}

-   集計関数のパフォーマンスの向上 `min`, `max`, `any`, `anyLast`, `anyHeavy`, `argMin`, `argMax` 文字列引数から。
-   機能のパフォーマンスの向上 `isInfinite`, `isFinite`, `isNaN`, `roundToExp2`.
-   解析と書式設定のパフォーマンスの向上 `Date` と `DateTime` テキスト形式で値を入力します。
-   浮動小数点数の解析のパフォーマンスと精度が向上しました。
-   メモリ使用量の削減 `JOIN` れた場合、左右のパーツはカラムと同じ名前がつけられていますが含まれない `USING` .
-   集計関数のパフォーマンスの向上 `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr` 計算の安定性を減らします 古い関数は、名前の下で利用可能です `varSampStable`, `varPopStable`, `stddevSampStable`, `stddevPopStable`, `covarSampStable`, `covarPopStable`, `corrStable`.

#### バグ修正: {#bug-fixes-28}

-   実行後のデータ重複除外を修正しました `DROP` または `DETACH PARTITION` クエリ。 以前のバージョン、パーティションに挿入し、同じデータを再度はありませんが挿入されブロックを考慮した重複している。
-   の誤った解釈につながる可能性のあるバグを修正しました `WHERE` のための節 `CREATE MATERIALIZED VIEW` とのクエリ `POPULATE` .
-   を使用してのバグを修正しました `root_path` のパラメータ `zookeeper_servers` 構成。
-   固定予期しない結果を渡す `Date` の引数 `toStartOfDay` .
-   修正された `addMonths` と `subtractMonths` 機能および算術のための `INTERVAL n MONTH` 結果は前年を持っている場合には。
-   のためのサポートが不足して追加 `UUID` のデータ型 `DISTINCT` , `JOIN` 、と `uniq` 集計機能-外部辞書(Evgeniyイワノフ）. のサポート `UUID` まだ不完全です。
-   固定 `SummingMergeTree` 行がゼロに加算された場合の動作。
-   のための様々な修正 `Kafka` engine (Marek Vavruša).
-   の誤った動作を修正しました `Join` テーブルエンジン（アモス鳥）。
-   固定の誤ったアロケータの組み合わせによる動作os、os xで動作します。
-   その `extractAll` 機能に対応しま空いる。
-   の使用をブロックエラーを修正しました `libressl` 代わりに `openssl` .
-   修正された `CREATE TABLE AS SELECT` 一時テーブルからのクエリ。
-   固定非atomicityの更新を複製します。 このレプリカとの同期までのサーバが再起動してしまいます。
-   固定可能なオーバーフロー `gcd` , `lcm` と `modulo` (`%` 演算子)(Maks Skorokhod).
-   `-preprocessed` ファイルは現在、変更後に作成されます `umask` (`umask` 設定で変更することができます）。
-   部品のバックグラウンドチェックのバグを修正 (`MergeTreePartChecker` カスタムパーティションキーを使用する場合。
-   タプル（の値）の固定解析 `Tuple` テキスト形式のデータ型）。
-   向上しエラーメッセージとして互換性のない型を渡す `multiIf` , `array` といくつかの他の機能。
-   サポートの再設計 `Nullable` タイプ。 サーバーがクラッシュするバグを修正。 固定に関連する他のほとんどすべてのバグ `NULL` サポート:INSERT SELECTでの型変換が正しくない、HAVINGおよびPREWHEREでのNullableのサポートが不十分, `join_use_nulls` の引数としてNull可能な型 `OR` オペレーター等
-   データ型の内部セマンティクスに関連するさまざまなバグを修正。 例：不要な加算 `Enum` タイプフィールド `SummingMergeTree` ;の整列 `Enum` タイプ `Pretty` フォーマット、等。
-   複合列の許容される組み合わせを厳密にチェックします。
-   オーバーフローを修正 `FixedString` データ型。
-   のバグを修正しました `topK` ジェネリックケースの集計関数。
-   集計関数のn-aryバリアントの引数に配列サイズが等しいかどうかのチェックが欠けていることを追加しました `-Array` コンビネータ
-   でバグを修正しました `--pager` のために `clickhouse-client` （著者：ks1322）。
-   の精度を修正しました `exp10` 機能。
-   の動作を修正しました `visitParamExtract` 機能により遵守します。
-   固定をした場合クラッシュする不正確なデータ種を指定します。
-   の動作を修正しました `DISTINCT` すべての列が定数の場合。
-   使用する場合の固定クエリの書式設定 `tupleElement` タプル要素インデックスとして複素数定数式を持つ関数。
-   でバグを修正しました `Dictionary` テーブルのため `range_hashed` 辞書だ
-   の結果に過度の行につながるバグを修正しました `FULL` と `RIGHT JOIN` （アモス鳥）。
-   固定サーバのクラッシュの作成時に除去の一時ファイル `config.d` ディレクトリの中configしてください。
-   修正された `SYSTEM DROP DNS CACHE` クエリのキャッシュをフラッシュがアドレスのクラスタノードが更新されません。
-   の動作を修正しました `MATERIALIZED VIEW` 実行後 `DETACH TABLE` for the table under the view (Marek Vavruša).

#### ビルドの改善: {#build-improvements-4}

-   その `pbuilder` ツールはビルドに使用されます。 ビルドプロセスは、ビルドホスト環境からほぼ完全に独立しています。
-   単一のビルドは、異なるosバージョンに使用されます。 パッケージおよびバイナリはlinuxシステムの広い範囲と互換性があるようにされた。
-   を追加しました `clickhouse-test` パッケージ。 機能テストの実行に使用できます。
-   ソースtarballをリポジトリに公開できるようになりました。 これは、githubを使用せずにビルドを再現するために使用できます。
-   Travis CIとの限定的な統合が追加されました。 Travisのビルド時間に制限があるため、デバッグビルドのみがテストされ、テストの限られたサブセットが実行されます。
-   のサポートを追加 `Cap'n'Proto` デフォルトのビルドで。
-   ドキュメントソースのフォーマットを `Restricted Text` に `Markdown`.
-   のサポートを追加 `systemd` （ウラジミールスミルノフ）。 これはデフォルトでは無効に設定により不適合一部のOSの画像を有効にすることができます。
-   動的コード生成の場合, `clang` と `lld` に埋め込まれます `clickhouse` バイナリ 彼らはまた、 `clickhouse clang` と `clickhouse lld` .
-   コードからgnu拡張の使用を削除しました。 を有効にする `-Wextra` オプション。 ビルドするとき `clang` デフォルトは `libc++` 代わりに `libstdc++`.
-   抽出 `clickhouse_parsers` と `clickhouse_common_io` 図書館を高速ビルドの様々なツールです。

#### 下位互換性のない変更: {#backward-incompatible-changes-11}

-   マークの書式 `Log` 以下を含む表を入力します `Nullable` 列は、下位互換性のない方法で変更されました。 これらのテーブルがある場合は、これらのテーブルを `TinyLog` タイプ前のサーババージョン。 これを行うには、 `ENGINE = Log` と `ENGINE = TinyLog` 対応する `.sql` のファイル `metadata` ディレクトリ。 あなたのテーブルに `Nullable` 列またはテーブルの型がそうでない場合 `Log`、その後、あなたは何もする必要はありません。
-   削除された `experimental_allow_extended_storage_definition_syntax` 設定。 この機能はデフォルトで有効になりました。
-   その `runningIncome` 関数の名前が変更されました `runningDifferenceStartingWithFirstvalue` 混乱を避けるため。
-   削除された `FROM ARRAY JOIN arr` 配列結合がテーブルなしでFROMの直後に指定されたときの構文（Amos Bird）。
-   削除された `BlockTabSeparated` デモンストレーション目的でのみ使用された形式。
-   集計関数の状態フォーマットを変更 `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr`. これらの集計関数の状態をテーブルに格納している場合(以下を使用 `AggregateFunction` 対応する状態のデータ-タイプか具体化された眺めは）、に書きますclickhouse-feedback@yandex-team.com。
-   集計関数がパラメータに依存している場合でも、aggregatefunctionデータ型でパラメータなしで指定できます。 例えば: `AggregateFunction(quantiles, UInt64)` 代わりに `AggregateFunction(quantiles(0.5, 0.9), UInt64)`. この機能は失われました。 それは文書化されていませんでしたが、我々は将来のリリースで再びそれをサポートする予定。
-   Enumデータ型は、最小/最大集計関数では使用できません。 この能力は、次のリリースで返されます。

#### ご注意ください: {#please-note-when-upgrading}

-   クラスター上でローリングアップデートを実行する場合、レプリカの一部が古いバージョンのclickhouseを実行していて、一部のレプリカが新しいバージョンを実行 `unknown parameter 'shard'` ログに表示されます。 レプリケーションは今後すべてのレプリカクラスターを更新しました。
-   場合により、異なるバージョンのclickhouseにクラスタサーバで分散クエリは以下の関数を使って誤った結果: `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr`. まアップデートすべきであるすべてのクラスタノード。

## [2017年の変更履歴](https://github.com/ClickHouse/ClickHouse/blob/master/docs/en/changelog/2017.md) {#changelog-for-2017}
