---
machine_translated: true
machine_translated_rev: 72537a2d527c63c07aa5d2361a8829f3895cf2bd
toc_priority: 78
toc_title: '2018'
---

## ClickHouseリリース18.16 {#clickhouse-release-18-16}

### ClickHouseリリース18.16.1、2018年12月21日 {#clickhouse-release-18-16-1-2018-12-21}

#### バグ修正: {#bug-fixes}

-   ODBCソースで辞書を更新する際に問題が発生するエラーを修正しました。 [\#3825](https://github.com/ClickHouse/ClickHouse/issues/3825), [\#3829](https://github.com/ClickHouse/ClickHouse/issues/3829)
-   集計関数のJITコンパイルがLowCardinality列で動作するようになりました。 [\#3838](https://github.com/ClickHouse/ClickHouse/issues/3838)

#### 改善: {#improvements}

-   追加された `low_cardinality_allow_in_native_format` 設定(デフォルトで有効)。 無効にすると、LowCardinality列はSELECTクエリでは通常の列に変換され、insertクエリでは通常の列に変換されます。 [\#3879](https://github.com/ClickHouse/ClickHouse/pull/3879)

#### ビルドの改善: {#build-improvements}

-   MacOSとARM上のビルドの修正。

### ClickHouseリリース18.16.0,2018-12-14 {#clickhouse-release-18-16-0-2018-12-14}

#### 新しい機能: {#new-features}

-   `DEFAULT` 式の評価のために欠けるのはデータの読み込みに半構造の入力形式 (`JSONEachRow`, `TSKV`). この機能は、 `insert_sample_with_metadata` 設定。 [\#3555](https://github.com/ClickHouse/ClickHouse/pull/3555)
-   その `ALTER TABLE` クエリには `MODIFY ORDER BY` 表の列を追加または削除するときに並べ替えキーを変更するアクション。 これは、 `MergeTree` このソートキーに基づいてマージするときに追加のタスクを実行するファミリ `SummingMergeTree`, `AggregatingMergeTree`、というように。 [\#3581](https://github.com/ClickHouse/ClickHouse/pull/3581) [\#3755](https://github.com/ClickHouse/ClickHouse/pull/3755)
-   のテーブルの場合 `MergeTree` 家族、今別の分類のキーを指定できます (`ORDER BY`）および索引 (`PRIMARY KEY`). ソートキーでのものより長い。 [\#3581](https://github.com/ClickHouse/ClickHouse/pull/3581)
-   追加された `hdfs` テーブル関数と `HDFS` テーブルエンジンの輸出入データHDFS. [chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/3617)
-   Base64を操作するための関数を追加しました: `base64Encode`, `base64Decode`, `tryBase64Decode`. [アレクサンドル-クラシェニコフ](https://github.com/ClickHouse/ClickHouse/pull/3350)
-   これで、パラメータを使用して、 `uniqCombined` 集計関数（HyperLogLogセルの数を選択します）。 [\#3406](https://github.com/ClickHouse/ClickHouse/pull/3406)
-   追加された `system.contributors` ClickHouseでコミットを行ったすべての人の名前を含むテーブル。 [\#3452](https://github.com/ClickHouse/ClickHouse/pull/3452)
-   パーティションを省略する機能を追加しました。 `ALTER TABLE ... FREEZE` クエリをバックアップするには、全ての仕切ります。 [\#3514](https://github.com/ClickHouse/ClickHouse/pull/3514)
-   追加 `dictGet` と `dictGetOrDefault` 戻り値の型を指定する必要のない関数。 タイプは、辞書の説明から自動的に決定されます。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3564)
-   これで、テーブルの説明で列のコメントを指定し、次のように変更できます `ALTER`. [\#3377](https://github.com/ClickHouse/ClickHouse/pull/3377)
-   読書はのために支えられる `Join` 単純なキーでテーブルを入力します。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   これで、オプションを指定できます `join_use_nulls`, `max_rows_in_join`, `max_bytes_in_join`,and `join_overflow_mode` を作成するとき `Join` タイプテーブル。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   追加された `joinGet` を使用することを可能にする関数 `Join` 辞書のようなテーブルを入力します。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3728)
-   追加された `partition_key`, `sorting_key`, `primary_key`,and `sampling_key` の列 `system.tables` テーブルキーに関する情報を提供するためのテーブル。 [\#3609](https://github.com/ClickHouse/ClickHouse/pull/3609)
-   追加された `is_in_partition_key`, `is_in_sorting_key`, `is_in_primary_key`,and `is_in_sampling_key` の列 `system.columns` テーブル。 [\#3609](https://github.com/ClickHouse/ClickHouse/pull/3609)
-   追加された `min_time` と `max_time` の列 `system.parts` テーブル。 これらの列は、パーティション分割キーが次の式の場合に設定されます `DateTime` 列。 [Emmanuel Donin de Rosière](https://github.com/ClickHouse/ClickHouse/pull/3800)

#### バグ修正: {#bug-fixes-1}

-   の修正とパフォーマンスの向上 `LowCardinality` データ型。 `GROUP BY` を使用して `LowCardinality(Nullable(...))`. の値を取得する `extremes`. 高次関数の処理。 `LEFT ARRAY JOIN`. 分散 `GROUP BY`. 返される関数 `Array`. の実行 `ORDER BY`. 書き込み先 `Distributed` テーブル（nicelulu）。 のための下位互換性 `INSERT` を実装する古いクライアントからの照会 `Native` プロトコル のサポート `LowCardinality` のために `JOIN`. した場合の性能改善作業を単一のストリームです。 [\#3823](https://github.com/ClickHouse/ClickHouse/pull/3823) [\#3803](https://github.com/ClickHouse/ClickHouse/pull/3803) [\#3799](https://github.com/ClickHouse/ClickHouse/pull/3799) [\#3769](https://github.com/ClickHouse/ClickHouse/pull/3769) [\#3744](https://github.com/ClickHouse/ClickHouse/pull/3744) [\#3681](https://github.com/ClickHouse/ClickHouse/pull/3681) [\#3651](https://github.com/ClickHouse/ClickHouse/pull/3651) [\#3649](https://github.com/ClickHouse/ClickHouse/pull/3649) [\#3641](https://github.com/ClickHouse/ClickHouse/pull/3641) [\#3632](https://github.com/ClickHouse/ClickHouse/pull/3632) [\#3568](https://github.com/ClickHouse/ClickHouse/pull/3568) [\#3523](https://github.com/ClickHouse/ClickHouse/pull/3523) [\#3518](https://github.com/ClickHouse/ClickHouse/pull/3518)
-   どのように修正 `select_sequential_consistency` オプションの作品。 以前は、この設定を有効にすると、新しいパーティションへの書き込み開始後に不完全な結果が返されることがありました。 [\#2863](https://github.com/ClickHouse/ClickHouse/pull/2863)
-   DDLの実行時にデータベースが正しく指定されます `ON CLUSTER` クエリと `ALTER UPDATE/DELETE`. [\#3772](https://github.com/ClickHouse/ClickHouse/pull/3772) [\#3460](https://github.com/ClickHouse/ClickHouse/pull/3460)
-   ビュ [\#3521](https://github.com/ClickHouse/ClickHouse/pull/3521)
-   のバグを修正しました `PREWHERE` と `FINAL` のために `VersionedCollapsingMergeTree`. [7167bfd7](https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1)
-   今すぐ使用できます `KILL QUERY` テーブルがロックされるのを待っているためにまだ開始されていないクエリを取り消す。 [\#3517](https://github.com/ClickHouse/ClickHouse/pull/3517)
-   時計が真夜中に戻った場合の日付と時刻の計算を修正しました（これはイランで起こり、1981年から1983年までモスクワで起こりました）。 以前は、これにより、時刻が必要以上に早くリセットされ、日付と時刻がテキスト形式で正しく書式設定されなくなりました。 [\#3819](https://github.com/ClickHouse/ClickHouse/pull/3819)
-   いくつかのケースでバグを修正 `VIEW` データベースを省略するサブクエリ。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3521)
-   Aから同時に読み取るときの競合状態を修正しました `MATERIALIZED VIEW` と削除a `MATERIALIZED VIEW` 内部を締めないことが原因で `MATERIALIZED VIEW`. [\#3404](https://github.com/ClickHouse/ClickHouse/pull/3404) [\#3694](https://github.com/ClickHouse/ClickHouse/pull/3694)
-   エラーを修正しました `Lock handler cannot be nullptr.` [\#3689](https://github.com/ClickHouse/ClickHouse/pull/3689)
-   固定クエリ処理時に `compile_expressions` オプションは有効です（デフォルトで有効です）。 次のような非決定性定数式 `now` 機能が展開されなくなりました。 [\#3457](https://github.com/ClickHouse/ClickHouse/pull/3457)
-   非定数スケール引数を指定するとクラッシュする問題を修正しました。 `toDecimal32/64/128` 機能。
-   で配列を挿入しようとするとエラーを修正しました `NULL` の要素 `Values` 型の列にフォーマットする `Array` なし `Nullable` （もし `input_format_values_interpret_expressions` = 1). [\#3487](https://github.com/ClickHouse/ClickHouse/pull/3487) [\#3503](https://github.com/ClickHouse/ClickHouse/pull/3503)
-   固定連続エラーログイン `DDLWorker` 飼育係が利用できない場合。 [8f50c620](https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2)
-   の戻り値の型を修正しました `quantile*` からの関数 `Date` と `DateTime` 引数のタイプ。 [\#3580](https://github.com/ClickHouse/ClickHouse/pull/3580)
-   固定された `WITH` 句式なしで単純な別名を指定する場合。 [\#3570](https://github.com/ClickHouse/ClickHouse/pull/3570)
-   指定されたサブクエリと修飾された列名を持つクエリの処理を修正しました。 `enable_optimize_predicate_expression` 有効です。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3588)
-   エラーを修正しました `Attempt to attach to nullptr thread group` マテリアライズドビューを操作する場合。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3623)
-   特定の不正な引数を渡すときにクラッシュを修正しました。 `arrayReverse` 機能。 [73e3a7b6](https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871)
-   バッファオーバーフローを修正 `extractURLParameter` 機能。 改善された性能。 ゼロバイトを含む文字列の正しい処理を追加しました。 [141e9799](https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5)
-   の固定バッファオーバーフロー `lowerUTF8` と `upperUTF8` 機能。 これらの関数を実行する機能を削除しました `FixedString` 引数を入力します。 [\#3662](https://github.com/ClickHouse/ClickHouse/pull/3662)
-   削除時にまれな競合状態を修正 `MergeTree` テーブル [\#3680](https://github.com/ClickHouse/ClickHouse/pull/3680)
-   から読み取るときに競合状態を修正しました `Buffer` テーブルと同時に実行 `ALTER` または `DROP` ターゲットテーブル上。 [\#3719](https://github.com/ClickHouse/ClickHouse/pull/3719)
-   この場合、segfaultを修正しました。 `max_temporary_non_const_columns` 制限を超えました。 [\#3788](https://github.com/ClickHouse/ClickHouse/pull/3788)

#### 改善: {#improvements-1}

-   サーバは、処理された設定ファイルを `/etc/clickhouse-server/` ディレクトリ。 その代り、それはそれらをで救います `preprocessed_configs` 内部ディレクトリ `path`. これは、 `/etc/clickhouse-server/` ディレクトリに書き込みアクセス権がない `clickhouse` セキュリティを向上させるユーザ。 [\#2443](https://github.com/ClickHouse/ClickHouse/pull/2443)
-   その `min_merge_bytes_to_use_direct_io` optionはデフォルトで10GiBに設定されています。 MergeTreeファミリーからテーブルの大部分を形成するマージは、以下で実行されます `O_DIRECT` 過剰なページキャッシュの削除を防止するモード。 [\#3504](https://github.com/ClickHouse/ClickHouse/pull/3504)
-   非常に多数のテーブルがある場合、サーバーの起動を加速します。 [\#3398](https://github.com/ClickHouse/ClickHouse/pull/3398)
-   接続プールとHTTPを追加しました `Keep-Alive` レプリカ間の接続の場合。 [\#3594](https://github.com/ClickHouse/ClickHouse/pull/3594)
-   クエリ構文が無効な場合は、 `400 Bad Request` コードは `HTTP` インターフェイス(500返還し上げます。 [31bc680a](https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab)
-   その `join_default_strictness` オプションは `ALL` 互換性のためにデフォルトで。 [120e2cbe](https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe)
-   削除されたログに `stderr` から `re2` 無効または複雑な正規表現のライブラリ。 [\#3723](https://github.com/ClickHouse/ClickHouse/pull/3723)
-   のために追加 `Kafka` テーブルエンジン:Kafkaからの読み取りを開始する前にサブスクリプションをチェックします。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3396)
-   その `cityHash64`, `farmHash64`, `metroHash64`, `sipHash64`, `halfMD5`, `murmurHash2_32`, `murmurHash2_64`, `murmurHash3_32`,and `murmurHash3_64` 関数は、任意の数の引数とタプル形式の引数に対して機能します。 [\#3451](https://github.com/ClickHouse/ClickHouse/pull/3451) [\#3519](https://github.com/ClickHouse/ClickHouse/pull/3519)
-   その `arrayReverse` 関数は現在、配列の任意の型で動作します。 [73e3a7b6](https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871)
-   オプションのパラメータを追加しました。 `timeSlots` 機能。 [キリル-シュヴァコフ](https://github.com/ClickHouse/ClickHouse/pull/3724)
-   のために `FULL` と `RIGHT JOIN` は、 `max_block_size` 設定は、右側のテーブルから結合されていないデータのストリームに使用されます。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3699)
-   追加された `--secure` コマンドラインパラメー `clickhouse-benchmark` と `clickhouse-performance-test` TLSを有効にする。 [\#3688](https://github.com/ClickHouse/ClickHouse/pull/3688) [\#3690](https://github.com/ClickHouse/ClickHouse/pull/3690)
-   型変換のときの構造a `Buffer` タイプtableがターゲットテーブルの構造と一致しません。 [ヴィタリー-バラノフ](https://github.com/ClickHouse/ClickHouse/pull/3603)
-   追加された `tcp_keep_alive_timeout` オプションをキープアライブパケットの後、運動不足のために指定された時間間隔で出ています。 [\#3441](https://github.com/ClickHouse/ClickHouse/pull/3441)
-   パーティションキーの値の不要なクォートを削除しました。 `system.parts` 単一の列で構成されている場合は表。 [\#3652](https://github.com/ClickHouse/ClickHouse/pull/3652)
-   モジュロ関数は `Date` と `DateTime` データ型。 [\#3385](https://github.com/ClickHouse/ClickHouse/pull/3385)
-   の同義語を追加しました `POWER`, `LN`, `LCASE`, `UCASE`, `REPLACE`, `LOCATE`, `SUBSTR`,and `MID` 機能。 [\#3774](https://github.com/ClickHouse/ClickHouse/pull/3774) [\#3763](https://github.com/ClickHouse/ClickHouse/pull/3763) 一部の関数名は、SQL標準との互換性のために大文字と小文字を区別しません。 追加された構文的な砂糖 `SUBSTRING(expr FROM start FOR length)` SQLとの互換性のため。 [\#3804](https://github.com/ClickHouse/ClickHouse/pull/3804)
-   に機能を追加しました `mlock` に対応するメモリページ `clickhouse-server` メモリから強制されないようにする実行可能コード。 この機能は既定で無効になっています。 [\#3553](https://github.com/ClickHouse/ClickHouse/pull/3553)
-   した場合の性能改善からの読み出し `O_DIRECT` （と `min_bytes_to_use_direct_io` オプションが有効）。 [\#3405](https://github.com/ClickHouse/ClickHouse/pull/3405)
-   の改善された性能 `dictGet...OrDefault` 定数キー引数と定数でないデフォルト引数の関数。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3563)
-   その `firstSignificantSubdomain` 関数は現在、ドメインを処理します `gov`, `mil`,and `edu`. [イゴール-ハタリス](https://github.com/ClickHouse/ClickHouse/pull/3601) 改善された性能。 [\#3628](https://github.com/ClickHouse/ClickHouse/pull/3628)
-   起動するためのカスタム環境変数を指定する機能 `clickhouse-server` を使用して `SYS-V init.d` 定義によるスクリプト `CLICKHOUSE_PROGRAM_ENV` で `/etc/default/clickhouse`.
    [パヴロ-バシンスキー](https://github.com/ClickHouse/ClickHouse/pull/3612)
-   Clickhouse-server initスクリプトの戻りコードを修正します。 [\#3516](https://github.com/ClickHouse/ClickHouse/pull/3516)
-   その `system.metrics` テーブルに今あります `VersionInteger` メトリック、および `system.build_options` 追加された行がある `VERSION_INTEGER` これには、ClickHouseバージョンの数値形式が含まれます。 `18016000`. [\#3644](https://github.com/ClickHouse/ClickHouse/pull/3644)
-   比較する機能を削除しました `Date` 型番号のようなエラーの可能性を回避 `date = 2018-12-17` 日付の前後の引用符が誤って省略されている場合。 [\#3687](https://github.com/ClickHouse/ClickHouse/pull/3687)
-   のようなステートフル関数の動作を修正しました `rowNumberInAllBlocks`. 以前は、クエリ分析中に開始されたため、一つの数値が大きかった結果を出力していました。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3729)
-   もし `force_restore_data` エラーメッセージが表示されます。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3794)

#### ビルドの改善: {#build-improvements-1}

-   更新された `jemalloc` 潜在的なメモリリークを修正するライブラリ。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3557)
-   プロファイル `jemalloc` はデフォルトで有効になるようにするためのデバッグ構造を作成する環境が整いました [2cc82f5c](https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15)
-   統合テストを実行する機能を追加しました。 `Docker` システムにインス [\#3650](https://github.com/ClickHouse/ClickHouse/pull/3650)
-   SELECTクエリにfuzz式テストを追加しました。 [\#3442](https://github.com/ClickHouse/ClickHouse/pull/3442)
-   複数の競合状態を検出するために、機能テストを並行してランダムに実行するコミットのストレステストを追加しました。 [\#3438](https://github.com/ClickHouse/ClickHouse/pull/3438)
-   Dockerイメージでclickhouse-serverを起動する方法を改善しました。 [エルガザル-アフメド](https://github.com/ClickHouse/ClickHouse/pull/3663)
-   のためのDocker画像の追加支援のための初期化データベース用のファイルを `/docker-entrypoint-initdb.d` ディレクトリ。 [コンスタンチン-レベデフ](https://github.com/ClickHouse/ClickHouse/pull/3695)
-   ARM上のビルドの修正。 [\#3709](https://github.com/ClickHouse/ClickHouse/pull/3709)

#### 下位互換性のない変更: {#backward-incompatible-changes}

-   比較する機能を削除しました `Date` 数字を入力します。 代わりに `toDate('2018-12-18') = 17883` 明示的な型変換を使用する必要があります `= toDate(17883)` [\#3687](https://github.com/ClickHouse/ClickHouse/pull/3687)

## ClickHouseリリース18.14 {#clickhouse-release-18-14}

### ClickHouseリリース18.14.19、2018年12月19日 {#clickhouse-release-18-14-19-2018-12-19}

#### バグ修正: {#bug-fixes-2}

-   ODBCソースで辞書を更新する際に問題が発生するエラーを修正しました。 [\#3825](https://github.com/ClickHouse/ClickHouse/issues/3825), [\#3829](https://github.com/ClickHouse/ClickHouse/issues/3829)
-   DDLの実行時にデータベースが正しく指定されます `ON CLUSTER` クエリ。 [\#3460](https://github.com/ClickHouse/ClickHouse/pull/3460)
-   この場合、segfaultを修正しました。 `max_temporary_non_const_columns` 制限を超えました。 [\#3788](https://github.com/ClickHouse/ClickHouse/pull/3788)

#### ビルドの改善: {#build-improvements-2}

-   ARM上のビルドの修正。

### ClickHouseリリース18.14.18,2018-12-04 {#clickhouse-release-18-14-18-2018-12-04}

#### バグ修正: {#bug-fixes-3}

-   修正されたエラーで `dictGet...` 型の辞書のための関数 `range`、引数のいずれかが定数であり、他がない場合。 [\#3751](https://github.com/ClickHouse/ClickHouse/pull/3751)
-   メッセ `netlink: '...': attribute type 1 has an invalid length` 印刷するLinuxカーネルのログをとったい何が起こっていただけ新鮮なバージョンのLinuxカーネルです。 [\#3749](https://github.com/ClickHouse/ClickHouse/pull/3749)
-   関数内の固定segfault `empty` の引数 `FixedString` タイプ。 [ダニエル-ダオ-クアン-ミン](https://github.com/ClickHouse/ClickHouse/pull/3703)
-   固定の過剰なメモリ割り当てが大きな値を示すことを `max_query_size` のメモリチャンク `max_query_size` 一度に事前割り当てされたバイト)。 [\#3720](https://github.com/ClickHouse/ClickHouse/pull/3720)

#### ビルドの変更: {#build-changes}

-   固定の構築をLLVM/Clangライブラリのバージョン7のOSのパッケージ(これらのライブラリを利用しています実行時のクエリを集める [\#3582](https://github.com/ClickHouse/ClickHouse/pull/3582)

### ClickHouseリリース18.14.17,2018-11-30 {#clickhouse-release-18-14-17-2018-11-30}

#### バグ修正: {#bug-fixes-4}

-   ODBCブリッジプロセスがメインサーバープロセスで終了しない場合を修正しました。 [\#3642](https://github.com/ClickHouse/ClickHouse/pull/3642)
-   への固定同期挿入 `Distributed` リモートテーブルの列リストとは異なる列リストを持つテーブル。 [\#3673](https://github.com/ClickHouse/ClickHouse/pull/3673)
-   MergeTreeテーブルをドロップするときにクラッシュする可能性があるまれな競合状態を修正しました。 [\#3643](https://github.com/ClickHouse/ClickHouse/pull/3643)
-   クエリスレッドの作成に失敗した場合のクエリデッドロックを修正しました。 `Resource temporarily unavailable` エラー [\#3643](https://github.com/ClickHouse/ClickHouse/pull/3643)
-   の修正された解析 `ENGINE` 句とき `CREATE AS table` 構文が使用され、 `ENGINE` の前に句が指定された。 `AS table` （エラーは指定されたエンジンを無視しました）。 [\#3692](https://github.com/ClickHouse/ClickHouse/pull/3692)

### ClickHouseリリース18.14.15,2018-11-21 {#clickhouse-release-18-14-15-2018-11-21}

#### バグ修正: {#bug-fixes-5}

-   型の列を逆シリアル化している間に、メモリチャンクのサイズが過大評価されました `Array(String)` それはにつながる “Memory limit exceeded” エラー この問題はバージョン18.12.13に登場しました。 [\#3589](https://github.com/ClickHouse/ClickHouse/issues/3589)

### ClickHouseリリース18.14.14,2018-11-20 {#clickhouse-release-18-14-14-2018-11-20}

#### バグ修正: {#bug-fixes-6}

-   固定 `ON CLUSTER` クエリがクラスタ設定の確保(フラグ `<secure>`). [\#3599](https://github.com/ClickHouse/ClickHouse/pull/3599)

#### ビルドの変更: {#build-changes-1}

-   修正された問題（システムからllvm-7、macosの) [\#3582](https://github.com/ClickHouse/ClickHouse/pull/3582)

### ClickHouseリリース18.14.13,2018-11-08 {#clickhouse-release-18-14-13-2018-11-08}

#### バグ修正: {#bug-fixes-7}

-   固定された `Block structure mismatch in MergingSorted stream` エラー [\#3162](https://github.com/ClickHouse/ClickHouse/issues/3162)
-   固定 `ON CLUSTER` セキュリティで保護された接続がクラスタ設定でオンになっている場合のクエリ `<secure>` 旗）。 [\#3465](https://github.com/ClickHouse/ClickHouse/pull/3465)
-   使用するクエリのエラーを修正しました `SAMPLE`, `PREWHERE` エイリアス列。 [\#3543](https://github.com/ClickHouse/ClickHouse/pull/3543)
-   レアを修正 `unknown compression method` エラー時 `min_bytes_to_use_direct_io` 設定が有効になりました。 [3544](https://github.com/ClickHouse/ClickHouse/pull/3544)

#### 性能の向上: {#performance-improvements}

-   クエリのパフォーマンス回帰を修正 `GROUP BY` AMD EPYCプロセッサで実行するときのuint16またはDate型の列。 [イゴール-ラップコ](https://github.com/ClickHouse/ClickHouse/pull/3512)
-   長い文字列を処理するクエリのパフォーマンス回帰を修正。 [\#3530](https://github.com/ClickHouse/ClickHouse/pull/3530)

#### ビルドの改善: {#build-improvements-3}

-   Arcadiaビルドを簡素化するための改善。 [\#3475](https://github.com/ClickHouse/ClickHouse/pull/3475), [\#3535](https://github.com/ClickHouse/ClickHouse/pull/3535)

### ClickHouseリリース18.14.12,2018-11-02 {#clickhouse-release-18-14-12-2018-11-02}

#### バグ修正: {#bug-fixes-8}

-   固定クラッシュに当社では豊富な種類の名前のないサブクエリ. [\#3505](https://github.com/ClickHouse/ClickHouse/pull/3505)
-   正しくないクエリを生成する修正(空 `WHERE` 句)外部データベースを照会する場合。 [ホティド](https://github.com/ClickHouse/ClickHouse/pull/3477)
-   ODBC辞書で誤ったタイムアウト値を使用して修正しました。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3511)

### ClickHouseリリース18.14.11、2018年10月29日 {#clickhouse-release-18-14-11-2018-10-29}

#### バグ修正: {#bug-fixes-9}

-   エラーを修正しました `Block structure mismatch in UNION stream: different number of columns` 制限クエリで。 [\#2156](https://github.com/ClickHouse/ClickHouse/issues/2156)
-   固定誤差が統合データテーブルを含む配列内の入れ子構造です。 [\#3397](https://github.com/ClickHouse/ClickHouse/pull/3397)
-   修正された不正確なクエリ結果 `merge_tree_uniform_read_distribution` 設定は無効です（デフォルトで有効です）。 [\#3429](https://github.com/ClickHouse/ClickHouse/pull/3429)
-   ネイティブ形式の分散テーブルへの挿入時のエラーを修正しました。 [\#3411](https://github.com/ClickHouse/ClickHouse/issues/3411)

### ClickHouseリリース18.14.10、2018年10月23日 {#clickhouse-release-18-14-10-2018-10-23}

-   その `compile_expressions` 設定(式のJITコンパイル)はデフォルトで無効になっています。 [\#3410](https://github.com/ClickHouse/ClickHouse/pull/3410)
-   その `enable_optimize_predicate_expression` 設定はデフォルトでは無効です。

### ClickHouseリリース18.14.9、2018年10月16日 {#clickhouse-release-18-14-9-2018-10-16}

#### 新しい機能: {#new-features-1}

-   その `WITH CUBE` 修飾子のための `GROUP BY` （代替構文 `GROUP BY CUBE(...)` また利用できます）。 [\#3172](https://github.com/ClickHouse/ClickHouse/pull/3172)
-   追加された `formatDateTime` 機能。 [アレクサンドル-クラシェニニコフ](https://github.com/ClickHouse/ClickHouse/pull/2770)
-   追加された `JDBC` テーブルエンジンと `jdbc` 表関数(clickhouse-jdbc-bridgeのインストールが必要)。 [アレクサンドル-クラシェニニコフ](https://github.com/ClickHouse/ClickHouse/pull/3210)
-   ISO週番号を操作するための機能を追加しました: `toISOWeek`, `toISOYear`, `toStartOfISOYear`,and `toDayOfYear`. [\#3146](https://github.com/ClickHouse/ClickHouse/pull/3146)
-   今すぐ使用できます `Nullable` の列 `MySQL` と `ODBC` テーブル [\#3362](https://github.com/ClickHouse/ClickHouse/pull/3362)
-   入れ子になったデータ構造は、 `JSONEachRow` 形式。 追加された `input_format_import_nested_json` 設定。 [ヴェロマン-ユンカン](https://github.com/ClickHouse/ClickHouse/pull/3144)
-   並列処理は多くの人に利用可能です `MATERIALIZED VIEW`sデータを挿入するとき。 を参照。 `parallel_view_processing` 設定。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3208)
-   追加された `SYSTEM FLUSH LOGS` query(以下のようなシステムテーブルへの強制ログフラッシュ `query_log`) [\#3321](https://github.com/ClickHouse/ClickHouse/pull/3321)
-   これで、事前定義を使用できます `database` と `table` 宣言時のマクロ `Replicated` テーブル [\#3251](https://github.com/ClickHouse/ClickHouse/pull/3251)
-   読む機能を追加しました `Decimal` 工学表記の値を入力します（十の累乗を示します）。 [\#3153](https://github.com/ClickHouse/ClickHouse/pull/3153)

#### 実験的な特徴: {#experimental-features}

-   GROUP BY句の最適化 `LowCardinality data types.` [\#3138](https://github.com/ClickHouse/ClickHouse/pull/3138)
-   の式の最適化された計算 `LowCardinality data types.` [\#3200](https://github.com/ClickHouse/ClickHouse/pull/3200)

#### 改善: {#improvements-2}

-   クエリのメモリ消費を大幅に削減 `ORDER BY` と `LIMIT`. を参照。 `max_bytes_before_remerge_sort` 設定。 [\#3205](https://github.com/ClickHouse/ClickHouse/pull/3205)
-   の不在下で `JOIN` (`LEFT`, `INNER`, …), `INNER JOIN` が仮定される。 [\#3147](https://github.com/ClickHouse/ClickHouse/pull/3147)
-   修飾されたアスタリスクは `JOIN`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/3202)
-   その `ODBC` テーブルエンジンは、リモートデータベースのSQL方言で識別子を引用する方法を正しく選択します。 [アレクサンドル-クラシェニニコフ](https://github.com/ClickHouse/ClickHouse/pull/3210)
-   その `compile_expressions` デフォルトでは、設定(式のJITコンパイル)が有効です。
-   固定の挙動を同時に落データベース/テーブルが存在すると作成してデータベースとテーブルのない場合が存在します。 以前は `CREATE DATABASE ... IF NOT EXISTS` クエリが返すエラーメッセージ “File … already exists”、および `CREATE TABLE ... IF NOT EXISTS` と `DROP TABLE IF EXISTS` クエリが返される `Table ... is creating or attaching right now`. [\#3101](https://github.com/ClickHouse/ClickHouse/pull/3101)
-   LIKEおよびIN式は、MySQLまたはODBCテーブルからクエリするときに、リモートサーバーに渡されます。 [\#3182](https://github.com/ClickHouse/ClickHouse/pull/3182)
-   WHERE句の定数式との比較は、MySQLおよびODBCテーブルからクエリするときにリモートサーバーに渡されます。 以前は、定数との比較のみが渡されました。 [\#3182](https://github.com/ClickHouse/ClickHouse/pull/3182)
-   ターミナルの行幅の正しい計算 `Pretty` 象形文字を含む文字列を含む形式。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/3257).
-   `ON CLUSTER` に指定することができます `ALTER UPDATE` クエリ。
-   データを読み取るための性能の向上 `JSONEachRow` 形式。 [\#3332](https://github.com/ClickHouse/ClickHouse/pull/3332)
-   の同義語を追加しました `LENGTH` と `CHARACTER_LENGTH` 互換性のための機能。 その `CONCAT` 関数では大文字と小文字が区別されなくなりました。 [\#3306](https://github.com/ClickHouse/ClickHouse/pull/3306)
-   追加された `TIMESTAMP` の同義語 `DateTime` タイプ。 [\#3390](https://github.com/ClickHouse/ClickHouse/pull/3390)
-   ログ行がクエリに関連していない場合でも、サーバーログにはquery\_id用のスペースが常に確保されています。 それによる解析サーバーテキストログとして第三者ツールです。
-   クエリによるメモリ消費は、次のレベルの整数レベルのギガバイトを超えるとログに記録されます。 [\#3205](https://github.com/ClickHouse/ClickHouse/pull/3205)
-   ネイティブプロトコルを使用するクライアントライブラリが誤って送信する列の数が、サーバーがINSERTクエリで想定している数より少ない場合の互換 このシナリオは、clickhouse-cppライブラリを使用する場合に可能でした。 従来、このシナリオのサーバーンダリングする能力があります。 [\#3171](https://github.com/ClickHouse/ClickHouse/pull/3171)
-   ユーザー定義のWHERE式では `clickhouse-copier` これで、aを使うことができます `partition_key` エイリアス(追加フィルタリングによるソーステーブルの分割). これがなければならないときに便利でのパーティショニングスキーマの変化の中で複製、変更するわけです。 [\#3166](https://github.com/ClickHouse/ClickHouse/pull/3166)
-   のワークフロー `Kafka` 高負荷でのデータ読み取り速度を自動的に低下させるために、エンジンがバックグラウンドスレッドプールに移動しました。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3215).
-   読書のサポート `Tuple` と `Nested` 次のような構造体の値 `struct` で `Cap'n'Proto format`. [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3216)
-   トップレベルドメインの一覧 `firstSignificantSubdomain` 関数にはドメインが含まれます `biz`. [デカシール](https://github.com/ClickHouse/ClickHouse/pull/3219)
-   外部辞書の構成, `null_value` 既定のデータ型の値として解釈されます。 [\#3330](https://github.com/ClickHouse/ClickHouse/pull/3330)
-   のためのサポート `intDiv` と `intDivOrZero` のための機能 `Decimal`. [b48402e8](https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264)
-   のためのサポート `Date`, `DateTime`, `UUID`,and `Decimal` のキーとしての型 `sumMap` 集計関数。 [\#3281](https://github.com/ClickHouse/ClickHouse/pull/3281)
-   のためのサポート `Decimal` 外部辞書のデータ型。 [\#3324](https://github.com/ClickHouse/ClickHouse/pull/3324)
-   のためのサポート `Decimal` データ型in `SummingMergeTree` テーブル [\#3348](https://github.com/ClickHouse/ClickHouse/pull/3348)
-   特殊化を追加 `UUID` で `if`. [\#3366](https://github.com/ClickHouse/ClickHouse/pull/3366)
-   数をの減らしました `open` と `close` システムコール `MergeTree table`. [\#3283](https://github.com/ClickHouse/ClickHouse/pull/3283)
-   A `TRUNCATE TABLE` クエリは任意のレプリカで実行できます(クエリはリーダーレプリカに渡されます)。 [キリル-シュヴァコフ](https://github.com/ClickHouse/ClickHouse/pull/3375)

#### バグ修正: {#bug-fixes-10}

-   問題を修正しました `Dictionary` 以下の表 `range_hashed` 辞書。 このエラーは、バージョン18.12.17で発生しました。 [\#1702](https://github.com/ClickHouse/ClickHouse/pull/1702)
-   ロード時のエラーを修正 `range_hashed` 辞書(メッセージ `Unsupported type Nullable (...)`). このエラーは、バージョン18.12.17で発生しました。 [\#3362](https://github.com/ClickHouse/ClickHouse/pull/3362)
-   の修正されたエラー `pointInPolygon` 互いに近くに位置する多数の頂点を有するポリゴンの不正確な計算の蓄積による機能。 [\#3331](https://github.com/ClickHouse/ClickHouse/pull/3331) [\#3341](https://github.com/ClickHouse/ClickHouse/pull/3341)
-   データパーツをマージした後、結果のパーツのチェックサムが別のレプリカの同じマージの結果と異なる場合、マージの結果が削除され、データパーツが他のレプリカ しかし、データパーツをダウンロードした後、そのパーツが既に存在するというエラーが発生したため、作業セットに追加できませんでした（マージ後にデータパーツが この循環的な試みをダウンロードします。 [\#3194](https://github.com/ClickHouse/ClickHouse/pull/3194)
-   クエリによる総メモリ消費の誤った計算を修正しました（誤った計算のため、 `max_memory_usage_for_all_queries` 設定は不正確に働き、 `MemoryTracking` ミリ規格が誤った値)となります。 このエラーは、バージョン18.12.13で発生しました。 [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3344)
-   の機能を修正しました `CREATE TABLE ... ON CLUSTER ... AS SELECT ...` このエラーは、バージョン18.12.13で発生しました。 [\#3247](https://github.com/ClickHouse/ClickHouse/pull/3247)
-   のためのデータ構造の固定不要な準備 `JOIN`クエリを開始するサーバー上のs `JOIN` リモートサーバーでのみ実行されます。 [\#3340](https://github.com/ClickHouse/ClickHouse/pull/3340)
-   のバグを修正しました `Kafka` エンジン:データの読み取り開始時に例外の後にデッドロックし、完了時にロック [Marek Vavruša](https://github.com/ClickHouse/ClickHouse/pull/3215).
-   のために `Kafka` テーブル、オプション `schema` パラメータが渡されませんでした。 `Cap'n'Proto` 形式）。 [Vojtech Splichal](https://github.com/ClickHouse/ClickHouse/pull/3150)
-   ZooKeeperサーバーの集団に、接続を受け入れるサーバーがあるが、ハンドシェイクに応答せずにすぐに接続を閉じる場合、ClickHouseは別のサーバーに接続することを選択しま 以前は、これはエラーを生成しました `Cannot read all data. Bytes read: 0. Bytes expected: 4.` サーバーが起動できませんでした。 [818cf3a](https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9)
-   ZooKeeperサーバーの集団にDNSクエリがエラーを返すサーバーが含まれている場合、これらのサーバーは無視されます。 [17b8e209](https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29)
-   間の固定型変換 `Date` と `DateTime` にデータを挿入するとき `VALUES` フォーマット(if `input_format_values_interpret_expressions = 1`). 以前は、Unixエポック時間の日数の数値とUnixタイムスタンプの間で変換が行われていたため、予期しない結果になりました。 [\#3229](https://github.com/ClickHouse/ClickHouse/pull/3229)
-   間の修正型変換 `Decimal` と整数。 [\#3211](https://github.com/ClickHouse/ClickHouse/pull/3211)
-   の修正されたエラー `enable_optimize_predicate_expression` 設定。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3231)
-   デフォルト以外のCSV区切り文字が使用されている場合、次のような浮動小数点数を使用したCSV形式の解析エラーを修正しました `;` [\#3155](https://github.com/ClickHouse/ClickHouse/pull/3155)
-   固定された `arrayCumSumNonNegative` 関数（アキュムレータがゼロより小さい場合、負の値は蓄積されません）。 [アレクセイ-スタドネフ](https://github.com/ClickHouse/ClickHouse/pull/3163)
-   固定方法 `Merge` テーブルはの上に働きます `Distributed` 使用する場合のテーブル `PREWHERE`. [\#3165](https://github.com/ClickHouse/ClickHouse/pull/3165)
-   のバグ修正 `ALTER UPDATE` クエリ。
-   のバグを修正しました `odbc` バージョン18.12で登場したテーブル関数。 [\#3197](https://github.com/ClickHouse/ClickHouse/pull/3197)
-   集計関数の操作を修正しました `StateArray` コンビネーター [\#3188](https://github.com/ClickHouse/ClickHouse/pull/3188)
-   分割時にクラッシュを修正しました `Decimal` 値はゼロです。 [69dd6609](https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179)
-   を使用して操作のための型の固定出力 `Decimal` と整数引数。 [\#3224](https://github.com/ClickHouse/ClickHouse/pull/3224)
-   中にsegfaultを修正しました `GROUP BY` に `Decimal128`. [3359ba06](https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a)
-   その `log_query_threads` 設定(クエリ実行の各スレッドに関するロギング情報)が有効になるようになりました。 `log_queries` オプション(クエリに関するログ情報)は1に設定されます。 以来、 `log_query_threads` オプションはデフォルトで有効になっています。 [\#3241](https://github.com/ClickHouse/ClickHouse/pull/3241)
-   Quantiles集計関数の分散操作のエラーを修正しました(エラーメッセージ `Not found column quantile...`). [292a8855](https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664)
-   バージョン18.12.17サーバーと古いサーバーのクラスターで同時に作業するときの互換性の問題を修正しました。 固定長と非固定長の両方のGROUP BYキーを持つ分散クエリでは、集計する大量のデータがある場合、返されるデータは必ずしも完全に集計されるとは限りませ [\#3254](https://github.com/ClickHouse/ClickHouse/pull/3254)
-   置換の処理を修正しました。 `clickhouse-performance-test`、クエリにテストで宣言された置換の一部のみが含まれている場合。 [\#3263](https://github.com/ClickHouse/ClickHouse/pull/3263)
-   使用時にエラーを修正しました `FINAL` と `PREWHERE`. [\#3298](https://github.com/ClickHouse/ClickHouse/pull/3298)
-   使用時にエラーを修正しました `PREWHERE` 中に追加された列の上 `ALTER`. [\#3298](https://github.com/ClickHouse/ClickHouse/pull/3298)
-   の不在のためのチェックを追加しました `arrayJoin` のために `DEFAULT` と `MATERIALIZED` 式。 以前は, `arrayJoin` データ挿入時にエラーが発生しました。 [\#3337](https://github.com/ClickHouse/ClickHouse/pull/3337)
-   の不在のためのチェックを追加しました `arrayJoin` で `PREWHERE` 句。 従来、このようなメッセージ `Size ... doesn't match` または `Unknown compression method` クエリを実行するとき。 [\#3357](https://github.com/ClickHouse/ClickHouse/pull/3357)
-   最適化の後にまれに発生する可能性のあるsegfaultを修正しました。 [リュイミン-バイトダンス](https://github.com/ClickHouse/ClickHouse/pull/3339)
-   へのマイナーな修正 `clickhouse-benchmark`:以前は、クライアント情報はサーバーに送信されていませんでしたが、シャットダウン時や反復回数を制限するために、実行されるクエリの数がより正確 [\#3351](https://github.com/ClickHouse/ClickHouse/pull/3351) [\#3352](https://github.com/ClickHouse/ClickHouse/pull/3352)

#### 下位互換性のない変更: {#backward-incompatible-changes-1}

-   削除された `allow_experimental_decimal_type` オプション その `Decimal` データ型はデフォルトで使用できます。 [\#3329](https://github.com/ClickHouse/ClickHouse/pull/3329)

## ClickHouseリリース18.12 {#clickhouse-release-18-12}

### ClickHouseリリース18.12.17,2018-09-16 {#clickhouse-release-18-12-17-2018-09-16}

#### 新しい機能: {#new-features-2}

-   `invalidate_query` (外部ディクショナリを更新する必要があるかどうかをチェックするためのクエリを指定する機能) `clickhouse` 出典 [\#3126](https://github.com/ClickHouse/ClickHouse/pull/3126)
-   使用する機能を追加しました `UInt*`, `Int*`,and `DateTime` データ型(とともに `Date` aとしてタイプ） `range_hashed` 範囲の境界を定義する外部辞書キー。 さて `NULL` 開いている範囲を指定するために使用できます。 [ヴァシーリー-ネムコフ](https://github.com/ClickHouse/ClickHouse/pull/3123)
-   その `Decimal` タイプがサポート `var*` と `stddev*` 集計関数。 [\#3129](https://github.com/ClickHouse/ClickHouse/pull/3129)
-   その `Decimal` タイプに対応しま数理機能 (`exp`, `sin` など。) [\#3129](https://github.com/ClickHouse/ClickHouse/pull/3129)
-   その `system.part_log` テーブルに今あります `partition_id` 列。 [\#3089](https://github.com/ClickHouse/ClickHouse/pull/3089)

#### バグ修正: {#bug-fixes-11}

-   `Merge` 今正しく動作します `Distributed` テーブル [冬張](https://github.com/ClickHouse/ClickHouse/pull/3159)
-   非互換性を修正しました。 `glibc` ClickHouseを実行することが不可能になったバージョン） `Ubuntu Precise` と古いバージョン。 非互換性はバージョン18.12.13で発生しました。 [\#3130](https://github.com/ClickHouse/ClickHouse/pull/3130)
-   の修正されたエラー `enable_optimize_predicate_expression` 設定。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3107)
-   18.12.13より前のバージョンのレプリカのクラスターを操作し、新しいバージョンのサーバー上にテーブルの新しいレプリカを同時に作成するときに表示される `Can not clone replica, because the ... updated to new ClickHouse version` これは論理的ですが、起こるべきではありません）。 [\#3122](https://github.com/ClickHouse/ClickHouse/pull/3122)

#### 下位互換性のない変更: {#backward-incompatible-changes-2}

-   その `enable_optimize_predicate_expression` オプションはデフォルトで有効化されてると楽観的に). 列名の検索に関連するクエリ分析エラーが発生した場合は、次のように設定します `enable_optimize_predicate_expression` 0にする。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3107)

### ClickHouseリリース18.12.14,2018-09-13 {#clickhouse-release-18-12-14-2018-09-13}

#### 新しい機能: {#new-features-3}

-   追加されたサポート `ALTER UPDATE` クエリ。 [\#3035](https://github.com/ClickHouse/ClickHouse/pull/3035)
-   追加された `allow_ddl` DDLクエリへのユーザーのアクセスを制限するオプション。 [\#3104](https://github.com/ClickHouse/ClickHouse/pull/3104)
-   追加された `min_merge_bytes_to_use_direct_io` 選択のための `MergeTree` これにより、マージの合計サイズのしきい値を設定できます(しきい値を超えると、データパートファイルはO\_DIRECTを使用して処理されます)。 [\#3117](https://github.com/ClickHouse/ClickHouse/pull/3117)
-   その `system.merges` システムテーブルには `partition_id` 列。 [\#3099](https://github.com/ClickHouse/ClickHouse/pull/3099)

#### 改善 {#improvements-3}

-   場合のデータ部分を据え置き期間中、突然変異なダウンロードによるレプリカ. [\#3103](https://github.com/ClickHouse/ClickHouse/pull/3103)
-   オートコンプリートは、操作時に設定の名前に使用できます `clickhouse-client`. [\#3106](https://github.com/ClickHouse/ClickHouse/pull/3106)

#### バグ修正: {#bug-fixes-12}

-   の要素である配列のサイズのチェックを追加しました `Nested` 挿入時に項目を入力します。 [\#3118](https://github.com/ClickHouse/ClickHouse/pull/3118)
-   外部辞書の更新エラーを修正しました。 `ODBC` ソースと `hashed` ストレージ。 このエラーは、バージョン18.12.13で発生しました。
-   クエリから一時テーブルを作成するときにクラッシュを修正しました。 `IN` 条件だ [冬張](https://github.com/ClickHouse/ClickHouse/pull/3098)
-   配列の集計関数のエラーを修正しました。 `NULL` 要素。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/3097)

### ClickHouseリリース18.12.13,2018-09-10 {#clickhouse-release-18-12-13-2018-09-10}

#### 新しい機能: {#new-features-4}

-   追加された `DECIMAL(digits, scale)` データ型 (`Decimal32(scale)`, `Decimal64(scale)`, `Decimal128(scale)`). 有効にするには、この設定を使用します `allow_experimental_decimal_type`. [\#2846](https://github.com/ClickHouse/ClickHouse/pull/2846) [\#2970](https://github.com/ClickHouse/ClickHouse/pull/2970) [\#3008](https://github.com/ClickHouse/ClickHouse/pull/3008) [\#3047](https://github.com/ClickHouse/ClickHouse/pull/3047)
-   新しい `WITH ROLLUP` 修飾子のための `GROUP BY` （代替構文: `GROUP BY ROLLUP(...)`). [\#2948](https://github.com/ClickHouse/ClickHouse/pull/2948)
-   JOINを使用したクエリでは、スター文字はSQL標準に準拠して、すべてのテーブルの列のリストに展開されます。 設定することで、古い動作を復元できます `asterisk_left_columns_only` ユーザー設定レベルでは1になります。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2787)
-   表関数との結合のサポートが追加されました。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2907)
-   Clickhouse-clientでTabキーを押してオートコンプリートします。 [セルゲイ-シチェルビン](https://github.com/ClickHouse/ClickHouse/pull/2447)
-   Clickhouse-clientでCtrl+Cを押すと、入力されたクエリがクリアされます。 [\#2877](https://github.com/ClickHouse/ClickHouse/pull/2877)
-   追加された `join_default_strictness` 設定(値: `"`, `'any'`, `'all'`). これにより、指定しないでください `ANY` または `ALL` のために `JOIN`. [\#2982](https://github.com/ClickHouse/ClickHouse/pull/2982)
-   クエリ処理に関連するサーバログの各行には、クエリIDが表示されます。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   これで、clickhouse-clientでクエリ実行ログを取得できます。 `send_logs_level` 設定）。 分散クエリ処理では、すべてのサーバーからログがカスケードされます。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.query_log` と `system.processes` (`SHOW PROCESSLIST`)テーブルいに関する情報は、変更されているすべての設定を実行するとき、クエリーの入れ子構造の `Settings` データ）。 追加された `log_query_settings` 設定。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.query_log` と `system.processes` テーブルには、クエリの実行に参加しているスレッドの数に関する情報が表示されます。 `thread_numbers` 列）。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   追加 `ProfileEvents` ネットワーク経由の読み取りと書き込み、およびディスクへの読み取りと書き込みに費やされた時間、ネットワークエラーの数、およびネットワーク帯域幅が [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   追加 `ProfileEvents`rusageのシステムメトリックを含むカウンター(ユーザースペースでのCPU使用率、カーネル、ページフォールト、およびコンテキストスイッチに関する情報を取得するため [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `ProfileEvents` カウンターはグローバルに適用され、クエリごとに、またクエリ実行スレッドごとに適用されます。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   追加された `system.query_thread_log` 各クエリ実行スレッドに関する情報を含むテーブル。 追加された `log_query_threads` 設定。 [\#2482](https://github.com/ClickHouse/ClickHouse/pull/2482)
-   その `system.metrics` と `system.events` 表現を内蔵しております。 [\#3016](https://github.com/ClickHouse/ClickHouse/pull/3016)
-   追加された `arrayEnumerateDense` 機能。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2975)
-   追加された `arrayCumSumNonNegative` と `arrayDifference` 機能。 [アレクセイ-スタドネフ](https://github.com/ClickHouse/ClickHouse/pull/2942)
-   追加された `retention` 集計関数。 [サンディ-リー](https://github.com/ClickHouse/ClickHouse/pull/2887)
-   これで、plus演算子を使用して集計関数の状態を追加（マージ）し、集計関数の状態に非負の定数を掛けることができます。 [\#3062](https://github.com/ClickHouse/ClickHouse/pull/3062) [\#3034](https://github.com/ClickHouse/ClickHouse/pull/3034)
-   MergeTreeファミリ内のテーブルに仮想列があるようになりました `_partition_id`. [\#3089](https://github.com/ClickHouse/ClickHouse/pull/3089)

#### 実験的な特徴: {#experimental-features-1}

-   追加された `LowCardinality(T)` データ型。 このデータ型で自動的に作成さ辞書の値でデータ処理せずに開封の辞書です。 [\#2830](https://github.com/ClickHouse/ClickHouse/pull/2830)
-   JITでコンパイルされた関数のキャッシュと、コンパイル前の使用回数のカウンタを追加しました。 式をJITコンパイルするには、 `compile_expressions` 設定。 [\#2990](https://github.com/ClickHouse/ClickHouse/pull/2990) [\#3077](https://github.com/ClickHouse/ClickHouse/pull/3077)

#### 改善: {#improvements-4}

-   固定問題の無限の集積レプリケーションログの場合があり捨ててレプリカ. を追加しました効率的な回収モードのためのレプリカとの長期に遅れて波及してきています。
-   の改善された性能 `GROUP BY` それらのいずれかが文字列で、他のものが固定長の場合、複数の集計フィールドを使用します。
-   使用時のパフォーマンスの向上 `PREWHERE` そして、式の暗黙の転送で `PREWHERE`.
-   テキスト形式の解析性能の向上 (`CSV`, `TSV`). [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2977) [\#2980](https://github.com/ClickHouse/ClickHouse/pull/2980)
-   の性能向上と読書文字列およびアレイバイナリ形式 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2955)
-   クエリのパフォーマンスの向上とメモリ消費の削減 `system.tables` と `system.columns` 単一のサーバー上に非常に多数のテーブルがある場合。 [\#2953](https://github.com/ClickHouse/ClickHouse/pull/2953)
-   クエリのストリームが大きい場合のパフォーマンスの問題を修正しました。 `_dl_addr` 関数は `perf top` しかし、サーバーは多くのCPUを使用していません）。 [\#2938](https://github.com/ClickHouse/ClickHouse/pull/2938)
-   条件はビューにキャストされます `enable_optimize_predicate_expression` 有効になっています)。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2907)
-   のための機能の改善 `UUID` データ型。 [\#3074](https://github.com/ClickHouse/ClickHouse/pull/3074) [\#2985](https://github.com/ClickHouse/ClickHouse/pull/2985)
-   その `UUID` データ型は、-Alchemist辞書でサポートされています。 [\#2822](https://github.com/ClickHouse/ClickHouse/pull/2822)
-   その `visitParamExtractRaw` 関数は、入れ子構造で正しく動作します。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2974)
-   ときに `input_format_skip_unknown_fields` オブジェクトフィールドが有効になる `JSONEachRow` フォーマットはスキップされます。 [BlahGeek](https://github.com/ClickHouse/ClickHouse/pull/2958)
-   のために `CASE` 条件付きの式を省略できるようになりました `ELSE` これは `ELSE NULL`. [\#2920](https://github.com/ClickHouse/ClickHouse/pull/2920)
-   操作タイムアウトで設定する場合、どの飼育係. [ウリーキー](https://github.com/ClickHouse/ClickHouse/pull/2971)
-   のオフセットを指定できます `LIMIT n, m` として `LIMIT n OFFSET m`. [\#2840](https://github.com/ClickHouse/ClickHouse/pull/2840)
-   を使用することができます `SELECT TOP n` 代替としての構文 `LIMIT`. [\#2840](https://github.com/ClickHouse/ClickHouse/pull/2840)
-   システムテーブルに書き込むキューのサイズを増やしたので、 `SystemLog parameter queue is full` エラーは頻繁に発生しません。
-   その `windowFunnel` 集計機能に対応しまイベントが複数の条件です。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2801)
-   重複する列は、 `USING` の句 `JOIN`. [\#3006](https://github.com/ClickHouse/ClickHouse/pull/3006)
-   `Pretty` フォーマットの幅による列の配置に制限があります。 使用する `output_format_pretty_max_column_pad_width` 設定。 値が広い場合は、全体が表示されますが、テーブル内の他のセルはあまり広くはありません。 [\#3003](https://github.com/ClickHouse/ClickHouse/pull/3003)
-   その `odbc` 表関数では、データベース/スキーマ名を指定することができます。 [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2885)
-   で指定されたユーザ名を使用する機能を追加しました `clickhouse-client` 設定ファイル。 [ウラジミールKozbin](https://github.com/ClickHouse/ClickHouse/pull/2909)
-   その `ZooKeeperExceptions` カウンターは三つに分割されています: `ZooKeeperUserExceptions`, `ZooKeeperHardwareExceptions`,and `ZooKeeperOtherExceptions`.
-   `ALTER DELETE` クエリの作業を実現します。
-   追加のランダム化の実行時にスレッドの清掃活動を定期的に `ReplicatedMergeTree` 非常に大きい数がある場合の周期的な負荷スパイクを避けるためにテーブル `ReplicatedMergeTree` テーブル
-   のサポート `ATTACH TABLE ... ON CLUSTER` クエリ。 [\#3025](https://github.com/ClickHouse/ClickHouse/pull/3025)

#### バグ修正: {#bug-fixes-13}

-   問題を修正しました `Dictionary` テーブル(スロー `Size of offsets doesn't match size of column` または `Unknown compression method` 例外）。 このバグに登場したバージョン18.10.3. [\#2913](https://github.com/ClickHouse/ClickHouse/issues/2913)
-   マージ時のバグを修正 `CollapsingMergeTree` テーブルの場合、データのパーツは空です(これらの部品の形成時の併合または `ALTER DELETE` すべてのデータが削除された場合）、および `vertical` マージにはアルゴリズムを使用した。 [\#3049](https://github.com/ClickHouse/ClickHouse/pull/3049)
-   中に競合状態を修正しました `DROP` または `TRUNCATE` のために `Memory` 同時のテーブル `SELECT` サーバーがクラッシュする可能性があります。 このバグはバージョン1.1.54388に登場しました。 [\#3038](https://github.com/ClickHouse/ClickHouse/pull/3038)
-   挿入時のデータ損失の可能性を修正しました `Replicated` テーブル `Session is expired` エラーが返されます(データ損失は `ReplicatedDataLoss` メートル法）。 このエラーはバージョン1.1.54378で発生しました。 [\#2939](https://github.com/ClickHouse/ClickHouse/pull/2939) [\#2949](https://github.com/ClickHouse/ClickHouse/pull/2949) [\#2964](https://github.com/ClickHouse/ClickHouse/pull/2964)
-   中にsegfaultを修正しました `JOIN ... ON`. [\#3000](https://github.com/ClickHouse/ClickHouse/pull/3000)
-   カラム名の検索エラーを修正しました。 `WHERE` 式は完全に修飾された列名で構成されます。 `WHERE table.column`. [\#2994](https://github.com/ClickHouse/ClickHouse/pull/2994)
-   固定された “Not found column” サブクエリを持つIN式で構成される単一の列がリモートサーバーから要求された場合に分散クエリを実行するときに発生したエラー。 [\#3087](https://github.com/ClickHouse/ClickHouse/pull/3087)
-   固定された `Block structure mismatch in UNION stream: different number of columns` シャードの一方がローカルで、他方がそうでない場合に分散クエリで発生したエラー、および移動先の最適化 `PREWHERE` トリガーされます。 [\#2226](https://github.com/ClickHouse/ClickHouse/pull/2226) [\#3037](https://github.com/ClickHouse/ClickHouse/pull/3037) [\#3055](https://github.com/ClickHouse/ClickHouse/pull/3055) [\#3065](https://github.com/ClickHouse/ClickHouse/pull/3065) [\#3073](https://github.com/ClickHouse/ClickHouse/pull/3073) [\#3090](https://github.com/ClickHouse/ClickHouse/pull/3090) [\#3093](https://github.com/ClickHouse/ClickHouse/pull/3093)
-   固定された `pointInPolygon` 非凸多角形の特定のケースのための関数。 [\#2910](https://github.com/ClickHouse/ClickHouse/pull/2910)
-   比較時の誤った結果を修正しました `nan` 整数です。 [\#3024](https://github.com/ClickHouse/ClickHouse/pull/3024)
-   のエラーを修正しました。 `zlib-ng` まれにsegfaultにつながる可能性のあるライブラリ。 [\#2854](https://github.com/ClickHouse/ClickHouse/pull/2854)
-   テーブルに挿入するときにメモリリークを修正しました `AggregateFunction` 集計関数の状態が単純でない場合（メモリを別々に割り当てる場合）、および単一の挿入要求が複数の小さなブロックになる場合。 [\#3084](https://github.com/ClickHouse/ClickHouse/pull/3084)
-   同じを作成および削除するときに競合状態を修正しました `Buffer` または `MergeTree` 同時にテーブル。
-   タプルなどの特定の非自明な型で構成されるタプルを比較するときにsegfaultの可能性を修正しました。 [\#2989](https://github.com/ClickHouse/ClickHouse/pull/2989)
-   特定の実行時にsegfaultの可能性を修正しました `ON CLUSTER` クエリ。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2960)
-   のエラーを修正しました。 `arrayDistinct` 機能のための `Nullable` 配列要素。 [\#2845](https://github.com/ClickHouse/ClickHouse/pull/2845) [\#2937](https://github.com/ClickHouse/ClickHouse/pull/2937)
-   その `enable_optimize_predicate_expression` オプションが正しく `SELECT *`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/2929)
-   ZooKeeperセッションの再初期化時にsegfaultを修正しました。 [\#2917](https://github.com/ClickHouse/ClickHouse/pull/2917)
-   ZooKeeperで作業するときに固定された潜在的なブロック。
-   修正コードをネストしたデータ構造 `SummingMergeTree`.
-   集計関数の状態にメモリを割り当てる場合、整列が正しく考慮されるため、集計関数の状態を実装するときに整列を必要とする操作を使用するこ [chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/2808)

#### セキュリティ修正: {#security-fix}

-   ODBCデータソースの安全な使用。 ODBCドライバーとの対話は、別の `clickhouse-odbc-bridge` プロセス。 サードパーテ [\#2828](https://github.com/ClickHouse/ClickHouse/pull/2828) [\#2879](https://github.com/ClickHouse/ClickHouse/pull/2879) [\#2886](https://github.com/ClickHouse/ClickHouse/pull/2886) [\#2893](https://github.com/ClickHouse/ClickHouse/pull/2893) [\#2921](https://github.com/ClickHouse/ClickHouse/pull/2921)
-   ファイルパスの誤った検証を修正しました。 `catBoostPool` テーブル関数。 [\#2894](https://github.com/ClickHouse/ClickHouse/pull/2894)
-   システムテーブルの内容 (`tables`, `databases`, `parts`, `columns`, `parts_columns`, `merges`, `mutations`, `replicas`,and `replication_queue`)フィルタによると、ユーザーの設定データベースへのアクセス (`allow_databases`). [冬張](https://github.com/ClickHouse/ClickHouse/pull/2856)

#### 下位互換性のない変更: {#backward-incompatible-changes-3}

-   JOINを使用したクエリでは、スター文字はSQL標準に準拠して、すべてのテーブルの列のリストに展開されます。 設定することで、古い動作を復元できます `asterisk_left_columns_only` ユーザー設定レベルでは1になります。

#### ビルドの変更: {#build-changes-2}

-   ほとんどの統合テストはcommitで実行できます。
-   コードスタイルチェックはcommitでも実行できます。
-   その `memcpy` CentOS7/Fedora上でビルドする場合、実装が正しく選択されます。 [エティエンヌ-シャンペイエ](https://github.com/ClickHouse/ClickHouse/pull/2912)
-   Clangを使用してビルドする場合、 `-Weverything` は、通常のに加えて、追加されています `-Wall-Wextra -Werror`. [\#2957](https://github.com/ClickHouse/ClickHouse/pull/2957)
-   ビルドをデバッグするには `jemalloc` debugオプション。
-   のインタフェースを図書館との交流の飼育係で宣言されていく。 [\#2950](https://github.com/ClickHouse/ClickHouse/pull/2950)

## ClickHouseリリース18.10 {#clickhouse-release-18-10}

### ClickHouseリリース18.10.3,2018-08-13 {#clickhouse-release-18-10-3-2018-08-13}

#### 新しい機能: {#new-features-5}

-   HTTPSはレプリケーションに使用できます。 [\#2760](https://github.com/ClickHouse/ClickHouse/pull/2760)
-   機能を追加しました `murmurHash2_64`, `murmurHash3_32`, `murmurHash3_64`,and `murmurHash3_128` 既存のものに加えて `murmurHash2_32`. [\#2791](https://github.com/ClickHouse/ClickHouse/pull/2791)
-   ClickHouse ODBCドライバーでのNull許容型のサポート (`ODBCDriver2` 出力形式）。 [\#2834](https://github.com/ClickHouse/ClickHouse/pull/2834)
-   のサポート `UUID` キー列で。

#### 改善: {#improvements-5}

-   クラスターは、設定ファイルから削除されたときに、サーバーを再起動せずに削除できます。 [\#2777](https://github.com/ClickHouse/ClickHouse/pull/2777)
-   外部辞書は、設定ファイルから削除されたときに、サーバーを再起動せずに削除できます。 [\#2779](https://github.com/ClickHouse/ClickHouse/pull/2779)
-   追加 `SETTINGS` のためのサポート `Kafka` テーブルエンジン。 [Alexander Marshalov](https://github.com/ClickHouse/ClickHouse/pull/2781)
-   のための改善 `UUID` データ型(まだ完了していない)。 [\#2618](https://github.com/ClickHouse/ClickHouse/pull/2618)
-   マージ後の空の部分のサポート `SummingMergeTree`, `CollapsingMergeTree` と `VersionedCollapsingMergeTree` エンジンだ [\#2815](https://github.com/ClickHouse/ClickHouse/pull/2815)
-   完了した突然変異の古い記録は削除されます (`ALTER DELETE`). [\#2784](https://github.com/ClickHouse/ClickHouse/pull/2784)
-   追加された `system.merge_tree_settings` テーブル。 [キリル-シュヴァコフ](https://github.com/ClickHouse/ClickHouse/pull/2841)
-   その `system.tables` 表現の依存関係列: `dependencies_database` と `dependencies_table`. [冬張](https://github.com/ClickHouse/ClickHouse/pull/2851)
-   追加された `max_partition_size_to_drop` 設定オプション。 [\#2782](https://github.com/ClickHouse/ClickHouse/pull/2782)
-   追加された `output_format_json_escape_forward_slashes` オプション [アレクサ](https://github.com/ClickHouse/ClickHouse/pull/2812)
-   追加された `max_fetch_partition_retries_count` 設定。 [\#2831](https://github.com/ClickHouse/ClickHouse/pull/2831)
-   追加された `prefer_localhost_replica` 設定を無効設定のための現地レプリカや、地元のレプリカな工程間の相互作用 [\#2832](https://github.com/ClickHouse/ClickHouse/pull/2832)
-   その `quantileExact` 集計関数の戻り値 `nan` 空の集計の場合 `Float32` または `Float64` セット [サンディ-リー](https://github.com/ClickHouse/ClickHouse/pull/2855)

#### バグ修正: {#bug-fixes-14}

-   ODBCの接続文字列パラメータの不要なエスケープを削除し、接続を確立することができなくなりました。 このエラーはバージョン18.6.0で発生しました。
-   処理のロジックを修正しました `REPLACE PARTITION` 複製キュー内のコマンド。 二つあれば `REPLACE` コマンドと同じパーティション、間違ったロジックが原因の一つの複製のキューは行われなくなります。 [\#2814](https://github.com/ClickHouse/ClickHouse/pull/2814)
-   すべてのデータ部分が空であったときにマージバグを修正しました(マージまたはから形成された部分 `ALTER DELETE` すべてのデータが削除された場合）。 このバグに登場したバージョン18.1.0. [\#2930](https://github.com/ClickHouse/ClickHouse/pull/2930)
-   同時実行のエラーを修正しました `Set` または `Join`. [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2823)
-   固定された `Block structure mismatch in UNION stream: different number of columns` 発生したエラー `UNION ALL` サブクエリ内のクエリのいずれかが `SELECT` クエリを含む複製のカラム名をとります。 [冬張](https://github.com/ClickHouse/ClickHouse/pull/2094)
-   MySQLサーバへの接続時に例外が発生した場合のメモリリークを修正しました。
-   クエリエラーの場合に正しくないclickhouseクライアント応答コードを修正しました。
-   DISTINCTを含むマテリアライズドビュ [\#2795](https://github.com/ClickHouse/ClickHouse/issues/2795)

#### 下位互換性のない変更 {#backward-incompatible-changes-4}

-   分散テーブルのCHECK TABLEクエリのサポートを削除しました。

#### ビルドの変更: {#build-changes-3}

-   アロケータが置き換えられました: `jemalloc` の代わりに使用されます `tcmalloc`. いくつかのシナリオでは、これは20%までの速度を増加します。 ただし、20%まで減速しているクエリがあります。 一部のシナリオでは、メモリ消費量が約10%削減され、安定性が向上しました。 非常に競争力のある負荷では、ユーザースペースとシステムでのCPU使用率はわずかに増加します。 [\#2773](https://github.com/ClickHouse/ClickHouse/pull/2773)
-   サブモジュールからのlibresslの使用。 [\#1983](https://github.com/ClickHouse/ClickHouse/pull/1983) [\#2807](https://github.com/ClickHouse/ClickHouse/pull/2807)
-   サブモジュールからのunixodbcの使用。 [\#2789](https://github.com/ClickHouse/ClickHouse/pull/2789)
-   サブモジュールからのmariadb-connector-cの使用。 [\#2785](https://github.com/ClickHouse/ClickHouse/pull/2785)
-   テストデータの可用性に依存する機能テストファイルをリポジトリに追加しました(当分の間、テストデータ自体はありません)。

## ClickHouseリリース18.6 {#clickhouse-release-18-6}

### ClickHouseリリース18.6.0,2018-08-02 {#clickhouse-release-18-6-0-2018-08-02}

#### 新しい機能: {#new-features-6}

-   JOIN ON構文のON式のサポートが追加されました:
    `JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]`
    式は、AND演算子で結合された等式のチェーンでなければなりません。 等式の各辺は、いずれかのテーブルの列に対する任意の式にすることができます。 完全修飾列名の使用がサポートされています (`table.name`, `database.table.name`, `table_alias.name`, `subquery_alias.name`）右のテーブルのために。 [\#2742](https://github.com/ClickHouse/ClickHouse/pull/2742)
-   HTTPSで有効にする必要があります。 [\#2760](https://github.com/ClickHouse/ClickHouse/pull/2760)

#### 改善: {#improvements-6}

-   サーバにパッチ部品のバージョンです。 データのパッチ版コンポーネントが `system.processes` と `query_log`. [\#2646](https://github.com/ClickHouse/ClickHouse/pull/2646)

## ClickHouseリリース18.5 {#clickhouse-release-18-5}

### ClickHouseリリース18.5.1,2018-07-31 {#clickhouse-release-18-5-1-2018-07-31}

#### 新しい機能: {#new-features-7}

-   ハッシュ関数を追加 `murmurHash2_32` [\#2756](https://github.com/ClickHouse/ClickHouse/pull/2756).

#### 改善: {#improvements-7}

-   今すぐ使用することができます `from_env` [\#2741](https://github.com/ClickHouse/ClickHouse/pull/2741) 環境変数から設定ファイルの値を設定する属性。
-   大文字小文字を区別しないバージョンの `coalesce`, `ifNull`,and `nullIf functions` [\#2752](https://github.com/ClickHouse/ClickHouse/pull/2752).

#### バグ修正: {#bug-fixes-15}

-   レプリカの起動時に発生する可能性のあるバグを修正 [\#2759](https://github.com/ClickHouse/ClickHouse/pull/2759).

## ClickHouseリリース18.4 {#clickhouse-release-18-4}

### ClickHouseリリース18.4.0,2018-07-28 {#clickhouse-release-18-4-0-2018-07-28}

#### 新しい機能: {#new-features-8}

-   追加システムテーブル: `formats`, `data_type_families`, `aggregate_function_combinators`, `table_functions`, `table_engines`, `collations` [\#2721](https://github.com/ClickHouse/ClickHouse/pull/2721).
-   Aの引数としてテーブルの代わりにテーブル関数を使用する機能を追加しました `remote` または `cluster table function` [\#2708](https://github.com/ClickHouse/ClickHouse/pull/2708).
-   のサポート `HTTP Basic` 複製プロトコルでの認証 [\#2727](https://github.com/ClickHouse/ClickHouse/pull/2727).
-   その `has` 関数は現在の配列内の数値を検索できるようになりました `Enum` 値 [マキシム-クリサンフォフ](https://github.com/ClickHouse/ClickHouse/pull/2699).
-   支援のための追加は任意のメッセージセパレータから読み取る際の `Kafka` [アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2701).

#### 改善: {#improvements-8}

-   その `ALTER TABLE t DELETE WHERE` クエリでは、WHERE条件の影響を受けなかったデータ部分は書き換えられません [\#2694](https://github.com/ClickHouse/ClickHouse/pull/2694).
-   その `use_minimalistic_checksums_in_zookeeper` 選択のための `ReplicatedMergeTree` テーブルはデフォルトで有効です。 この設定は、バージョン1.1.54378、2018-04-16で追加されました。 1.1.54378より古いバージョンはインストールできなくなりました。
-   実行のサポート `KILL` と `OPTIMIZE` 指定するクエリ `ON CLUSTER` [冬張](https://github.com/ClickHouse/ClickHouse/pull/2689).

#### バグ修正: {#bug-fixes-16}

-   エラーを修正しました `Column ... is not under an aggregate function and not in GROUP BY` IN式を使用した集計の場合。 このバグに登場したバージョン18.1.0. ([bbdd780b](https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2))
-   のバグを修正しました `windowFunnel aggregate function` [冬張](https://github.com/ClickHouse/ClickHouse/pull/2735).
-   のバグを修正しました `anyHeavy` 集計関数 ([a2101df2](https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee))
-   サーバーのクラッシュを修正 `countArray()` 集計関数。

#### 下位互換性のない変更: {#backward-incompatible-changes-5}

-   変数のための `Kafka` エンジンはから変更された `Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])` に `Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])`. あなたのテーブルが `kafka_schema` または `kafka_num_consumers` メタデータファイルを手動で編集する必要があります `path/metadata/database/table.sql` と追加 `kafka_row_delimiter` 変数との `''` 値。

## ClickHouseリリース18.1 {#clickhouse-release-18-1}

### ClickHouseリリース18.1.0,2018-07-23 {#clickhouse-release-18-1-0-2018-07-23}

#### 新しい機能: {#new-features-9}

-   のためのサポート `ALTER TABLE t DELETE WHERE` レプリケートされていないMergeTreeテーブルの照会 ([\#2634](https://github.com/ClickHouse/ClickHouse/pull/2634)).
-   の任意の型のサポート `uniq*` 集計関数のファミリ ([\#2010](https://github.com/ClickHouse/ClickHouse/issues/2010)).
-   比較演算子の任意の型のサポート ([\#2026](https://github.com/ClickHouse/ClickHouse/issues/2026)).
-   その `users.xml` ファイル形式でサブネットマスクを設定できます `10.0.0.1/255.255.255.0`. これは、途中にゼロがあるIPv6ネットワークのマスクを使用する場合に必要です ([\#2637](https://github.com/ClickHouse/ClickHouse/pull/2637)).
-   追加された `arrayDistinct` 関数 ([\#2670](https://github.com/ClickHouse/ClickHouse/pull/2670)).
-   SummingMergeTreeエンジンはAggregateFunction型の列で動作できるようになりました ([コンスタンティン-S-パン](https://github.com/ClickHouse/ClickHouse/pull/2566)).

#### 改善: {#improvements-9}

-   リリ 最初の部分にはリリース年（西暦、モスクワのタイムゾーン、マイナス2000）が含まれています。 Changelogに別段の記載がない限り、リリースは下位互換性があります。
-   浮動小数点数から文字列への高速な変換 ([アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2664)).
-   解析エラーのために挿入中にいくつかの行がスキップされた場合（これは `input_allow_errors_num` と `input_allow_errors_ratio` スキップされた行数がサーバーログに書き込まれるようになりました ([レオナルド-セッキ](https://github.com/ClickHouse/ClickHouse/pull/2669)).

#### バグ修正: {#bug-fixes-17}

-   一時表のTRUNCATEコマンドを修正しました ([アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2624)).
-   固定アロの飼育係顧客の図書館で発生した場合またはネットワークエラーを読みながら対応 ([c315200](https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947)).
-   Null許容型へのキャスト中のエラーを修正しました ([\#1322](https://github.com/ClickHouse/ClickHouse/issues/1322)).
-   の誤った結果を修正しました。 `maxIntersection()` 区間の境界が一致したときの関数 ([マイケル-ファーマー](https://github.com/ClickHouse/ClickHouse/pull/2657)).
-   関数引数内のOR式チェーンの正しくない変換を修正しました ([chenxing-xc](https://github.com/ClickHouse/ClickHouse/pull/2663)).
-   固定性能の劣化を含む質問 `IN (subquery)` 別のサブクエリ内の式 ([\#2571](https://github.com/ClickHouse/ClickHouse/issues/2571)).
-   バージョンの異なるサーバー間の非互換性を修正しました。 `CAST` 大文字でない関数 ([fe8c4d6](https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5)).
-   外部DBMSへのクエリの識別子のクォート不足を追加しました ([\#2635](https://github.com/ClickHouse/ClickHouse/issues/2635)).

#### 下位互換性のない変更: {#backward-incompatible-changes-6}

-   数値ゼロを含む文字列をDateTimeに変換することはできません。 例: `SELECT toDateTime('0')`. これはまた、 `DateTime DEFAULT '0'` テーブルでは動作しません。 `<null_value>0</null_value>` 辞書で。 解決策:交換 `0` と `0000-00-00 00:00:00`.

## ClickHouseリリース1.1 {#clickhouse-release-1-1}

### ClickHouseリリース1.1.54394,2018-07-12 {#clickhouse-release-1-1-54394-2018-07-12}

#### 新しい機能: {#new-features-10}

-   追加された `histogram` 集計関数 ([ミハイル-スリン](https://github.com/ClickHouse/ClickHouse/pull/2521)).
-   さて `OPTIMIZE TABLE ... FINAL` パーティションを指定せずに使用できます `ReplicatedMergeTree` ([アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2600)).

#### バグ修正: {#bug-fixes-18}

-   レプリケートされたデータを送信およびダウンロードするときに読み取りと書き込みのためのソケットのタイムアウト（秒）が非常に小さくなる問題を修 このエラーはバージョン1.1.54388で発生しました。
-   テーブルに重複したデータブロックを挿入した場合、zookeeperでchrootを使用する際の問題を修正しました。
-   その `has` 関数は現在、Null可能な要素を持つ配列のために正しく動作します ([\#2115](https://github.com/ClickHouse/ClickHouse/issues/2115)).
-   その `system.tables` テーブルが正しく動作に用いた場合に配布します。 その `metadata_modification_time` と `engine_full` 列は仮想ではありません。 これらの列のみがテーブルから照会された場合に発生するエラーを修正しました。
-   どのように空の固定 `TinyLog` テーブル動作後に挿入し、空データブロック ([\#2563](https://github.com/ClickHouse/ClickHouse/issues/2563)).
-   その `system.zookeeper` テーブルは、ZooKeeper内のノードの値がNULLの場合に機能します。

### ClickHouseリリース1.1.54390,2018-07-06 {#clickhouse-release-1-1-54390-2018-07-06}

#### 新しい機能: {#new-features-11}

-   クエリを送信できます `multipart/form-data` フォーマット `query` これは、クエリ処理のために外部データも送信される場合に便利です ([オルガ-フボスチコワ](https://github.com/ClickHouse/ClickHouse/pull/2490)).
-   CSV形式でデータを読み取るときに、単一引quotesまたは二重引用符の処理を有効または無効にする機能を追加しました。 これは、 `format_csv_allow_single_quotes` と `format_csv_allow_double_quotes` 設定 ([アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2574)).
-   さて `OPTIMIZE TABLE ... FINAL` パーティションを指定せずに使用することができます。 `MergeTree` ([アモス鳥](https://github.com/ClickHouse/ClickHouse/pull/2599)).

#### 改善: {#improvements-10}

-   性能向上、メモリーの消耗を減らし、正しいメモリ消費の位置姿勢トラッキング用のオペレーターがテーブル-インデックスを使用できる ([\#2584](https://github.com/ClickHouse/ClickHouse/pull/2584)).
-   データパーツの追加時のチェックサムの冗長チェックを削除しました。 これは、多数のレプリカが存在する場合に重要です。
-   追加されたサポート `Array(Tuple(...))` の引数 `arrayEnumerateUniq` 関数 ([\#2573](https://github.com/ClickHouse/ClickHouse/pull/2573)).
-   追加 `Nullable` のためのサポート `runningDifference` 関数 ([\#2594](https://github.com/ClickHouse/ClickHouse/pull/2594)).
-   非常に多数の式が存在する場合のクエリ分析のパフォーマンスの向上 ([\#2572](https://github.com/ClickHouse/ClickHouse/pull/2572)).
-   結合のためのデータ部分のより速い選択 `ReplicatedMergeTree` テーブル 飼育係セッションの迅速な回復 ([\#2597](https://github.com/ClickHouse/ClickHouse/pull/2597)).
-   その `format_version.txt` ファイル `MergeTree` これは、ファイルなしでディレクトリ構造をコピーした後にClickHouseが起動された場合に意味があります ([シプリアン-ハクマン](https://github.com/ClickHouse/ClickHouse/pull/2593)).

#### バグ修正: {#bug-fixes-19}

-   サーバーを再起動する前に、テーブルのセッションと読み取り専用の状態を回復することが不可能になる可能性があるZooKeeperで作業するときのバグを修正し
-   セッションが中断された場合、古いノードが削除されない可能性がZooKeeperで作業するときのバグを修正しました。
-   のエラーを修正しました。 `quantileTDigest` Float引数の関数（このバグはバージョン1.1.54388で導入されました) ([ミハイル-スリン](https://github.com/ClickHouse/ClickHouse/pull/2553)).
-   主キー列が同じサイズの符号付き整数と符号なし整数の間で型を変換するための関数内にある場合、MergeTreeテーブルのインデックスのバグを修正しました ([\#2603](https://github.com/ClickHouse/ClickHouse/pull/2603)).
-   以下の場合にsegfaultを修正しました `macros` 使用されますが、設定ファイルには含まれていません ([\#2570](https://github.com/ClickHouse/ClickHouse/pull/2570)).
-   クライア ([\#2583](https://github.com/ClickHouse/ClickHouse/pull/2583)).
-   ときに発生したバグを修正しました `use_index_for_in_with_subqueries` 設定が無効になりました。

#### セキュリティ修正: {#security-fix-1}

-   MySQLに接続すると、ファイルの送信ができなくなりました (`LOAD DATA LOCAL INFILE`).

### ClickHouseリリース1.1.54388,2018-06-28 {#clickhouse-release-1-1-54388-2018-06-28}

#### 新しい機能: {#new-features-12}

-   のためのサポート `ALTER TABLE t DELETE WHERE` 複製されたテーブルのクエリ。 追加された `system.mutations` このタイプのクエリの進行状況を追跡するテーブル。
-   のためのサポート `ALTER TABLE t [REPLACE|ATTACH] PARTITION` \*MergeTreeテーブルのクエリ。
-   のためのサポート `TRUNCATE TABLE` クエリ ([冬張](https://github.com/ClickHouse/ClickHouse/pull/2260))
-   いくつか新しい `SYSTEM` 複製テーブルのクエリ (`RESTART REPLICAS`, `SYNC REPLICA`, `[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]`).
-   MySQLエンジンと対応するテーブル関数を使用してテーブルに書き込む機能を追加しました ([サンディ-リ](https://github.com/ClickHouse/ClickHouse/pull/2294)).
-   追加された `url()` テーブル関数と `URL` 表エンジン ([Alexander Sapin](https://github.com/ClickHouse/ClickHouse/pull/2501)).
-   追加された `windowFunnel` 集計関数 ([サンディ-リ](https://github.com/ClickHouse/ClickHouse/pull/2352)).
-   新しい `startsWith` と `endsWith` 文字列の関数 ([ヴァディム-プラフティンスキー](https://github.com/ClickHouse/ClickHouse/pull/2429)).
-   その `numbers()` テーブル機能することはできなくなるようです指定のオフセット ([冬張](https://github.com/ClickHouse/ClickHouse/pull/2535)).
-   パスワード `clickhouse-client` 対話形式で入力できます。
-   サーバログをsyslogに送信できるようになりました ([アレクサンドル-クラシェニコフ](https://github.com/ClickHouse/ClickHouse/pull/2459)).
-   共有ライブラリソースを持つ辞書のログインのサポート ([Alexander Sapin](https://github.com/ClickHouse/ClickHouse/pull/2472)).
-   カスタムCSV区切り文字のサポート ([イワン-ジューコフ](https://github.com/ClickHouse/ClickHouse/pull/2263))
-   追加された `date_time_input_format` 設定。 この設定を `'best_effort'`、DateTime値は幅広い形式で読み込まれます。
-   追加された `clickhouse-obfuscator` データ難読化のためのユーティリティ。 使用例:パフォーマンステストで使用されるデータの公開。

#### 実験的な特徴: {#experimental-features-2}

-   計算する機能を追加しました `and` 引数が必要な場所だけ ([アナスタシア-ツァルコワ](https://github.com/ClickHouse/ClickHouse/pull/2272))
-   JITコへのネイティブコードが可能となりますので一部表現 ([pyos](https://github.com/ClickHouse/ClickHouse/pull/2277)).

#### バグ修正: {#bug-fixes-20}

-   クエリに重複が表示されなくなりました `DISTINCT` と `ORDER BY`.
-   クエリ `ARRAY JOIN` と `arrayFilter` 誤った結果が返されなくなりました。
-   ネストされた構造体から配列列を読み取るときのエラーを修正 ([\#2066](https://github.com/ClickHouse/ClickHouse/issues/2066)).
-   HAVING句のようなクエリを分析する際のエラーを修正しました `HAVING tuple IN (...)`.
-   誤りを修正で解析する場合、クエリを処理するクラウドの場合再帰的別名になります。
-   ReplacingMergeTreeからすべての行をフィルタリングするPREWHEREの条件を読み込むときにエラーを修正しました ([\#2525](https://github.com/ClickHouse/ClickHouse/issues/2525)).
-   ユーザープロファイルの設定が適用されていない使用時のセッションを行うHTTPのインタフェース。
-   Clickhouse-localのコマンドラインパラメータから設定が適用される方法を修正しました。
-   の飼育係お客様の図書館におけるその使用は、セッションタイムアウトサーバから受信した.
-   ZooKeeperクライアントライブラリのバグを修正しました。
-   パーティションキー列の条件を持つクエリのパーツの剪定を修正 ([\#2342](https://github.com/ClickHouse/ClickHouse/issues/2342)).
-   後でマージが可能になりました `CLEAR COLUMN IN PARTITION` ([\#2315](https://github.com/ClickHouse/ClickHouse/issues/2315)).
-   ODBCテーブル関数の型マッピングが修正されました ([サンディ-リ](https://github.com/ClickHouse/ClickHouse/pull/2268)).
-   型比較が修正されました `DateTime` タイムゾーンの有無 ([アレクサ](https://github.com/ClickHouse/ClickHouse/pull/2400)).
-   修正された構文解析とフォーマットの `CAST` オペレーター
-   分散テーブルエンジンのマテリアライズドビューへの固定挿入 ([Babacar Diassé](https://github.com/ClickHouse/ClickHouse/pull/2411)).
-   からデータを書き込むときに競合状態を修正しました `Kafka` エンジンを実現しの景色 ([ヤンクアン-リュウ](https://github.com/ClickHouse/ClickHouse/pull/2448)).
-   Remote()テーブル関数のSSRFを修正しました。
-   の終了動作を修正しました `clickhouse-client` 複数行モードで ([\#2510](https://github.com/ClickHouse/ClickHouse/issues/2510)).

#### 改善: {#improvements-11}

-   背景の業務を複製のテーブルを用いて行ったスレッドプールの代わりに別のスレッド ([シルヴィウ-カラゲア](https://github.com/ClickHouse/ClickHouse/pull/1722)).
-   LZ4圧縮性能が向上しました。
-   多数の結合およびサブクエリを含むクエリの高速な分析。
-   DNSキャッシュは、ネットワークエラーが多すぎると自動的に更新されます。
-   テーブルに挿入しなくなった場合に生じるの挿入を実現しの景色はできませんので多くの部品です。
-   イベントカウンタの不一致を修正しました `Query`, `SelectQuery`,and `InsertQuery`.
-   のような式 `tuple IN (SELECT tuple)` 組の型が一致する場合に許可されます。
-   複製されたテーブルを持つサーバーは、ZooKeeperを構成していなくても起動できます。
-   使用可能なCPUコアの数を計算するときに、cgroupの制限が考慮されるようになりました ([アトリ-シャルマ](https://github.com/ClickHouse/ClickHouse/pull/2325)).
-   Systemd設定ファイルに設定ディレクトリのchownを追加 ([ミハイル-シリヤエフ](https://github.com/ClickHouse/ClickHouse/pull/2421)).

#### ビルドの変更: {#build-changes-4}

-   Gcc8コンパイラはビルドに使用できます。
-   サブモジュールからllvmをビルドする機能を追加しました。
-   Librdkafkaライブラリのバージョンがv0.11.4に更新されました。
-   システムlibcpuidライブラリを使用する機能を追加しました。 ライブラリのバージョンが0.4.0に更新されました。
-   Vectorclassライブラリを使用してビルドを修正しました ([Babacar Diassé](https://github.com/ClickHouse/ClickHouse/pull/2274)).
-   Cmakeは、デフォルトでninja用のファイルを生成するようになりました `-G Ninja`).
-   Libtermcapの代わりにlibtinfoライブラリを使用する機能を追加しました ([ゲオルギー-コンドラティエフ](https://github.com/ClickHouse/ClickHouse/pull/2519)).
-   Fedora Rawhideのヘッダーファイルの競合を修正しました ([\#2520](https://github.com/ClickHouse/ClickHouse/issues/2520)).

#### 下位互換性のない変更: {#backward-incompatible-changes-7}

-   でエスケープ削除 `Vertical` と `Pretty*` フォーマットと削除 `VerticalRaw` 形式。
-   バージョン1.1.54388(またはそれ以降)のサーバーと古いバージョンのサーバーが分散クエリで同時に使用され、クエリには `cast(x, 'Type')` のない式 `AS` キーワードと単語を持っていません `cast` 大文字では、次のようなメッセージで例外がスローされます `Not found column cast(0, 'UInt8') in block`. 解決方法:クラスター全体のサーバーを更新します。

### ClickHouseリリース1.1.54385,2018-06-01 {#clickhouse-release-1-1-54385-2018-06-01}

#### バグ修正: {#bug-fixes-21}

-   場合によっては飼育係の操作がブロックされるエラーを修正しました。

### ClickHouseリリース1.1.54383,2018-05-22 {#clickhouse-release-1-1-54383-2018-05-22}

#### バグ修正: {#bug-fixes-22}

-   固定減速のレプリケーションのキューにした場合には多くのレプリカ.

### ClickHouseリリース1.1.54381,2018-05-14 {#clickhouse-release-1-1-54381-2018-05-14}

#### バグ修正: {#bug-fixes-23}

-   固定、ノードの漏洩、飼育係がClickHouse失接続を飼育係サーバーです。

### ClickHouseリリース1.1.54380,2018-04-21 {#clickhouse-release-1-1-54380-2018-04-21}

#### 新しい機能: {#new-features-13}

-   テーブル関数を追加しました `file(path, format, structure)`. からバイトを読み取る例 `/dev/urandom`: ``` ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q "SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10" ```.

#### 改善: {#improvements-12}

-   サブクエリに包まれて `()` ブラケットをクエリを読む 例えば: `(SELECT 1) UNION ALL (SELECT 1)`.
-   シンプル `SELECT` からのクエリ `system.processes` テーブルはに含まれていません `max_concurrent_queries` リミット

#### バグ修正: {#bug-fixes-24}

-   の修正された不正な動作 `IN` 選択時の演算子 `MATERIALIZED VIEW`.
-   修正フィルタリングパーテーションによるインデックスのように表現 `partition_key_column IN (...)`.
-   実行できない問題を修正 `OPTIMIZE` リーダーレプリカ以外の場合のクエリ `REANAME` テーブル上で行った。
-   実行時の認証エラーを修正しました `OPTIMIZE` または `ALTER` リーダー以外のレプリカに対するクエリ。
-   固定凍結の `KILL QUERY`.
-   ZooKeeperクライアントライブラリのエラーを修正しました。 `chroot` 接頭辞は、飼育係の設定で使用されます。

#### 下位互換性のない変更: {#backward-incompatible-changes-8}

-   以下のような式のサポートを削除 `(a, b) IN (SELECT (a, b))` （同等の式を使用できます `(a, b) IN (SELECT a, b)`). 以前のリリースでは、これらの式は未定になりました `WHERE` フィルタリングが起こっている。

### ClickHouseリリース1.1.54378,2018-04-16 {#clickhouse-release-1-1-54378-2018-04-16}

#### 新しい機能: {#new-features-14}

-   ログレベルは、サーバーを再起動せずに変更できます。
-   追加された `SHOW CREATE DATABASE` クエリ。
-   その `query_id` に渡すことができます `clickhouse-client` （エルブルーム）
-   新しい設定: `max_network_bandwidth_for_all_users`.
-   追加されたサポート `ALTER TABLE ... PARTITION ...` のために `MATERIALIZED VIEW`.
-   システムテーブルに非圧縮形式のデータパーツのサイズに関する情報を追加しました。
-   分散テーブルのサーバー間暗号化サポート (`<secure>1</secure>` のレプリカ設定で `<remote_servers>`).
-   テーブルレベルの設定 `ReplicatedMergeTree` 飼育係に格納されているデータの量を最小限に抑えるために、家族: : `use_minimalistic_checksums_in_zookeeper = 1`
-   の構成 `clickhouse-client` プロンプト 既定では、サーバー名がプロンプトに出力されます。 サーバーの表示名は変更できます。 それはまたで送られます `X-ClickHouse-Display-Name` HTTPヘッダ（キリルShvakov）。
-   複数のコンマ区切り `topics` に指定することができます。 `Kafka` エンジン(トビアス-アダムソン)
-   クエリが停止されたとき `KILL QUERY` または `replace_running_query` クライアントは、 `Query was canceled` 不完全な結果の代わりに例外。

#### 改善: {#improvements-13}

-   `ALTER TABLE ... DROP/DETACH PARTITION` クエリは、レプリケーションキューの先頭で実行されます。
-   `SELECT ... FINAL` と `OPTIMIZE ... FINAL` テーブルに単一のデータ部分がある場合でも使用できます。
-   A `query_log` 手動で削除された場合、テーブルはその場で再作成されます（Kirill Shvakov）。
-   その `lengthUTF8` 機能はより速く動きます（zhang2014）。
-   同期挿入物の改善された性能 `Distributed` テーブル (`insert_distributed_sync = 1`）非常に多数の破片がある場合。
-   サーバは、 `send_timeout` と `receive_timeout` 設定クライアントから求める動きが高まってい接続時にクライアントが適用される逆順にサーバソケットの `send_timeout` に設定される。 `receive_timeout` クライアントから受け取った値、およびその逆）。
-   非同期挿入のためのより堅牢なクラッシュ回復 `Distributed` テーブル
-   の戻り値の型 `countEqual` から変更された関数 `UInt32` に `UInt64` (谢磊).

#### バグ修正: {#bug-fixes-25}

-   でエラーを修正しました `IN` 式の左側が `Nullable`.
-   タプルを使用するときに正しい結果が返されます `IN` タプルコンポーネントの一部がテーブルインデックス内にある場合。
-   その `max_execution_time` 限値が正しく動作と配布します。
-   の合成列のサイズを計算する際のエラーを修正しました。 `system.columns` テーブル。
-   一時テーブルを作成するときのエラーを修正 `CREATE TEMPORARY TABLE IF NOT EXISTS.`
-   修正されたエラー `StorageKafka` (\#\#2075)
-   固定サーバのクラッシュからでは無効引数の特定の集ます。
-   エラーを修正しました。 `DETACH DATABASE` バックグラウンドタスクの停止から `ReplicatedMergeTree` テーブル
-   `Too many parts` 集約されたマテリアライズドビューに挿入すると、状態が発生しにくくなります(\#\#2084)。
-   置換の後に同じレベルで別の置換が続く必要がある場合、config内の置換の再帰的な処理を修正しました。
-   メタデータファイルの構文を修正しました。 `VIEW` それは次のクエリを使用します `UNION ALL`.
-   `SummingMergeTree` が正しく動作のための集計の入れ子データ構造との複合鍵があります。
-   リーダーを選択する際の競合状態の可能性を修正しました `ReplicatedMergeTree` テーブル

#### ビルドの変更: {#build-changes-5}

-   ビルドのサポート `ninja` 代わりに `make` および使用 `ninja` デフォルトのビルリリースなどで行っています。
-   パッケージ名変更: `clickhouse-server-base` で `clickhouse-common-static`; `clickhouse-server-common` で `clickhouse-server`; `clickhouse-common-dbg` で `clickhouse-common-static-dbg`. インストールするには、 `clickhouse-server clickhouse-client`. 古い名前のパッケージは、下位互換性のためにリポジトリにロードされます。

#### 下位互換性のない変更: {#backward-incompatible-changes-9}

-   配列が左側に指定されている場合、IN式の特別な解釈を削除しました。 以前は、式 `arr IN (set)` と解釈された “at least one `arr` element belongs to the `set`”. 新しいバージョ `arrayExists(x -> x IN (set), arr)`.
-   Socketオプションの誤った使用を無効にしました `SO_REUSEPORT` Pocoライブラリでデフォルトで正しく有効になっていません。 Linuxでは、アドレスを同時に指定する理由はもはやないことに注意してください `::` と `0.0.0.0` for listen – use just `::` これにより、IPv4とIPv6の両方で接続をリッスンできます（デフォルトのカーネル設定で）。 以前のバージョンの動作に戻すには、次のように指定します `<listen_reuse_port>1</listen_reuse_port>` 設定で。

### ClickHouseリリース1.1.54370,2018-03-16 {#clickhouse-release-1-1-54370-2018-03-16}

#### 新しい機能: {#new-features-15}

-   追加された `system.macros` 設定ファイルが変更されたときのマクロのテーブルと自動更新。
-   追加された `SYSTEM RELOAD CONFIG` クエリ。
-   追加された `maxIntersections(left_col, right_col)` 同時に交差する間隔の最大数を返す集計関数 `[left; right]`. その `maxIntersectionsPosition(left, right)` 関数の先頭を返します。 “maximum” インターバル ([マイケル-ファーマー](https://github.com/ClickHouse/ClickHouse/pull/2012)).

#### 改善: {#improvements-14}

-   Aにデータを挿入するとき `Replicated` 要求の数が少なくなります。 `ZooKeeper` （そして、ユーザレベルのエラーのほとんどは、 `ZooKeeper` ログ）。
-   データセットのエイリアスを作成する機能を追加しました。 例: `WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10`.

#### バグ修正: {#bug-fixes-26}

-   固定された `Illegal PREWHERE` 場合にはエラーからの読み出しMergeテーブル `Distributed`テーブル
-   IPv4のみのDockerコンテナでclickhouse-serverを起動できるようにする修正が追加されました。
-   システムから読み取るときの競合状態を修正 `system.parts_columns tables.`
-   同期挿入時の二重バッファリングを削除しました。 `Distributed` 接続がタイムアウトになった可能性があるテーブル。
-   使用できないレプリカを開始する前に過度に長い待機を引き起こしたバグを修正 `SELECT` クエリ。
-   修正された間違った日付 `system.parts` テーブル。
-   それは不可能にデータを挿入するために作られたバグを修正しました `Replicated` テーブルif `chroot` の構成で空ではなかった `ZooKeeper` クラスター。
-   空の垂直マージアルゴリズムを修正しました `ORDER BY` テーブル。
-   復元する機能を利用辞書にクエリをリモートテーブルの場合でも、これらの辞書にはない、調査元に確認します。 この機能は、リリース1.1.54362で失われました。
-   のようなクエリの動作を復元しました `SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)` ときの右側 `IN` リモートを使うべきです `default.table` 地元のものの代わりに。 この動作は、バージョン1.1.54358で壊れていました。
-   削除された余分なエラーレベルのロギングの `Not found column ... in block`.

### ClickHouseリリース1.1.54362,2018-03-11 {#clickhouse-release-1-1-54362-2018-03-11}

#### 新しい機能: {#new-features-16}

-   集計なし `GROUP BY` 空集合に対して `SELECT count(*) FROM table WHERE 0`）sql標準に準拠して、集計関数のnull値を持つ行で結果を返します。 古い動作を復元する(空の結果を返す)には、次のように設定します `empty_result_for_aggregation_by_empty_set` に1.
-   の型変換を追加しました `UNION ALL`. 異なるエイリアス名は `SELECT` の位置 `UNION ALL`、SQL標準に準拠しています。
-   任意の式は `LIMIT BY` 句。 以前は、次の結果の列のみを使用できました `SELECT`.
-   のインデックス `MergeTree` 表は次の場合に使用されます `IN` 主キーの列から式のタプルに適用されます。 例: `WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)` （アナスタシヤ-ツァルコワ）
-   追加された `clickhouse-copier` ツールのコピーとクラスター reshardingデータ(β).
-   一貫性のあるハッシュ関数を追加: `yandexConsistentHash`, `jumpConsistentHash`, `sumburConsistentHash`. ものとして使用できshardingキーを減らすため、ネットワークトラフィックの中でその後のreshardings.
-   追加された機能: `arrayAny`, `arrayAll`, `hasAny`, `hasAll`, `arrayIntersect`, `arrayResize`.
-   追加された `arrayCumSum` 関数（ハビサンタナ）。
-   追加された `parseDateTimeBestEffort`, `parseDateTimeBestEffortOrZero`,and `parseDateTimeBestEffortOrNull` さまざまな形式のテキストを含む文字列からDateTimeを読み取る関数。
-   データは、部分的に（以前のダウンロードよりも指定されたフィールドの値が大きいだけのレコードをロード）更新中に外部の辞書から再ロードすることができま
-   追加された `cluster` テーブル関数。 例: `cluster(cluster_name, db, table)`. その `remote` 表関数は、識別子として指定されている場合、クラスター名を最初の引数として受け入れることができます。
-   その `remote` と `cluster` テーブル関数は `INSERT` クエリ。
-   追加された `create_table_query` と `engine_full` 仮想カラム `system.tables`テーブル。 その `metadata_modification_time` 列は仮想です。
-   追加された `data_path` と `metadata_path` 列へ `system.tables`と`system.databases` テーブル、および追加 `path` の列 `system.parts` と `system.parts_columns` テーブル
-   のマージに関する追加情報を追加しました。 `system.part_log` テーブル。
-   任意のパーティショニングキーを使用できます。 `system.query_log` テーブル（キリルShvakov）。
-   その `SHOW TABLES` クエリには一時テーブルも表示されます。 追加された一時テーブルと `is_temporary` 列へ `system.tables` （zhang2014）。
-   追加 `DROP TEMPORARY TABLE` と `EXISTS TEMPORARY TABLE` クエリ（zhang2014）。
-   のサポート `SHOW CREATE TABLE` 一時テーブルの場合(zhang2014)。
-   追加された `system_profile` 内部プロセスで使用される設定の構成パラメータ。
-   ロードのサポート `object_id` の属性として `MongoDB` 辞書（パベルLitvinenko）。
-   読書 `null` 外部ディクショナリのデータをロードする際のデフォルト値として `MongoDB` ソース（パベルLitvinenko）。
-   読書 `DateTime` の値 `Values` 単一引quotesなしのUnixタイムスタンプからの形式。
-   フェールオーバーは `remote` 一部のレプリカに要求されたテーブルがない場合のテーブル関数。
-   構成設定は、実行時にコマンドラインで上書きできます `clickhouse-server`. 例: `clickhouse-server -- --logger.level=information`.
-   実装された `empty` aからの関数 `FixedString` 引数:文字列が完全にヌルバイトで構成されている場合、関数は1を返します(zhang2014)。
-   追加された `listen_try`いくつかのアドレスをリッスンできない場合に、終了せずに少なくとも一方のリッスンアドレスをリッスンするための構成パラメータ(IPv4またはIPv6
-   追加された `VersionedCollapsingMergeTree` テーブルエンジン。
-   行および任意の数値型のサポート `library` 辞書ソース。
-   `MergeTree` テーブルは主キーなしで使用できます(指定する必要があります `ORDER BY tuple()`).
-   A `Nullable` タイプは `CAST` 非に-`Nullable` 引数が指定されていない場合の型 `NULL`.
-   `RENAME TABLE` を実行することができます `VIEW`.
-   追加された `throwIf` 機能。
-   追加された `odbc_default_field_size` ODBCソースからロードされた値の最大サイズを拡張できます(デフォルトでは1024)。
-   その `system.processes` テーブルと `SHOW PROCESSLIST` 今持って下さい `is_cancelled` と `peak_memory_usage` 列。

#### 改善: {#improvements-15}

-   結果の制限とクォータは、次の中間データには適用されなくなりました `INSERT SELECT` クエリまたは `SELECT` サブクエリー。
-   以下の偽トリガ `force_restore_data` の状態を確認するとき `Replicated` サーバー起動時のテーブル。
-   追加された `allow_distributed_ddl` オプション
-   非決定的な関数は、次の式では使用できません `MergeTree` テーブルキー。
-   置換元のファイル `config.d` ディレク
-   の改善された性能 `arrayElement` 要素の一つとして空の配列を持つ定数多次元配列の場合の関数。 例: `[[1], []][x]`.
-   サーバの開始に高速化した現在の使用時に設定ファイルの非常に大き換(例えば、非常に大きなリストのIPネットワーク).
-   クエリを実行すると、テーブル値関数が一度実行されます。 以前は, `remote` と `mysql` テーブル機能評価を行い、同じクエリを取得するにはテーブル構造からのリモートサーバーです。
-   その `MkDocs` ドキュメントジェネレータを使用します。
-   テーブル列を削除しようとすると `DEFAULT`/`MATERIALIZED` 他の列の式は、例外がスローされます（zhang2014）。
-   テキスト形式の空行を0として解析する機能を追加しました。 `Float` データ型。 この機能は以前は利用可能でしたが、リリース1.1.54342で失われました。
-   `Enum` 値は次の場所で使用できます `min`, `max`, `sum` そして他のある機能。 このような場合、対応する数値を使用します。 この機能は以前は利用可能でしたが、リリース1.1.54337で失われました。
-   追加 `max_expanded_ast_elements` 再帰的にエイリアスを展開した後にASTのサイズを制限する。

#### バグ修正: {#bug-fixes-27}

-   不要な列がエラーでサブクエリから削除された場合、または次のサブクエリから削除されなかった場合を修正しました `UNION ALL`.
-   のためのマージのバグを修正しました `ReplacingMergeTree` テーブル
-   固定同期挿入 `Distributed` テーブル (`insert_distributed_sync = 1`).
-   の特定の使用のための固定segfault `FULL` と `RIGHT JOIN` サブクエリに重複する列を持つ。
-   の特定の使用のための固定segfault `replace_running_query` と `KILL QUERY`.
-   の順序を修正しました。 `source` と `last_exception` の列 `system.dictionaries` テーブル。
-   ときにバグを修正しました `DROP DATABASE` クエリを削除しなかったファイルとメタデータを指すものとします。
-   固定された `DROP DATABASE` クエリ `Dictionary` データベース。
-   低い精密をの固定しました `uniqHLL12` と `uniqCombined` 100万アイテムを超えるカーディナリティのための機能（アレックスBocharov）。
-   固定の計算の暗黙のデフォルト値が必要な場合には同時に計算デフォルトの明示的な表現 `INSERT` クエリ（zhang2014）。
-   まれなケースを修正しました。 `MergeTree` テーブルが終了できませんでした（chenxing-xc）。
-   クラッシュを修正しました。 `CHECK` クエリ `Distributed` すべてのシャードがローカルの場合のテーブル(chenxing.xc）。
-   正規表現を使用する関数のパフォーマンスのわずかな回帰を修正しました。
-   複合式から多次元配列を作成するときのパフォーマンス回帰を修正しました。
-   余分な原因となるバグを修正しました `FORMAT` に表示されるセクション `.sql` ファイルとメタデータを指すものとします。
-   その原因となったバグを修正しました `max_table_size_to_drop` 削除しようとするときに適用する制限 `MATERIALIZED VIEW` 明示的に指定されたテーブルを見る。
-   古いクライアントとの非互換性を修正しました(古いクライアントは、時には `DateTime('timezone')` タイプ、彼らは理解していない）。
-   読み取り時のバグを修正 `Nested` を使用して追加された構造体の列要素 `ALTER` しかし、古いパーティションでは空です。 `PREWHERE`.
-   時の不具合を修正フィルタリングテーブルによる仮想 `_table` クエリの列 `Merge` テーブル
-   使用する際のバグを修正しました `ALIAS` の列 `Distributed` テーブル
-   から集計関数を持つクエリの動的コンパイルが不可能になったバグを修正しました `quantile` 家族だ
-   非常にまれなケースで発生したクエリ実行パイプラインの競合状態を修正しました `Merge` 多数のテーブルを持つテーブル、および使用する場合 `GLOBAL` サブクエリー。
-   異なるサイズの配列を渡すときのクラッシュを修正した。 `arrayReduce` 複数の引数から集計関数を使用する場合の関数。
-   クエリの使用を禁止 `UNION ALL` で `MATERIALIZED VIEW`.
-   の初期化中にエラーを修正しました。 `part_log` サーバー起動時のシステムテーブル(デフォルト, `part_log` が無効になっている）。

#### 下位互換性のない変更: {#backward-incompatible-changes-10}

-   削除された `distributed_ddl_allow_replicated_alter` オプション この動作は既定で有効です。
-   削除された `strict_insert_defaults` 設定。 この機能を使用していた場合は、 `clickhouse-feedback@yandex-team.com`.
-   削除された `UnsortedMergeTree` エンジン

### ClickHouseリリース1.1.54343,2018-02-05 {#clickhouse-release-1-1-54343-2018-02-05}

-   追加マクロの支援を定義するためのクラスターの名前を配布DDLお問い合わせのコンストラクタの配布のテーブル: `CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')`.
-   今のようなクエリ `SELECT ... FROM table WHERE expr IN (subquery)` を使用して処理されます `table` インデックス
-   処理能の重複を挿入する場合はを再現し、テーブルではなく実行を複製します。

### ClickHouseリリース1.1.54342,2018-01-22 {#clickhouse-release-1-1-54342-2018-01-22}

このリリースには、以前のリリース1.1.54337のバグ修正が含まれています:

-   1.1.54337の回帰を修正しました：デフォルトのユーザーが読み取り専用アクセス権を持っている場合、サーバーはメッセージでの起動を拒否します `Cannot create database in readonly mode`.
-   1.1.54337の回帰を修正しました:systemdを使用するシステムでは、ログは設定に関係なく常にsyslogに書き込まれます。d.
-   1.1.54337の回帰を修正しました。
-   GraphiteMergeTreeの非決定的な動作を修正しました(ログメッセージで確認できます `Data after merge is not byte-identical to the data on another replicas`).
-   なることがある不具合を修正しつ一貫性のない合併後最適なクエリーの複製のテーブル(きめて発見されたログメッセージ `Part ... intersects the previous part`).
-   バッファーの表現は正常に動作が実現列の先テーブル（zhang2014).
-   NULLの実装のバグを修正しました。

### ClickHouseリリース1.1.54337,2018-01-18 {#clickhouse-release-1-1-54337-2018-01-18}

#### 新しい機能: {#new-features-17}

-   多次元配列およびタプルの格納のサポートが追加されました (`Tuple` テーブル内のデータ型）。
-   表関数のサポート `DESCRIBE` と `INSERT` クエリ。 のサブクエリのサポートを追加しました `DESCRIBE`. 例: `DESC TABLE remote('host', default.hits)`; `DESC TABLE (SELECT 1)`; `INSERT INTO TABLE FUNCTION remote('host', default.hits)`. のサポート `INSERT INTO TABLE` に加えて `INSERT INTO`.
-   タイムゾーンのサポートの改善。 その `DateTime` データ型には、テキスト形式の解析および書式設定に使用されるタイムゾーンに注釈を付けることができます。 例: `DateTime('Europe/Moscow')`. の関数でタイムゾーンが指定されている場合 `DateTime` 戻り値の型はタイムゾーンを追跡し、値は期待どおりに表示されます。
-   機能を追加しました `toTimeZone`, `timeDiff`, `toQuarter`, `toRelativeQuarterNum`. その `toRelativeHour`/`Minute`/`Second` 関数はtypeの値を取ることができます `Date` 引数として。 その `now` 関数名では大文字と小文字が区別されます。
-   追加された `toStartOfFifteenMinutes` 関数（キリルShvakov）。
-   追加された `clickhouse format` クエリの書式設定ツール。
-   追加された `format_schema_path` configuration parameter (Marek Vavruşa). It is used for specifying a schema in `Cap'n Proto` 形式。 スキーマファイ
-   設定置換のサポートが追加されました (`incl` と `conf.d`）外部の辞書やモデル（パベルYakunin）の構成のために。
-   コラムを追加しましたとの `system.settings` テーブル（キリルShvakov）。
-   追加された `system.parts_columns` 各データ部分の列サイズに関する情報を含むテーブル `MergeTree` テーブル
-   追加された `system.models` loadedに関する情報を含む表 `CatBoost` 機械学習モデル。
-   追加された `mysql` と `odbc` テーブル機能および対応 `MySQL` と `ODBC` テーブルエンジン この機能はベータ段階にあります。
-   型の引数を渡す可能性を追加しました `AggregateFunction` のために `groupArray` 集計関数（集計関数の状態の配列を作成できます）。
-   削除の制限を様々に組み合わせて集計機能combinators. たとえば、次のようにします `avgForEachIf` 同様に `avgIfForEach` 異なる動作を持つ集計関数。
-   その `-ForEach` 集計関数combinatorは、複数の引数の集計関数の場合に拡張されています。
-   の集計関数のサポートを追加しました `Nullable` 関数が非を返す場合でも引数-`Nullable` 結果（Silviu Carageaの貢献を加えた）。 例: `groupArray`, `groupUniqArray`, `topK`.
-   追加された `max_client_network_bandwidth` のために `clickhouse-client` （キリル-シュヴァコフ）
-   を持つユーザー `readonly = 2` setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT…) (Kirill Shvakov).
-   サポートが追加された複数の消費者に `Kafka` エンジン の拡張構成オプション `Kafka` (Marek Vavruša).
-   追加された `intExp3` と `intExp4` 機能。
-   追加された `sumKahan` 集計関数。
-   To\*Number\*OrNull関数を追加しました。\*Number\*は数値型です。
-   追加されたサポート `WITH` の節 `INSERT SELECT` クエリ（著者：zhang2014）。
-   設定の追加: `http_connection_timeout`, `http_send_timeout`, `http_receive_timeout`. 特に、これらの設定のためのデータのダウンロードパーツのレプリケーション. を変更する設定できる高速フェイルオーバーの場合はネットワークが過負荷状態で運転されています。
-   追加されたサポート `ALTER` タイプのテーブルの場合 `Null` （アナスタシヤ-ツァルコワ）
-   その `reinterpretAsString` 関数は、メモリ内に連続して格納されているすべてのデータ型に対して拡張されます。
-   追加された `--silent` のオプション `clickhouse-local` ツール。 これは、stderrでのクエリ実行情報の印刷を抑制します。
-   るためのサポートを追加しました読み値の型 `Date` 月や日を二桁ではなく一桁で指定する形式のテキストから(Amos Bird)。

#### パフォーマンスの最適化: {#performance-optimizations}

-   集計関数のパフォーマンスの向上 `min`, `max`, `any`, `anyLast`, `anyHeavy`, `argMin`, `argMax` 文字列の引数から。
-   機能の改善された性能 `isInfinite`, `isFinite`, `isNaN`, `roundToExp2`.
-   解析と書式設定のパフォーマンスの向上 `Date` と `DateTime` 値をテキスト形式で入力します。
-   浮動小数点数の解析のパフォーマンスと精度が向上しました。
-   のためのメモリ使用量の低下 `JOIN` 左と右の部分に含まれていない同じ名前の列がある場合 `USING` .
-   集計関数のパフォーマンスの向上 `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr` 計算の安定性を減らすことにより。 古い関数は名前の下にあります `varSampStable`, `varPopStable`, `stddevSampStable`, `stddevPopStable`, `covarSampStable`, `covarPopStable`, `corrStable`.

#### バグ修正: {#bug-fixes-28}

-   実行後のデータ重複排除を修正しました。 `DROP` または `DETACH PARTITION` クエリ。 以前のバージョン、パーティションに挿入し、同じデータを再度はありませんが挿入されブロックを考慮した重複している。
-   の誤った解釈につながる可能性のあるバグを修正しました `WHERE` の句 `CREATE MATERIALIZED VIEW` クエリ `POPULATE` .
-   を使用する際のバグを修正しました `root_path` のパラメータ `zookeeper_servers` 構成。
-   パスの予期しない結果を修正しました。 `Date` 引数に `toStartOfDay` .
-   固定された `addMonths` と `subtractMonths` の関数と算術演算 `INTERVAL n MONTH` 結果が前年の場合。
-   追加された不足しているサポート `UUID` のデータ型 `DISTINCT` , `JOIN` ,and `uniq` 集計関数と外部辞書（Evgeniy Ivanov）。 のサポート `UUID` まだ不完全です。
-   固定 `SummingMergeTree` 行がゼロに加算された場合の動作。
-   のための様々な修正 `Kafka` engine (Marek Vavruša).
-   の修正された不正な動作 `Join` テーブルエンジン（アモス鳥）。
-   FreeBSDおよびOS Xでのアロケータの誤った動作を修正
-   その `extractAll` 関数は空の一致をサポートします。
-   の使用をブロックエラーを修正しました `libressl` 代わりに `openssl` .
-   固定された `CREATE TABLE AS SELECT` 一時テーブルからのクエリ。
-   レプリケーションキューの更新の非原因性を修正しました。 このレプリカとの同期までのサーバが再起動してしまいます。
-   で固定可能なオーバーフロー `gcd` , `lcm` と `modulo` (`%` オペレータ）（Maks Skorokhod）。
-   `-preprocessed` 変更後にファイルが作成されます `umask` (`umask` 設定で変更することができます）。
-   パーツのバックグラウンドチェックのバグを修正 (`MergeTreePartChecker` )カスタムパーティションキーを使用する場合
-   タプルの解析を修正しました。 `Tuple` テキスト形式のデータ型）。
-   互換性のない型に関するエラーメッセージの改善 `multiIf` , `array` そして他のある機能。
-   再設計されたサポート `Nullable` タイプ。 サーバークラッシュにつながるバグを修正しました。 固定のほぼすべてその他のバグ関連 `NULL` サポート:INSERT SELECTでの誤った型変換、HAVINGおよびPREWHEREでのNullableのサポートが不十分, `join_use_nulls` の引数としてNull可能な型 `OR` オペレータ、等。
-   データ型の内部セマンティクスに関連する様々なバグを修正。 例:の不必要な合計 `Enum` フィールドの入力 `SummingMergeTree` ;の位置合わせ `Enum` タイプ `Pretty` フォーマット等
-   厳しくチェック可の組み合わせの複合列あります。
-   非常に大きなパラ `FixedString` データ型。
-   のバグを修正しました `topK` 一般的な場合の集計関数。
-   集合関数のn-aryバリアントの引数に配列サイズが等しいかどうかのチェックが不足していることを追加しました。 `-Array` コンビネーター
-   のバグを修正しました `--pager` のために `clickhouse-client` （著者：ks1322）。
-   の精度を固定しました。 `exp10` 機能。
-   の動作を修正しました。 `visitParamExtract` ドキュメントのよりよい承諾のための機能
-   固定をした場合クラッシュする不正確なデータ種を指定します。
-   の動作を修正しました `DISTINCT` すべての列が定数である場合。
-   を使用する場合のクエリの書式設定を修正しました。 `tupleElement` タプル要素のインデックスとして複素定数式を持つ関数。
-   のバグを修正しました `Dictionary` 以下の表 `range_hashed` 辞書。
-   の結果に過度の行につながるバグを修正しました `FULL` と `RIGHT JOIN` （アモス鳥）。
-   固定サーバのクラッシュの作成時に除去の一時ファイル `config.d` ディレクトリの中configしてください。
-   固定された `SYSTEM DROP DNS CACHE` クエリのキャッシュをフラッシュがアドレスのクラスタノードが更新されません。
-   の動作を修正しました `MATERIALIZED VIEW` 実行後 `DETACH TABLE` for the table under the view (Marek Vavruša).

#### ビルドの改善: {#build-improvements-4}

-   その `pbuilder` ツールはビルドに使用されます。 ビルドプロセスは、ビルドホスト環境からほぼ完全に独立しています。
-   単一のビルドは、異なるOSバージョンで使用されます。 パッケージとバイナリは、幅広いLinuxシステムと互換性があります。
-   追加された `clickhouse-test` パッケージ。 これは、機能テストを実行するために使用できます。
-   ソースtarballをリポジトリに公開できるようになりました。 GitHubを使用せずにビルドを再現するために使用できます。
-   Travis CIとの限定的な統合を追加しました。 Travisのビルド時間に制限があるため、デバッグビルドのみがテストされ、テストの一部が実行されます。
-   追加されたサポート `Cap'n'Proto` デフォルトのビルドで。
-   ドキュメントソースのフォーマットを `Restricted Text` に `Markdown`.
-   追加されたサポート `systemd` ウラジーミル-スミルノフ これはデフォルトでは無効に設定により不適合一部のOSの画像を有効にすることができます。
-   動的コード生成の場合, `clang` と `lld` に埋め込まれます `clickhouse` バイナリ それらは呼び出されて `clickhouse clang` と `clickhouse lld` .
-   コードからGNU拡張の使用を削除しました。 有効にする `-Wextra` オプション で構築する場合 `clang` 既定値は次のとおりです `libc++` 代わりに `libstdc++`.
-   抽出 `clickhouse_parsers` と `clickhouse_common_io` 様々なツールのビルドを高速化するライブラリ。

#### 下位互換性のない変更: {#backward-incompatible-changes-11}

-   マークのフォーマット `Log` 以下を含む型テーブル `Nullable` 下位互換性のない方法で列が変更されました。 これらのテーブルがある場合は、それらを `TinyLog` タイプ前のサーババージョン。 これを行うには、 `ENGINE = Log` と `ENGINE = TinyLog` 対応する `.sql` のファイル `metadata` ディレクトリ。 あなたのテーブルに `Nullable` 列またはテーブルの型がない場合 `Log` 何もする必要はない
-   削除された `experimental_allow_extended_storage_definition_syntax` 設定。 この機能はデフォルトで有効になりました。
-   その `runningIncome` 関数の名前が変更されました `runningDifferenceStartingWithFirstvalue` 混乱を避けるため。
-   削除された `FROM ARRAY JOIN arr` 配列の結合がテーブルなしでFROMの直後に指定されている場合の構文（Amos Bird）。
-   削除された `BlockTabSeparated` デモンストレーション目的のみに使用された形式。
-   集計関数の状態形式を変更しました `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr`. これらの集計関数の状態をテーブルに格納している場合（ `AggregateFunction` データタイプや実現し意見に対応する状態）、書いてくださいclickhouse-feedback@yandex-team.com.
-   集計関数がパラメーターに依存する場合でも、AggregateFunctionデータ型でパラメーターなしで指定できます。 例: `AggregateFunction(quantiles, UInt64)` 代わりに `AggregateFunction(quantiles(0.5, 0.9), UInt64)`. この機能は失われました。 それは文書化されていなかったが、我々は将来のリリースで再びそれをサポートする予定です。
-   Enumデータ型は、min/max集計関数では使用できません。 この能力は次のリリースで返されます。

#### ご注意ください: {#please-note-when-upgrading}

-   クラスターでローリング更新を実行すると、一部のレプリカが古いバージョンのClickHouseを実行していて、一部のレプリカが新しいバージョンを実行している時点 `unknown parameter 'shard'` ログに表示されます。 レプリケーションは今後すべてのレプリカクラスターを更新しました。
-   異なるバージョンのClickHouseがクラスターサーバーで実行されている場合、次の関数を使用する分散クエリの結果が正しくない可能性があります: `varSamp`, `varPop`, `stddevSamp`, `stddevPop`, `covarSamp`, `covarPop`, `corr`. すべてのクラスタノードを更新します。

## [2017年の変更履歴](./2017.md#clickhouse-release-1-1-54327-2017-12-21) {#changelog-for-2017}
