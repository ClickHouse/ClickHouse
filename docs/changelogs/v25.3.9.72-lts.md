---
sidebar_position: 1
sidebar_label: 2025
---

# 2025 Changelog

### ClickHouse release v25.3.9.72-lts (2bce1f2a33f) FIXME as compared to v25.3.8.23-lts (41496507418)

#### Improvement
* Backported in [#90349](https://github.com/ClickHouse/ClickHouse/issues/90349): Use lower node limit for RemoveRecursive Keeper request during S3Queue cleanup. [#90201](https://github.com/ClickHouse/ClickHouse/pull/90201) ([Antonio Andelic](https://github.com/antonio2368)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#86876](https://github.com/ClickHouse/ClickHouse/issues/86876): Fix GROUP BY Nullable(JSON). [#86410](https://github.com/ClickHouse/ClickHouse/pull/86410) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#87052](https://github.com/ClickHouse/ClickHouse/issues/87052): Fix seeking at the end of the decompressed block. [#86906](https://github.com/ClickHouse/ClickHouse/pull/86906) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#89989](https://github.com/ClickHouse/ClickHouse/issues/89989): Fix creating an array of empty tuples. [#87520](https://github.com/ClickHouse/ClickHouse/pull/87520) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#88686](https://github.com/ClickHouse/ClickHouse/issues/88686): Don't remove injective functions from GROUP BY if arguments types are not allowed in GROUP BY. [#87958](https://github.com/ClickHouse/ClickHouse/pull/87958) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#89572](https://github.com/ClickHouse/ClickHouse/issues/89572): Fix reading mixed array of Floats and Bools in JSON. Previously inserting such data led to an exception. [#88008](https://github.com/ClickHouse/ClickHouse/pull/88008) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#89233](https://github.com/ClickHouse/ClickHouse/issues/89233): Fix SQL SECURITY DEFINER with *cluster functions. [#88588](https://github.com/ClickHouse/ClickHouse/pull/88588) ([Julian Maicher](https://github.com/jmaicher)).
* Backported in [#89440](https://github.com/ClickHouse/ClickHouse/issues/89440): Fix possible "Context has expired" with new analyzer with subqueries. [#88694](https://github.com/ClickHouse/ClickHouse/pull/88694) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#89460](https://github.com/ClickHouse/ClickHouse/issues/89460): Fix propagation of size restrictions by settings max_table_size_to_drop and max_partition_size_to_drop on DROP of inner tables. [#88812](https://github.com/ClickHouse/ClickHouse/pull/88812) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#89288](https://github.com/ClickHouse/ClickHouse/issues/89288): Fix ACCESS_ENTITY_NOT_FOUND error when trying to execute clusterAllReplicas from a user with a non-existing role. Resolves [#87670](https://github.com/ClickHouse/ClickHouse/issues/87670). [#89068](https://github.com/ClickHouse/ClickHouse/pull/89068) ([pufit](https://github.com/pufit)).
* Backported in [#89481](https://github.com/ClickHouse/ClickHouse/issues/89481): Fixed incorrect merge handling of TTL-emptied parts with non-empty projections when using `deduplicate_merge_projection_mode='ignore'`. Resolves [#89430](https://github.com/ClickHouse/ClickHouse/issues/89430). [#89458](https://github.com/ClickHouse/ClickHouse/pull/89458) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#89564](https://github.com/ClickHouse/ClickHouse/issues/89564): Fix reading of changelogs during Keeper startup in cases a changelog was not renamed properly during rotation. [#89496](https://github.com/ClickHouse/ClickHouse/pull/89496) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#89589](https://github.com/ClickHouse/ClickHouse/issues/89589): Fix possible "Context has expired" with analyzer and PK IN (subquery) (v2). Fixes [#89433](https://github.com/ClickHouse/ClickHouse/issues/89433). [#89527](https://github.com/ClickHouse/ClickHouse/pull/89527) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#90187](https://github.com/ClickHouse/ClickHouse/issues/90187): Fix possible stack overflow in data types binary deserialization. Closes [#88710](https://github.com/ClickHouse/ClickHouse/issues/88710). [#89822](https://github.com/ClickHouse/ClickHouse/pull/89822) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#89898](https://github.com/ClickHouse/ClickHouse/issues/89898): Fix logical error with empty tuple inside `IN` function. Closes [#88343](https://github.com/ClickHouse/ClickHouse/issues/88343). [#89850](https://github.com/ClickHouse/ClickHouse/pull/89850) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#89888](https://github.com/ClickHouse/ClickHouse/issues/89888): Remove injective functions from `GROUP BY` regardless `optimize_injective_functions_in_group_by` in old analyzer for compatibility. Resolves [#89854](https://github.com/ClickHouse/ClickHouse/issues/89854). [#89870](https://github.com/ClickHouse/ClickHouse/pull/89870) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#89959](https://github.com/ClickHouse/ClickHouse/issues/89959): Fix using native copy on GCS for backups. Because of incorrect client cloning, GCS native copy always failed and used less optimal approach of manual reading and writing the data. [#89923](https://github.com/ClickHouse/ClickHouse/pull/89923) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#90103](https://github.com/ClickHouse/ClickHouse/issues/90103): Fix wrong escaping for `SHOW COLUMNS` and `SHOW FUNCTIONS` queries. [#89942](https://github.com/ClickHouse/ClickHouse/pull/89942) ([alesapin](https://github.com/alesapin)).
* Backported in [#90084](https://github.com/ClickHouse/ClickHouse/issues/90084): Fix logical error caused by empty tuple column in `BSONEachRow` and `MsgPack`. Closes [#89814](https://github.com/ClickHouse/ClickHouse/issues/89814). Closes [#71536](https://github.com/ClickHouse/ClickHouse/issues/71536). [#90018](https://github.com/ClickHouse/ClickHouse/pull/90018) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#90179](https://github.com/ClickHouse/ClickHouse/issues/90179): Allow files starting with dots in user_files. Closes [#89662](https://github.com/ClickHouse/ClickHouse/issues/89662). [#90079](https://github.com/ClickHouse/ClickHouse/pull/90079) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#90290](https://github.com/ClickHouse/ClickHouse/issues/90290): Fix incorrect formatting of certain skip indexes in the table definition, causing `METADATA_MISMATCH` and breaking creation of new replicas in the Replicated Database. [#90251](https://github.com/ClickHouse/ClickHouse/pull/90251) ([Nikolay Degterinsky](https://github.com/evillique)).

#### Build/Testing/Packaging Improvement
* Use `curl 8.17.0`. [#90424](https://github.com/ClickHouse/ClickHouse/pull/90424) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `icu 78.1`. [#90425](https://github.com/ClickHouse/ClickHouse/pull/90425) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Use `libarchive 3.8.2`. [#90426](https://github.com/ClickHouse/ClickHouse/pull/90426) ([Konstantin Bogdanov](https://github.com/thevar1able)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#90566](https://github.com/ClickHouse/ClickHouse/issues/90566): Backporting function firstNonDefault. [#88441](https://github.com/ClickHouse/ClickHouse/pull/88441) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#89516](https://github.com/ClickHouse/ClickHouse/issues/89516): Fix potential heap-use-after-free in projections analysis after [#72102](https://github.com/ClickHouse/ClickHouse/issues/72102). [#89139](https://github.com/ClickHouse/ClickHouse/pull/89139) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Backported in [#89967](https://github.com/ClickHouse/ClickHouse/issues/89967): Only change S3Queue metadata in Keeper on the initial replica. [#89259](https://github.com/ClickHouse/ClickHouse/pull/89259) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#90045](https://github.com/ClickHouse/ClickHouse/issues/90045): Prevent false positive error on empty LowCardinality indexes. [#89680](https://github.com/ClickHouse/ClickHouse/pull/89680) ([Max Kainov](https://github.com/maxknv)).
* Backported in [#90529](https://github.com/ClickHouse/ClickHouse/issues/90529): Add more diagnostic to logical error in JSON. [#90286](https://github.com/ClickHouse/ClickHouse/pull/90286) ([Pavel Kruglov](https://github.com/Avogar)).

