---
sidebar_position: 1
sidebar_label: 2025
---

# 2025 Changelog

### ClickHouse release v25.8.13.73-lts (2dbc61a9bb8) FIXME as compared to v25.8.12.129-lts (25db09bd0a0)

#### Performance Improvement
* Backported in [#92306](https://github.com/ClickHouse/ClickHouse/issues/92306): Https://github.com/clickhouse/clickhouse/pull/84477 added constraints regarding select queries which can be used in `insert select from s3cluster()` queries for parallel distributed execution. this change allows using where, which was possible before. [#84611](https://github.com/ClickHouse/ClickHouse/pull/84611) ([Igor Nikonov](https://github.com/devcrafter)).

#### Improvement
* Backported in [#91248](https://github.com/ClickHouse/ClickHouse/issues/91248): Fixed potential thread pool starvation when reading column samples for JSON columns with many subcolumns by respecting the `merge_tree_use_prefixes_deserialization_thread_pool` setting instead of unconditionally using the thread pool. [#91208](https://github.com/ClickHouse/ClickHouse/pull/91208) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#92565](https://github.com/ClickHouse/ClickHouse/issues/92565): Make query memory usage detection for spilling to disk during aggregation/sorting more robust. [#92500](https://github.com/ClickHouse/ClickHouse/pull/92500) ([Azat Khuzhin](https://github.com/azat)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#92183](https://github.com/ClickHouse/ClickHouse/issues/92183): Fix removing unused projection columns in the presence of `UNION`. Fixes [#88180](https://github.com/ClickHouse/ClickHouse/issues/88180). [#88350](https://github.com/ClickHouse/ClickHouse/pull/88350) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#92491](https://github.com/ClickHouse/ClickHouse/issues/92491): Fixed several issues caused by premature column removal in TTL. Resolves [#88002](https://github.com/ClickHouse/ClickHouse/issues/88002). [#88860](https://github.com/ClickHouse/ClickHouse/pull/88860) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#92220](https://github.com/ClickHouse/ClickHouse/issues/92220): Fix handling of non materialized Nested(Tuple(...)) (added via ALTER). Fixes [#83133](https://github.com/ClickHouse/ClickHouse/issues/83133). [#88879](https://github.com/ClickHouse/ClickHouse/pull/88879) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#90146](https://github.com/ClickHouse/ClickHouse/issues/90146): Prevent query masking rules from being incorrectly applied to DDL statements. [#89272](https://github.com/ClickHouse/ClickHouse/pull/89272) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* Backported in [#90442](https://github.com/ClickHouse/ClickHouse/issues/90442): Fix inference of bad DateTime64 values from Strings in text formats in some cases. Resolves [#89368](https://github.com/ClickHouse/ClickHouse/issues/89368). [#90013](https://github.com/ClickHouse/ClickHouse/pull/90013) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90911](https://github.com/ClickHouse/ClickHouse/issues/90911): Fix bug in reading subcolumns from JSON in compact parts that could lead to `CANNOT_READ_ALL_DATA` error. Resolves [#90264](https://github.com/ClickHouse/ClickHouse/issues/90264). [#90302](https://github.com/ClickHouse/ClickHouse/pull/90302) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90971](https://github.com/ClickHouse/ClickHouse/issues/90971): Fix possible logical error during renaming and modifying the same Nested column in one ALTER. Resolves [#90406](https://github.com/ClickHouse/ClickHouse/issues/90406). [#90412](https://github.com/ClickHouse/ClickHouse/pull/90412) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91053](https://github.com/ClickHouse/ClickHouse/issues/91053): Fix parsing JSON/Dynamic/Variant values from HTTP parameters. Resolves [#88925](https://github.com/ClickHouse/ClickHouse/issues/88925). [#90430](https://github.com/ClickHouse/ClickHouse/pull/90430) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91870](https://github.com/ClickHouse/ClickHouse/issues/91870): Fixes a bug where `toDateTimeOrNull` of a negative argument returns NULL. [#90490](https://github.com/ClickHouse/ClickHouse/pull/90490) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Backported in [#91033](https://github.com/ClickHouse/ClickHouse/issues/91033): Fix possible logical error during output of `LowCardinality(Bool/Date32)` in `Arrow` format. Resolves [#83883](https://github.com/ClickHouse/ClickHouse/issues/83883). [#90505](https://github.com/ClickHouse/ClickHouse/pull/90505) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90786](https://github.com/ClickHouse/ClickHouse/issues/90786): Retry to markReplicasActive when failing to resolve address during local host check: Print a warning log if there is an exception during self host check in DDLTask. In DDLWorker::markReplicasActive, throw an exception to retry if there is no local host found and there are host IDs in clusters. [#90556](https://github.com/ClickHouse/ClickHouse/pull/90556) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#91717](https://github.com/ClickHouse/ClickHouse/issues/91717): Fix type-casting errors when using `LowCardinality` columns in partition keys. Closes [#89412](https://github.com/ClickHouse/ClickHouse/issues/89412). [#90666](https://github.com/ClickHouse/ClickHouse/pull/90666) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Backported in [#90869](https://github.com/ClickHouse/ClickHouse/issues/90869): Fix named collections hidden secrets to depend on `display_secrets_in_show_and_select` and `format_display_secrets_in_show_and_select`. [#90765](https://github.com/ClickHouse/ClickHouse/pull/90765) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#90850](https://github.com/ClickHouse/ClickHouse/issues/90850): Fix possible inconsistent state of shared data and dynamic paths in JSON that could lead to logical errors and unexpected results. [#90816](https://github.com/ClickHouse/ClickHouse/pull/90816) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90940](https://github.com/ClickHouse/ClickHouse/issues/90940): Fix ALTER MODIFY QUERY with dictGet() and dictionary name in CSE for SharedCatalog (cloud only feature). [#90860](https://github.com/ClickHouse/ClickHouse/pull/90860) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91310](https://github.com/ClickHouse/ClickHouse/issues/91310): Fix compatibility of in-memory serialization of String aggregation state. Different serialization could lead to duplicate results if aggregation query is executed on instances with different versions. New serialization can be enabled with `serialize_string_in_memory_with_zero_byte`. [#90880](https://github.com/ClickHouse/ClickHouse/pull/90880) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#90931](https://github.com/ClickHouse/ClickHouse/issues/90931): Fix background flush of Buffer in case of frequent INSERTs. [#90892](https://github.com/ClickHouse/ClickHouse/pull/90892) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91044](https://github.com/ClickHouse/ClickHouse/issues/91044): Fix high memory usage during reading JSON/Dynamic/Variant columns. [#90907](https://github.com/ClickHouse/ClickHouse/pull/90907) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91292](https://github.com/ClickHouse/ClickHouse/issues/91292): Fix buffer allocation for base58Decode function. [#90909](https://github.com/ClickHouse/ClickHouse/pull/90909) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#91219](https://github.com/ClickHouse/ClickHouse/issues/91219): Fix wildcard grants check for partial revoke. Added more tests. [#90922](https://github.com/ClickHouse/ClickHouse/pull/90922) ([pufit](https://github.com/pufit)).
* Backported in [#91498](https://github.com/ClickHouse/ClickHouse/issues/91498): Fixes `SummingMergeTree` aggregation for `Nested` `LowCardinality` columns. [#90927](https://github.com/ClickHouse/ClickHouse/pull/90927) ([Ivan Babrou](https://github.com/bobrik)).
* Backported in [#91765](https://github.com/ClickHouse/ClickHouse/issues/91765): Fix handling global grants with wildcard revokes Fixes the issue when revoking a wildcard grant can accidentally revoke some global-level grants like `CREATE USER`. [#90928](https://github.com/ClickHouse/ClickHouse/pull/90928) ([pufit](https://github.com/pufit)).
* Backported in [#91078](https://github.com/ClickHouse/ClickHouse/issues/91078): Fix possible infinite loop in azure list blobs. [#90947](https://github.com/ClickHouse/ClickHouse/pull/90947) ([Julia Kartseva](https://github.com/jkartseva)).
* Backported in [#91135](https://github.com/ClickHouse/ClickHouse/issues/91135): Fix excessive Buffer flushes (burns CPU and produce tons of logs). [#91000](https://github.com/ClickHouse/ClickHouse/pull/91000) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91071](https://github.com/ClickHouse/ClickHouse/issues/91071): Fix bug in JSON when path can be both in shared data and dynamic paths during sub-object reading in Compact parts with disabled `write_marks_for_substreams_in_compact_parts`. [#91014](https://github.com/ClickHouse/ClickHouse/pull/91014) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91087](https://github.com/ClickHouse/ClickHouse/issues/91087): Fix std::out_of_range in CTE with dictGet with no arguments. Closes [#91027](https://github.com/ClickHouse/ClickHouse/issues/91027). [#91022](https://github.com/ClickHouse/ClickHouse/pull/91022) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91688](https://github.com/ClickHouse/ClickHouse/issues/91688): Fix reading dynamic subcolumns from materialized columns in mutations. Closes [#90653](https://github.com/ClickHouse/ClickHouse/issues/90653). [#91040](https://github.com/ClickHouse/ClickHouse/pull/91040) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91345](https://github.com/ClickHouse/ClickHouse/issues/91345): Fix lazy materialization of a column added via alter add column in old parts. [#91142](https://github.com/ClickHouse/ClickHouse/pull/91142) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91263](https://github.com/ClickHouse/ClickHouse/issues/91263): Fix merging JSON columns in Summing/Aggregating/Coalescing MergeTree. Previously it could lead to unexpected dynamic paths durign writing to data parts. [#91151](https://github.com/ClickHouse/ClickHouse/pull/91151) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91317](https://github.com/ClickHouse/ClickHouse/issues/91317): Fix possible inconsistent dynamic structure during writing in compact parts that could lead to segfault. [#91152](https://github.com/ClickHouse/ClickHouse/pull/91152) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91399](https://github.com/ClickHouse/ClickHouse/issues/91399): Fix inserting into CoalescingMergeTree column with Tuple of JSON/Dynamic and LowCardinality. Closes [#91215](https://github.com/ClickHouse/ClickHouse/issues/91215). [#91270](https://github.com/ClickHouse/ClickHouse/pull/91270) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91336](https://github.com/ClickHouse/ClickHouse/issues/91336): Fix SYSTEM DROP FILESYSTEM CACHE ON CLUSTER. [#91304](https://github.com/ClickHouse/ClickHouse/pull/91304) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Backported in [#91560](https://github.com/ClickHouse/ClickHouse/issues/91560): Currently, the setting is set to false, so when async insert queue is flushed to a remote server, the inserts are always synchronous. Even in case of the setting is True for a user. [#91386](https://github.com/ClickHouse/ClickHouse/pull/91386) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Backported in [#91457](https://github.com/ClickHouse/ClickHouse/issues/91457): Remove Sparse columns from header in merge algorithms. Closes [#91377](https://github.com/ClickHouse/ClickHouse/issues/91377). [#91396](https://github.com/ClickHouse/ClickHouse/pull/91396) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92133](https://github.com/ClickHouse/ClickHouse/issues/92133): Fix crash in `dictGetDescendants` caused by `NULL` when dictionary type has Hierarchy support but no column is `HIERARCHICAL`. Closes [#92026](https://github.com/ClickHouse/ClickHouse/issues/92026). Closes [#92121](https://github.com/ClickHouse/ClickHouse/issues/92121). [#91420](https://github.com/ClickHouse/ClickHouse/pull/91420) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91797](https://github.com/ClickHouse/ClickHouse/issues/91797): Fix logical error caused by asterisks argument in `remote` function. Closes [#90568](https://github.com/ClickHouse/ClickHouse/issues/90568). [#91524](https://github.com/ClickHouse/ClickHouse/pull/91524) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91684](https://github.com/ClickHouse/ClickHouse/issues/91684): Disallow ALTERs for Object Storage table engines. For example, ALTER ADD PROJECTION could have led to an inability to restart the server, since Object Storage engines do not support projections. [#91573](https://github.com/ClickHouse/ClickHouse/pull/91573) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#91881](https://github.com/ClickHouse/ClickHouse/issues/91881): Fix increased memory usage in join with "additional filter", close [#91011](https://github.com/ClickHouse/ClickHouse/issues/91011). [#91664](https://github.com/ClickHouse/ClickHouse/pull/91664) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#91915](https://github.com/ClickHouse/ClickHouse/issues/91915): Fix LOGICAL_ERROR in RecursiveCTEChunkGenerator. [#91827](https://github.com/ClickHouse/ClickHouse/pull/91827) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#92253](https://github.com/ClickHouse/ClickHouse/issues/92253): Add repair mechanism for JSON with duplicated path in shared data and dynamic paths that could happen because of the bug that was fixed in https://github.com/ClickHouse/ClickHouse/pull/90816. [#91886](https://github.com/ClickHouse/ClickHouse/pull/91886) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92687](https://github.com/ClickHouse/ClickHouse/issues/92687): Cache schema only for the file it was inferred from in globs instead of all files during schema inference. Closes [#91745](https://github.com/ClickHouse/ClickHouse/issues/91745). [#92006](https://github.com/ClickHouse/ClickHouse/pull/92006) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92678](https://github.com/ClickHouse/ClickHouse/issues/92678): Release request stream in insert select to prevent closing http connection. [#92175](https://github.com/ClickHouse/ClickHouse/pull/92175) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#92240](https://github.com/ClickHouse/ClickHouse/issues/92240): Fix UDF replace in format. [#92210](https://github.com/ClickHouse/ClickHouse/pull/92210) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#92328](https://github.com/ClickHouse/ClickHouse/issues/92328): In `ddlworker::markreplicasactive`, if there is no active host found, and the `remote_servers` has some host_ids, we print a warning log instead of throwing an exception. [#92223](https://github.com/ClickHouse/ClickHouse/pull/92223) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#92434](https://github.com/ClickHouse/ClickHouse/issues/92434): Fix logical error caused by using `Nothing` type in `caseWithExpression` function arguments . Closes [#85354](https://github.com/ClickHouse/ClickHouse/issues/85354). [#92351](https://github.com/ClickHouse/ClickHouse/pull/92351) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#92702](https://github.com/ClickHouse/ClickHouse/issues/92702): Fix `count_distinct_optimization` pass over window functions and over multiple arguments. [#92376](https://github.com/ClickHouse/ClickHouse/pull/92376) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#92425](https://github.com/ClickHouse/ClickHouse/issues/92425): Fix possible crash in aggregate functions after MEMORY_LIMIT_EXCEEDED. [#92390](https://github.com/ClickHouse/ClickHouse/pull/92390) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#92739](https://github.com/ClickHouse/ClickHouse/issues/92739): Fix bug in data skipping logic when `not match(...)` is used in `WHERE` causing incorrect results. Closes [#92492](https://github.com/ClickHouse/ClickHouse/issues/92492). [#92726](https://github.com/ClickHouse/ClickHouse/pull/92726) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#92767](https://github.com/ClickHouse/ClickHouse/issues/92767): Do not attempt to delete temporary directories at startup if a MergeTree table is created over a read-only disk. [#92748](https://github.com/ClickHouse/ClickHouse/pull/92748) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Build/Testing/Packaging Improvement
* Backported in [#91367](https://github.com/ClickHouse/ClickHouse/issues/91367): Bump libssh from 0.9.8 to master (0.11.3). This resolves https://github.com/advisories/GHSA-98qw-prqm-9f4p. [#90985](https://github.com/ClickHouse/ClickHouse/pull/90985) ([Govind R Nair](https://github.com/Revertionist)).
* Backported in [#92015](https://github.com/ClickHouse/ClickHouse/issues/92015): Fix flaky 00906_low_cardinality_cache. [#92009](https://github.com/ClickHouse/ClickHouse/pull/92009) ([Nikita Fomichev](https://github.com/fm4v)).
* Backported in [#92465](https://github.com/ClickHouse/ClickHouse/issues/92465): Use any of `chcache` and `sccache` as rust wrapper. [#92404](https://github.com/ClickHouse/ClickHouse/pull/92404) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).

#### NO CL CATEGORY

* Backported in [#90995](https://github.com/ClickHouse/ClickHouse/issues/90995):. [#90951](https://github.com/ClickHouse/ClickHouse/pull/90951) ([Pablo Marcos](https://github.com/pamarcos)).

#### NO CL ENTRY

* NO CL ENTRY:  'Revert "Backport [#92404](https://github.com/ClickHouse/ClickHouse/issues/92404) to 25.8: Enable sccache for rust if used"'. [#92636](https://github.com/ClickHouse/ClickHouse/pull/92636) ([Azat Khuzhin](https://github.com/azat)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#90916](https://github.com/ClickHouse/ClickHouse/issues/90916): Make a separate IColumn method to take exact dynamic structure from a column. [#87582](https://github.com/ClickHouse/ClickHouse/pull/87582) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91018](https://github.com/ClickHouse/ClickHouse/issues/91018): remove try/catch from `~PooledConnection`. [#89090](https://github.com/ClickHouse/ClickHouse/pull/89090) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Backported in [#92506](https://github.com/ClickHouse/ClickHouse/issues/92506): CI: Fix clickhouse version tweak calculation for the fork with sync. [#89098](https://github.com/ClickHouse/ClickHouse/pull/89098) ([Max Kainov](https://github.com/maxknv)).
* Backported in [#91729](https://github.com/ClickHouse/ClickHouse/issues/91729): CI: Fix tweak calculation in legacy version helper. [#90950](https://github.com/ClickHouse/ClickHouse/pull/90950) ([Max Kainov](https://github.com/maxknv)).
* To match the default value on 25.6 and master: 500. [#91029](https://github.com/ClickHouse/ClickHouse/pull/91029) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#91149](https://github.com/ClickHouse/ClickHouse/issues/91149): Fix CI (due to tmpfs permissions changes in runc 1.3.3). [#91094](https://github.com/ClickHouse/ClickHouse/pull/91094) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91176](https://github.com/ClickHouse/ClickHouse/issues/91176): Improve DDLDependencyVisitor. [#91159](https://github.com/ClickHouse/ClickHouse/pull/91159) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#91422](https://github.com/ClickHouse/ClickHouse/issues/91422): Add assertion for having empty metadata_files. [#91210](https://github.com/ClickHouse/ClickHouse/pull/91210) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#91699](https://github.com/ClickHouse/ClickHouse/issues/91699): explicit POCO request for REST-polaris catalog. [#91437](https://github.com/ClickHouse/ClickHouse/pull/91437) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backported in [#91895](https://github.com/ClickHouse/ClickHouse/issues/91895): Probably `ulimit -n` setting was recently changed in the integration tests runner, and this fd leak started to become visible. [#91750](https://github.com/ClickHouse/ClickHouse/pull/91750) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Backported in [#91950](https://github.com/ClickHouse/ClickHouse/issues/91950): Backport of the fix for `optimize_skip_unused_shards` optimization for `Distributed` engine that may lead to `Serialization is not implemented for data type Set` due to wrong types. [#91923](https://github.com/ClickHouse/ClickHouse/pull/91923) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91970](https://github.com/ClickHouse/ClickHouse/issues/91970): Backport fix 03644_object_storage_correlated_subqueries to release br…. [#91957](https://github.com/ClickHouse/ClickHouse/pull/91957) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#92444](https://github.com/ClickHouse/ClickHouse/issues/92444): Fix polaris catalog: encode nested namespace. [#92079](https://github.com/ClickHouse/ClickHouse/pull/92079) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backport part of ClickHouse/ClickHouse[#85686](https://github.com/ClickHouse/ClickHouse/issues/85686). [#92639](https://github.com/ClickHouse/ClickHouse/pull/92639) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Backported in [#92820](https://github.com/ClickHouse/ClickHouse/issues/92820): Change log level. [#92810](https://github.com/ClickHouse/ClickHouse/pull/92810) ([Konstantin Vedernikov](https://github.com/scanhex12)).

