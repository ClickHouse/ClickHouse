---
sidebar_position: 1
sidebar_label: 2025
---

# 2025 Changelog

### ClickHouse release v25.11.3.54-stable (2199c84bef3) FIXME as compared to v25.11.2.24-stable (d4877847359)

#### Improvement
* Backported in [#91411](https://github.com/ClickHouse/ClickHouse/issues/91411): Enable the setting `allow_statistics_optimize` by default, so the JOINs optimizer will use column statistics. [#89332](https://github.com/ClickHouse/ClickHouse/pull/89332) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#92303](https://github.com/ClickHouse/ClickHouse/issues/92303): Allow implicit type conversion when casting `Array` to `QBit`. Integer and float arrays can now be inserted directly into `QBit` columns without explicit type casts. [#91846](https://github.com/ClickHouse/ClickHouse/pull/91846) ([Raufs Dunamalijevs](https://github.com/rienath)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#92038](https://github.com/ClickHouse/ClickHouse/issues/92038): Fix GenerateRandom engine crash on non-literal parameters: return BAD_ARGUMENTS with a clear message instead of LOGICAL_ERROR. [#88157](https://github.com/ClickHouse/ClickHouse/pull/88157) ([Shafi Ahmed](https://github.com/ita004)).
* Backported in [#92189](https://github.com/ClickHouse/ClickHouse/issues/92189): Fix removing unused projection columns in the presence of `UNION`. Fixes [#88180](https://github.com/ClickHouse/ClickHouse/issues/88180). [#88350](https://github.com/ClickHouse/ClickHouse/pull/88350) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#92263](https://github.com/ClickHouse/ClickHouse/issues/92263): Fixed several issues caused by premature column removal in TTL. Resolves [#88002](https://github.com/ClickHouse/ClickHouse/issues/88002). [#88860](https://github.com/ClickHouse/ClickHouse/pull/88860) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#92415](https://github.com/ClickHouse/ClickHouse/issues/92415): Fix `Bad get` error that happened during `Set` index analysis in case the predicate contained `NULL` constant. Fixes [#84856](https://github.com/ClickHouse/ClickHouse/issues/84856) and [#82974](https://github.com/ClickHouse/ClickHouse/issues/82974). [#89429](https://github.com/ClickHouse/ClickHouse/pull/89429) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Backported in [#91876](https://github.com/ClickHouse/ClickHouse/issues/91876): Fixes a bug where `toDateTimeOrNull` of a negative argument returns NULL. [#90490](https://github.com/ClickHouse/ClickHouse/pull/90490) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Backported in [#91723](https://github.com/ClickHouse/ClickHouse/issues/91723): Fix type-casting errors when using `LowCardinality` columns in partition keys. Closes [#89412](https://github.com/ClickHouse/ClickHouse/issues/89412). [#90666](https://github.com/ClickHouse/ClickHouse/pull/90666) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Backported in [#91760](https://github.com/ClickHouse/ClickHouse/issues/91760): Fix access validation for `ALTER UPDATE` queries when a `remote` table function is used with `localhost` as a target host. [#90761](https://github.com/ClickHouse/ClickHouse/pull/90761) ([pufit](https://github.com/pufit)).
* Backported in [#91329](https://github.com/ClickHouse/ClickHouse/issues/91329): Fix compatibility of in-memory serialization of String aggregation state. Different serialization could lead to duplicate results if aggregation query is executed on instances with different versions. New serialization can be enabled with `serialize_string_in_memory_with_zero_byte`. [#90880](https://github.com/ClickHouse/ClickHouse/pull/90880) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#91298](https://github.com/ClickHouse/ClickHouse/issues/91298): Fix buffer allocation for base58Decode function. [#90909](https://github.com/ClickHouse/ClickHouse/pull/90909) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#91504](https://github.com/ClickHouse/ClickHouse/issues/91504): Fixes `SummingMergeTree` aggregation for `Nested` `LowCardinality` columns. [#90927](https://github.com/ClickHouse/ClickHouse/pull/90927) ([Ivan Babrou](https://github.com/bobrik)).
* Backported in [#91771](https://github.com/ClickHouse/ClickHouse/issues/91771): Fix handling global grants with wildcard revokes Fixes the issue when revoking a wildcard grant can accidentally revoke some global-level grants like `CREATE USER`. [#90928](https://github.com/ClickHouse/ClickHouse/pull/90928) ([pufit](https://github.com/pufit)).
* Backported in [#91694](https://github.com/ClickHouse/ClickHouse/issues/91694): Fix reading dynamic subcolumns from materialized columns in mutations. Closes [#90653](https://github.com/ClickHouse/ClickHouse/issues/90653). [#91040](https://github.com/ClickHouse/ClickHouse/pull/91040) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92084](https://github.com/ClickHouse/ClickHouse/issues/92084): Fix logical error in `ARRAY JOIN` when one of the table columns is empty tuple column. Closes [#90801](https://github.com/ClickHouse/ClickHouse/issues/90801). [#91123](https://github.com/ClickHouse/ClickHouse/pull/91123) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91351](https://github.com/ClickHouse/ClickHouse/issues/91351): Fix lazy materialization of a column added via alter add column in old parts. [#91142](https://github.com/ClickHouse/ClickHouse/pull/91142) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91320](https://github.com/ClickHouse/ClickHouse/issues/91320): Fix possible inconsistent dynamic structure during writing in compact parts that could lead to segfault. [#91152](https://github.com/ClickHouse/ClickHouse/pull/91152) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91406](https://github.com/ClickHouse/ClickHouse/issues/91406): Fix inserting into CoalescingMergeTree column with Tuple of JSON/Dynamic and LowCardinality. Closes [#91215](https://github.com/ClickHouse/ClickHouse/issues/91215). [#91270](https://github.com/ClickHouse/ClickHouse/pull/91270) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91342](https://github.com/ClickHouse/ClickHouse/issues/91342): Fix SYSTEM DROP FILESYSTEM CACHE ON CLUSTER. [#91304](https://github.com/ClickHouse/ClickHouse/pull/91304) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Backported in [#92279](https://github.com/ClickHouse/ClickHouse/issues/92279): Fix possible logical error "Bad cast from type DB::ColumnSparse to DB::ColumnNullable". Closes [#91284](https://github.com/ClickHouse/ClickHouse/issues/91284). [#91309](https://github.com/ClickHouse/ClickHouse/pull/91309) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91550](https://github.com/ClickHouse/ClickHouse/issues/91550): Fix a crash when maliciously crafted byte streams deserialize into nested QBit types, which should be impossible but could be exploited to crash the server. [#91313](https://github.com/ClickHouse/ClickHouse/pull/91313) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#91541](https://github.com/ClickHouse/ClickHouse/issues/91541): Fix Alias table with empty args in Replicated database. Resolved [#91378](https://github.com/ClickHouse/ClickHouse/issues/91378). [#91382](https://github.com/ClickHouse/ClickHouse/pull/91382) ([Kai Zhu](https://github.com/nauu)).
* Backported in [#91566](https://github.com/ClickHouse/ClickHouse/issues/91566): Currently, the setting is set to false, so when async insert queue is flushed to a remote server, the inserts are always synchronous. Even in case of the setting is True for a user. [#91386](https://github.com/ClickHouse/ClickHouse/pull/91386) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Backported in [#91445](https://github.com/ClickHouse/ClickHouse/issues/91445): Remove Sparse columns from header in merge algorithms. Closes [#91377](https://github.com/ClickHouse/ClickHouse/issues/91377). [#91396](https://github.com/ClickHouse/ClickHouse/pull/91396) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91487](https://github.com/ClickHouse/ClickHouse/issues/91487): Fix hive partitioning bug in 25.8 which can lead to incorrectly thrown exception `A hive partitioned file can't contain only partition columns`. [#91403](https://github.com/ClickHouse/ClickHouse/pull/91403) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#92139](https://github.com/ClickHouse/ClickHouse/issues/92139): Fix crash in `dictGetDescendants` caused by `NULL` when dictionary type has Hierarchy support but no column is `HIERARCHICAL`. Closes [#92026](https://github.com/ClickHouse/ClickHouse/issues/92026). Closes [#92121](https://github.com/ClickHouse/ClickHouse/issues/92121). [#91420](https://github.com/ClickHouse/ClickHouse/pull/91420) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91624](https://github.com/ClickHouse/ClickHouse/issues/91624): Fixed `QBit` type failing with query parameters like `SET param_q=[1,2,3,4]; SELECT {q:QBit(Float32,4)}`. [#91488](https://github.com/ClickHouse/ClickHouse/pull/91488) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#91803](https://github.com/ClickHouse/ClickHouse/issues/91803): Fix logical error caused by asterisks argument in `remote` function. Closes [#90568](https://github.com/ClickHouse/ClickHouse/issues/90568). [#91524](https://github.com/ClickHouse/ClickHouse/pull/91524) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91663](https://github.com/ClickHouse/ClickHouse/issues/91663): Disallow ALTERs for Object Storage table engines. For example, ALTER ADD PROJECTION could have led to an inability to restart the server, since Object Storage engines do not support projections. [#91573](https://github.com/ClickHouse/ClickHouse/pull/91573) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#91809](https://github.com/ClickHouse/ClickHouse/issues/91809): Fixed [`L2DistanceTransposed`](https://clickhouse.com/docs/sql-reference/functions/distance-functions#L2DistanceTransposed) returning incorrect results when using non-constant reference vectors (e.g., from a table). [#91517](https://github.com/ClickHouse/ClickHouse/issues/91517). [#91593](https://github.com/ClickHouse/ClickHouse/pull/91593) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#91867](https://github.com/ClickHouse/ClickHouse/issues/91867): Fix increased memory usage in join with "additional filter", close [#91011](https://github.com/ClickHouse/ClickHouse/issues/91011). [#91664](https://github.com/ClickHouse/ClickHouse/pull/91664) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#91893](https://github.com/ClickHouse/ClickHouse/issues/91893): Fix delta lake setting `delta_lake_snapshot_version` which could give incorrect result when used with table engine (not table function) and value -1 (disabled) after snapshot version was used before that. Closes [#87676](https://github.com/ClickHouse/ClickHouse/issues/87676). [#91818](https://github.com/ClickHouse/ClickHouse/pull/91818) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#91921](https://github.com/ClickHouse/ClickHouse/issues/91921): Fix LOGICAL_ERROR in RecursiveCTEChunkGenerator. [#91827](https://github.com/ClickHouse/ClickHouse/pull/91827) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#92374](https://github.com/ClickHouse/ClickHouse/issues/92374): Fix numerous logical errors, overflow and functional bugs in `midpoint` function. Closes [#91816](https://github.com/ClickHouse/ClickHouse/issues/91816). [#92102](https://github.com/ClickHouse/ClickHouse/pull/92102) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#92274](https://github.com/ClickHouse/ClickHouse/issues/92274): Fixes incorrect results that could appear when reading certain subcolumns (e.g., string size) with sparse encoding. [#92156](https://github.com/ClickHouse/ClickHouse/pull/92156) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92338](https://github.com/ClickHouse/ClickHouse/issues/92338): Fix `system.view_refreshes` failing with error `No macro 'replica' in config`. [#92203](https://github.com/ClickHouse/ClickHouse/pull/92203) ([Michael Kolupaev](https://github.com/al13n321)).
* Backported in [#92246](https://github.com/ClickHouse/ClickHouse/issues/92246): Fix UDF replace in format. [#92210](https://github.com/ClickHouse/ClickHouse/pull/92210) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#92334](https://github.com/ClickHouse/ClickHouse/issues/92334): In `ddlworker::markreplicasactive`, if there is no active host found, and the `remote_servers` has some host_ids, we print a warning log instead of throwing an exception. [#92223](https://github.com/ClickHouse/ClickHouse/pull/92223) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#92367](https://github.com/ClickHouse/ClickHouse/issues/92367): Fix crash when reading both String data and .size subcolumn from Log engine. This fixes [#89909](https://github.com/ClickHouse/ClickHouse/issues/89909). This contains some commits in [#92290](https://github.com/ClickHouse/ClickHouse/issues/92290). [#92341](https://github.com/ClickHouse/ClickHouse/pull/92341) ([Amos Bird](https://github.com/amosbird)).
* Backported in [#92440](https://github.com/ClickHouse/ClickHouse/issues/92440): Fix logical error caused by using `Nothing` type in `caseWithExpression` function arguments . Closes [#85354](https://github.com/ClickHouse/ClickHouse/issues/85354). [#92351](https://github.com/ClickHouse/ClickHouse/pull/92351) ([Nihal Z. Miaji](https://github.com/nihalzp)).

#### Build/Testing/Packaging Improvement
* Backported in [#91373](https://github.com/ClickHouse/ClickHouse/issues/91373): Bump libssh from 0.9.8 to master (0.11.3). This resolves https://github.com/advisories/GHSA-98qw-prqm-9f4p. [#90985](https://github.com/ClickHouse/ClickHouse/pull/90985) ([Govind R Nair](https://github.com/Revertionist)).
* Backported in [#92021](https://github.com/ClickHouse/ClickHouse/issues/92021): Fix flaky 00906_low_cardinality_cache. [#92009](https://github.com/ClickHouse/ClickHouse/pull/92009) ([Nikita Fomichev](https://github.com/fm4v)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#91148](https://github.com/ClickHouse/ClickHouse/issues/91148): Disable LOGICAL_ERRORs about function monotonicity in release build. [#90462](https://github.com/ClickHouse/ClickHouse/pull/90462) ([Michael Kolupaev](https://github.com/al13n321)).
* Backported in [#91438](https://github.com/ClickHouse/ClickHouse/issues/91438): Enable split tasks by buckets in all cluster functions. [#90799](https://github.com/ClickHouse/ClickHouse/pull/90799) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backported in [#91428](https://github.com/ClickHouse/ClickHouse/issues/91428): Add assertion for having empty metadata_files. [#91210](https://github.com/ClickHouse/ClickHouse/pull/91210) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#91283](https://github.com/ClickHouse/ClickHouse/issues/91283): Attempt to address the issue with parallel integration tests pulling. [#91241](https://github.com/ClickHouse/ClickHouse/pull/91241) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Backported in [#91705](https://github.com/ClickHouse/ClickHouse/issues/91705): explicit POCO request for REST-polaris catalog. [#91437](https://github.com/ClickHouse/ClickHouse/pull/91437) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backported in [#91679](https://github.com/ClickHouse/ClickHouse/issues/91679): fix a race when HTTP_CONNECTION_LIMIT_REACHED is thrown. [#91582](https://github.com/ClickHouse/ClickHouse/pull/91582) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#91654](https://github.com/ClickHouse/ClickHouse/issues/91654): In order to better rollout, the limits are released by default. The configuration will be defined according to the instance size. [#91601](https://github.com/ClickHouse/ClickHouse/pull/91601) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#91899](https://github.com/ClickHouse/ClickHouse/issues/91899): Probably `ulimit -n` setting was recently changed in the integration tests runner, and this fd leak started to become visible. [#91750](https://github.com/ClickHouse/ClickHouse/pull/91750) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Backported in [#91977](https://github.com/ClickHouse/ClickHouse/issues/91977): Https://github.com/clickhouse/clickhouse/pull/87300 was a backward-incompatible change and clickhouse was unable to read old parts due to changes in files escaping. now it changes escaping settings if it cannot find file name to be able to read such old parts. closes https://github.com/clickhouse/clickhouse/issues/91668. closes https://github.com/clickhouse/clickhouse/issues/91626. [#91823](https://github.com/ClickHouse/ClickHouse/pull/91823) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91956](https://github.com/ClickHouse/ClickHouse/issues/91956): Backport of the fix for `optimize_skip_unused_shards` optimization for `Distributed` engine that may lead to `Serialization is not implemented for data type Set` due to wrong types. [#91923](https://github.com/ClickHouse/ClickHouse/pull/91923) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91968](https://github.com/ClickHouse/ClickHouse/issues/91968): Backport fix 03644_object_storage_correlated_subqueries to release br…. [#91957](https://github.com/ClickHouse/ClickHouse/pull/91957) ([Vladimir Cherkasov](https://github.com/vdimir)).

