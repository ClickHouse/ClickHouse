---
sidebar_position: 1
sidebar_label: 2025
---

# 2025 Changelog

### ClickHouse release v25.12.1.649-stable (bf4280aa19d) FIXME as compared to v25.12.1.1-new (4a90b95163c)

#### Backward Incompatible Change
* ALTER MODIFY COLUMN now requires explicit DEFAULT when converting nullable columns to non-nullable types. Previously such ALTERs could get stuck with cannot convert null to not null errors, now NULLs are replaced with column's default expression. Resolves [#5985](https://github.com/ClickHouse/ClickHouse/issues/5985). [#84770](https://github.com/ClickHouse/ClickHouse/pull/84770) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Ngram tokenizer will no longer return ngrams less than the length N it was set with. Text Search will return no rows when search tokens are empty. [#89757](https://github.com/ClickHouse/ClickHouse/pull/89757) ([George Larionov](https://github.com/george-larionov)).
* When alter column from `String` to `Nullable(String)`, we will not do mutation to the data. but for `uniq` aggregate function, it use different data strucuture: for nullable column, it will use `AggregateFunctionNull` with a nested uniq aggregator. the `AggregateFunctionNull` will serialize an extra bool flag. This will make the statistics file incompatible. The fix is add a flag to record if it is a nullable column during serialization. The format of statisticis has changed, the server will crash if we have statistics with old format. This PR https://github.com/ClickHouse/ClickHouse/pull/90904 will fix the crash, and throw exception when the existing statisticis uses lagecy format. To avoid exception, we should run ALTER TABLE [db.]table MATERIALIZE STATISTICS ALL to regenerate the statistics` to fix it. [#90311](https://github.com/ClickHouse/ClickHouse/pull/90311) ([Han Fei](https://github.com/hanfei1991)).
* Remove settings `allow_not_comparable_types_in_order_by`/`allow_not_comparable_types_in_comparison_functions`. Allowing non-comparable types in order by or comparison functions may lead to logical errors and unexpected results. Resolves [#90028](https://github.com/ClickHouse/ClickHouse/issues/90028). [#90527](https://github.com/ClickHouse/ClickHouse/pull/90527) ([Pavel Kruglov](https://github.com/Avogar)).
* Changed the default of setting `check_query_single_value_result` from `true` to `false`. This causes `CHECK TABLE` to return detailed per-part results instead of an aggregated result (1 = okay, 0 = errors found). Compared to the previous behavior, this is likely more aligned with what the user wants. [#91009](https://github.com/ClickHouse/ClickHouse/pull/91009) ([Robert Schulze](https://github.com/rschu1ze)).
* Multiple fixes around implicit indices. The schema shown or stored (keeper metadata) won't include implicit indices, such as the ones created by settings `add_minmax_index_for_numeric_columns` or `add_minmax_index_for_string_columns`. This might cause metadata errors when a ReplicatedMergeTree table is created or updated in a newer version, while there is a replica in an older release. For those cases send DDLs to the old replica until the cluster is upgraded completely. [#91429](https://github.com/ClickHouse/ClickHouse/pull/91429) ([Raúl Marín](https://github.com/Algunenano)).
* Update clickhouse-client to return a non-zero exit code (159 - TIMEOUT_EXCEEDED) when a query times out due to `receive_timeout`. Previously, timeouts would return exit code 0 (success), making it difficult for scripts and automation to detect timeout failures. [#91432](https://github.com/ClickHouse/ClickHouse/pull/91432) ([Sav](https://github.com/sberss)).
* Improved storage layout of the inverted text index to be more efficient for reading from the object storage. Improved performance of merges in tables with inverted text indexes. If you used the experimental text index before version 25.12, you need to drop the index before the upgrade and rebuild it on the new version. [#91518](https://github.com/ClickHouse/ClickHouse/pull/91518) ([Anton Popov](https://github.com/CurtizJ)).
* It is now forbidden to create special `MergeTree` tables (such as `ReplacingMergeTree`, `CollapsingMergeTree`, etc.) with an empty `ORDER BY` key, since merge behavior in these tables is undefined. If you still need to create such a table, enable the `allow_suspicious_primary_key` setting. [#91569](https://github.com/ClickHouse/ClickHouse/pull/91569) ([Anton Popov](https://github.com/CurtizJ)).
* Fix functions bitShiftLeft and bitShiftRight to return 0 or empty value in case of a shift exactly of the size of the type. [#91943](https://github.com/ClickHouse/ClickHouse/pull/91943) ([Pablo Marcos](https://github.com/pamarcos)).
* Follow-up to https://github.com/ClickHouse/ClickHouse/pull/88380. This PR marks disabled positional arguments in the projections as a backward-incompatible change. Additionally, it introduces the `enable_positional_arguments_for_projections` setting to enable a safe ClickHouse cluster upgrade when positional arguments are present in the projections. [#92007](https://github.com/ClickHouse/ClickHouse/pull/92007) ([Dmitry Novik](https://github.com/novikd)).

#### New Feature
* Users can now configure S3/Azure Queue tables to move or tag processed files, in addition to the previous options to keep or remove files. Resolves [#72944](https://github.com/ClickHouse/ClickHouse/issues/72944). [#86907](https://github.com/ClickHouse/ClickHouse/pull/86907) ([Murat Khairulin](https://github.com/mxwell)).
* Add `allow_reentry` option to `windowFunnel` aggregate function. When enabled with strict_order, it ignores events that violate the order instead of stopping the funnel analysis. This enables handling user journeys with refreshes (A->A->B) or back-navigation (A->B->A->C) without underreporting conversion rates. [#86916](https://github.com/ClickHouse/ClickHouse/pull/86916) ([Lee ChaeRok](https://github.com/LeeChaeRok)).
* CLI client can now suppress the 'ClickHouse server version is older than ClickHouse client. It may indicate that the server is out of date and can be upgraded.' message by specifying `--no-server-client-version-message` or `false`. [#87784](https://github.com/ClickHouse/ClickHouse/pull/87784) ([Larry Snizek](https://github.com/larry-cdn77)).
* Keeper compatibility with zookeeper: create with statistics. [#88797](https://github.com/ClickHouse/ClickHouse/pull/88797) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Support for ZooKeeper persistent watches in ClickHouse Keeper. Continuation part 2: https://github.com/ClickHouse/ClickHouse/pull/78207. [#88813](https://github.com/ClickHouse/ClickHouse/pull/88813) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Functions to calculate area and perimeter for the geometry type. [#89047](https://github.com/ClickHouse/ClickHouse/pull/89047) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Add instrumentation at runtime using XRay to debug issues in production and profile deterministically. Resolves [#74249](https://github.com/ClickHouse/ClickHouse/issues/74249). [#89173](https://github.com/ClickHouse/ClickHouse/pull/89173) ([Pablo Marcos](https://github.com/pamarcos)).
* Implement `dictGetKeys` function that returns the dictionary key(s) whose attribute equals the specified value. It uses a per-query reverse-lookup cache, tuned by the `max_reverse_dictionary_lookup_cache_size_bytes` setting, to speed up repeated lookups. [#89197](https://github.com/ClickHouse/ClickHouse/pull/89197) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Access ClickHouse Cloud instances using Cloud credentials with --login. [#89261](https://github.com/ClickHouse/ClickHouse/pull/89261) ([Krishna Mannem](https://github.com/kcmannem)).
* Add setting `type_json_skip_invalid_typed_paths` to disable exceptions for inserts/type casts to JSON type when input JSON cannot be cast to explicit typed paths in JSON type. Falls back to null/zero value of typed path. [#89886](https://github.com/ClickHouse/ClickHouse/pull/89886) ([Max Justus Spransy](https://github.com/maxjustus)).
* Support `direct` (nested loop) join for MergeTree tables. To use it, specify it as the single option in the setting: `join_algorithm = 'direct'`. [#89920](https://github.com/ClickHouse/ClickHouse/pull/89920) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Support `ORDER BY` in `CREATE` operation for iceberg + sorting in `INSERT`. Resolves [#89916](https://github.com/ClickHouse/ClickHouse/issues/89916). [#90141](https://github.com/ClickHouse/ClickHouse/pull/90141) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* This PR introduces projection-level settings, exposed through the new WITH SETTINGS clause in ALTER TABLE ... ADD PROJECTION. These settings allow projections to override certain MergeTree storage parameters (e.g. index_granularity, index_granularity_bytes) on a per-projection basis. [#90158](https://github.com/ClickHouse/ClickHouse/pull/90158) ([Amos Bird](https://github.com/amosbird)).
* Add data masking policy parser. [#90552](https://github.com/ClickHouse/ClickHouse/pull/90552) ([pufit](https://github.com/pufit)).
* Add `HMAC(algorithm, message, key)` sql function as a part of [#73900](https://github.com/ClickHouse/ClickHouse/issues/73900) and [#38775](https://github.com/ClickHouse/ClickHouse/issues/38775). [#90837](https://github.com/ClickHouse/ClickHouse/pull/90837) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Add support for `has()` function to use primary key and data skipping indexes when first argument is constant array. Closes [#90980](https://github.com/ClickHouse/ClickHouse/issues/90980). [#91023](https://github.com/ClickHouse/ClickHouse/pull/91023) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Implement new input output format `Buffers`. This format is similar to `Native`; however, unlike `Native`, it does not store column names, column types, or any extra metadata. Closes [#84017](https://github.com/ClickHouse/ClickHouse/issues/84017). [#91156](https://github.com/ClickHouse/ClickHouse/pull/91156) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Add a setting `max_streams_for_files_processing_in_cluster_functions` to control number of streams for parallel files reading in Cluster table functions. Closes [#90223](https://github.com/ClickHouse/ClickHouse/issues/90223). [#91323](https://github.com/ClickHouse/ClickHouse/pull/91323) ([Pavel Kruglov](https://github.com/Avogar)).

#### Experimental Feature
* The new logic is introduced to automatically execute queries using parallel replicas, controlled by the setting `automatic_parallel_replicas_mode`. During normal single-node execution, ClickHouse collects statistics that will later be considered during the planning stage. If statistics suggest that parallel replicas are likely to be beneficial, ClickHouse will automatically execute the given query with parallel replicas. The set of supported queries is currently fairly limited. [#87541](https://github.com/ClickHouse/ClickHouse/pull/87541) ([Nikita Taranov](https://github.com/nickitat)).

#### Performance Improvement
* Fail fast when queries reach row limits. Resolves [#61872](https://github.com/ClickHouse/ClickHouse/issues/61872). [#62804](https://github.com/ClickHouse/ClickHouse/pull/62804) ([Sean Haynes](https://github.com/seandhaynes)).
* Add optimization to remove unused columns in query plans. Resolves [#75152](https://github.com/ClickHouse/ClickHouse/issues/75152). [#76487](https://github.com/ClickHouse/ClickHouse/pull/76487) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Https://github.com/clickhouse/clickhouse/pull/84477 added constrains regarding select queries which can be used in `insert select from s3cluster()` queries for parallel distributed execution. this change allows using where, which was possible before. [#84611](https://github.com/ClickHouse/ClickHouse/pull/84611) ([Igor Nikonov](https://github.com/devcrafter)).
* Prefetch keys during hash table iteration to minimize cache misses. [#84708](https://github.com/ClickHouse/ClickHouse/pull/84708) ([lgbo](https://github.com/lgbo-ustc)).
* Optimize AggregateFunctionHistogram by sorting only the tail of points array and skipping sort for monotonic inputs, achieving ~10% speedup. [#85760](https://github.com/ClickHouse/ClickHouse/pull/85760) ([MakarDev](https://github.com/MakarDev)).
* ClickHouse now uses skip indexes to perform index analysis on WHERE clauses with mixed `AND`- and `OR`-connected filter conditions. Previously, the WHERE clause needed to be a conjunction (AND) of filter conditions to utilize skip indexes. A new setting `use_skip_indexes_for_disjunctions` (default: on) controls this feature. (issue [#75228](https://github.com/ClickHouse/ClickHouse/issues/75228)). [#87781](https://github.com/ClickHouse/ClickHouse/pull/87781) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Improved filtering performance for predicates with functions such as `like`, `equals`, `has`, and others by leveraging an additional preliminary filter built from the text index. This optimization is enabled via the `query_plan_text_index_add_hint` setting. Improved usage of the text index for columns of `Map` data type. [#88550](https://github.com/ClickHouse/ClickHouse/pull/88550) ([Anton Popov](https://github.com/CurtizJ)).
* Optimize repeated inverse dictionary lookups by doing faster lookups into a precomputed set of possible key values. Closes [#7968](https://github.com/ClickHouse/ClickHouse/issues/7968). [#88971](https://github.com/ClickHouse/ClickHouse/pull/88971) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Added support of sparse serialization for columns of Nullable type. This continues [#44539](https://github.com/ClickHouse/ClickHouse/issues/44539). [#88999](https://github.com/ClickHouse/ClickHouse/pull/88999) ([Amos Bird](https://github.com/amosbird)).
* Support JOIN runtime filters for `ANTI` JOINs. Also, refactor the runtime filters implementation to reduce lock contention. [#89710](https://github.com/ClickHouse/ClickHouse/pull/89710) ([Dmitry Novik](https://github.com/novikd)).
* Support keeping reading in order from the left table in LEFT/INNER JOIN operations, which can be utilized by subsequent steps. Can be disabled using setting `query_plan_read_in_order_through_join`. Support virtual row while reading optimization (see setting `read_in_order_use_virtual_row`) for LEFT/INNER JOINs. [#89815](https://github.com/ClickHouse/ClickHouse/pull/89815) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Optimize `ORDER BY...LIMIT N` queries by using skip index and dynamic threshold filter to significantly reduce rows processed. [#89835](https://github.com/ClickHouse/ClickHouse/pull/89835) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Improve topK performance and behaviour. [#90091](https://github.com/ClickHouse/ClickHouse/pull/90091) ([Raúl Marín](https://github.com/Algunenano)).
* Improved performance of Decimal comparison operations. Resolves [#28192](https://github.com/ClickHouse/ClickHouse/issues/28192). [#90153](https://github.com/ClickHouse/ClickHouse/pull/90153) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Support partition pruning for Paimon functions, continuing from https://github.com/ClickHouse/ClickHouse/pull/84423. [#90253](https://github.com/ClickHouse/ClickHouse/pull/90253) ([JIaQi](https://github.com/JiaQiTang98)).
* Improve the performance of lazily materialized columns with a bigger limit. [#90309](https://github.com/ClickHouse/ClickHouse/pull/90309) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Users should see lower latency in index analysis when large `minmax` indexes (millions of granules) are present. [#90428](https://github.com/ClickHouse/ClickHouse/pull/90428) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Use advanced SIMD operations for logical functions via dynamic dispatch. [#90432](https://github.com/ClickHouse/ClickHouse/pull/90432) ([Raúl Marín](https://github.com/Algunenano)).
* Improve JIT function performing by not initializing the result column to zero unnecessarily. [#90449](https://github.com/ClickHouse/ClickHouse/pull/90449) ([Raúl Marín](https://github.com/Algunenano)).
* Speed up T64 decompression via dynamic dispatch. [#90610](https://github.com/ClickHouse/ClickHouse/pull/90610) ([Raúl Marín](https://github.com/Algunenano)).
* Optimize MergeTree reader inplace filtering. Resolves [#87119](https://github.com/ClickHouse/ClickHouse/issues/87119). [#90630](https://github.com/ClickHouse/ClickHouse/pull/90630) ([Xiaozhe Yu](https://github.com/wudidapaopao)).
* Fail fast when queries reach row limits. Resolves [#61872](https://github.com/ClickHouse/ClickHouse/issues/61872). [#90767](https://github.com/ClickHouse/ClickHouse/pull/90767) ([Sean Haynes](https://github.com/seandhaynes)).
* Implement simple DPsize join reordering algorithm for INNER JOINs. A new experimental setting controls what algorithms are used in which order, e.g. `query_plan_optimize_join_order_algorithm='dpsize,greedy'` means that DPsize is tried first with fallback to greedy. [#91002](https://github.com/ClickHouse/ClickHouse/pull/91002) ([Alexander Gololobov](https://github.com/davenger)).
* Introduce an additional heuristic to reduce the widths of the selected merge choices. Performing more narrow merges will increase write amplification, but at the same time, can help prevent falling under the `TOO_MANY_PARTS` errors. [#91163](https://github.com/ClickHouse/ClickHouse/pull/91163) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Improve query performance for S3 tables created with glob pattern by pushing down `_path` filter values, which allows to avoid S3 listing operations. Controlled by the `s3_path_filter_limit` setting. [#91165](https://github.com/ClickHouse/ClickHouse/pull/91165) ([Eduard Karacharov](https://github.com/korowa)).
* Speed up converting columns to bool (in WHERE clauses) via dynamic dispatch. [#91203](https://github.com/ClickHouse/ClickHouse/pull/91203) ([Raúl Marín](https://github.com/Algunenano)).
* Speed up sorting of single numeric block via dynamic dispatch. [#91213](https://github.com/ClickHouse/ClickHouse/pull/91213) ([Raúl Marín](https://github.com/Algunenano)).

#### Improvement
* Allows the use of non-constant second arguments for `IN`. It also supports a tuple as a second argument. [#77906](https://github.com/ClickHouse/ClickHouse/pull/77906) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Add error message that the part was deduplicated. [#80264](https://github.com/ClickHouse/ClickHouse/pull/80264) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Allows `INSERT` into `ALIAS` columns (columns that simply refers to a physical column without any expression). Closes [#80060](https://github.com/ClickHouse/ClickHouse/issues/80060). [#84154](https://github.com/ClickHouse/ClickHouse/pull/84154) ([Shaurya Mohan](https://github.com/ShauryaMohan)).
* Fixes some bugs with prewhere, involving supertypes for Time and Time64 data types. Resolves [#84544](https://github.com/ClickHouse/ClickHouse/issues/84544). [#84715](https://github.com/ClickHouse/ClickHouse/pull/84715) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Added `dependencies` and `missing_dependencies` columns to `system.kafka_consumers` to report materialized view target tables for Kafka tables. Added `KafkaMVNotReady` counter. [#85346](https://github.com/ClickHouse/ClickHouse/pull/85346) ([Ilya Golshtein](https://github.com/ilejn)).
* Adds session-level setting `aggregate_function_input_format` to improve `INSERT` queries into tables with AggregateFunction columns, allowing insertion of data as serialized state, raw values, or arrays. [#88088](https://github.com/ClickHouse/ClickHouse/pull/88088) ([Punith Nandyappa Subashchandra](https://github.com/punithns97)).
* Now, default expressions work correctly with remote and native protocol. Closes [#87972](https://github.com/ClickHouse/ClickHouse/issues/87972). [#88540](https://github.com/ClickHouse/ClickHouse/pull/88540) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Allow disabling of `PSI_*_*` async metrics collection. [#88557](https://github.com/ClickHouse/ClickHouse/pull/88557) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* The default value of `query_plan_optimize_join_order_limit` is changed to 10. [#89312](https://github.com/ClickHouse/ClickHouse/pull/89312) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable the setting `allow_statistics_optimize` by default, so the JOINs optimizer will use column statistics. [#89332](https://github.com/ClickHouse/ClickHouse/pull/89332) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a MergeTree setting `alter_column_secondary_index_mode` to control what to do with indices during mutations. Possible values: throw, drop, rebuild, and compatibility. Closes [#77797](https://github.com/ClickHouse/ClickHouse/issues/77797). [#89335](https://github.com/ClickHouse/ClickHouse/pull/89335) ([Raúl Marín](https://github.com/Algunenano)).
* Setting `enable_time_time64_type` is now enabled by default. [#89345](https://github.com/ClickHouse/ClickHouse/pull/89345) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* `plain-rewritable` disk has its own implementation and layout. Let's not base it on top of regular `plain` disks. [#89807](https://github.com/ClickHouse/ClickHouse/pull/89807) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Reduces memory usage during merges in `system.metric_log` table (enabled by default) by setting `min_bytes_for_wide_part` and `vertical_merge_algorithm_min_bytes_to_activate` to 128MB. [#89811](https://github.com/ClickHouse/ClickHouse/pull/89811) ([filimonov](https://github.com/filimonov)).
* Added fields `last_error_time`, `last_error_message`, `last_error_query_id` and `last_error_trace` to `system.error_log` table. [#89879](https://github.com/ClickHouse/ClickHouse/pull/89879) ([Narasimha Pakeer](https://github.com/npakeer)).
* Enable using inverted index in PREWHERE. Resolves [#89975](https://github.com/ClickHouse/ClickHouse/issues/89975). [#89977](https://github.com/ClickHouse/ClickHouse/pull/89977) ([Peng Jian](https://github.com/fastio)).
* Any exception in HTTP should never contain final zero chunk. [#89998](https://github.com/ClickHouse/ClickHouse/pull/89998) ([Kaviraj Kanagaraj](https://github.com/kavirajk)).
* Add a keeper-server-side check during handshake to reject clients when `last_zxid_seen (provided by the client) > last_processed_zxid`. This prevents stale reads when clients reconnect to lagging replicas. [#90016](https://github.com/ClickHouse/ClickHouse/pull/90016) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add `kafka_consumer_reschedule_ms` as a tunable `Kafka` table engine setting in order to adjust how long consumers sleep for new data. Resolves [#89204](https://github.com/ClickHouse/ClickHouse/issues/89204). [#90112](https://github.com/ClickHouse/ClickHouse/pull/90112) ([Jeremy Aguilon](https://github.com/JerAguilon)).
* Changed the default of setting `check_query_single_value_result` from `true` to `false`. This causes `CHECK TABLE` to return detailed per-part results instead of an aggregated result (1 = okay, 0 = errors found). Compared to the previous behavior, this is likely more aligned with what the user wants. [#90150](https://github.com/ClickHouse/ClickHouse/pull/90150) ([Robert Schulze](https://github.com/rschu1ze)).
* Add a new column `parts_in_progress_names` to `system.mutations` to improve diagnostics. [#90155](https://github.com/ClickHouse/ClickHouse/pull/90155) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Retry network errors when S3 library parses XML response. [#90216](https://github.com/ClickHouse/ClickHouse/pull/90216) ([Sema Checherinda](https://github.com/CheSema)).
* We want to run keepers in separate server processes and, to avoid overwhelming Prometheus in large regions, we should continue to expose only keeper-related metrics. [#90244](https://github.com/ClickHouse/ClickHouse/pull/90244) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add support for loading ClickHouse Client configuration from XDG Base Directory paths (e.g., `~/.config/clickhouse/config.xml`) in addition to the legacy `~/.clickhouse-client/` location. Resolves [#89882](https://github.com/ClickHouse/ClickHouse/issues/89882). [#90306](https://github.com/ClickHouse/ClickHouse/pull/90306) ([Wujun Jiang](https://github.com/rainac1)).
* Add byte size limit for append request batch in Keeper. Limit is controlled with `keeper_server.coordination_settings.max_requests_append_bytes_size`. [#90342](https://github.com/ClickHouse/ClickHouse/pull/90342) ([Antonio Andelic](https://github.com/antonio2368)).
* Add setting to prevent large partitions count. [#90365](https://github.com/ClickHouse/ClickHouse/pull/90365) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Support reading DeltaLake CDF via `deltaLake` table function with settings `delta_lake_snapshot_start_version`, `delta_lake_snapshot_end_version`. The CDF (Change Data Feed, a feature that lets you automatically capture and query row-level data changes—such as inserts, updates, and deletes—between versions of a Delta table) is enabled in DeltaLake via `delta.enableChangeDataFeed`. The columns provided along with the data are `_change_type`, `_commit_version`, `_commit_timestamp`. [#90431](https://github.com/ClickHouse/ClickHouse/pull/90431) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Update warning messages when approaching guardrails limits: show current and throw values. [#90438](https://github.com/ClickHouse/ClickHouse/pull/90438) ([Nikita Fomichev](https://github.com/fm4v)).
* Stream chunks in `system.filesystem_cache` table instead of creating a single chunk with all cache state. Reading filesystem cache state can take a long time for large caches and consume a lot of memory, so streaming it is indispensable for large deployments. [#90508](https://github.com/ClickHouse/ClickHouse/pull/90508) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix bad exception message in Hive partitioning: it was missing a space. [#90685](https://github.com/ClickHouse/ClickHouse/pull/90685) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Entries in the vector similarity index cache are now removed when table parts are dropped or replaced by newer parts. Prior to this, these would be cleared only lazily by cache eviction. [#90750](https://github.com/ClickHouse/ClickHouse/pull/90750) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Bump chdig to [v25.11.2+](https://github.com/azat/chdig/releases/tag/v25.11.2). [#90773](https://github.com/ClickHouse/ClickHouse/pull/90773) ([Azat Khuzhin](https://github.com/azat)).
* Now pre-signed URLs work with S3. Closes [#65032](https://github.com/ClickHouse/ClickHouse/issues/65032). [#90827](https://github.com/ClickHouse/ClickHouse/pull/90827) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Remove stuff from performance test configs. [#90879](https://github.com/ClickHouse/ClickHouse/pull/90879) ([Raúl Marín](https://github.com/Algunenano)).
* Bump internal croaring library from v4.3.3 to v4.4.3. [#90891](https://github.com/ClickHouse/ClickHouse/pull/90891) ([Robert Schulze](https://github.com/rschu1ze)).
* Entries in the vector similarity index cache are now removed when table parts are dropped or replaced by newer parts. Prior to this, these would be cleared only lazily by cache eviction. [#90903](https://github.com/ClickHouse/ClickHouse/pull/90903) ([Robert Schulze](https://github.com/rschu1ze)).
* Due to https://github.com/ClickHouse/ClickHouse/pull/90311 , the format of statisticis has changed, the server will crash if we have statistics with old format. This PR will fix the crash, and throw exception when the existing statisticis uses legacy format. To avoid exception, we should run `ALTER TABLE [db.]table MATERIALIZE STATISTICS ALL` to regenerate the statistics` to fix it. [#90904](https://github.com/ClickHouse/ClickHouse/pull/90904) ([Han Fei](https://github.com/hanfei1991)).
* The text index now works with ReplacingMergeTree tables. [#90908](https://github.com/ClickHouse/ClickHouse/pull/90908) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Avoid exposing the ClickHouse server version in HTTP error responses returned before authentication. [#91003](https://github.com/ClickHouse/ClickHouse/pull/91003) ([filimonov](https://github.com/filimonov)).
* Now `HTTP_CONNECTION_LIMIT_REACHED` exception would be thrown when `hard_limit` for the http clients connection is reached. It is set as `20000` for the disk connections. [#91016](https://github.com/ClickHouse/ClickHouse/pull/91016) ([Sema Checherinda](https://github.com/CheSema)).
* Added a new setting `apply_row_policy_after_final` that allows the query to apply row policy only after final, which will make the behavior for ReplacingMergeTree with row policies more correct. Fixes [#90986](https://github.com/ClickHouse/ClickHouse/issues/90986). [#91065](https://github.com/ClickHouse/ClickHouse/pull/91065) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Introduce `system.background_schedule_pool{,_log}` to improve introspection of background jobs. [#91157](https://github.com/ClickHouse/ClickHouse/pull/91157) ([Azat Khuzhin](https://github.com/azat)).
* You can now quickly comment or uncomment your currently selected lines in the Web UI query editor using `Ctrl+/` (or `Cmd+/` on Mac), making it easier to temporarily disable parts of your query while testing. [#91160](https://github.com/ClickHouse/ClickHouse/pull/91160) ([Samuel K.](https://github.com/OpenGLShaders)).
* Add system.completions to list of always accessible tables. [#91166](https://github.com/ClickHouse/ClickHouse/pull/91166) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Add profile events `FailedInitialQuery` and `FailedInitialSelectQuery`. [#91172](https://github.com/ClickHouse/ClickHouse/pull/91172) ([RinChanNOW](https://github.com/RinChanNOWWW)).
* Fixed potential thread pool starvation when reading column samples for JSON columns with many subcolumns by respecting the `merge_tree_use_prefixes_deserialization_thread_pool` setting instead of unconditionally using the thread pool. [#91208](https://github.com/ClickHouse/ClickHouse/pull/91208) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Support JSON type in tupleElement. Closes [#81630](https://github.com/ClickHouse/ClickHouse/issues/81630). [#91327](https://github.com/ClickHouse/ClickHouse/pull/91327) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed spurious memory limit errors when userspace page cache is enabled. [#91361](https://github.com/ClickHouse/ClickHouse/pull/91361) ([Michael Kolupaev](https://github.com/al13n321)).
* Bump chdig to [v25.12.1](https://github.com/azat/chdig/releases/tag/v25.12.1). [#91394](https://github.com/ClickHouse/ClickHouse/pull/91394) ([Azat Khuzhin](https://github.com/azat)).
* In storage S3(Azure)Queue add setting `commit_on_select` (to define whether processed data needs to be committed and whether to apply `after_processing` action). The default value is `false`, fix check for attached mv during select. [#91450](https://github.com/ClickHouse/ClickHouse/pull/91450) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Ngrams tokenizer can now be built with ngram_length = 1. [#91529](https://github.com/ClickHouse/ClickHouse/pull/91529) ([George Larionov](https://github.com/george-larionov)).
* Now, default expressions work correctly with remote and native protocol. Closes [#87972](https://github.com/ClickHouse/ClickHouse/issues/87972). Improved schema inference for table functions. Fixed schema inference for `EXPLAIN` or `CREATE TABLE AS SELECT` queries. [#91599](https://github.com/ClickHouse/ClickHouse/pull/91599) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Support negative indexes for tuple element access (e.g. tuple.-1). [#91665](https://github.com/ClickHouse/ClickHouse/pull/91665) ([Amos Bird](https://github.com/amosbird)).
* Don't add S3 providers if GCP OAuth is used. [#91706](https://github.com/ClickHouse/ClickHouse/pull/91706) ([Antonio Andelic](https://github.com/antonio2368)).
* Support storage settings in insert into table function for consistency with select. Closes [#89386](https://github.com/ClickHouse/ClickHouse/issues/89386). [#91707](https://github.com/ClickHouse/ClickHouse/pull/91707) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Throw an "not implemented" for truncate query for data lakes instead of silently doing nothing. Closes [#86604](https://github.com/ClickHouse/ClickHouse/issues/86604). [#91713](https://github.com/ClickHouse/ClickHouse/pull/91713) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Set max message size on parquet v3 reader to avoid getting `DB::Exception: apache::thrift::transport::TTransportException: MaxMessageSize reached`. [#91737](https://github.com/ClickHouse/ClickHouse/pull/91737) ([Arthur Passos](https://github.com/arthurpassos)).
* In Pretty format, named tuples are now displayed as Pretty JSON. This closes [#65022](https://github.com/ClickHouse/ClickHouse/issues/65022). [#91779](https://github.com/ClickHouse/ClickHouse/pull/91779) ([Mostafa Mohamed Salah](https://github.com/Sasao4o)).
* Add a setting insert_select_deduplicate. Which makes it more clear how do we handle insert deduplication when INSERT SELECT. In general it is not possible to do deduplication for such queries, but if the table is not changed and the result is sorted then it is possible to do deduplication on retry. We could not track that the source is the same. But we could check that the result of select query is sorted. Actually it turned out that in general case it is really hard to check, but the simple case with `ORDER BY ALL` is easy. Right now the logic here actually is broken. We try to deduplicate, but in the most cases it just does not see duplicates among the blocks because the select returns different data. [#91830](https://github.com/ClickHouse/ClickHouse/pull/91830) ([Sema Checherinda](https://github.com/CheSema)).
* Allow implicit type conversion when casting `Array` to `QBit`. Integer and float arrays can now be inserted directly into `QBit` columns without explicit type casts. [#91846](https://github.com/ClickHouse/ClickHouse/pull/91846) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Add CapnProto message size limit. It can be changed with `format_capn_proto_max_message_size`. [#91888](https://github.com/ClickHouse/ClickHouse/pull/91888) ([Antonio Andelic](https://github.com/antonio2368)).
* Refine marks cache metrics to track only queries (after [#83415](https://github.com/ClickHouse/ClickHouse/issues/83415) `MarkCacheHits`/`MarkCacheMisses` was updated for merges as well, this PR will revert this behavior back). [#91910](https://github.com/ClickHouse/ClickHouse/pull/91910) ([Azat Khuzhin](https://github.com/azat)).
* Fix `client_info.interface` being set to `TCP` for local connections. [#91933](https://github.com/ClickHouse/ClickHouse/pull/91933) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Deduce Iceberg table metadata location if `metadata_location` not specified in Glue metadata. [#91994](https://github.com/ClickHouse/ClickHouse/pull/91994) ([Andrey Zvonov](https://github.com/zvonand)).
* `refresh_certificates_task_interval` parameter in ACME client configuration now expects a value in seconds. [#92211](https://github.com/ClickHouse/ClickHouse/pull/92211) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Log parts events in `system.part_log` for `system.*_log`. [#92217](https://github.com/ClickHouse/ClickHouse/pull/92217) ([Azat Khuzhin](https://github.com/azat)).
* Add a new column, `elapsed_time_microseconds` to `system.blob_storage_log`. [#92322](https://github.com/ClickHouse/ClickHouse/pull/92322) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#92573](https://github.com/ClickHouse/ClickHouse/issues/92573): Make query memory usage detection for spilling to disk during aggregation/sorting more robust. [#92500](https://github.com/ClickHouse/ClickHouse/pull/92500) ([Azat Khuzhin](https://github.com/azat)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Initialize `DNSResolver` before use to respect custom settings. Fixes [#76296](https://github.com/ClickHouse/ClickHouse/issues/76296). [#81302](https://github.com/ClickHouse/ClickHouse/pull/81302) ([Zhigao Hong](https://github.com/zghong)).
* Fix reading subcolumns from a column with dot in the name in some cases. Resolves [#81261](https://github.com/ClickHouse/ClickHouse/issues/81261), [#82058](https://github.com/ClickHouse/ClickHouse/issues/82058), [#88169](https://github.com/ClickHouse/ClickHouse/issues/88169). [#87205](https://github.com/ClickHouse/ClickHouse/pull/87205) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix GenerateRandom engine crash on non-literal parameters: return BAD_ARGUMENTS with a clear message instead of LOGICAL_ERROR. [#88157](https://github.com/ClickHouse/ClickHouse/pull/88157) ([Shafi Ahmed](https://github.com/ita004)).
* Fix removing unused projection columns in the presence of `UNION`. Fixes [#88180](https://github.com/ClickHouse/ClickHouse/issues/88180). [#88350](https://github.com/ClickHouse/ClickHouse/pull/88350) ([Sema Checherinda](https://github.com/CheSema)).
* Fixed incorrect sharding in `JOIN` optimization when the primary key is sorted in descending order. Resolves [#88512](https://github.com/ClickHouse/ClickHouse/issues/88512). [#88794](https://github.com/ClickHouse/ClickHouse/pull/88794) ([Amos Bird](https://github.com/amosbird)).
* Re-enable s3queue_keeper_fault_injection_probablility, fix issues. [#88800](https://github.com/ClickHouse/ClickHouse/pull/88800) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fixed several issues caused by premature column removal in TTL. Resolves [#88002](https://github.com/ClickHouse/ClickHouse/issues/88002). [#88860](https://github.com/ClickHouse/ClickHouse/pull/88860) ([Amos Bird](https://github.com/amosbird)).
* Throw exception when temporary_files_buffer_size is set to 0. Resolves [#88900](https://github.com/ClickHouse/ClickHouse/issues/88900). [#88917](https://github.com/ClickHouse/ClickHouse/pull/88917) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix `Bad get` error that happened during `Set` index analysis in case the predicate contained `NULL` constant. Fixes [#84856](https://github.com/ClickHouse/ClickHouse/issues/84856) and [#82974](https://github.com/ClickHouse/ClickHouse/issues/82974). [#89429](https://github.com/ClickHouse/ClickHouse/pull/89429) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Fix `Cannot add subcolumn X.Y: column with this name already exists`. Resolves [#89599](https://github.com/ClickHouse/ClickHouse/issues/89599). [#89602](https://github.com/ClickHouse/ClickHouse/pull/89602) ([Azat Khuzhin](https://github.com/azat)).
* Fix bugs in the `theilsU` and `contingency` functions that caused incorrect results. [#89760](https://github.com/ClickHouse/ClickHouse/pull/89760) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix Alias stability issues: Fix StrictnessLevel with SharedDatabaseCatalog, disallow target is also an alias, and implement additional interfaces (getSerializationHints, supportsReplication, getStoragePolicy, totalBytesUncompressed, lifetimeRows, lifetimeBytes, storesDataOnDisk, tryLockForShare, lockForShare). Resolves [#89106](https://github.com/ClickHouse/ClickHouse/issues/89106). [#89812](https://github.com/ClickHouse/ClickHouse/pull/89812) ([Kai Zhu](https://github.com/nauu)).
* Fix possible crash during remote query with `ARRAY JOIN` inside `IN` and enabled `enable_lazy_columns_replication` setting. Resolves [#90361](https://github.com/ClickHouse/ClickHouse/issues/90361). [#89997](https://github.com/ClickHouse/ClickHouse/pull/89997) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possible logical error when using `analyzer_compatibility_join_using_top_level_identifier` with multiple joins. [#90010](https://github.com/ClickHouse/ClickHouse/pull/90010) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix inference of bad DateTime64 values from Strings in text formats in some cases. Resolves [#89368](https://github.com/ClickHouse/ClickHouse/issues/89368). [#90013](https://github.com/ClickHouse/ClickHouse/pull/90013) ([Pavel Kruglov](https://github.com/Avogar)).
* Do size checks when deserializing data from aggregation states and other sources. [#90031](https://github.com/ClickHouse/ClickHouse/pull/90031) ([Raúl Marín](https://github.com/Algunenano)).
* Split part ranges by volume characteristics to enable TTL drop merges for cold volumes. After this patch, parts with a max TTL < now will be removed from cold storage. The algorithm will schedule only **single part drops**. [#90059](https://github.com/ClickHouse/ClickHouse/pull/90059) ([Mikhail Artemenko](https://github.com/Michicosun)).
* In case when Kafka table was created with a setting `kafka_handle_error_mode = 'dead_letter_queue'` and the table `system.dead_letter_queue` is not configured the server may have crashed. This behaviour is fixed. Resolves [#87573](https://github.com/ClickHouse/ClickHouse/issues/87573). [#90064](https://github.com/ClickHouse/ClickHouse/pull/90064) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Fix possible error `Column with Array type is not represented by ColumnArray column: Replicated` during insertion with usage of `ARRAY JOIN` and enabled `enable_lazy_columns_replication` setting. [#90066](https://github.com/ClickHouse/ClickHouse/pull/90066) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed a crash during the clean server shutdown due to wrong destruction order. Resolves [#82420](https://github.com/ClickHouse/ClickHouse/issues/82420). [#90076](https://github.com/ClickHouse/ClickHouse/pull/90076) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Fix logical error and modulo bug in `numbers` system table when big step size is used. Closes [#83398](https://github.com/ClickHouse/ClickHouse/issues/83398). [#90123](https://github.com/ClickHouse/ClickHouse/pull/90123) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix parquet writing not preserving original order when using single threaded writing with the native writer. Partially reverts https://github.com/ClickHouse/ClickHouse/pull/64424/files. [#90126](https://github.com/ClickHouse/ClickHouse/pull/90126) ([Arthur Passos](https://github.com/arthurpassos)).
* Do not apply constant node optimization to LIMIT/OFFSET expression. Fixes [#89607](https://github.com/ClickHouse/ClickHouse/issues/89607). [#90156](https://github.com/ClickHouse/ClickHouse/pull/90156) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Fix hive partitioning incompatibility preventing smooth upgrade in 25.8 (fixes error `All hive partitioning columns must be present in the schema` during upgrade). [#90202](https://github.com/ClickHouse/ClickHouse/pull/90202) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix JSON Exception in iceberg table with timestamp column when using glue catalog. Resolves [#90210](https://github.com/ClickHouse/ClickHouse/issues/90210). [#90209](https://github.com/ClickHouse/ClickHouse/pull/90209) ([Alsu Giliazova](https://github.com/alsugiliazova)).
* Fixes a row-count mismatch in MergeTreeReaderIndex when the part's only has fewer rows than index_granularity. Resolves [#89691](https://github.com/ClickHouse/ClickHouse/issues/89691). [#90254](https://github.com/ClickHouse/ClickHouse/pull/90254) ([Peng Jian](https://github.com/fastio)).
* Fix infinite `nan`/`inf` `WITH FILL` query. Resolves [#69261](https://github.com/ClickHouse/ClickHouse/issues/69261). [#90255](https://github.com/ClickHouse/ClickHouse/pull/90255) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Fix 'column not found' error with query_plan_use_logical_join_step=0 and residual condition in JOIN ON. Resolves [#88635](https://github.com/ClickHouse/ClickHouse/issues/88635). [#90279](https://github.com/ClickHouse/ClickHouse/pull/90279) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix some queries with aggregated projection optimization. [#90288](https://github.com/ClickHouse/ClickHouse/pull/90288) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Fix bug in reading subcolumns from JSON in compact parts that could lead to `CANNOT_READ_ALL_DATA` error. Resolves [#90264](https://github.com/ClickHouse/ClickHouse/issues/90264). [#90302](https://github.com/ClickHouse/ClickHouse/pull/90302) ([Pavel Kruglov](https://github.com/Avogar)).
* Now ClickHouse will not use read-in-order optimization for iceberg if sort order is not specified manifest files (or not the same) with default_sort_order in table. Fixes [#89178](https://github.com/ClickHouse/ClickHouse/issues/89178). [#90304](https://github.com/ClickHouse/ClickHouse/pull/90304) ([alesapin](https://github.com/alesapin)).
* Time and Time64 now should respect timezones correctly while converting from DateTime and DateTime64 (it must show time in the same timezone as it shows for the user as a DateTime[64]). Closes [#89896](https://github.com/ClickHouse/ClickHouse/issues/89896). [#90310](https://github.com/ClickHouse/ClickHouse/pull/90310) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fixes a bug where `SELECT CAST(CAST(now(), 'Time'), 'Time64')` was producing incorrect result. Closes [#88349](https://github.com/ClickHouse/ClickHouse/issues/88349). [#90324](https://github.com/ClickHouse/ClickHouse/pull/90324) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fixed crash on integer overflow in randomStringUTF8. [#90326](https://github.com/ClickHouse/ClickHouse/pull/90326) ([Michael Kolupaev](https://github.com/al13n321)).
* Fixed cluster discovery updates in multicluster setups with `multicluster_root_path` to prevent delays and missing ZooKeeper updates. [#90341](https://github.com/ClickHouse/ClickHouse/pull/90341) ([RinChanNOW](https://github.com/RinChanNOWWW)).
* Fix possible logical error in prewhere on non-existing JSON path with index_granularity_bytes=0. Resolves [#86924](https://github.com/ClickHouse/ClickHouse/issues/86924). [#90375](https://github.com/ClickHouse/ClickHouse/pull/90375) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed a bug in `L2DistanceTransposed` that caused crashes when the precision argument exceeded valid range. Closes [#90401](https://github.com/ClickHouse/ClickHouse/issues/90401). [#90405](https://github.com/ClickHouse/ClickHouse/pull/90405) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix possible logical error in `arrayUnion` with `Array(Dynamic)` argument. Resolves [#90270](https://github.com/ClickHouse/ClickHouse/issues/90270). [#90409](https://github.com/ClickHouse/ClickHouse/pull/90409) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possible logical error during renaming and modifying the same Nested column in one ALTER. Resolves [#90406](https://github.com/ClickHouse/ClickHouse/issues/90406). [#90412](https://github.com/ClickHouse/ClickHouse/pull/90412) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix parsing JSON/Dynamic/Variant values from HTTP parameters. Resolves [#88925](https://github.com/ClickHouse/ClickHouse/issues/88925). [#90430](https://github.com/ClickHouse/ClickHouse/pull/90430) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed a race condition in Hive partitioning where a static `KeyValuePairExtractor` caused data corruption or crashes during concurrent file reads. [#90474](https://github.com/ClickHouse/ClickHouse/pull/90474) ([Paresh Joshi](https://github.com/pareshjoshij)).
* Fixed incorrect distance calculations in `L2DistanceTransposed` when using array reference vectors (which default to `Array(Float64))` with `QBit` columns of non-`Float64` element types (`Float32`, `BFloat16`). The function now automatically casts the reference vector to match the `QBit`'s element type. Resolves [#89976](https://github.com/ClickHouse/ClickHouse/issues/89976). [#90485](https://github.com/ClickHouse/ClickHouse/pull/90485) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fixes a bug where `toDateTimeOrNull` of a negative argument returns NULL. [#90490](https://github.com/ClickHouse/ClickHouse/pull/90490) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fix possible logical error during output of `LowCardinality(Bool/Date32)` in `Arrow` format. Resolves [#83883](https://github.com/ClickHouse/ClickHouse/issues/83883). [#90505](https://github.com/ClickHouse/ClickHouse/pull/90505) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed IPv4 parsing functions (e.g. `IPv4StringToNumOrDefault`) returning garbage for some invalid inputs. Resolves [#90544](https://github.com/ClickHouse/ClickHouse/issues/90544). Resolves [#87583](https://github.com/ClickHouse/ClickHouse/issues/87583). [#90545](https://github.com/ClickHouse/ClickHouse/pull/90545) ([Michael Kolupaev](https://github.com/al13n321)).
* Retry to markReplicasActive when failing to resolve address during local host check: Print a warning log if there is an exception during self host check in DDLTask. In DDLWorker::markReplicasActive, throw an exception to retry if there is no local host found and there are host IDs in clusters. [#90556](https://github.com/ClickHouse/ClickHouse/pull/90556) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Fix logical error caused by a rare case in `equals` function. Closes [#88142](https://github.com/ClickHouse/ClickHouse/issues/88142). [#90557](https://github.com/ClickHouse/ClickHouse/pull/90557) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Hopefully fixes thread sanitizer crashes in `test_ssh/test.py::test_paramiko_password`. [#90612](https://github.com/ClickHouse/ClickHouse/pull/90612) ([Govind R Nair](https://github.com/Revertionist)).
* Fix logical error in `concatWithSeparator` function when using const non-string column. Closes [#90596](https://github.com/ClickHouse/ClickHouse/issues/90596). [#90655](https://github.com/ClickHouse/ClickHouse/pull/90655) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix formatting for `INTO OUTFILE`. Resolves [#90207](https://github.com/ClickHouse/ClickHouse/issues/90207). [#90656](https://github.com/ClickHouse/ClickHouse/pull/90656) ([Azat Khuzhin](https://github.com/azat)).
* Fix potential crash when executing mutations with subqueries and `allow_statistics_optimize=1`. Resolves [#90626](https://github.com/ClickHouse/ClickHouse/issues/90626). [#90664](https://github.com/ClickHouse/ClickHouse/pull/90664) ([Azat Khuzhin](https://github.com/azat)).
* Fixed analyzer validation for `LIMIT BY` with `GROUP BY` to produce correct `NOT_AN_AGGREGATE` error instead of `NOT_FOUND_COLUMN_IN_BLOCK` when `LIMIT BY` uses columns not in `GROUP BY`. Closes [#89713](https://github.com/ClickHouse/ClickHouse/issues/89713). [#90665](https://github.com/ClickHouse/ClickHouse/pull/90665) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Fix type-casting errors when using `LowCardinality` columns in partition keys. Closes [#89412](https://github.com/ClickHouse/ClickHouse/issues/89412). [#90666](https://github.com/ClickHouse/ClickHouse/pull/90666) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Fix issue where queries with filter predicates containing constants folded from non-deterministic functions (e.g. `shardNum()`) could incorrectly use query condition cache. [#90692](https://github.com/ClickHouse/ClickHouse/pull/90692) ([Eduard Karacharov](https://github.com/korowa)).
* Fix segfault on query with EXISTS function in join on section. Now query simply returns `INVALID_JOIN_ON_EXPRESSION` error. Close [#90698](https://github.com/ClickHouse/ClickHouse/issues/90698). [#90719](https://github.com/ClickHouse/ClickHouse/pull/90719) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix Logical error: 'Inconsistent AST formatting' for AccessRightsElement when using the default database without any table. [#90742](https://github.com/ClickHouse/ClickHouse/pull/90742) ([Pablo Marcos](https://github.com/pamarcos)).
* Fix access validation for `ALTER UPDATE` queries when a `remote` table function is used with `localhost` as a target host. [#90761](https://github.com/ClickHouse/ClickHouse/pull/90761) ([pufit](https://github.com/pufit)).
* Fix named collections hidden secrets to depend on `display_secrets_in_show_and_select` and `format_display_secrets_in_show_and_select`. [#90765](https://github.com/ClickHouse/ClickHouse/pull/90765) ([Pablo Marcos](https://github.com/pamarcos)).
* Disable `enable_shared_storage_snapshot_in_query` (leads to memory leaks). [#90770](https://github.com/ClickHouse/ClickHouse/pull/90770) ([Azat Khuzhin](https://github.com/azat)).
* Fix duplicate data issue in RIGHT JOIN with distributed table when parallel replicas enabled. [#90806](https://github.com/ClickHouse/ClickHouse/pull/90806) ([zoomxi](https://github.com/zoomxi)).
* Fix possible inconsistent state of shared data and dynamic paths in JSON that could lead to logical errors and unexpected results. [#90816](https://github.com/ClickHouse/ClickHouse/pull/90816) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix ALTER MODIFY QUERY with dictGet() and dictionary name in CSE for SharedCatalog (cloud only feature). [#90860](https://github.com/ClickHouse/ClickHouse/pull/90860) ([Azat Khuzhin](https://github.com/azat)).
* Fix compatibility of in-memory serialization of String aggregation state. Different serialization could lead to duplicate results if aggregation query is executed on instances with different versions. New serialization can be enabled with `serialize_string_in_memory_with_zero_byte`. [#90880](https://github.com/ClickHouse/ClickHouse/pull/90880) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix background flush of Buffer in case of frequent INSERTs. [#90892](https://github.com/ClickHouse/ClickHouse/pull/90892) ([Azat Khuzhin](https://github.com/azat)).
* Don't list contrib/ parent folder in system.licenses. [#90901](https://github.com/ClickHouse/ClickHouse/pull/90901) ([Raúl Marín](https://github.com/Algunenano)).
* Fix high memory usage during reading JSON/Dynamic/Variant columns. [#90907](https://github.com/ClickHouse/ClickHouse/pull/90907) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix buffer allocation for base58Decode function. [#90909](https://github.com/ClickHouse/ClickHouse/pull/90909) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix possible logical error upon receiving another read request from a replica after a response with the `finish=true` flag was sent. This was possible due to a logical race condition within `MergeTreeReadPoolParallelReplicas`, although it was very unlikely to occur. [#90921](https://github.com/ClickHouse/ClickHouse/pull/90921) ([Nikita Taranov](https://github.com/nickitat)).
* Fix wildcard grants check for partial revoke. Added more tests. [#90922](https://github.com/ClickHouse/ClickHouse/pull/90922) ([pufit](https://github.com/pufit)).
* Fixes `SummingMergeTree` aggregation for `Nested` `LowCardinality` columns. [#90927](https://github.com/ClickHouse/ClickHouse/pull/90927) ([Ivan Babrou](https://github.com/bobrik)).
* Fix handling global grants with wildcard revokes Fixes the issue when revoking a wildcard grant can accidentally revoke some global-level grants like `CREATE USER`. [#90928](https://github.com/ClickHouse/ClickHouse/pull/90928) ([pufit](https://github.com/pufit)).
* Fix possible infinite loop in azure list blobs. [#90947](https://github.com/ClickHouse/ClickHouse/pull/90947) ([Julia Kartseva](https://github.com/jkartseva)).
* Fix excessive Buffer flushes (burns CPU and produce tons of logs). [#91000](https://github.com/ClickHouse/ClickHouse/pull/91000) ([Azat Khuzhin](https://github.com/azat)).
* ... Don't allow adaptive_write_buffer_initial_size set to 0. [#91001](https://github.com/ClickHouse/ClickHouse/pull/91001) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix bug in JSON when path can be both in shared data and dynamic paths during sub-object reading in Compact parts with disabled `write_marks_for_substreams_in_compact_parts`. [#91014](https://github.com/ClickHouse/ClickHouse/pull/91014) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix std::out_of_range in CTE with dictGet with no arguments. Closes [#91027](https://github.com/ClickHouse/ClickHouse/issues/91027). [#91022](https://github.com/ClickHouse/ClickHouse/pull/91022) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix reading dynamic subcolumns from materialized columns in mutations. Closes [#90653](https://github.com/ClickHouse/ClickHouse/issues/90653). [#91040](https://github.com/ClickHouse/ClickHouse/pull/91040) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix `arrayFilter` function not working when using empty array and `isNull` function. Closes [#73849](https://github.com/ClickHouse/ClickHouse/issues/73849). [#91105](https://github.com/ClickHouse/ClickHouse/pull/91105) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix logical error in `ARRAY JOIN` when one of the table columns is empty tuple column. Closes [#90801](https://github.com/ClickHouse/ClickHouse/issues/90801). [#91123](https://github.com/ClickHouse/ClickHouse/pull/91123) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix lazy materialization of a column added via alter add column in old parts. [#91142](https://github.com/ClickHouse/ClickHouse/pull/91142) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix merging JSON columns in Summing/Aggregating/Coalescing MergeTree. Previously it could lead to unexpected dynamic paths durign writing to data parts. [#91151](https://github.com/ClickHouse/ClickHouse/pull/91151) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possible inconsistent dynamic structure during writing in compact parts that could lead to segfault. [#91152](https://github.com/ClickHouse/ClickHouse/pull/91152) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix parsing of subnormal float values in scientific notation. Closes [#78903](https://github.com/ClickHouse/ClickHouse/issues/78903). [#91162](https://github.com/ClickHouse/ClickHouse/pull/91162) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix wrong schema inference in INSERT SELECT from a subquery with a source with an implicit schema. [#91204](https://github.com/ClickHouse/ClickHouse/pull/91204) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Fix https://github.com/clickhouse/clickhouse/issues/91206 when we create a table with statistics and write someting and drop one statistics, it will crash when we read it again. because we assume the serialize and deserialize will have same types statistics. in this fix, we will check if the current metadata contains the serialized statistics, if not, we make a mock statistics and deserialize only to skip it. [#91227](https://github.com/ClickHouse/ClickHouse/pull/91227) ([Han Fei](https://github.com/hanfei1991)).
* Fix inserting into CoalescingMergeTree column with Tuple of JSON/Dynamic and LowCardinality. Closes [#91215](https://github.com/ClickHouse/ClickHouse/issues/91215). [#91270](https://github.com/ClickHouse/ClickHouse/pull/91270) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix SYSTEM DROP FILESYSTEM CACHE ON CLUSTER. [#91304](https://github.com/ClickHouse/ClickHouse/pull/91304) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Fix possible logical error "Bad cast from type DB::ColumnSparse to DB::ColumnNullable". Closes [#91284](https://github.com/ClickHouse/ClickHouse/issues/91284). [#91309](https://github.com/ClickHouse/ClickHouse/pull/91309) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix a crash when maliciously crafted byte streams deserialize into nested QBit types, which should be impossible but could be exploited to crash the server. [#91313](https://github.com/ClickHouse/ClickHouse/pull/91313) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix Alias table with empty args in Replicated database. Resolved [#91378](https://github.com/ClickHouse/ClickHouse/issues/91378). [#91382](https://github.com/ClickHouse/ClickHouse/pull/91382) ([Kai Zhu](https://github.com/nauu)).
* Currently, the setting is set to false, so when async insert queue is flushed to a remote server, the inserts are always synchronous. Even in case of the setting is True for a user. [#91386](https://github.com/ClickHouse/ClickHouse/pull/91386) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Remove Sparse columns from header in merge algorithms. Closes [#91377](https://github.com/ClickHouse/ClickHouse/issues/91377). [#91396](https://github.com/ClickHouse/ClickHouse/pull/91396) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix hive partitioning bug in 25.8 which can lead to incorrectly thrown exception `A hive partitioned file can't contain only partition columns`. [#91403](https://github.com/ClickHouse/ClickHouse/pull/91403) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix crash in `dictGetDescendants` caused by `NULL` when dictionary type has Hierarchy support but no column is `HIERARCHICAL`. Closes [#92026](https://github.com/ClickHouse/ClickHouse/issues/92026). Closes [#92121](https://github.com/ClickHouse/ClickHouse/issues/92121). [#91420](https://github.com/ClickHouse/ClickHouse/pull/91420) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix crash in `IN` function when lambda and non-const tuple arguments are used. Closes [#91379](https://github.com/ClickHouse/ClickHouse/issues/91379). [#91446](https://github.com/ClickHouse/ClickHouse/pull/91446) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fixed parallel writes triggered by MaterializedView inserts into storages that do not support them. [#91449](https://github.com/ClickHouse/ClickHouse/pull/91449) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Handle null values for Ytsaurus xml dictionaries. [#91465](https://github.com/ClickHouse/ClickHouse/pull/91465) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* Fixed `QBit` type failing with query parameters like `SET param_q=[1,2,3,4]; SELECT {q:QBit(Float32,4)}`. [#91488](https://github.com/ClickHouse/ClickHouse/pull/91488) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix LOGICAL_ERROR when untuple is used in the constant expression. [#91507](https://github.com/ClickHouse/ClickHouse/pull/91507) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Fix possible datarace in `librdkafka`. [#91521](https://github.com/ClickHouse/ClickHouse/pull/91521) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Fix logical error caused by asterisks argument in `remote` function. Closes [#90568](https://github.com/ClickHouse/ClickHouse/issues/90568). [#91524](https://github.com/ClickHouse/ClickHouse/pull/91524) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fixes an overflow while reading from ORC format for Date and DateTime64 types. Closes [#70976](https://github.com/ClickHouse/ClickHouse/issues/70976). [#91572](https://github.com/ClickHouse/ClickHouse/pull/91572) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Disallow ALTERs for Object Storage table engines. For example, ALTER ADD PROJECTION could have led to an inability to restart the server, since Object Storage engines do not support projections. [#91573](https://github.com/ClickHouse/ClickHouse/pull/91573) ([Nikolay Degterinsky](https://github.com/evillique)).
* Fixed [`L2DistanceTransposed`](https://clickhouse.com/docs/sql-reference/functions/distance-functions#L2DistanceTransposed) returning incorrect results when using non-constant reference vectors (e.g., from a table). [#91517](https://github.com/ClickHouse/ClickHouse/issues/91517). [#91593](https://github.com/ClickHouse/ClickHouse/pull/91593) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fixes a bug for JOINs on FALSE conditions returning `LOGICAL_ERROR` during a dispatch stage. Closes [#91173](https://github.com/ClickHouse/ClickHouse/issues/91173). [#91598](https://github.com/ClickHouse/ClickHouse/pull/91598) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* In MergeTreeDeduplicationLog::load, if the disk is a storage object with Plain metadata, skip the check for logs_dir existence. Because `Plain` metadata does not have the concept of directories. [#91646](https://github.com/ClickHouse/ClickHouse/pull/91646) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Fix increased memory usage in join with "additional filter", close [#91011](https://github.com/ClickHouse/ClickHouse/issues/91011). [#91664](https://github.com/ClickHouse/ClickHouse/pull/91664) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#92532](https://github.com/ClickHouse/ClickHouse/issues/92532): Fix possible logical error in Log engine during subcolumns reading. Closes [#91710](https://github.com/ClickHouse/ClickHouse/issues/91710). [#91711](https://github.com/ClickHouse/ClickHouse/pull/91711) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixes JOIN queries with view and enabled parallel replicas. [#91813](https://github.com/ClickHouse/ClickHouse/pull/91813) ([Igor Nikonov](https://github.com/devcrafter)).
* Fix delta lake setting `delta_lake_snapshot_version` which could give incorrect result when used with table engine (not table function) and value -1 (disabled) after snapshot version was used before that. Closes [#87676](https://github.com/ClickHouse/ClickHouse/issues/87676). [#91818](https://github.com/ClickHouse/ClickHouse/pull/91818) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix LOGICAL_ERROR in RecursiveCTEChunkGenerator. [#91827](https://github.com/ClickHouse/ClickHouse/pull/91827) ([Pablo Marcos](https://github.com/pamarcos)).
* Fix block structure mismatch with queries using FINAL and PREWHERE. [#91847](https://github.com/ClickHouse/ClickHouse/pull/91847) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix logical error with `join_use_nulls` and multiple joins along with cross join. [#91853](https://github.com/ClickHouse/ClickHouse/pull/91853) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Add repair mechanism for JSON with duplicated path in shared data and dynamic paths that could happen because of the bug that was fixed in https://github.com/ClickHouse/ClickHouse/pull/90816. [#91886](https://github.com/ClickHouse/ClickHouse/pull/91886) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix the ORC reader bug when reading string columns that are encoded with DICTIONARY_V2 and contain only NULL values. [#91889](https://github.com/ClickHouse/ClickHouse/pull/91889) ([Peng Jian](https://github.com/fastio)).
* Fix a serialization inconsistency between sparse and nullable substreams in Tuple columns that could lead to corrupted parts or crashes during reading. This addresses https://github.com/ClickHouse/ClickHouse/pull/91851 . @Algunenano Could you please help check if this can fix the stress test in private repo? @CurtizJ Could you also help take a look please? Thanks!. [#91932](https://github.com/ClickHouse/ClickHouse/pull/91932) ([Amos Bird](https://github.com/amosbird)).
* Fix `Directory '{}' does not exist (LOGICAL_ERROR)` when creating backups on plain-rewritable disks. [#91935](https://github.com/ClickHouse/ClickHouse/pull/91935) ([Julia Kartseva](https://github.com/jkartseva)).
* Prevent crash when connecting to mongodb with named collections. [#91959](https://github.com/ClickHouse/ClickHouse/pull/91959) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix "TOO_MANY_MARKS" error which could have happened after some `ALTER` queries for compact parts. [#91980](https://github.com/ClickHouse/ClickHouse/pull/91980) ([alesapin](https://github.com/alesapin)).
* Close https://github.com/clickhouse/clickhouse/issues/87417 the writing schema of v1 format has a mistake : the type of "added_snapshot_id" should be "long" rather than "null, long" because it is required. it is a bug because it's not compatible with other system like spark. when we mixed there manifest files, the bug happens. [#92078](https://github.com/ClickHouse/ClickHouse/pull/92078) ([Han Fei](https://github.com/hanfei1991)).
* Fix the wrong names of `readWKT`, `readWKB`, which were in the wrong style in the previous versions. [#92094](https://github.com/ClickHouse/ClickHouse/pull/92094) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix numerous logical errors, overflow and functional bugs in `midpoint` function. Closes [#91816](https://github.com/ClickHouse/ClickHouse/issues/91816). [#92102](https://github.com/ClickHouse/ClickHouse/pull/92102) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix a potential memory leak when `enable_shared_storage_snapshot_in_query = 1` by properly scoping storage metadata and snapshot caches to query execution. This addresses the issue discovered in [#90770](https://github.com/ClickHouse/ClickHouse/issues/90770) and re-enables `enable_shared_storage_snapshot_in_query` by default. [#92118](https://github.com/ClickHouse/ClickHouse/pull/92118) ([Amos Bird](https://github.com/amosbird)).
* Fixes incorrect results that could appear when reading certain subcolumns (e.g., string size) with sparse encoding. [#92156](https://github.com/ClickHouse/ClickHouse/pull/92156) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix `system.view_refreshes` failing with error `No macro 'replica' in config`. [#92203](https://github.com/ClickHouse/ClickHouse/pull/92203) ([Michael Kolupaev](https://github.com/al13n321)).
* Fix UDF replace in format. [#92210](https://github.com/ClickHouse/ClickHouse/pull/92210) ([Raúl Marín](https://github.com/Algunenano)).
* In `ddlworker::markreplicasactive`, if there is no active host found, and the `remote_servers` has some host_ids, we print a warning log instead of throwing an exception. [#92223](https://github.com/ClickHouse/ClickHouse/pull/92223) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Surround operators `IN`, `NOT IN` with parentheses. Fixes [#85075](https://github.com/ClickHouse/ClickHouse/issues/85075). [#92225](https://github.com/ClickHouse/ClickHouse/pull/92225) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Fix backup of KeeperMap and Memory tables. Creating backup of tables using one of those two engines with `max_compress_block_size` set to `0` could lead to a crash. [#92237](https://github.com/ClickHouse/ClickHouse/pull/92237) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix crash when reading both String data and .size subcolumn from Log engine. This fixes [#89909](https://github.com/ClickHouse/ClickHouse/issues/89909). This contains some commits in [#92290](https://github.com/ClickHouse/ClickHouse/issues/92290). [#92341](https://github.com/ClickHouse/ClickHouse/pull/92341) ([Amos Bird](https://github.com/amosbird)).
* Fix logical error caused by using `Nothing` type in `caseWithExpression` function arguments . Closes [#85354](https://github.com/ClickHouse/ClickHouse/issues/85354). [#92351](https://github.com/ClickHouse/ClickHouse/pull/92351) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix possible crash in aggregate functions after MEMORY_LIMIT_EXCEEDED. [#92390](https://github.com/ClickHouse/ClickHouse/pull/92390) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#92549](https://github.com/ClickHouse/ClickHouse/issues/92549): Inherit source part serialization info settings during mutation in MergeTree. It fixes possible incorrect result of the query over mutated part after changes in data types serialization. [#92419](https://github.com/ClickHouse/ClickHouse/pull/92419) ([Pavel Kruglov](https://github.com/Avogar)).

#### Build/Testing/Packaging Improvement
* Use `clang-21` in CI. [#87074](https://github.com/ClickHouse/ClickHouse/pull/87074) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Bump libssh from 0.9.8 to `master` (0.11.3). This resolves CVE-2025-5318. [#90362](https://github.com/ClickHouse/ClickHouse/pull/90362) ([Govind R Nair](https://github.com/Revertionist)).
* Extend tests for IMPERSONATE feature. [#90437](https://github.com/ClickHouse/ClickHouse/pull/90437) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Avoid downloading from cmake when cross-compiling. [#90506](https://github.com/ClickHouse/ClickHouse/pull/90506) ([Raúl Marín](https://github.com/Algunenano)).
* Remove flaky OS_DARWIN_SDK_VERSION detection. [#90524](https://github.com/ClickHouse/ClickHouse/pull/90524) ([Raúl Marín](https://github.com/Algunenano)).
* Disable USE_BINARY_HASH when cross compiling, and enable it if not. [#90762](https://github.com/ClickHouse/ClickHouse/pull/90762) ([Raúl Marín](https://github.com/Algunenano)).
* Build s390x with static openssl by default. [#90771](https://github.com/ClickHouse/ClickHouse/pull/90771) ([Raúl Marín](https://github.com/Algunenano)).
* Don't build qatlib with -march=native as it breaks during cross-compilation. [#90777](https://github.com/ClickHouse/ClickHouse/pull/90777) ([Raúl Marín](https://github.com/Algunenano)).
* Build amd-musl in an ARM machine. [#90820](https://github.com/ClickHouse/ClickHouse/pull/90820) ([Raúl Marín](https://github.com/Algunenano)).
* Bump libssh from 0.9.8 to master (0.11.3). This resolves https://github.com/advisories/GHSA-98qw-prqm-9f4p. [#90985](https://github.com/ClickHouse/ClickHouse/pull/90985) ([Govind R Nair](https://github.com/Revertionist)).
* Allow compiling without `xray/xray_interface.h` header when XRay is disabled. [#91452](https://github.com/ClickHouse/ClickHouse/pull/91452) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Fix building when `ENABLE_AZURE_BLOB_STORAGE` is `OFF`. [#91543](https://github.com/ClickHouse/ClickHouse/pull/91543) ([zoomxi](https://github.com/zoomxi)).
* Fix `use-after-free` issue in ConverterJSON for Parquet Format in ASAN build. [#91833](https://github.com/ClickHouse/ClickHouse/pull/91833) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Fix flaky 00906_low_cardinality_cache. [#92009](https://github.com/ClickHouse/ClickHouse/pull/92009) ([Nikita Fomichev](https://github.com/fm4v)).
* Add test for [#81048](https://github.com/ClickHouse/ClickHouse/issues/81048). [#92379](https://github.com/ClickHouse/ClickHouse/pull/92379) ([Arthur Passos](https://github.com/arthurpassos)).
* Use any of `chcache` and `sccache` as rust wrapper. [#92404](https://github.com/ClickHouse/ClickHouse/pull/92404) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).

#### NO CL ENTRY

* NO CL ENTRY:  'Revert "Keeper compatibility with zookeeper: create with statistics"'. [#90572](https://github.com/ClickHouse/ClickHouse/pull/90572) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "upate enum.md"'. [#90693](https://github.com/ClickHouse/ClickHouse/pull/90693) ([Bharat Nallan](https://github.com/bharatnc)).
* NO CL ENTRY:  'Revert "Re-instate failing fast on row limits"'. [#90723](https://github.com/ClickHouse/ClickHouse/pull/90723) ([Robert Schulze](https://github.com/rschu1ze)).
* NO CL ENTRY:  'Revert "Revert "Keeper compatibility with zookeeper: create with statistics""'. [#90741](https://github.com/ClickHouse/ClickHouse/pull/90741) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* NO CL ENTRY:  'Revert "Stream system.filesystem_cache"'. [#90769](https://github.com/ClickHouse/ClickHouse/pull/90769) ([Azat Khuzhin](https://github.com/azat)).
* NO CL ENTRY:  'Revert "Change default of settings `check_query_single_value_result`"'. [#90815](https://github.com/ClickHouse/ClickHouse/pull/90815) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Eagerly free vector similarity index cache entries when parts are dropped"'. [#90896](https://github.com/ClickHouse/ClickHouse/pull/90896) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Send insert storage column description to client"'. [#90899](https://github.com/ClickHouse/ClickHouse/pull/90899) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Revert "Fix(Hive): Fix thread-safety race condition in static extractor"'. [#90951](https://github.com/ClickHouse/ClickHouse/pull/90951) ([Pablo Marcos](https://github.com/pamarcos)).
* NO CL ENTRY:  'Revert "Modify `system.metric_log` settings to use less RAM for merges"'. [#91388](https://github.com/ClickHouse/ClickHouse/pull/91388) ([Nikita Fomichev](https://github.com/fm4v)).
* NO CL ENTRY:  'Revert "Add a check in read buffer from s3"'. [#91389](https://github.com/ClickHouse/ClickHouse/pull/91389) ([Kseniia Sumarokova](https://github.com/kssenii)).
* NO CL ENTRY:  'Revert "CI: Fix compress function to handle links"'. [#92294](https://github.com/ClickHouse/ClickHouse/pull/92294) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* NO CL ENTRY:  'Revert "Fix read-only sccache for local praktika runs"'. [#92458](https://github.com/ClickHouse/ClickHouse/pull/92458) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Clone part to detached before removing it from active set. [#80839](https://github.com/ClickHouse/ClickHouse/pull/80839) ([Kirill](https://github.com/kirillgarbar)).
* Replace StringRef with std::string_view. [#86833](https://github.com/ClickHouse/ClickHouse/pull/86833) ([Antonio Andelic](https://github.com/antonio2368)).
* CI: Set pytest log level to debug. [#88669](https://github.com/ClickHouse/ClickHouse/pull/88669) ([Max Kainov](https://github.com/maxknv)).
* Exception joined_block_split_single_row&max_joined_block_rows=0. [#88816](https://github.com/ClickHouse/ClickHouse/pull/88816) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix fuzzers build: disable nullability extension warning for protobuf generated files. [#88916](https://github.com/ClickHouse/ClickHouse/pull/88916) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* CI: Fix clickhouse version tweak calculation for the fork with sync. [#89098](https://github.com/ClickHouse/ClickHouse/pull/89098) ([Max Kainov](https://github.com/maxknv)).
* During the execution of the file links widget, sort links by the last component (file name). [#89275](https://github.com/ClickHouse/ClickHouse/pull/89275) ([Mikhail Artemenko](https://github.com/Michicosun)).
* CI: Crosscompile amd_compat on arm. [#89284](https://github.com/ClickHouse/ClickHouse/pull/89284) ([Max Kainov](https://github.com/maxknv)).
* Refactoring of argument parsing part in StorageObjectStorage. [#89514](https://github.com/ClickHouse/ClickHouse/pull/89514) ([Daniil Ivanik](https://github.com/divanik)).
* Fix remote() right join issue with parallel replicas enabled. [#89703](https://github.com/ClickHouse/ClickHouse/pull/89703) ([zoomxi](https://github.com/zoomxi)).
* PR: fix INSERT into source table for MV with JOINS. [#89749](https://github.com/ClickHouse/ClickHouse/pull/89749) ([Igor Nikonov](https://github.com/devcrafter)).
* PR: fix join with materialized view. [#89770](https://github.com/ClickHouse/ClickHouse/pull/89770) ([Igor Nikonov](https://github.com/devcrafter)).
* Fix generic hash calculation for mix of constant and non-constant arguments and types. Resolves [#89883](https://github.com/ClickHouse/ClickHouse/issues/89883). Resolves [#90487](https://github.com/ClickHouse/ClickHouse/issues/90487). [#90009](https://github.com/ClickHouse/ClickHouse/pull/90009) ([Pavel Kruglov](https://github.com/Avogar)).
* Log RuntimeFilter statistics at the end of query. [#90011](https://github.com/ClickHouse/ClickHouse/pull/90011) ([Alexander Gololobov](https://github.com/davenger)).
* Sync private changes. [#90154](https://github.com/ClickHouse/ClickHouse/pull/90154) ([Nikolay Degterinsky](https://github.com/evillique)).
* Fix selection, make the logo position sticky, and the default theme in the Web UI. [#90248](https://github.com/ClickHouse/ClickHouse/pull/90248) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fixing BuzzHouse CI runs. [#90261](https://github.com/ClickHouse/ClickHouse/pull/90261) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix: typo in snappy compression. [#90276](https://github.com/ClickHouse/ClickHouse/pull/90276) ([Sümer Cip](https://github.com/sumerc)).
* Use ReadNothingStep instead of ReadFromPreparedSource with NullSource. [#90278](https://github.com/ClickHouse/ClickHouse/pull/90278) ([Alexander Gololobov](https://github.com/davenger)).
* Add more diagnostic to logical error in JSON. [#90286](https://github.com/ClickHouse/ClickHouse/pull/90286) ([Pavel Kruglov](https://github.com/Avogar)).
* Prevent crash with invalid second parameter of File Engine. [#90312](https://github.com/ClickHouse/ClickHouse/pull/90312) ([Raúl Marín](https://github.com/Algunenano)).
* Slightly more accurate user space page cache memory usage. [#90321](https://github.com/ClickHouse/ClickHouse/pull/90321) ([Azat Khuzhin](https://github.com/azat)).
* Test: Fix thread leaks and unsafe DB drops in Replicated database tests. [#90338](https://github.com/ClickHouse/ClickHouse/pull/90338) ([Paresh Joshi](https://github.com/pareshjoshij)).
* CI: Safe shell quoting in ci commands. [#90359](https://github.com/ClickHouse/ClickHouse/pull/90359) ([Max Kainov](https://github.com/maxknv)).
* CI: Integration flaky check: do not process removed or non-test files. [#90360](https://github.com/ClickHouse/ClickHouse/pull/90360) ([Max Kainov](https://github.com/maxknv)).
* Fix IStorage::applyMetadataChangesToCreateQueryForBackup() signature. [#90366](https://github.com/ClickHouse/ClickHouse/pull/90366) ([Azat Khuzhin](https://github.com/azat)).
* Update version after release. [#90372](https://github.com/ClickHouse/ClickHouse/pull/90372) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Add test for optimize_use_implicit_projections. [#90384](https://github.com/ClickHouse/ClickHouse/pull/90384) ([Raúl Marín](https://github.com/Algunenano)).
* Sync changes. [#90385](https://github.com/ClickHouse/ClickHouse/pull/90385) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Let's throw a logical error if the parent directory does not exist during remote key generation. It should be possible after https://github.com/ClickHouse/ClickHouse/pull/89754. [#90386](https://github.com/ClickHouse/ClickHouse/pull/90386) ([Mikhail Artemenko](https://github.com/Michicosun)).
* CI: New light-weight functional test job. [#90402](https://github.com/ClickHouse/ClickHouse/pull/90402) ([Max Kainov](https://github.com/maxknv)).
* Reduce data size in test 03602_alter_update_nullable_json. Resolves [#89205](https://github.com/ClickHouse/ClickHouse/issues/89205). [#90433](https://github.com/ClickHouse/ClickHouse/pull/90433) ([Pavel Kruglov](https://github.com/Avogar)).
* Query cache: Update docs. [#90436](https://github.com/ClickHouse/ClickHouse/pull/90436) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix flaky 03629_create_or_replace_as_select_with_progress_tcp. [#90450](https://github.com/ClickHouse/ClickHouse/pull/90450) ([Diskein](https://github.com/Diskein)).
* Remove TODO from CHANGELOG.md. [#90451](https://github.com/ClickHouse/ClickHouse/pull/90451) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Expose `peak_threads_usage` in `system.processes` (like in `system.query_log`). [#90459](https://github.com/ClickHouse/ClickHouse/pull/90459) ([Azat Khuzhin](https://github.com/azat)).
* CI: Script for CI results processing and safe merge. [#90460](https://github.com/ClickHouse/ClickHouse/pull/90460) ([Max Kainov](https://github.com/maxknv)).
* Disable LOGICAL_ERRORs about function monotonicity in release build. [#90462](https://github.com/ClickHouse/ClickHouse/pull/90462) ([Michael Kolupaev](https://github.com/al13n321)).
* Revise meetup listings in README. [#90470](https://github.com/ClickHouse/ClickHouse/pull/90470) ([Zoe Steinkamp](https://github.com/zoesteinkamp)).
* More Fuzzer CI fixes. [#90491](https://github.com/ClickHouse/ClickHouse/pull/90491) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Disable 00110_external_sort under ASan. [#90493](https://github.com/ClickHouse/ClickHouse/pull/90493) ([Nikita Taranov](https://github.com/nickitat)).
* Follow-up to [#89759](https://github.com/ClickHouse/ClickHouse/issues/89759). [#90504](https://github.com/ClickHouse/ClickHouse/pull/90504) ([Robert Schulze](https://github.com/rschu1ze)).
* CI: Add retry stage for failed tests. [#90519](https://github.com/ClickHouse/ClickHouse/pull/90519) ([Max Kainov](https://github.com/maxknv)).
* Let's move the responsibility of blob IDs generation from object storage to metadata storage. This helps with a more custom implementation of blob tracking lifetime. [#90538](https://github.com/ClickHouse/ClickHouse/pull/90538) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix flaky 02494_query_cache_ignore_output_settings. [#90540](https://github.com/ClickHouse/ClickHouse/pull/90540) ([Robert Schulze](https://github.com/rschu1ze)).
* Remove unused log. [#90543](https://github.com/ClickHouse/ClickHouse/pull/90543) ([JIaQi](https://github.com/JiaQiTang98)).
* Cleanup: a bit better handling of database data/store/metadata paths. [#90554](https://github.com/ClickHouse/ClickHouse/pull/90554) ([Kirill Nikiforov](https://github.com/allmazz)).
* skip `__init__.py` files in integration tests. [#90558](https://github.com/ClickHouse/ClickHouse/pull/90558) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fixes https://s3.amazonaws.com/clickhouse-test-reports/json.html?PR=90538&sha=latest&name_0=PR&name_1=BuzzHouse+%28arm_asan%29. [#90559](https://github.com/ClickHouse/ClickHouse/pull/90559) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Make tokenizer naming more consistent. [#90564](https://github.com/ClickHouse/ClickHouse/pull/90564) ([Robert Schulze](https://github.com/rschu1ze)).
* Review sequential integration tests part 1. Rewrite PartitionManager to partition inside container. [#90565](https://github.com/ClickHouse/ClickHouse/pull/90565) ([Nikita Fomichev](https://github.com/fm4v)).
* Bug in unreleased version. Resolves [#90339](https://github.com/ClickHouse/ClickHouse/issues/90339). [#90573](https://github.com/ClickHouse/ClickHouse/pull/90573) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Continuation of https://github.com/ClickHouse/ClickHouse/pull/90538. [#90580](https://github.com/ClickHouse/ClickHouse/pull/90580) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Rewrite test 03277_database_backup_database_file_engine to run in parallel. Resolves [#90584](https://github.com/ClickHouse/ClickHouse/issues/90584). [#90595](https://github.com/ClickHouse/ClickHouse/pull/90595) ([Pavel Kruglov](https://github.com/Avogar)).
* tests: warn on MemoryAllocatedWithoutCheck only above threshold. [#90597](https://github.com/ClickHouse/ClickHouse/pull/90597) ([Azat Khuzhin](https://github.com/azat)).
* remove assert. [#90599](https://github.com/ClickHouse/ClickHouse/pull/90599) ([Sema Checherinda](https://github.com/CheSema)).
* Ignore 'curl: (18) transfer closed with outstanding read data remaining'. [#90628](https://github.com/ClickHouse/ClickHouse/pull/90628) ([Alexey Bakharew](https://github.com/alexbakharew)).
* CI: make targeted check more strict. [#90634](https://github.com/ClickHouse/ClickHouse/pull/90634) ([Nikita Fomichev](https://github.com/fm4v)).
* tests/integration: use more lightweight backtrace capturing. [#90649](https://github.com/ClickHouse/ClickHouse/pull/90649) ([Azat Khuzhin](https://github.com/azat)).
* Force offline build for Rust. [#90652](https://github.com/ClickHouse/ClickHouse/pull/90652) ([Azat Khuzhin](https://github.com/azat)).
* CI: Improve fuzzer log parser. [#90654](https://github.com/ClickHouse/ClickHouse/pull/90654) ([Max Kainov](https://github.com/maxknv)).
* Move `query_plan_optimize_join_order_limit` change to 25.12. [#90661](https://github.com/ClickHouse/ClickHouse/pull/90661) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Improve fuzzer error detection and reproduce command generation. [#90671](https://github.com/ClickHouse/ClickHouse/pull/90671) ([Max Kainov](https://github.com/maxknv)).
* CI: Remove PR formatter job from pull request workflow. [#90672](https://github.com/ClickHouse/ClickHouse/pull/90672) ([Max Kainov](https://github.com/maxknv)).
* Add a test for [#72197](https://github.com/ClickHouse/ClickHouse/issues/72197). [#90676](https://github.com/ClickHouse/ClickHouse/pull/90676) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Improve test case distribution across batches in integration test job. [#90679](https://github.com/ClickHouse/ClickHouse/pull/90679) ([Max Kainov](https://github.com/maxknv)).
* CI: Remove AI PR formatting assistant comment from pull request template. [#90680](https://github.com/ClickHouse/ClickHouse/pull/90680) ([Max Kainov](https://github.com/maxknv)).
* The native Parquet reader v1 is removed, as it has become obsolete with the introduction of the native Parquet reader v3, which is enabled by default. [#90681](https://github.com/ClickHouse/ClickHouse/pull/90681) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Move Time and Time64 to 25.12. [#90684](https://github.com/ClickHouse/ClickHouse/pull/90684) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Add dockerd log to Integration tests results. [#90713](https://github.com/ClickHouse/ClickHouse/pull/90713) ([Max Kainov](https://github.com/maxknv)).
* CI: Add pytest text log. [#90717](https://github.com/ClickHouse/ClickHouse/pull/90717) ([Max Kainov](https://github.com/maxknv)).
* ci: wait for sanitizers reports in integration tests. [#90718](https://github.com/ClickHouse/ClickHouse/pull/90718) ([Azat Khuzhin](https://github.com/azat)).
* Disable "**__builtin_ia32_pcmpestric128 / __builtin_ia32_pcmpestri128 is deprecated: The function may be slow due to inefficient implementation**" and "**use of GNU statement expression extension from macro expansion**" warnings on e2k-Clang (too aggressive). [#90732](https://github.com/ClickHouse/ClickHouse/pull/90732) ([Ramil Sattarov](https://github.com/r-a-sattarov)).
* So it can be run in parallel. [#90733](https://github.com/ClickHouse/ClickHouse/pull/90733) ([Alexander Tokmakov](https://github.com/tavplubix)).
* Add const modifier to kvp extractor and update docs. [#90744](https://github.com/ClickHouse/ClickHouse/pull/90744) ([Arthur Passos](https://github.com/arthurpassos)).
* Do not materialize column after eliminating filter when ColumnConst comes from the inputs. [#90749](https://github.com/ClickHouse/ClickHouse/pull/90749) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Remove sparse checkout scripts. [#90751](https://github.com/ClickHouse/ClickHouse/pull/90751) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Add `column_structure` option to explain query. [#90752](https://github.com/ClickHouse/ClickHouse/pull/90752) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Improved copilot instructions. [#90763](https://github.com/ClickHouse/ClickHouse/pull/90763) ([abashkeev](https://github.com/abashkeev)).
* Merging [#89977](https://github.com/ClickHouse/ClickHouse/issues/89977). [#90768](https://github.com/ClickHouse/ClickHouse/pull/90768) ([Anton Popov](https://github.com/CurtizJ)).
* tests: more pleasent error while checking MemoryAllocatedWithoutCheck. [#90772](https://github.com/ClickHouse/ClickHouse/pull/90772) ([Azat Khuzhin](https://github.com/azat)).
* Try to fix flaky `03457_query_cache_log_comment`. [#90776](https://github.com/ClickHouse/ClickHouse/pull/90776) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix direct read from text index with `LowCardinality` columns. [#90779](https://github.com/ClickHouse/ClickHouse/pull/90779) ([Anton Popov](https://github.com/CurtizJ)).
* ci: fix duration in integration tests result (was overwritten with teardown). [#90794](https://github.com/ClickHouse/ClickHouse/pull/90794) ([Azat Khuzhin](https://github.com/azat)).
* Perf test: lazy materialization with reading in order. [#90796](https://github.com/ClickHouse/ClickHouse/pull/90796) ([Igor Nikonov](https://github.com/devcrafter)).
* Enable split tasks by buckets in all cluster functions. [#90799](https://github.com/ClickHouse/ClickHouse/pull/90799) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* DiskObjectStorage logically consists of two parts: object storage and metadata storage. This patch reorganizes the file structure to match this logic. [#90804](https://github.com/ClickHouse/ClickHouse/pull/90804) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Update version_date.tsv and changelog after v25.9.6.117-stable. [#90817](https://github.com/ClickHouse/ClickHouse/pull/90817) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fix reading from system.filesystem_cache. [#90818](https://github.com/ClickHouse/ClickHouse/pull/90818) ([Kseniia Sumarokova](https://github.com/kssenii)).
* TTL Part drop should always be an option because it is a free operation. [#90819](https://github.com/ClickHouse/ClickHouse/pull/90819) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Update version_date.tsv and changelog after v25.10.3.100-stable. [#90821](https://github.com/ClickHouse/ClickHouse/pull/90821) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v25.8.12.129-lts. [#90822](https://github.com/ClickHouse/ClickHouse/pull/90822) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v25.3.9.72-lts. [#90823](https://github.com/ClickHouse/ClickHouse/pull/90823) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fix test_storage_delta/test_cdf.py. [#90824](https://github.com/ClickHouse/ClickHouse/pull/90824) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Return correct updated depth from `tryConvertAnyJoinToSemiOrAntiJoin`. [#90829](https://github.com/ClickHouse/ClickHouse/pull/90829) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Without the changes, any tiny change requires the whole build process to start from the scratch. [#90835](https://github.com/ClickHouse/ClickHouse/pull/90835) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* CI: AST: Log parser with stack trace id. [#90844](https://github.com/ClickHouse/ClickHouse/pull/90844) ([Max Kainov](https://github.com/maxknv)).
* CI: report: extract common styling logic and simplify DOM manipulation. [#90845](https://github.com/ClickHouse/ClickHouse/pull/90845) ([Max Kainov](https://github.com/maxknv)).
* Disable test `03657_gby_overflow_any_sparse` for parallel replicas. [#90858](https://github.com/ClickHouse/ClickHouse/pull/90858) ([zoomxi](https://github.com/zoomxi)).
* Revert bump libssh to master. [#90865](https://github.com/ClickHouse/ClickHouse/pull/90865) ([Robert Schulze](https://github.com/rschu1ze)).
* This PR is done as the isolated part which is required for future decoupling of datalakes from StorageObjectStorage. [#90884](https://github.com/ClickHouse/ClickHouse/pull/90884) ([Daniil Ivanik](https://github.com/divanik)).
* Minor std::string_view cleanup. [#90894](https://github.com/ClickHouse/ClickHouse/pull/90894) ([Antonio Andelic](https://github.com/antonio2368)).
* Next fuzz update. [#90895](https://github.com/ClickHouse/ClickHouse/pull/90895) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Respect `no-` build flags in targeted check. [#90905](https://github.com/ClickHouse/ClickHouse/pull/90905) ([Nikita Fomichev](https://github.com/fm4v)).
* CI: Add session timeout to integration test (soft timeout). [#90923](https://github.com/ClickHouse/ClickHouse/pull/90923) ([Max Kainov](https://github.com/maxknv)).
* Mark 02346_text_index_function_hasAnyAllTokens as long. [#90924](https://github.com/ClickHouse/ClickHouse/pull/90924) ([Nikita Taranov](https://github.com/nickitat)).
* Clarify `CHANGELOG`. [#90949](https://github.com/ClickHouse/ClickHouse/pull/90949) ([Mikhail Artemenko](https://github.com/Michicosun)).
* CI: Fix tweak calculation in legacy version helper. [#90950](https://github.com/ClickHouse/ClickHouse/pull/90950) ([Max Kainov](https://github.com/maxknv)).
* Support building any CI build with cross-compilation (except release builds). [#90957](https://github.com/ClickHouse/ClickHouse/pull/90957) ([Raúl Marín](https://github.com/Algunenano)).
* Update version_date.tsv and changelog after v25.11.1.558-stable. [#90981](https://github.com/ClickHouse/ClickHouse/pull/90981) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Enhance stack trace ID generation algorithm. [#90984](https://github.com/ClickHouse/ClickHouse/pull/90984) ([Max Kainov](https://github.com/maxknv)).
* Disable temporary_files_buffer_size randomization. [#91007](https://github.com/ClickHouse/ClickHouse/pull/91007) ([Vladimir Cherkasov](https://github.com/vdimir)).
* CI: ASTFuzzer: fix exception on no SQL query found. [#91041](https://github.com/ClickHouse/ClickHouse/pull/91041) ([Max Kainov](https://github.com/maxknv)).
* Add perf test for recent perf degradation (25.10). [#91066](https://github.com/ClickHouse/ClickHouse/pull/91066) ([Nikita Fomichev](https://github.com/fm4v)).
* Resolve [#91025](https://github.com/ClickHouse/ClickHouse/issues/91025). [#91083](https://github.com/ClickHouse/ClickHouse/pull/91083) ([Kai Zhu](https://github.com/nauu)).
* Fix introduced in and add missing example for `dictGetKeys` function. [#91092](https://github.com/ClickHouse/ClickHouse/pull/91092) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix CI (due to tmpfs permissions changes in runc 1.3.3). [#91094](https://github.com/ClickHouse/ClickHouse/pull/91094) ([Azat Khuzhin](https://github.com/azat)).
* tests: (in attempt to) fix 00596_limit_on_expanded_ast flakiness. [#91097](https://github.com/ClickHouse/ClickHouse/pull/91097) ([Azat Khuzhin](https://github.com/azat)).
* Fix build under clang-21. [#91106](https://github.com/ClickHouse/ClickHouse/pull/91106) ([Azat Khuzhin](https://github.com/azat)).
* CI: Fixes in CI results processing script. [#91115](https://github.com/ClickHouse/ClickHouse/pull/91115) ([Max Kainov](https://github.com/maxknv)).
* Small improvements for Copilot instructions. [#91117](https://github.com/ClickHouse/ClickHouse/pull/91117) ([Azat Khuzhin](https://github.com/azat)).
* Update introduced in versions. [#91122](https://github.com/ClickHouse/ClickHouse/pull/91122) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Disable join_use_nulls for 03716_multiple_joins_using_top_level. [#91128](https://github.com/ClickHouse/ClickHouse/pull/91128) ([Vladimir Cherkasov](https://github.com/vdimir)).
* CI: Improvements for CI report info and error parsing. [#91143](https://github.com/ClickHouse/ClickHouse/pull/91143) ([Max Kainov](https://github.com/maxknv)).
* Better to throw logical error instead of possible crash if something is wrong with streams. [#91155](https://github.com/ClickHouse/ClickHouse/pull/91155) ([Pavel Kruglov](https://github.com/Avogar)).
* Improve DDLDependencyVisitor. [#91159](https://github.com/ClickHouse/ClickHouse/pull/91159) ([Nikolay Degterinsky](https://github.com/evillique)).
* CI: Fix integration test detection for bugfix/flaky job flavors. [#91194](https://github.com/ClickHouse/ClickHouse/pull/91194) ([Max Kainov](https://github.com/maxknv)).
* ci/integration: enable database disk only for "db disk" jobs. [#91195](https://github.com/ClickHouse/ClickHouse/pull/91195) ([Azat Khuzhin](https://github.com/azat)).
* CI: Fix GH auth in Finish check. [#91198](https://github.com/ClickHouse/ClickHouse/pull/91198) ([Max Kainov](https://github.com/maxknv)).
* Add a check in read buffer from s3. [#91209](https://github.com/ClickHouse/ClickHouse/pull/91209) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Add assertion for having empty metadata_files. [#91210](https://github.com/ClickHouse/ClickHouse/pull/91210) ([Daniil Ivanik](https://github.com/divanik)).
* Fuzzer fixes. [#91211](https://github.com/ClickHouse/ClickHouse/pull/91211) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Use digest tag for clickhouse/s3-proxy image in integration tests. [#91214](https://github.com/ClickHouse/ClickHouse/pull/91214) ([c-end](https://github.com/c-end)).
* Reference https://github.com/ClickHouse/ClickHouse/pull/90554. [#91226](https://github.com/ClickHouse/ClickHouse/pull/91226) ([Nikolay Degterinsky](https://github.com/evillique)).
* This patch fixes a `use-after-free` after the underlying buffer rellocation in `ForkWriteBuffer`. [#91229](https://github.com/ClickHouse/ClickHouse/pull/91229) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Attempt to address the issue with parallel integration tests pulling. [#91241](https://github.com/ClickHouse/ClickHouse/pull/91241) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Update version_date.tsv and changelog after v25.11.2.24-stable. [#91285](https://github.com/ClickHouse/ClickHouse/pull/91285) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update copilot-instructions.md. [#91286](https://github.com/ClickHouse/ClickHouse/pull/91286) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* tests: fix 03746_system_background_schedule_pool_log flakiness. [#91289](https://github.com/ClickHouse/ClickHouse/pull/91289) ([Azat Khuzhin](https://github.com/azat)).
* Add ability to configure tasks duration threshold for system.background_schedule_pool_log. [#91305](https://github.com/ClickHouse/ClickHouse/pull/91305) ([Azat Khuzhin](https://github.com/azat)).
* fix test 03322_materialized_view_ignore_errors_ur. [#91307](https://github.com/ClickHouse/ClickHouse/pull/91307) ([Sema Checherinda](https://github.com/CheSema)).
* Support bash completion for chc/chl/ch/clickhouse client/clickhouse local. [#91325](https://github.com/ClickHouse/ClickHouse/pull/91325) ([Azat Khuzhin](https://github.com/azat)).
* Fix flaky 02117_custom_separated_with_names_and_types. [#91328](https://github.com/ClickHouse/ClickHouse/pull/91328) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Sync changes. [#91331](https://github.com/ClickHouse/ClickHouse/pull/91331) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Improve script for interactive CI failures processing. [#91359](https://github.com/ClickHouse/ClickHouse/pull/91359) ([Max Kainov](https://github.com/maxknv)).
* CI: Do not run targeted job in flaky mode (all tests N times in parallel). [#91360](https://github.com/ClickHouse/ClickHouse/pull/91360) ([Max Kainov](https://github.com/maxknv)).
* CI: Support for passing custom envs into integration test job via --params. [#91383](https://github.com/ClickHouse/ClickHouse/pull/91383) ([Max Kainov](https://github.com/maxknv)).
* Fix exception from system.filesystem_cache. [#91407](https://github.com/ClickHouse/ClickHouse/pull/91407) ([Kseniia Sumarokova](https://github.com/kssenii)).
* explicit POCO request for REST-polaris catalog. [#91437](https://github.com/ClickHouse/ClickHouse/pull/91437) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Add logs. [#91448](https://github.com/ClickHouse/ClickHouse/pull/91448) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix flaky test_storage_s3_queue/test_5.py::test_failed_startup. [#91451](https://github.com/ClickHouse/ClickHouse/pull/91451) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Improve GitHub issue matching and creation in check_ci script. [#91455](https://github.com/ClickHouse/ClickHouse/pull/91455) ([Max Kainov](https://github.com/maxknv)).
* Fix three assertion failures in `InverseDictionaryLookupPass`. [#91460](https://github.com/ClickHouse/ClickHouse/pull/91460) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Add test for 89400. [#91467](https://github.com/ClickHouse/ClickHouse/pull/91467) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix test `test_storage_iceberg_with_spark/test_cluster_table_function.py::test_cluster_table_function_split_by_row_groups`. [#91468](https://github.com/ClickHouse/ClickHouse/pull/91468) ([Andrey Zvonov](https://github.com/zvonand)).
* Reduce number of entries in join partners to reduce execution time of the test `02177_issue_31009`. [#91470](https://github.com/ClickHouse/ClickHouse/pull/91470) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Description of the setting `stream_like_engine_allow_direct_select` explicitly warning about possible select behavior on queue engines. [#91471](https://github.com/ClickHouse/ClickHouse/pull/91471) ([Sema Checherinda](https://github.com/CheSema)).
* Add some trace logs to measure system log flushing timings and slight speed up in sanitizer builds. [#91472](https://github.com/ClickHouse/ClickHouse/pull/91472) ([Raúl Marín](https://github.com/Algunenano)).
* add doc about select from queue. [#91473](https://github.com/ClickHouse/ClickHouse/pull/91473) ([Sema Checherinda](https://github.com/CheSema)).
* CI: Increase max_execution_speed to make test faster. [#91476](https://github.com/ClickHouse/ClickHouse/pull/91476) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Fix test_storage_s3_queue/test_2.py::test_shards. [#91477](https://github.com/ClickHouse/ClickHouse/pull/91477) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Improve Log parser in fuzzer. [#91480](https://github.com/ClickHouse/ClickHouse/pull/91480) ([Max Kainov](https://github.com/maxknv)).
* Fix 03642_system_instrument_symbols test. [#91492](https://github.com/ClickHouse/ClickHouse/pull/91492) ([Pablo Marcos](https://github.com/pamarcos)).
* Add format string logging to abortOnFailedAssertion for better debugging. [#91494](https://github.com/ClickHouse/ClickHouse/pull/91494) ([Max Kainov](https://github.com/maxknv)).
* Update log message. [#91510](https://github.com/ClickHouse/ClickHouse/pull/91510) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Try to find the problimatic AST part so it will be easier to find similar failures in the CI. [#91519](https://github.com/ClickHouse/ClickHouse/pull/91519) ([Alexander Tokmakov](https://github.com/tavplubix)).
* Support visibility of own changes for `plain-rewritable` transactions. This is the only metadata storage that requires visibility of changes over the operations prefix to resolve remote paths of uncommitted directories and create files under them. [#91520](https://github.com/ClickHouse/ClickHouse/pull/91520) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Miscellaneous. [#91528](https://github.com/ClickHouse/ClickHouse/pull/91528) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Rename background_schedule_pool_log.duration_threshold_ms to duration_threshold_milliseconds. [#91567](https://github.com/ClickHouse/ClickHouse/pull/91567) ([Azat Khuzhin](https://github.com/azat)).
* Fix: UB in Thread Profile Events. [#91568](https://github.com/ClickHouse/ClickHouse/pull/91568) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Add hash binary util to allow creating releases cross-compiling. [#91570](https://github.com/ClickHouse/ClickHouse/pull/91570) ([Pablo Marcos](https://github.com/pamarcos)).
* Fuzz start/stop merges better. [#91575](https://github.com/ClickHouse/ClickHouse/pull/91575) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Make flushing trace_log under MSan 25% faster by disabling frame pointers for demangling. [#91579](https://github.com/ClickHouse/ClickHouse/pull/91579) ([Azat Khuzhin](https://github.com/azat)).
* Check for out of bounds in ColumnObject::insertRangeFrom. [#91581](https://github.com/ClickHouse/ClickHouse/pull/91581) ([Pavel Kruglov](https://github.com/Avogar)).
* fix a race when HTTP_CONNECTION_LIMIT_REACHED is thrown. [#91582](https://github.com/ClickHouse/ClickHouse/pull/91582) ([Sema Checherinda](https://github.com/CheSema)).
* Fix function `h3PolygonToCells` with constant columns. [#91586](https://github.com/ClickHouse/ClickHouse/pull/91586) ([Anton Popov](https://github.com/CurtizJ)).
* Add requested css property. [#91587](https://github.com/ClickHouse/ClickHouse/pull/91587) ([Alexei Fedotov](https://github.com/leshikus)).
* Closes [#90670](https://github.com/ClickHouse/ClickHouse/issues/90670). [#91594](https://github.com/ClickHouse/ClickHouse/pull/91594) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix bad merge with master in [#86833](https://github.com/ClickHouse/ClickHouse/issues/86833). [#91597](https://github.com/ClickHouse/ClickHouse/pull/91597) ([Pavel Kruglov](https://github.com/Avogar)).
* In order to better rollout, the limits are released by default. The configuration will be defined according to the instance size. [#91601](https://github.com/ClickHouse/ClickHouse/pull/91601) ([Sema Checherinda](https://github.com/CheSema)).
* CI: Fix indentation bug in test selection logic in targeted job. [#91603](https://github.com/ClickHouse/ClickHouse/pull/91603) ([Max Kainov](https://github.com/maxknv)).
* Fix segfault with fail point. [#91604](https://github.com/ClickHouse/ClickHouse/pull/91604) ([Igor Nikonov](https://github.com/devcrafter)).
* CI: Skip no-flaky-check tests in targeted job. [#91606](https://github.com/ClickHouse/ClickHouse/pull/91606) ([Max Kainov](https://github.com/maxknv)).
* Fix many flaky RMV tests. [#91612](https://github.com/ClickHouse/ClickHouse/pull/91612) ([Michael Kolupaev](https://github.com/al13n321)).
* Miscellaneous (12). [#91616](https://github.com/ClickHouse/ClickHouse/pull/91616) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix unbalanced trailing quote in a logical error name. [#91617](https://github.com/ClickHouse/ClickHouse/pull/91617) ([Max Kainov](https://github.com/maxknv)).
* Follow up for https://github.com/ClickHouse/ClickHouse/pull/91163. [#91625](https://github.com/ClickHouse/ClickHouse/pull/91625) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Prevent implicit conversions to `Field` when calling `toString`, which could result in slow code and unintended results. Closes [#76797](https://github.com/ClickHouse/ClickHouse/issues/76797). [#91627](https://github.com/ClickHouse/ClickHouse/pull/91627) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a test for [#74424](https://github.com/ClickHouse/ClickHouse/issues/74424). [#91628](https://github.com/ClickHouse/ClickHouse/pull/91628) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix long test `00411_long_accurate_number_comparison_int`. [#91629](https://github.com/ClickHouse/ClickHouse/pull/91629) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix targeted check to skip common symbols instead of sampling tests. [#91635](https://github.com/ClickHouse/ClickHouse/pull/91635) ([Max Kainov](https://github.com/maxknv)).
* CI: Stress and upgrade job refactoring. [#91638](https://github.com/ClickHouse/ClickHouse/pull/91638) ([Max Kainov](https://github.com/maxknv)).
* CI: Jepsen job refactoring. [#91642](https://github.com/ClickHouse/ClickHouse/pull/91642) ([Max Kainov](https://github.com/maxknv)).
* CI: libfuzzer job refactoring. [#91643](https://github.com/ClickHouse/ClickHouse/pull/91643) ([Max Kainov](https://github.com/maxknv)).
* Fix flaky 03358_block_structure_match. [#91648](https://github.com/ClickHouse/ClickHouse/pull/91648) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Sync changes. [#91682](https://github.com/ClickHouse/ClickHouse/pull/91682) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Closes [#91695](https://github.com/ClickHouse/ClickHouse/issues/91695). [#91696](https://github.com/ClickHouse/ClickHouse/pull/91696) ([Pavel Kruglov](https://github.com/Avogar)).
* Add test with lightweight deletes patch parts and skip indexes. [#91708](https://github.com/ClickHouse/ClickHouse/pull/91708) ([Anton Popov](https://github.com/CurtizJ)).
* Add test for a circular situation involving dictionaries and projections. [#91739](https://github.com/ClickHouse/ClickHouse/pull/91739) ([Robert Schulze](https://github.com/rschu1ze)).
* Closes [#91230](https://github.com/ClickHouse/ClickHouse/issues/91230). [#91740](https://github.com/ClickHouse/ClickHouse/pull/91740) ([Pavel Kruglov](https://github.com/Avogar)).
* Closes [#91734](https://github.com/ClickHouse/ClickHouse/issues/91734). [#91742](https://github.com/ClickHouse/ClickHouse/pull/91742) ([Pavel Kruglov](https://github.com/Avogar)).
* Sometimes under sanitizers query is executed slightly more than 1 second. 2 seconds should be enough. Closes [#89202](https://github.com/ClickHouse/ClickHouse/issues/89202). [#91744](https://github.com/ClickHouse/ClickHouse/pull/91744) ([Pavel Kruglov](https://github.com/Avogar)).
* CI: Respect no-asan tag in targeted job. [#91747](https://github.com/ClickHouse/ClickHouse/pull/91747) ([Max Kainov](https://github.com/maxknv)).
* CI: Skip "Inconsistent AST formatting" error name normalisation. [#91748](https://github.com/ClickHouse/ClickHouse/pull/91748) ([Max Kainov](https://github.com/maxknv)).
* Probably `ulimit -n` setting was recently changed in the integration tests runner, and this fd leak started to become visible. [#91750](https://github.com/ClickHouse/ClickHouse/pull/91750) ([Mikhail Artemenko](https://github.com/Michicosun)).
* CI: Stress tests: refactor errors check. [#91761](https://github.com/ClickHouse/ClickHouse/pull/91761) ([Max Kainov](https://github.com/maxknv)).
* Fix tests flakiness. [#91781](https://github.com/ClickHouse/ClickHouse/pull/91781) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix flaky test_keeper_disks. [#91783](https://github.com/ClickHouse/ClickHouse/pull/91783) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix flaky test_storage_s3_queue/test.py::test_failed_startup. [#91786](https://github.com/ClickHouse/ClickHouse/pull/91786) ([Kseniia Sumarokova](https://github.com/kssenii)).
* If an exception was thrown in the task, this task will be cancelled in the merge mutate executor. During cancel, the first internal merge task will be cancelled, and after that, `finalise` will be called on `MergeMutateSelectedEntry`, which will unlock parts for the next merge. Here we need to reset tmp storage before this unlock will be processed - in intenal taks cancel. [#91792](https://github.com/ClickHouse/ClickHouse/pull/91792) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Closes https://github.com/ClickHouse/clickhouse-private/issues/43729. [#91810](https://github.com/ClickHouse/ClickHouse/pull/91810) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix flaky tests in test_filesystem_cache. [#91812](https://github.com/ClickHouse/ClickHouse/pull/91812) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Deflake test_zookeeper_connection_log. [#91815](https://github.com/ClickHouse/ClickHouse/pull/91815) ([Mohammad Lareb Zafar](https://github.com/zlareb1)).
* Do not run 03729_function_hmac under FIPS. [#91820](https://github.com/ClickHouse/ClickHouse/pull/91820) ([Raúl Marín](https://github.com/Algunenano)).
* Https://github.com/clickhouse/clickhouse/pull/87300 was a backward-incompatible change and clickhouse was unable to read old parts due to changes in files escaping. now it changes escaping settings if it cannot find file name to be able to read such old parts. closes https://github.com/clickhouse/clickhouse/issues/91668. closes https://github.com/clickhouse/clickhouse/issues/91626. [#91823](https://github.com/ClickHouse/ClickHouse/pull/91823) ([Pavel Kruglov](https://github.com/Avogar)).
* Unflake `00632_get_sample_block_cache`. [#91828](https://github.com/ClickHouse/ClickHouse/pull/91828) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix [Address already in use](https://play.clickhouse.com/play?user=play&run=1#V0lUSAogICAgMTgwIEFTIGludGVydmFsX2RheXMKU0VMRUNUCiAgICB0b1N0YXJ0T2ZEYXkoY2hlY2tfc3RhcnRfdGltZSkgQVMgZGF5LAogICAgY291bnQoKSBBUyBmYWlsdXJlcywKICAgIGdyb3VwVW5pcUFycmF5KHB1bGxfcmVxdWVzdF9udW1iZXIpIEFTIHBycywKICAgIGFueShyZXBvcnRfdXJsKSBBUyByZXBvcnRfdXJsCkZST00gY2hlY2tzCldIRVJFIChub3coKSAtIHRvSW50ZXJ2YWxEYXkoaW50ZXJ2YWxfZGF5cykpIDw9IGNoZWNrX3N0YXJ0X3RpbWUKICAgIEFORCB0ZXN0X25hbWUgPSAnMDAzNzlfc3lzdGVtX3Byb2Nlc3Nlc19wb3J0JwogICAgLS0gQU5EIGNoZWNrX25hbWUgPSAnU3RhdGVsZXNzIHRlc3RzIChhcm1fYXNhbiwgdGFyZ2V0ZWQpJwogICAgQU5EIHRlc3Rfc3RhdHVzIElOICgnRkFJTCcsICdFUlJPUicpCiAgICBBTkQgKChoZWFkX3JlZiA9ICdtYXN0ZXInIEFORCBwdWxsX3JlcXVlc3RfbnVtYmVyID0gMCkgT1IgcHVsbF9yZXF1ZXN0X251bWJlciAhPSAwKQpHUk9VUCBCWSBkYXkKT1JERVIgQlkgZGF5IERFU0MK) for 00379_system_processes_port test. [#91837](https://github.com/ClickHouse/ClickHouse/pull/91837) ([filimonov](https://github.com/filimonov)).
* Skip test 00816_long_concurrent_alter_column in MSAN mode. [#91838](https://github.com/ClickHouse/ClickHouse/pull/91838) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Update version_date.tsv and changelog after v25.3.10.19-lts. [#91841](https://github.com/ClickHouse/ClickHouse/pull/91841) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fixes race condition for pull-prune conflicts. Fixes [#80470](https://github.com/ClickHouse/ClickHouse/issues/80470). [#91843](https://github.com/ClickHouse/ClickHouse/pull/91843) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* CI: Stress tests: fix stderr log path. [#91850](https://github.com/ClickHouse/ClickHouse/pull/91850) ([Max Kainov](https://github.com/maxknv)).
* CI: Add hourly job to auto-assign approvers to PRs. [#91877](https://github.com/ClickHouse/ClickHouse/pull/91877) ([Max Kainov](https://github.com/maxknv)).
* Update test_filesystem_cache/configs. [#91878](https://github.com/ClickHouse/ClickHouse/pull/91878) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Handle alias expressions in the TTL description format. [#91883](https://github.com/ClickHouse/ClickHouse/pull/91883) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Sync changes. [#91885](https://github.com/ClickHouse/ClickHouse/pull/91885) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Do not throw logical error when fallback to greedy join order algorithm is not specified. [#91908](https://github.com/ClickHouse/ClickHouse/pull/91908) ([Alexander Gololobov](https://github.com/davenger)).
* Backport of the fix for `optimize_skip_unused_shards` optimization for `Distributed` engine that may lead to `Serialization is not implemented for data type Set` due to wrong types. [#91923](https://github.com/ClickHouse/ClickHouse/pull/91923) ([Azat Khuzhin](https://github.com/azat)).
* Prevent crash on development when SettingsHistory is incorrect. [#91924](https://github.com/ClickHouse/ClickHouse/pull/91924) ([Raúl Marín](https://github.com/Algunenano)).
* CI: Include recently closed issues in check ci script. [#91925](https://github.com/ClickHouse/ClickHouse/pull/91925) ([Max Kainov](https://github.com/maxknv)).
* CI: Fix missing dmesg on 'OOM in dmesg' error. [#91928](https://github.com/ClickHouse/ClickHouse/pull/91928) ([Michael Kolupaev](https://github.com/al13n321)).
* Closes [#91804](https://github.com/ClickHouse/ClickHouse/issues/91804). [#91930](https://github.com/ClickHouse/ClickHouse/pull/91930) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix Inconsistent AST formatting for UPDATE query. [#91934](https://github.com/ClickHouse/ClickHouse/pull/91934) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix NOT operator formatting. [#91940](https://github.com/ClickHouse/ClickHouse/pull/91940) ([Antonio Andelic](https://github.com/antonio2368)).
* Fuzz updates. [#91942](https://github.com/ClickHouse/ClickHouse/pull/91942) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Backport fix 03644_object_storage_correlated_subqueries to release br…. [#91957](https://github.com/ClickHouse/ClickHouse/pull/91957) ([Vladimir Cherkasov](https://github.com/vdimir)).
* CI: Remove deprecated perf scripts. [#91961](https://github.com/ClickHouse/ClickHouse/pull/91961) ([Max Kainov](https://github.com/maxknv)).
* CI: Handle test parameter for issue check and creation. [#91972](https://github.com/ClickHouse/ClickHouse/pull/91972) ([Max Kainov](https://github.com/maxknv)).
* Support keeping track of tasks in ThreadPoolCallbackRunnerLocal externally. [#91975](https://github.com/ClickHouse/ClickHouse/pull/91975) ([Raúl Marín](https://github.com/Algunenano)).
* CI: Check CI improvements. [#91979](https://github.com/ClickHouse/ClickHouse/pull/91979) ([Max Kainov](https://github.com/maxknv)).
* Enable -foptimize-sibling-calls under MSan. [#91990](https://github.com/ClickHouse/ClickHouse/pull/91990) ([Azat Khuzhin](https://github.com/azat)).
* Fix argument for "Lock was held for {} ms by thread {} in [{}]". [#91992](https://github.com/ClickHouse/ClickHouse/pull/91992) ([Azat Khuzhin](https://github.com/azat)).
* tests: fix 03164_materialize_skip_index_on_merge flakiness. [#91995](https://github.com/ClickHouse/ClickHouse/pull/91995) ([Azat Khuzhin](https://github.com/azat)).
* Fix data race between getWorkloadEntityStorage and ContextSharedPart::shutdown. [#92004](https://github.com/ClickHouse/ClickHouse/pull/92004) ([Sergei Trifonov](https://github.com/serxa)).
* extra validation for ngram length. [#92024](https://github.com/ClickHouse/ClickHouse/pull/92024) ([Seva Potapov](https://github.com/seva-potapov)).
* Fix build on Mac and clang-21. [#92027](https://github.com/ClickHouse/ClickHouse/pull/92027) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Update docs for `showCertificate`. [#92028](https://github.com/ClickHouse/ClickHouse/pull/92028) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Fix crash with wrong group in `timeSeriesTagsGroupToTags()`. Closes [#91905](https://github.com/ClickHouse/ClickHouse/issues/91905). [#92053](https://github.com/ClickHouse/ClickHouse/pull/92053) ([Vitaly Baranov](https://github.com/vitlibar)).
* Disable -fsanitize-memory-track-origins for libcxxabi to make demangle ~20% faster. [#92061](https://github.com/ClickHouse/ClickHouse/pull/92061) ([Azat Khuzhin](https://github.com/azat)).
* Closes [#92063](https://github.com/ClickHouse/ClickHouse/issues/92063). [#92064](https://github.com/ClickHouse/ClickHouse/pull/92064) ([Pavel Kruglov](https://github.com/Avogar)).
* CI: Check CI improvements. [#92066](https://github.com/ClickHouse/ClickHouse/pull/92066) ([Max Kainov](https://github.com/maxknv)).
* CI: Speed up Config Workflow. [#92070](https://github.com/ClickHouse/ClickHouse/pull/92070) ([Max Kainov](https://github.com/maxknv)).
* deflake tests/integration/test_keeper_s3_snapshot using threshold-based assertions. [#92077](https://github.com/ClickHouse/ClickHouse/pull/92077) ([Mohammad Lareb Zafar](https://github.com/zlareb1)).
* Fix polaris catalog: encode nested namespace. [#92079](https://github.com/ClickHouse/ClickHouse/pull/92079) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix crash in ReplicatedMergeTree when source table is dropped during REPLACE PARTITION query. [#92087](https://github.com/ClickHouse/ClickHouse/pull/92087) ([Michael Kolupaev](https://github.com/al13n321)).
* CI: Improve matching failures against open gh issues. [#92090](https://github.com/ClickHouse/ClickHouse/pull/92090) ([Max Kainov](https://github.com/maxknv)).
* Fix crash in `WriteBufferFromHTTPServerResponse::onProgress()` for async restore started via HTTP protocol. [#92103](https://github.com/ClickHouse/ClickHouse/pull/92103) ([Vitaly Baranov](https://github.com/vitlibar)).
* Replaces the harmful function `rand` with `rand_r` in `grpc_core::BdpEstimator()`. Closes [#89406](https://github.com/ClickHouse/ClickHouse/issues/89406). [#92104](https://github.com/ClickHouse/ClickHouse/pull/92104) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix tests with CLICKHOUSE_URL. [#92115](https://github.com/ClickHouse/ClickHouse/pull/92115) ([Azat Khuzhin](https://github.com/azat)).
* tests: fix 02935_http_content_type_with_http_headers_progress flakiness. [#92117](https://github.com/ClickHouse/ClickHouse/pull/92117) ([Azat Khuzhin](https://github.com/azat)).
* disable running test in parallel to reduce thread starvation issues. [#92123](https://github.com/ClickHouse/ClickHouse/pull/92123) ([Seva Potapov](https://github.com/seva-potapov)).
* exclude the test from sanitizers suites and disable flaky check. [#92126](https://github.com/ClickHouse/ClickHouse/pull/92126) ([Seva Potapov](https://github.com/seva-potapov)).
* Needed for [#92095](https://github.com/ClickHouse/ClickHouse/issues/92095). CC @pamarcos CC @antaljanosbenjamin CC @kssenii. [#92127](https://github.com/ClickHouse/ClickHouse/pull/92127) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove `test_storage_nats`. [#92140](https://github.com/ClickHouse/ClickHouse/pull/92140) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* tests: fix 03734_client_receive_timeout_exit_code flakiness. [#92146](https://github.com/ClickHouse/ClickHouse/pull/92146) ([Azat Khuzhin](https://github.com/azat)).
* Follow-up for https://github.com/ClickHouse/ClickHouse/pull/92127. [#92154](https://github.com/ClickHouse/ClickHouse/pull/92154) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Keeper cleanup and fixes for persistent watches. [#92157](https://github.com/ClickHouse/ClickHouse/pull/92157) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix `01782_field_oom (arm_asan, targeted)` flakiness. [#92158](https://github.com/ClickHouse/ClickHouse/pull/92158) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Add test 03759_join_filterpushdown_granules_read.sql. [#92159](https://github.com/ClickHouse/ClickHouse/pull/92159) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Sanitize Context usage in Functions. [#92168](https://github.com/ClickHouse/ClickHouse/pull/92168) ([Azat Khuzhin](https://github.com/azat)).
* Increase log level of some logs. [#92169](https://github.com/ClickHouse/ClickHouse/pull/92169) ([Kseniia Sumarokova](https://github.com/kssenii)).
* connectionId() is not deterministic. [#92174](https://github.com/ClickHouse/ClickHouse/pull/92174) ([Azat Khuzhin](https://github.com/azat)).
* Fuzz updates. [#92177](https://github.com/ClickHouse/ClickHouse/pull/92177) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix overriding stats from hint. [#92192](https://github.com/ClickHouse/ClickHouse/pull/92192) ([Alexander Gololobov](https://github.com/davenger)).
* Fix another flaky RMV test. [#92200](https://github.com/ClickHouse/ClickHouse/pull/92200) ([Michael Kolupaev](https://github.com/al13n321)).
* Minor style changes in hash table prefetch iterator. [#92214](https://github.com/ClickHouse/ClickHouse/pull/92214) ([Raúl Marín](https://github.com/Algunenano)).
* Fix test_keeper_disks again. [#92248](https://github.com/ClickHouse/ClickHouse/pull/92248) ([Antonio Andelic](https://github.com/antonio2368)).
* Closes [#92224](https://github.com/ClickHouse/ClickHouse/issues/92224). [#92249](https://github.com/ClickHouse/ClickHouse/pull/92249) ([Pedro Ferreira](https://github.com/PedroTadim)).
* CI: Add stack trace ID to Logical errors. [#92270](https://github.com/ClickHouse/ClickHouse/pull/92270) ([Max Kainov](https://github.com/maxknv)).
* CI: Fix compress function to handle links. [#92271](https://github.com/ClickHouse/ClickHouse/pull/92271) ([Max Kainov](https://github.com/maxknv)).
* Improve cherry_pick.py assertions to understand the current issue. [#92281](https://github.com/ClickHouse/ClickHouse/pull/92281) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* CI: Remove dumping result file in check ci script. [#92287](https://github.com/ClickHouse/ClickHouse/pull/92287) ([Max Kainov](https://github.com/maxknv)).
* Docs: add `parameter` field to in-source function documentation. [#92291](https://github.com/ClickHouse/ClickHouse/pull/92291) ([Robert Schulze](https://github.com/rschu1ze)).
* tests: make CLICKHOUSE_USE_DATABASE_DISK env optional for integration tests. [#92295](https://github.com/ClickHouse/ClickHouse/pull/92295) ([Azat Khuzhin](https://github.com/azat)).
* CI: Initial support for indexing failures from Stress and Unit tests. [#92313](https://github.com/ClickHouse/ClickHouse/pull/92313) ([Max Kainov](https://github.com/maxknv)).
* s3queue minor changes. [#92314](https://github.com/ClickHouse/ClickHouse/pull/92314) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Index sanitizer and fatal failures in functional tests. [#92316](https://github.com/ClickHouse/ClickHouse/pull/92316) ([Max Kainov](https://github.com/maxknv)).
* Untie `blob_storage_log` from S3. [#92320](https://github.com/ClickHouse/ClickHouse/pull/92320) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Report: sort results by status. [#92324](https://github.com/ClickHouse/ClickHouse/pull/92324) ([Max Kainov](https://github.com/maxknv)).
* Fuzzers: select_parser_fuzzer - change max_parser_backtracks to 10.000 (was 1.000.000). [#92325](https://github.com/ClickHouse/ClickHouse/pull/92325) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Fix a typo. [#92336](https://github.com/ClickHouse/ClickHouse/pull/92336) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Closes [#90172](https://github.com/ClickHouse/ClickHouse/issues/90172). [#92342](https://github.com/ClickHouse/ClickHouse/pull/92342) ([pufit](https://github.com/pufit)).
* Update README.md. [#92344](https://github.com/ClickHouse/ClickHouse/pull/92344) ([Zoe Steinkamp](https://github.com/zoesteinkamp)).
* Remove no-parallel from some tests. [#92352](https://github.com/ClickHouse/ClickHouse/pull/92352) ([Antonio Andelic](https://github.com/antonio2368)).
* Sync changes with private. [#92353](https://github.com/ClickHouse/ClickHouse/pull/92353) ([Nikita Fomichev](https://github.com/fm4v)).
* Use the static mount point `/praktika` for docker containers to have static paths regardless of the outer paths. It allows the use of a read-only sccache endpoint for quick local builds. [#92358](https://github.com/ClickHouse/ClickHouse/pull/92358) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* CI: Fixes for CI issue indexing. [#92370](https://github.com/ClickHouse/ClickHouse/pull/92370) ([Max Kainov](https://github.com/maxknv)).
* Sync setting changes. [#92384](https://github.com/ClickHouse/ClickHouse/pull/92384) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* It didn't test `rpm` and `tgz` for a while, as well as used to test only `amd` packages. [#92387](https://github.com/ClickHouse/ClickHouse/pull/92387) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* BuzzHouse fix for Materialized views. [#92392](https://github.com/ClickHouse/ClickHouse/pull/92392) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Generate dummy file also for static libraries. [#92398](https://github.com/ClickHouse/ClickHouse/pull/92398) ([Pablo Marcos](https://github.com/pamarcos)).
* Closes [#92382](https://github.com/ClickHouse/ClickHouse/issues/92382). [#92400](https://github.com/ClickHouse/ClickHouse/pull/92400) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Sync with private masking rules. [#92402](https://github.com/ClickHouse/ClickHouse/pull/92402) ([Nikita Fomichev](https://github.com/fm4v)).
* Add necessary `git` config for shared repo. [#92452](https://github.com/ClickHouse/ClickHouse/pull/92452) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Sync fail points with private. [#92459](https://github.com/ClickHouse/ClickHouse/pull/92459) ([Azat Khuzhin](https://github.com/azat)).
* ci: fix obtaining stacktraces for unit tests. [#92462](https://github.com/ClickHouse/ClickHouse/pull/92462) ([Azat Khuzhin](https://github.com/azat)).
* Remove [#92168](https://github.com/ClickHouse/ClickHouse/issues/92168) from changelog for 25.12. [#92481](https://github.com/ClickHouse/ClickHouse/pull/92481) ([Azat Khuzhin](https://github.com/azat)).
* Update version_date.tsv and changelog after v25.11.3.54-stable. [#92485](https://github.com/ClickHouse/ClickHouse/pull/92485) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Process fatal errors in functional tests in check ci script. [#92501](https://github.com/ClickHouse/ClickHouse/pull/92501) ([Max Kainov](https://github.com/maxknv)).

