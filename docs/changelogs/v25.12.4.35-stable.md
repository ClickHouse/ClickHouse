---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v25.12.4.35-stable (4b2fbdcba83) FIXME as compared to v25.12.3.21-stable (7c3f6575160)

#### Improvement
* Backported in [#94210](https://github.com/ClickHouse/ClickHouse/issues/94210): Rework insert_select_deduplicate setting to add an ability to keep backward compatibility. [#92951](https://github.com/ClickHouse/ClickHouse/pull/92951) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#94383](https://github.com/ClickHouse/ClickHouse/issues/94383): Introduced `backup_data_from_refreshable_materialized_view_targets` backup setting to control whether to back up data of refreshable materialized views. Targets of RMVs with APPEND refresh strategy are always backed up. [#93658](https://github.com/ClickHouse/ClickHouse/pull/93658) ([Julia Kartseva](https://github.com/jkartseva)).
* Backported in [#94121](https://github.com/ClickHouse/ClickHouse/issues/94121): In some cases we've seen ClickHouse doesn't respect a memory limit when reading from a table. This behaviour is fixed. [#93715](https://github.com/ClickHouse/ClickHouse/pull/93715) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Backported in [#94031](https://github.com/ClickHouse/ClickHouse/issues/94031): Do proper byte size calculation of the check request with stats. [#93907](https://github.com/ClickHouse/ClickHouse/pull/93907) ([Mikhail Artemenko](https://github.com/Michicosun)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#94128](https://github.com/ClickHouse/ClickHouse/issues/94128): Fix `Not found column` for `use_top_k_dynamic_filtering` optimization. Fixes [#93186](https://github.com/ClickHouse/ClickHouse/issues/93186). [#93316](https://github.com/ClickHouse/ClickHouse/pull/93316) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Backported in [#94067](https://github.com/ClickHouse/ClickHouse/issues/94067): Avoids oauth login in ClickHouse Client when username/password are within the connection string. [#93459](https://github.com/ClickHouse/ClickHouse/pull/93459) ([Krishna Mannem](https://github.com/kcmannem)).
* Backported in [#94023](https://github.com/ClickHouse/ClickHouse/issues/94023): Fix system instrument dispatch bug. [#93937](https://github.com/ClickHouse/ClickHouse/pull/93937) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#94084](https://github.com/ClickHouse/ClickHouse/issues/94084): In https://github.com/ClickHouse/ClickHouse/pull/89173, we added an extra field to the structure that `TraceSender` sends through an internal pipe. However, the buffer size was not updated ([here](https://github.com/ClickHouse/ClickHouse/pull/89173/changes#diff-36ecfac5cde34c92c031652d8a77f0d12782cd5d43e68d6ef159e6d46a54224fL44)), therefore we are writting more data to buffer than `buffer_size` which results in multiple flushes. And because `TraceSender::send` is called from different threads, different threads' flushes may interleave which breaks the invariant that the receiving end (`TraceCollector`) relies on. [#93966](https://github.com/ClickHouse/ClickHouse/pull/93966) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Backported in [#94594](https://github.com/ClickHouse/ClickHouse/issues/94594): Fix type conversion to super type during the join operation of the storage `Join` with `USING` clause. Fixes [#91672](https://github.com/ClickHouse/ClickHouse/issues/91672). Fixes [#78572](https://github.com/ClickHouse/ClickHouse/issues/78572). [#94000](https://github.com/ClickHouse/ClickHouse/pull/94000) ([Dmitry Novik](https://github.com/novikd)).
* Backported in [#94074](https://github.com/ClickHouse/ClickHouse/issues/94074): A `SELECT` query containing a predicate on multiple columns with bloom filter skip indexes and both `OR` and `NOT` conditions are present could return inconsistent results. That is fixed now. [#94026](https://github.com/ClickHouse/ClickHouse/pull/94026) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Backported in [#94456](https://github.com/ClickHouse/ClickHouse/issues/94456): Fix use-of-uninitialized-value in `ReadWriteBufferFromHTTP`. [#94058](https://github.com/ClickHouse/ClickHouse/pull/94058) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94245](https://github.com/ClickHouse/ClickHouse/issues/94245): Fix bad check for typed paths in JSON. Checj was introduced in https://github.com/ClickHouse/ClickHouse/pull/92842 and can lead to error during existing tables startup. [#94070](https://github.com/ClickHouse/ClickHouse/pull/94070) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94206](https://github.com/ClickHouse/ClickHouse/issues/94206): Fix accuracy of `uniqTheta` when using UInt8 aggregation keys in parallel (`max_threads` > 1 - default). [#94095](https://github.com/ClickHouse/ClickHouse/pull/94095) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#94167](https://github.com/ClickHouse/ClickHouse/issues/94167): Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1217. Exception was thrown from a `socket.setBlocking(true)` call inside `SCOPE_EXIT`: [logs](https://grafana.clickhouse-prd.com/a/loghouseapp/sysex?thanos_datasource=LightHouse+Thanos+%28production%29&environment=production&sortOrder=Asc&namespace=ns-olive-ae-66&region=us-central1&limit=500&whereExtra=and+level+%3D+%27Fatal%27&tableName=text_log&groupBy=level&extraCols=level&timeFrom=2025-12-29T01%3A13%3A46Z&timeFromCHFormat=2025-12-29+01%3A13%3A46&timeFromUnix=1766970826&timeTo=2025-12-29T02%3A13%3A51Z&timeToCHFormat=2025-12-29+02%3A13%3A51&timeToUnix=1766974431&dateTo=2025-12-29&dateFrom=2025-12-29). Because `SCOPE_EXIT` creates a scope guard object and runs the provided code in the scope guard's destructor, we can't use `SCOPE_EXIT` with functions that throw exceptions and should use `SCOPE_EXIT_SAFE` instead. [#94100](https://github.com/ClickHouse/ClickHouse/pull/94100) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Backported in [#94637](https://github.com/ClickHouse/ClickHouse/issues/94637): Related issue: [#80315](https://github.com/ClickHouse/ClickHouse/issues/80315) CIDB: [link](https://play.clickhouse.com/play?user=play#U0VMRUNUIGJhc2VfcmVwbywgcHVsbF9yZXF1ZXN0X251bWJlciBhcyBwciwgY2hlY2tfc3RhcnRfdGltZSwgY2hlY2tfbmFtZSwgdGVzdF9uYW1lLCB0ZXN0X3N0YXR1cywgcmVwb3J0X3VybApGUk9NIGNoZWNrcwpXSEVSRSAxCiAgICBBTkQgdGVzdF9zdGF0dXMgSU4gKCdGQUlMJywgJ0VSUk9SJywgJ0JST0tFTicpCiAgICBBTkQgdG9EYXRlKGNoZWNrX3N0YXJ0X3RpbWUpID4gJzIwMjUtMDYtMDEnCiAgICBBTkQgdGVzdF9uYW1lIGxpa2UgJyUwMTE1NF9tb3ZlX3BhcnRpdGlvbl9sb25nJScKICAgIEFORCB0ZXN0X2NvbnRleHRfcmF3IGxpa2UgJyVyZXN1bHQgZGlmZmVycyB3aXRoIHJlZmVyZW5jZSUnCk9SREVSIEJZIGNoZWNrX3N0YXJ0X3RpbWUgREVTQwpTRVRUSU5HUyByZWFkX3Rocm91Z2hfZGlzdHJpYnV0ZWRfY2FjaGU9MA==). [#94123](https://github.com/ClickHouse/ClickHouse/pull/94123) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#94332](https://github.com/ClickHouse/ClickHouse/issues/94332): Fixed parquet reader v3 incorrectly handling arrays that cross page boundaries. This happens e.g. for files written by Arrow without enabling page statistics or page index. Affects only columns of Array data type. Likely symptom is that one array every ~1 MB of data gets truncated. Before this fix, use this setting as workaround: `input_format_parquet_use_native_reader_v3 = 0`. [#94125](https://github.com/ClickHouse/ClickHouse/pull/94125) ([Michael Kolupaev](https://github.com/al13n321)).
* Backported in [#94272](https://github.com/ClickHouse/ClickHouse/issues/94272): Fix data race in evaluating table functions in materialized views. [#94171](https://github.com/ClickHouse/ClickHouse/pull/94171) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94261](https://github.com/ClickHouse/ClickHouse/issues/94261): Fix nullptr dereference in `PostgreSQL` database engines (when the query is incorrect). Closes [#92887](https://github.com/ClickHouse/ClickHouse/issues/92887). [#94180](https://github.com/ClickHouse/ClickHouse/pull/94180) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94317](https://github.com/ClickHouse/ClickHouse/issues/94317): Fix memory leak in refreshable materialized views using `SELECT` queries with multiple subqueries. [#94200](https://github.com/ClickHouse/ClickHouse/pull/94200) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#94446](https://github.com/ClickHouse/ClickHouse/issues/94446): Fix data race in `DataPartStorageOnDiskBase::remove` vs `system.parts`. Closes [#49076](https://github.com/ClickHouse/ClickHouse/issues/49076). [#94262](https://github.com/ClickHouse/ClickHouse/pull/94262) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94303](https://github.com/ClickHouse/ClickHouse/issues/94303): Remove the wrong `noexcept` specifier at HashTable copy assignment that may lead to crash (`std::terminate`) on memory exceptions. [#94275](https://github.com/ClickHouse/ClickHouse/pull/94275) ([Nikita Taranov](https://github.com/nickitat)).
* Backported in [#94353](https://github.com/ClickHouse/ClickHouse/issues/94353): Fix obscure bug in ZooKeeper client on connect which leads to hungs and crashes. [#94320](https://github.com/ClickHouse/ClickHouse/pull/94320) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#94421](https://github.com/ClickHouse/ClickHouse/issues/94421): Fix possibly incorrect result in nested RIGHT JOINs when `enable_lazy_columns_replication` is enabled. The bug caused all rows in replicated columns to incorrectly return the same value instead of their distinct values. Close [#93891](https://github.com/ClickHouse/ClickHouse/issues/93891). [#94339](https://github.com/ClickHouse/ClickHouse/pull/94339) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#94398](https://github.com/ClickHouse/ClickHouse/issues/94398): Fix incorrect value of current metric `FilesystemCacheSizeLimit` in case `SLRU` cache policy was used. [#94363](https://github.com/ClickHouse/ClickHouse/pull/94363) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Backported in [#94465](https://github.com/ClickHouse/ClickHouse/issues/94465): Ignores impossible revokes of global grants on the database level for grants with grant option. [#94386](https://github.com/ClickHouse/ClickHouse/pull/94386) ([pufit](https://github.com/pufit)).
* Backported in [#94473](https://github.com/ClickHouse/ClickHouse/issues/94473): Fix reading sparse offsets from compact parts. Closes [#94385](https://github.com/ClickHouse/ClickHouse/issues/94385) ### Documentation entry for user-facing changes. [#94399](https://github.com/ClickHouse/ClickHouse/pull/94399) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94490](https://github.com/ClickHouse/ClickHouse/issues/94490): Fix nullptr dereference with disabled `send_profile_events`. This feature was introduced recently for the ClickHouse Python driver. Closes [#92488](https://github.com/ClickHouse/ClickHouse/issues/92488). [#94466](https://github.com/ClickHouse/ClickHouse/pull/94466) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#94608](https://github.com/ClickHouse/ClickHouse/issues/94608): Fix text index .mrk incompatibility during merges. [#94494](https://github.com/ClickHouse/ClickHouse/pull/94494) ([Peng Jian](https://github.com/fastio)).
* Backported in [#94720](https://github.com/ClickHouse/ClickHouse/issues/94720): Fix a crash during ANY LEFT JOIN optimization when `isNotNull` is evaluated on a missing column. [#94600](https://github.com/ClickHouse/ClickHouse/pull/94600) ([Molly](https://github.com/ggmolly)).

#### Build/Testing/Packaging Improvement
* Backported in [#94229](https://github.com/ClickHouse/ClickHouse/issues/94229): Bump c-ares from v1.34.5 to v1.34.6. This addresses c-ares' `CVE-2025-62408`, which is not relevant for ClickHouse. [#94129](https://github.com/ClickHouse/ClickHouse/pull/94129) ([Govind R Nair](https://github.com/Revertionist)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#94570](https://github.com/ClickHouse/ClickHouse/issues/94570): If some files in data part are missing, we can end up with inconsistent in-memory state of some columns which can lead to crashes. It's better to throw logical errors in this case. [#92076](https://github.com/ClickHouse/ClickHouse/pull/92076) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#94056](https://github.com/ClickHouse/ClickHouse/issues/94056): More respect to memory limit from `AggregateFunctionWindowFunnel`. [#93035](https://github.com/ClickHouse/ClickHouse/pull/93035) ([Nikita Taranov](https://github.com/nickitat)).
* Backported in [#93743](https://github.com/ClickHouse/ClickHouse/issues/93743): Remote throttler sleep time no longer dependent on local socket timeouts and capped at 20 seconds by default. [#93410](https://github.com/ClickHouse/ClickHouse/pull/93410) ([Ilya Andreev](https://github.com/andreev-io)).
* Backported in [#93993](https://github.com/ClickHouse/ClickHouse/issues/93993): Fix exception message. [#93915](https://github.com/ClickHouse/ClickHouse/pull/93915) ([Kseniia Sumarokova](https://github.com/kssenii)).

