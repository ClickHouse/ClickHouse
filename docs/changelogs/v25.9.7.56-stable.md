---
sidebar_position: 1
sidebar_label: 2025
---

# 2025 Changelog

### ClickHouse release v25.9.7.56-stable (f805515dfb0) FIXME as compared to v25.9.6.117-stable (ff2a1965ca6)

#### Improvement
* Backported in [#91250](https://github.com/ClickHouse/ClickHouse/issues/91250): Fixed potential thread pool starvation when reading column samples for JSON columns with many subcolumns by respecting the `merge_tree_use_prefixes_deserialization_thread_pool` setting instead of unconditionally using the thread pool. [#91208](https://github.com/ClickHouse/ClickHouse/pull/91208) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Backported in [#92567](https://github.com/ClickHouse/ClickHouse/issues/92567): Make query memory usage detection for spilling to disk during aggregation/sorting more robust. [#92500](https://github.com/ClickHouse/ClickHouse/pull/92500) ([Azat Khuzhin](https://github.com/azat)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Backported in [#92034](https://github.com/ClickHouse/ClickHouse/issues/92034): Fix GenerateRandom engine crash on non-literal parameters: return BAD_ARGUMENTS with a clear message instead of LOGICAL_ERROR. [#88157](https://github.com/ClickHouse/ClickHouse/pull/88157) ([Shafi Ahmed](https://github.com/ita004)).
* Backported in [#92185](https://github.com/ClickHouse/ClickHouse/issues/92185): Fix removing unused projection columns in the presence of `UNION`. Fixes [#88180](https://github.com/ClickHouse/ClickHouse/issues/88180). [#88350](https://github.com/ClickHouse/ClickHouse/pull/88350) ([Sema Checherinda](https://github.com/CheSema)).
* Backported in [#92221](https://github.com/ClickHouse/ClickHouse/issues/92221): Fix handling of non materialized Nested(Tuple(...)) (added via ALTER). Fixes [#83133](https://github.com/ClickHouse/ClickHouse/issues/83133). [#88879](https://github.com/ClickHouse/ClickHouse/pull/88879) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#90444](https://github.com/ClickHouse/ClickHouse/issues/90444): Fix inference of bad DateTime64 values from Strings in text formats in some cases. Resolves [#89368](https://github.com/ClickHouse/ClickHouse/issues/89368). [#90013](https://github.com/ClickHouse/ClickHouse/pull/90013) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90756](https://github.com/ClickHouse/ClickHouse/issues/90756): Fix some queries with aggregated projection optimization. [#90288](https://github.com/ClickHouse/ClickHouse/pull/90288) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#90912](https://github.com/ClickHouse/ClickHouse/issues/90912): Fix bug in reading subcolumns from JSON in compact parts that could lead to `CANNOT_READ_ALL_DATA` error. Resolves [#90264](https://github.com/ClickHouse/ClickHouse/issues/90264). [#90302](https://github.com/ClickHouse/ClickHouse/pull/90302) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90973](https://github.com/ClickHouse/ClickHouse/issues/90973): Fix possible logical error during renaming and modifying the same Nested column in one ALTER. Resolves [#90406](https://github.com/ClickHouse/ClickHouse/issues/90406). [#90412](https://github.com/ClickHouse/ClickHouse/pull/90412) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91055](https://github.com/ClickHouse/ClickHouse/issues/91055): Fix parsing JSON/Dynamic/Variant values from HTTP parameters. Resolves [#88925](https://github.com/ClickHouse/ClickHouse/issues/88925). [#90430](https://github.com/ClickHouse/ClickHouse/pull/90430) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91872](https://github.com/ClickHouse/ClickHouse/issues/91872): Fixes a bug where `toDateTimeOrNull` of a negative argument returns NULL. [#90490](https://github.com/ClickHouse/ClickHouse/pull/90490) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Backported in [#91035](https://github.com/ClickHouse/ClickHouse/issues/91035): Fix possible logical error during output of `LowCardinality(Bool/Date32)` in `Arrow` format. Resolves [#83883](https://github.com/ClickHouse/ClickHouse/issues/83883). [#90505](https://github.com/ClickHouse/ClickHouse/pull/90505) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#90788](https://github.com/ClickHouse/ClickHouse/issues/90788): Retry to markReplicasActive when failing to resolve address during local host check: Print a warning log if there is an exception during self host check in DDLTask. In DDLWorker::markReplicasActive, throw an exception to retry if there is no local host found and there are host IDs in clusters. [#90556](https://github.com/ClickHouse/ClickHouse/pull/90556) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#91719](https://github.com/ClickHouse/ClickHouse/issues/91719): Fix type-casting errors when using `LowCardinality` columns in partition keys. Closes [#89412](https://github.com/ClickHouse/ClickHouse/issues/89412). [#90666](https://github.com/ClickHouse/ClickHouse/pull/90666) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Backported in [#90871](https://github.com/ClickHouse/ClickHouse/issues/90871): Fix named collections hidden secrets to depend on `display_secrets_in_show_and_select` and `format_display_secrets_in_show_and_select`. [#90765](https://github.com/ClickHouse/ClickHouse/pull/90765) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#90852](https://github.com/ClickHouse/ClickHouse/issues/90852): Fix possible inconsistent state of shared data and dynamic paths in JSON that could lead to logical errors and unexpected results. [#90816](https://github.com/ClickHouse/ClickHouse/pull/90816) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91321](https://github.com/ClickHouse/ClickHouse/issues/91321): Fix compatibility of in-memory serialization of String aggregation state. Different serialization could lead to duplicate results if aggregation query is executed on instances with different versions. New serialization can be enabled with `serialize_string_in_memory_with_zero_byte`. [#90880](https://github.com/ClickHouse/ClickHouse/pull/90880) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#90933](https://github.com/ClickHouse/ClickHouse/issues/90933): Fix background flush of Buffer in case of frequent INSERTs. [#90892](https://github.com/ClickHouse/ClickHouse/pull/90892) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91046](https://github.com/ClickHouse/ClickHouse/issues/91046): Fix high memory usage during reading JSON/Dynamic/Variant columns. [#90907](https://github.com/ClickHouse/ClickHouse/pull/90907) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91294](https://github.com/ClickHouse/ClickHouse/issues/91294): Fix buffer allocation for base58Decode function. [#90909](https://github.com/ClickHouse/ClickHouse/pull/90909) ([Antonio Andelic](https://github.com/antonio2368)).
* Backported in [#91221](https://github.com/ClickHouse/ClickHouse/issues/91221): Fix wildcard grants check for partial revoke. Added more tests. [#90922](https://github.com/ClickHouse/ClickHouse/pull/90922) ([pufit](https://github.com/pufit)).
* Backported in [#91500](https://github.com/ClickHouse/ClickHouse/issues/91500): Fixes `SummingMergeTree` aggregation for `Nested` `LowCardinality` columns. [#90927](https://github.com/ClickHouse/ClickHouse/pull/90927) ([Ivan Babrou](https://github.com/bobrik)).
* Backported in [#91767](https://github.com/ClickHouse/ClickHouse/issues/91767): Fix handling global grants with wildcard revokes Fixes the issue when revoking a wildcard grant can accidentally revoke some global-level grants like `CREATE USER`. [#90928](https://github.com/ClickHouse/ClickHouse/pull/90928) ([pufit](https://github.com/pufit)).
* Backported in [#91079](https://github.com/ClickHouse/ClickHouse/issues/91079): Fix possible infinite loop in azure list blobs. [#90947](https://github.com/ClickHouse/ClickHouse/pull/90947) ([Julia Kartseva](https://github.com/jkartseva)).
* Backported in [#91137](https://github.com/ClickHouse/ClickHouse/issues/91137): Fix excessive Buffer flushes (burns CPU and produce tons of logs). [#91000](https://github.com/ClickHouse/ClickHouse/pull/91000) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91073](https://github.com/ClickHouse/ClickHouse/issues/91073): Fix bug in JSON when path can be both in shared data and dynamic paths during sub-object reading in Compact parts with disabled `write_marks_for_substreams_in_compact_parts`. [#91014](https://github.com/ClickHouse/ClickHouse/pull/91014) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91690](https://github.com/ClickHouse/ClickHouse/issues/91690): Fix reading dynamic subcolumns from materialized columns in mutations. Closes [#90653](https://github.com/ClickHouse/ClickHouse/issues/90653). [#91040](https://github.com/ClickHouse/ClickHouse/pull/91040) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91347](https://github.com/ClickHouse/ClickHouse/issues/91347): Fix lazy materialization of a column added via alter add column in old parts. [#91142](https://github.com/ClickHouse/ClickHouse/pull/91142) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91265](https://github.com/ClickHouse/ClickHouse/issues/91265): Fix merging JSON columns in Summing/Aggregating/Coalescing MergeTree. Previously it could lead to unexpected dynamic paths durign writing to data parts. [#91151](https://github.com/ClickHouse/ClickHouse/pull/91151) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91318](https://github.com/ClickHouse/ClickHouse/issues/91318): Fix possible inconsistent dynamic structure during writing in compact parts that could lead to segfault. [#91152](https://github.com/ClickHouse/ClickHouse/pull/91152) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91401](https://github.com/ClickHouse/ClickHouse/issues/91401): Fix inserting into CoalescingMergeTree column with Tuple of JSON/Dynamic and LowCardinality. Closes [#91215](https://github.com/ClickHouse/ClickHouse/issues/91215). [#91270](https://github.com/ClickHouse/ClickHouse/pull/91270) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91338](https://github.com/ClickHouse/ClickHouse/issues/91338): Fix SYSTEM DROP FILESYSTEM CACHE ON CLUSTER. [#91304](https://github.com/ClickHouse/ClickHouse/pull/91304) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Backported in [#91562](https://github.com/ClickHouse/ClickHouse/issues/91562): Currently, the setting is set to false, so when async insert queue is flushed to a remote server, the inserts are always synchronous. Even in case of the setting is True for a user. [#91386](https://github.com/ClickHouse/ClickHouse/pull/91386) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* Backported in [#91458](https://github.com/ClickHouse/ClickHouse/issues/91458): Remove Sparse columns from header in merge algorithms. Closes [#91377](https://github.com/ClickHouse/ClickHouse/issues/91377). [#91396](https://github.com/ClickHouse/ClickHouse/pull/91396) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#92135](https://github.com/ClickHouse/ClickHouse/issues/92135): Fix crash in `dictGetDescendants` caused by `NULL` when dictionary type has Hierarchy support but no column is `HIERARCHICAL`. Closes [#92026](https://github.com/ClickHouse/ClickHouse/issues/92026). Closes [#92121](https://github.com/ClickHouse/ClickHouse/issues/92121). [#91420](https://github.com/ClickHouse/ClickHouse/pull/91420) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91799](https://github.com/ClickHouse/ClickHouse/issues/91799): Fix logical error caused by asterisks argument in `remote` function. Closes [#90568](https://github.com/ClickHouse/ClickHouse/issues/90568). [#91524](https://github.com/ClickHouse/ClickHouse/pull/91524) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#91680](https://github.com/ClickHouse/ClickHouse/issues/91680): Disallow ALTERs for Object Storage table engines. For example, ALTER ADD PROJECTION could have led to an inability to restart the server, since Object Storage engines do not support projections. [#91573](https://github.com/ClickHouse/ClickHouse/pull/91573) ([Nikolay Degterinsky](https://github.com/evillique)).
* Backported in [#91882](https://github.com/ClickHouse/ClickHouse/issues/91882): Fix increased memory usage in join with "additional filter", close [#91011](https://github.com/ClickHouse/ClickHouse/issues/91011). [#91664](https://github.com/ClickHouse/ClickHouse/pull/91664) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Backported in [#91917](https://github.com/ClickHouse/ClickHouse/issues/91917): Fix LOGICAL_ERROR in RecursiveCTEChunkGenerator. [#91827](https://github.com/ClickHouse/ClickHouse/pull/91827) ([Pablo Marcos](https://github.com/pamarcos)).
* Backported in [#92242](https://github.com/ClickHouse/ClickHouse/issues/92242): Fix UDF replace in format. [#92210](https://github.com/ClickHouse/ClickHouse/pull/92210) ([Raúl Marín](https://github.com/Algunenano)).
* Backported in [#92330](https://github.com/ClickHouse/ClickHouse/issues/92330): In `ddlworker::markreplicasactive`, if there is no active host found, and the `remote_servers` has some host_ids, we print a warning log instead of throwing an exception. [#92223](https://github.com/ClickHouse/ClickHouse/pull/92223) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Backported in [#92436](https://github.com/ClickHouse/ClickHouse/issues/92436): Fix logical error caused by using `Nothing` type in `caseWithExpression` function arguments . Closes [#85354](https://github.com/ClickHouse/ClickHouse/issues/85354). [#92351](https://github.com/ClickHouse/ClickHouse/pull/92351) ([Nihal Z. Miaji](https://github.com/nihalzp)).

#### Build/Testing/Packaging Improvement
* Backported in [#91369](https://github.com/ClickHouse/ClickHouse/issues/91369): Bump libssh from 0.9.8 to master (0.11.3). This resolves https://github.com/advisories/GHSA-98qw-prqm-9f4p. [#90985](https://github.com/ClickHouse/ClickHouse/pull/90985) ([Govind R Nair](https://github.com/Revertionist)).
* Backported in [#92017](https://github.com/ClickHouse/ClickHouse/issues/92017): Fix flaky 00906_low_cardinality_cache. [#92009](https://github.com/ClickHouse/ClickHouse/pull/92009) ([Nikita Fomichev](https://github.com/fm4v)).
* Backported in [#92467](https://github.com/ClickHouse/ClickHouse/issues/92467): Use any of `chcache` and `sccache` as rust wrapper. [#92404](https://github.com/ClickHouse/ClickHouse/pull/92404) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* Backported in [#90918](https://github.com/ClickHouse/ClickHouse/issues/90918): Make a separate IColumn method to take exact dynamic structure from a column. [#87582](https://github.com/ClickHouse/ClickHouse/pull/87582) ([Pavel Kruglov](https://github.com/Avogar)).
* Backported in [#91516](https://github.com/ClickHouse/ClickHouse/issues/91516): This closes [#87619](https://github.com/ClickHouse/ClickHouse/issues/87619). [#87895](https://github.com/ClickHouse/ClickHouse/pull/87895) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backported in [#92508](https://github.com/ClickHouse/ClickHouse/issues/92508): CI: Fix clickhouse version tweak calculation for the fork with sync. [#89098](https://github.com/ClickHouse/ClickHouse/pull/89098) ([Max Kainov](https://github.com/maxknv)).
* Backported in [#91731](https://github.com/ClickHouse/ClickHouse/issues/91731): CI: Fix tweak calculation in legacy version helper. [#90950](https://github.com/ClickHouse/ClickHouse/pull/90950) ([Max Kainov](https://github.com/maxknv)).
* Backported in [#91150](https://github.com/ClickHouse/ClickHouse/issues/91150): Fix CI (due to tmpfs permissions changes in runc 1.3.3). [#91094](https://github.com/ClickHouse/ClickHouse/pull/91094) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91424](https://github.com/ClickHouse/ClickHouse/issues/91424): Add assertion for having empty metadata_files. [#91210](https://github.com/ClickHouse/ClickHouse/pull/91210) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#91701](https://github.com/ClickHouse/ClickHouse/issues/91701): explicit POCO request for REST-polaris catalog. [#91437](https://github.com/ClickHouse/ClickHouse/pull/91437) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Backported in [#91952](https://github.com/ClickHouse/ClickHouse/issues/91952): Backport of the fix for `optimize_skip_unused_shards` optimization for `Distributed` engine that may lead to `Serialization is not implemented for data type Set` due to wrong types. [#91923](https://github.com/ClickHouse/ClickHouse/pull/91923) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#91971](https://github.com/ClickHouse/ClickHouse/issues/91971): Backport fix 03644_object_storage_correlated_subqueries to release br…. [#91957](https://github.com/ClickHouse/ClickHouse/pull/91957) ([Vladimir Cherkasov](https://github.com/vdimir)).
* CI: Rebuild with fixed version. [#92544](https://github.com/ClickHouse/ClickHouse/pull/92544) ([Max Kainov](https://github.com/maxknv)).

