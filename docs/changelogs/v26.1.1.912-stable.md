---
sidebar_position: 1
sidebar_label: 2026
---

# 2026 Changelog

### ClickHouse release v26.1.1.912-stable (4c47e680f55) FIXME as compared to v26.1.1.1-new (1f0c87b97de)

#### Backward Incompatible Change
* Fix inconsistent formatting caused by an incorrect substitution of aliases in the formatter. This closes [#82833](https://github.com/ClickHouse/ClickHouse/issues/82833). This closes [#82832](https://github.com/ClickHouse/ClickHouse/issues/82832). This closes [#68296](https://github.com/ClickHouse/ClickHouse/issues/68296). This change is potentially backward incompatible: when the analyzer is disabled, certain CREATE VIEW queries with IN referencing an alias cannot be processed. To prevent the incompatibility, enable the analyzer (it is enabled by default since 24.3). [#82838](https://github.com/ClickHouse/ClickHouse/pull/82838) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Codecs `DEFLATE_QPL` and `ZSTD_QAT` were removed. Users are advised to convert existing data compressed with `DEFLATE_QPL` or `ZSTD_QAT` to another codec before upgrade. Note that in order to use the codecs, settings `enable_deflate_qpl_codec` and `enable_zstd_qat_codec` had to be enabled. [#92150](https://github.com/ClickHouse/ClickHouse/pull/92150) ([Robert Schulze](https://github.com/rschu1ze)).
* Fixed UDF debugging by enabling stderr capture in `system.query_log.exception`. Previously, UDF stderr was only logged to files and not exposed in query logs, making debugging impossible. Now stderr triggers exceptions by default and is fully accumulated (up to 1MB) before throwing, so complete Python tracebacks and error messages appear in `system.query_log.exception` for effective troubleshooting. [#92209](https://github.com/ClickHouse/ClickHouse/pull/92209) ([Xu Jia](https://github.com/XuJia0210)).
* Empty column list in `JOIN USING ()` clause is now considered a syntax error. Previously it was supposed to be `INVALID_JOIN_ON_EXPRESSION` during query execution. In some cases such as joining with `Join` storage it led to `LOGICAL_ERROR`, close [#82502](https://github.com/ClickHouse/ClickHouse/issues/82502). [#92371](https://github.com/ClickHouse/ClickHouse/pull/92371) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Enable advanced shared data for JSON by default. After that change downgrade to versions <25.8 will be not possible, because these versions won't be able to read new data parts with JSON column. For safe upgrades, it's recommended to set `compatibility` setting to the previous version or set MergeTree settings `dynamic_serialization_version='v2', object_serialization_version='v2'`. [#92511](https://github.com/ClickHouse/ClickHouse/pull/92511) ([Pavel Kruglov](https://github.com/Avogar)).
* Use partial match for SKIP REGEXP in JSON type by default. Closes [#79250](https://github.com/ClickHouse/ClickHouse/issues/79250). [#92847](https://github.com/ClickHouse/ClickHouse/pull/92847) ([Pavel Kruglov](https://github.com/Avogar)).
* Revert "Allow INSERT into simple ALIAS columns" (Reverts ClickHouse/ClickHouse[#84154](https://github.com/ClickHouse/ClickHouse/issues/84154)). It does not work with custom formats, and does not guarded with a setting. [#92849](https://github.com/ClickHouse/ClickHouse/pull/92849) ([Azat Khuzhin](https://github.com/azat)).
* Setting to throw error if datalake catalog don't have access to object storage. [#93606](https://github.com/ClickHouse/ClickHouse/pull/93606) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* The `Lazy` database engine is removed and no longer available. Closes [#91231](https://github.com/ClickHouse/ClickHouse/issues/91231). [#93627](https://github.com/ClickHouse/ClickHouse/pull/93627) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove the `transposed_with_wide_view` mode of the `metric_log` - it is unusable due to a bug. It is no longer possible to define `system.metric_log` with this mode. This partially reverts [#78412](https://github.com/ClickHouse/ClickHouse/issues/78412). [#93867](https://github.com/ClickHouse/ClickHouse/pull/93867) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CPU scheduling for workloads is now preemptive by default. See `cpu_slot_preemption` server setting. [#94060](https://github.com/ClickHouse/ClickHouse/pull/94060) ([Sergei Trifonov](https://github.com/serxa)).
* Escape index filenames to prevent broken parts. With this change ClickHouse will fail to load indices with non-ascii characters in their name created by previous versions. To handle it you can use the merge tree setting `escape_index_filenames`. [#94079](https://github.com/ClickHouse/ClickHouse/pull/94079) ([Raúl Marín](https://github.com/Algunenano)).
* Format settings `exact_rows_before_limit`, `rows_before_aggregation`, `cross_to_inner_join_rewrite`, `regexp_dict_allow_hyperscan`, `regexp_dict_flag_case_insensitive`, `regexp_dict_flag_dotall` and `dictionary_use_async_executor` were changed to be regular (non-format) settings now. This is a purely internal change without user-visible side effects except in the (unlikely) case that you specified any of these settings in Iceberg or DeltaLake or Kafka or S3 or S3Queue or Azure or Hive or RabbitMQ or Set or FileLog or NATS table engine definitions. In these cases, these settings were previously ignored, now such definitions throw an error. [#94106](https://github.com/ClickHouse/ClickHouse/pull/94106) ([Robert Schulze](https://github.com/rschu1ze)).
* The `joinGet/joinGetOrNull` functions now enforce `SELECT` privileges on the underlying Join table. After this change, executing `joinGet('db.table', 'column', key)` requires the user to have `SELECT` privilege on both the key columns defined in the Join table and the attribute column being retrieved. Queries lacking these privileges will fail with `ACCESS_DENIED`. To migrate, grant the necessary permissions using `GRANT SELECT ON db.join_table TO user` for full table access, or `GRANT SELECT(key_col, attr_col) ON db.join_table TO user` for column-level access. This change affects all users and applications relying on `joinGet`/`joinGetOrNull` where explicit `SELECT` grants were not previously configured. [#94307](https://github.com/ClickHouse/ClickHouse/pull/94307) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Check `SHOW COLUMNS` for `CREATE TABLE ... AS ...` queries. Previously, it checked `SHOW TABLES`, which is an incorrect grant for this type of permission check. [#94556](https://github.com/ClickHouse/ClickHouse/pull/94556) ([pufit](https://github.com/pufit)).

#### New Feature
* HTTP API and embedded Web UI for CH Keeper. [#78181](https://github.com/ClickHouse/ClickHouse/pull/78181) ([pufit](https://github.com/pufit)).
* Distributed index analysis on multiple replicas. Beneficial for shared storage and huge amount of data in cluster. [#86786](https://github.com/ClickHouse/ClickHouse/pull/86786) ([Azat Khuzhin](https://github.com/azat)).
* With `<interactive_history_legacy_keymap>true</interactive_history_legacy_keymap>`, the CLI client can now fall back to Ctrl R for regular search like before, while Ctrl T does fuzzy search. [#87785](https://github.com/ClickHouse/ClickHouse/pull/87785) ([Larry Snizek](https://github.com/larry-cdn77)).
* Async insert deduplication now works with dependent materialized views. When collision by block_id occurs, the original block is filtered to remove rows associated with the block_id, and the remaining rows are transformed with all relevant materialized views select queries, this rebuilds original block without conflicting rows. [#89140](https://github.com/ClickHouse/ClickHouse/pull/89140) ([Sema Checherinda](https://github.com/CheSema)).
* Added the ability for clickhouse client to override TLS SNI when connecting to the server. [#89761](https://github.com/ClickHouse/ClickHouse/pull/89761) ([Matt Klein](https://github.com/mattklein123)).
* Add text index support for Array columns. [#89895](https://github.com/ClickHouse/ClickHouse/pull/89895) ([Jimmy Aguilar Mena](https://github.com/Ergus)).
* New system table zookeeper_info. Fixes [#88014](https://github.com/ClickHouse/ClickHouse/issues/88014). [#90809](https://github.com/ClickHouse/ClickHouse/pull/90809) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Implement FunctionVariantAdaptor to support variant type in functions. [#90900](https://github.com/ClickHouse/ClickHouse/pull/90900) ([Bharat Nallan](https://github.com/bharatnc)).
* Adds a `ClickHouse_Info` metric to the Prometheus `/metrics` endpoint containing mainly version information so it's possible to build charts tracking detailed version information over time. [#91125](https://github.com/ClickHouse/ClickHouse/pull/91125) ([Christoph Wurm](https://github.com/cwurm)).
* Introduce a new four letter `rcfg` command for keeper which allows to change cluster configuration. This command provides broader possibilities for configuration changes than standard `reconfigure` request. Command takes `json` string as an argument. The whole set of bytes sent to TCP interface should look like this: `rcfg{json_string_length_big_endian}{json_string}`. Some examples of command may look like this: `{"preconditions": {"leaders": [1, 2], "members": [1, 2, 3, 4, 5]}, "actions": [{"transfer_leadership": [3]}, {"remove_members": [1, 2]}, {"set_priority": [{"id": 4, "priority": 100}, {"id": 5, "priority": 100}]}, {"transfer_leadership": [4, 5]}, {"set_priority": [{"id": 3, "priority": 0}]}]}`. [#91354](https://github.com/ClickHouse/ClickHouse/pull/91354) ([alesapin](https://github.com/alesapin)).
* Add function `reverseBySeparator` which reverses the order of substrings in a string separated by a specified separator. Close [#91463](https://github.com/ClickHouse/ClickHouse/issues/91463). [#91780](https://github.com/ClickHouse/ClickHouse/pull/91780) ([Xuewei Wang](https://github.com/Sallery-X)).
* Introduced a new syntax and framework to simplify and extend projection index feature. This follows up https://github.com/ClickHouse/ClickHouse/pull/81021. [#91844](https://github.com/ClickHouse/ClickHouse/pull/91844) ([Amos Bird](https://github.com/amosbird)).
* Support paimon rest catalog, continuing from https://github.com/ClickHouse/ClickHouse/pull/84423. [#92011](https://github.com/ClickHouse/ClickHouse/pull/92011) ([JIaQi Tang](https://github.com/JiaQiTang98)).
* Adds new setting `max_insert_block_size_bytes` which control the formation of inserted blocks in finer detail. [#92833](https://github.com/ClickHouse/ClickHouse/pull/92833) ([Kirill Kopnev](https://github.com/Fgrtue)).
* It is possible to execute DDL queries with `ON CLUSTER` clause for a Replicated database if the `ignore_on_cluster_for_replicated_database` setting is enabled. In this case, the cluster name will be ignored. [#92872](https://github.com/ClickHouse/ClickHouse/pull/92872) ([Kirill](https://github.com/kirillgarbar)).
* Implement `mergeTreeAnalyzeIndex()` function. [#92954](https://github.com/ClickHouse/ClickHouse/pull/92954) ([Azat Khuzhin](https://github.com/azat)).
* Add new setting `use_primary_key`. Set it to `false` to disable granule pruning based on the primary key. [#93319](https://github.com/ClickHouse/ClickHouse/pull/93319) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* `icebergLocalCluster` table function. [#93323](https://github.com/ClickHouse/ClickHouse/pull/93323) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Datalakes prewhere & multistage prewhere in parquet reader v3 resolves [#89101](https://github.com/ClickHouse/ClickHouse/issues/89101). [#93542](https://github.com/ClickHouse/ClickHouse/pull/93542) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Added `cosineDistanceTransposed` function that approximates the [cosine distance](https://en.wikipedia.org/wiki/Cosine_similarity#Cosine_distance) between two points. [#93621](https://github.com/ClickHouse/ClickHouse/pull/93621) ([Raufs Dunamalijevs](https://github.com/rienath)).
* The previous statement to clear caches `SYSTEM DROP [...] CACHE` gave the false impression that the statement disables the cache. ClickHouse now supports statement `SYSTEM CLEAR [...] CACHE` which is more obvious. The old syntax remains available. [#93727](https://github.com/ClickHouse/ClickHouse/pull/93727) ([Pranav Tiwari](https://github.com/pranavt84)).
* Add files column to system.parts table that shows the number of files in each data part. [#94337](https://github.com/ClickHouse/ClickHouse/pull/94337) ([Match](https://github.com/gayanMatch)).
* Adds a max-min fair scheduler for concurrency control. Provides better fairness under high oversubscription, where many queries compete for limited CPU slots. Short-running queries are not penalized by long-running queries that have accumulated more slots over time. Enabled by the `concurrent_threads_scheduler` server setting `max_min_fair` value. [#94732](https://github.com/ClickHouse/ClickHouse/pull/94732) ([Sergei Trifonov](https://github.com/serxa)).

#### Experimental Feature
* Add support for `Nullable(Tuple)`. Set `allow_experimental_nullable_tuple_type = 1` to enable it. [#89643](https://github.com/ClickHouse/ClickHouse/pull/89643) ([Nihal Z. Miaji](https://github.com/nihalzp)).

#### Performance Improvement
* More filters pushed down JOINs. [#85556](https://github.com/ClickHouse/ClickHouse/pull/85556) ([Nikita Taranov](https://github.com/nickitat)).
* Disabled sort order optimization for window functions when partition by matches or is a prefix of the sorting key, improving parallel execution performance. [#87299](https://github.com/ClickHouse/ClickHouse/pull/87299) ([Nikita Taranov](https://github.com/nickitat)).
* Outer filter is pushed down into view which allows applying PREWHERE on local and remote nodes. Resolves [#88189](https://github.com/ClickHouse/ClickHouse/issues/88189). [#88316](https://github.com/ClickHouse/ClickHouse/pull/88316) ([Igor Nikonov](https://github.com/devcrafter)).
* Implement JIT compilations for more functions. Closes [#73509](https://github.com/ClickHouse/ClickHouse/issues/73509). [#88770](https://github.com/ClickHouse/ClickHouse/pull/88770) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Optimize performance and memory usage for fractional `LIMIT` and `OFFSET`. [#91167](https://github.com/ClickHouse/ClickHouse/pull/91167) ([Ahmed Gouda](https://github.com/0xgouda)).
* Fix using of faster random read logic for Parquet Reader V3 Prefetcher. Closes [#90890](https://github.com/ClickHouse/ClickHouse/issues/90890). [#91435](https://github.com/ClickHouse/ClickHouse/pull/91435) ([Arsen Muk](https://github.com/arsenmuk)).
* Improve performance of `icebergCluster`. Closes [#91462](https://github.com/ClickHouse/ClickHouse/issues/91462). [#91537](https://github.com/ClickHouse/ClickHouse/pull/91537) ([Yang Jiang](https://github.com/Ted-Jiang)).
* Don't filter by virtual columns on constant filters. [#91588](https://github.com/ClickHouse/ClickHouse/pull/91588) ([c-end](https://github.com/c-end)).
* Improve performance of `DISTINCT` on `LowCardinality` columns. Closes [#5917](https://github.com/ClickHouse/ClickHouse/issues/5917). [#91639](https://github.com/ClickHouse/ClickHouse/pull/91639) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Optimize distinctJSONPaths aggregate function so it reads only JSON paths from data parts and not the whole JSON column. [#92196](https://github.com/ClickHouse/ClickHouse/pull/92196) ([Pavel Kruglov](https://github.com/Avogar)).
* Reduce INSERT/merges memory usage with wide parts for very wide tables by enabling adaptive write buffers. Add support of adaptive write buffers for encrypted disks. [#92250](https://github.com/ClickHouse/ClickHouse/pull/92250) ([Azat Khuzhin](https://github.com/azat)).
* Support more cases for push down from join ON condition when the filter uses inputs only from one side. Support `ANY`, `SEMI`, `ANTI` joins. [#92584](https://github.com/ClickHouse/ClickHouse/pull/92584) ([Dmitry Novik](https://github.com/novikd)).
* Allow using equivalent sets to push down filters for `SEMI JOIN`. Closes [#85239](https://github.com/ClickHouse/ClickHouse/issues/85239). [#92837](https://github.com/ClickHouse/ClickHouse/pull/92837) ([Dmitry Novik](https://github.com/novikd)).
* Improved performance of full text search with text index and `sparseGrams` tokenizer by reducing the number of searched tokens in the index. [#93078](https://github.com/ClickHouse/ClickHouse/pull/93078) ([Anton Popov](https://github.com/CurtizJ)).
* Using the "fastrange" (Daniel Lemire) method for partitioning data inside the query pipeline. This could improve parallel sorting and JOINs. [#93080](https://github.com/ClickHouse/ClickHouse/pull/93080) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Optimize `uniqExact` in the case when identical elements often come consecutively. [#93268](https://github.com/ClickHouse/ClickHouse/pull/93268) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Function `isValidASCII` was optimized for positive outcomes, i.e. all-ASCII input values. [#93347](https://github.com/ClickHouse/ClickHouse/pull/93347) ([Robert Schulze](https://github.com/rschu1ze)).
* Function `isValidASCII` was optimized for positive outcomes, i.e. all-ASCII input values. [#93611](https://github.com/ClickHouse/ClickHouse/pull/93611) ([Robert Schulze](https://github.com/rschu1ze)).
* Skip reading left side of hash join when right side is empty. Previously we were reading left side until first non-empty block, which might do a lot of work in case when there is heavy filtering or aggregation. [#94062](https://github.com/ClickHouse/ClickHouse/pull/94062) ([Alexander Gololobov](https://github.com/davenger)).
* The read-in-order optimization now recognizes when ORDER BY columns are constant due to WHERE conditions, enabling efficient reverse-order reads. This benefits multi-tenant queries like \`WHERE tenant='42' ORDER BY tenant, event_time DESC\` which can now use InReverseOrder instead of requiring a full sort.". [#94103](https://github.com/ClickHouse/ClickHouse/pull/94103) ([matanper](https://github.com/matanper)).
* Introduce Enum AST specialized class to store value parameters in string,integer pairs instead of ASTLiteral children to optimize memory consumption. [#94178](https://github.com/ClickHouse/ClickHouse/pull/94178) ([Ilya Yatsishin](https://github.com/qoega)).

#### Improvement
* Support multiple columns as primary key in StorageEmbeddedRocksDB. Closes [#32819](https://github.com/ClickHouse/ClickHouse/issues/32819). [#33917](https://github.com/ClickHouse/ClickHouse/pull/33917) ([usurai](https://github.com/usurai)).
* Prevent `x-amz-server-side-encryption` headers from being propagated to `HeadObject`, `UploadPart` & `CompleteMultipartUpload` S3 requests as they're not supported. [#64577](https://github.com/ClickHouse/ClickHouse/pull/64577) ([Francisco J. Jurado Moreno](https://github.com/Beetelbrox)).
* Added syntax `ALTER TABLE <table> ATTACH PART <part_name> FROM <directory_name>` for `ALTER` query. It allows the attachment of parts from the arbitrary subdirectory of the `detached/` directory. It can be useful for attaching parts with custom prefixes (such as `broken-on-start`, `unexpected`, etc.) that were detached by mistake and needed only to be attached back without manual intervention. Previously, manual renaming of directories on the filesystem was required. [#74816](https://github.com/ClickHouse/ClickHouse/pull/74816) ([Anton Popov](https://github.com/CurtizJ)).
* Tracking hive partitioning for ordered mode in S3Queue. Resolves [#71161](https://github.com/ClickHouse/ClickHouse/issues/71161). [#81040](https://github.com/ClickHouse/ClickHouse/pull/81040) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Optimize space reservation in filesystem cache. FileCache::collectCandidatesForEviction will be executed without unique lock. [#82764](https://github.com/ClickHouse/ClickHouse/pull/82764) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Support composite rotation strategy (size + time) for server log. [#87620](https://github.com/ClickHouse/ClickHouse/pull/87620) ([Jianmei Zhang](https://github.com/zhangjmruc)).
* CLI client can now specify `<warnings>false</warnings>` instead of the command line `--no-warnings`. [#87783](https://github.com/ClickHouse/ClickHouse/pull/87783) ([Larry Snizek](https://github.com/larry-cdn77)).
* Add support for the `avg()` aggregate function with Date, DateTime and Time values as arguments. Closes [#82267](https://github.com/ClickHouse/ClickHouse/issues/82267). [#87845](https://github.com/ClickHouse/ClickHouse/pull/87845) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* The optimization use_join_disjunctions_push_down is enabled by default. [#89313](https://github.com/ClickHouse/ClickHouse/pull/89313) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Support more table engines and data source kinds in the correlated subqueries. Closes [#80775](https://github.com/ClickHouse/ClickHouse/issues/80775). [#90175](https://github.com/ClickHouse/ClickHouse/pull/90175) ([Dmitry Novik](https://github.com/novikd)).
* If the schema of parameterized view is specified explicitly it is shown. Close [#88875](https://github.com/ClickHouse/ClickHouse/issues/88875), [#81385](https://github.com/ClickHouse/ClickHouse/issues/81385). [#90220](https://github.com/ClickHouse/ClickHouse/pull/90220) ([Grigorii Sokolik](https://github.com/GSokol)).
* Correctly handle gap in Keeper log entries if logs are before the last committed index. [#90403](https://github.com/ClickHouse/ClickHouse/pull/90403) ([Antonio Andelic](https://github.com/antonio2368)).
* Enable `use_variant_as_common_type` by default, which lets you use incompatible types inside an `Array`, in `UNION` queries, and in branches of `if`/`multiIf`/`case`. [#90677](https://github.com/ClickHouse/ClickHouse/pull/90677) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Improve `min_free_disk_bytes_to_perform_insert` setting to work correctly with JBOD volumes. [#90878](https://github.com/ClickHouse/ClickHouse/pull/90878) ([Aleksandr Musorin](https://github.com/AVMusorin)).
* Use an in-memory buffer for correlated subqueries input to avoid evaluating it multiple times. Part of [#79890](https://github.com/ClickHouse/ClickHouse/issues/79890). [#91205](https://github.com/ClickHouse/ClickHouse/pull/91205) ([Dmitry Novik](https://github.com/novikd)).
* Allow all replicas to steal orphaned ranges in parallel replicas reading. This improves load balancing and reduces long-tail latency. [#91374](https://github.com/ClickHouse/ClickHouse/pull/91374) ([zoomxi](https://github.com/zoomxi)).
* Reduce overhead of join runtime filters by disabling them in the following cases: - too many bits are set in the bloom filter - too few rows are filtered out at runtime. [#91578](https://github.com/ClickHouse/ClickHouse/pull/91578) ([Alexander Gololobov](https://github.com/davenger)).
* Make it possible to specify `storage_class_name` setting in named collections for `S3` table engine and `s3` table function. [#91926](https://github.com/ClickHouse/ClickHouse/pull/91926) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Support inserting auxiliary zookeeper by system.zookeeper. [#92092](https://github.com/ClickHouse/ClickHouse/pull/92092) ([RinChanNOW](https://github.com/RinChanNOWWW)).
* Add new metrics for the keeper: `KeeperChangelogWrittenBytes`, `KeeperChangelogFileSyncMicroseconds`, `KeeperSnapshotWrittenBytes` and `KeeperSnapshotFileSyncMicroseconds` profile events as well as `KeeperBatchSizeElements` and `KeeperBatchSizeBytes` histogram metrics. [#92149](https://github.com/ClickHouse/ClickHouse/pull/92149) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Add a new setting, `trace_profile_events_list`, which limits tracing with `trace_profile_event` to the specified list of event names. This allows more precise data collection on large workloads. [#92298](https://github.com/ClickHouse/ClickHouse/pull/92298) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Support SYSTEM NOTIFY FAILPOINT for pausable failpoints. - Support SYSTEM WAIT FAILPOINT fp PAUSE/RESUME. [#92368](https://github.com/ClickHouse/ClickHouse/pull/92368) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Add a creation (implicit/explicit) column to system.data_skipping_indices. [#92378](https://github.com/ClickHouse/ClickHouse/pull/92378) ([Raúl Marín](https://github.com/Algunenano)).
* External aggregation/sorting/join now respect query setting temporary_files_codec in all contexts. Fixed missing profile events for grace hash join. [#92388](https://github.com/ClickHouse/ClickHouse/pull/92388) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Allow passing the description of columns for YTsaurus dyn tables to the dictionary source. [#92391](https://github.com/ClickHouse/ClickHouse/pull/92391) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* In https://github.com/ClickHouse/ClickHouse/pull/63985, we made it possible to specify all the parameters needed for TLS configuration on a per-port basis (see [composable protocols](https://clickhouse.com/docs/operations/settings/composable-protocols)), so we don't have to rely on global TLS config. However, the implementation still implicitly requires a global `openSSL.server` config section to exist, which conflicts with setups where different TLS configurations are needed for different ports. For example, in keeper-in-server deployments, we need separate TLS configs for inter-keeper communication and clickhouse client connections. [#92457](https://github.com/ClickHouse/ClickHouse/pull/92457) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Make query memory usage detection for spilling to disk during aggregation/sorting more robust. [#92500](https://github.com/ClickHouse/ClickHouse/pull/92500) ([Azat Khuzhin](https://github.com/azat)).
* Introduce a new setting `input_format_binary_max_type_complexity` that limits the total number of type nodes that can be decoded in binary format to prevent malicious payloads. [#92519](https://github.com/ClickHouse/ClickHouse/pull/92519) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Reflect running tasks in system.background_schedule_pool{,_log}. Add documentation. [#92587](https://github.com/ClickHouse/ClickHouse/pull/92587) ([Azat Khuzhin](https://github.com/azat)).
* Execute current query in Ctrl+R search in client if no history match found. [#92749](https://github.com/ClickHouse/ClickHouse/pull/92749) ([Azat Khuzhin](https://github.com/azat)).
* Support `EXPLAIN indices = 1` as an alias for `EXPLAIN indexes = 1`. Closes [#92483](https://github.com/ClickHouse/ClickHouse/issues/92483). [#92774](https://github.com/ClickHouse/ClickHouse/pull/92774) ([Pranav Tiwari](https://github.com/pranavt84)).
* Estimate total rows count and NDV(number of distinct values) statistics of aggregation key columns. [#92812](https://github.com/ClickHouse/ClickHouse/pull/92812) ([Alexander Gololobov](https://github.com/davenger)).
* Parquet reader now allows reading Tuple or Map columns as JSON: `select x from file(f.parquet, auto, 'x JSON')` works even if the type of column `x` in `f.parquet` is tuple or map. [#92864](https://github.com/ClickHouse/ClickHouse/pull/92864) ([Michael Kolupaev](https://github.com/al13n321)).
* Support empty tuples in parquet reader. [#92868](https://github.com/ClickHouse/ClickHouse/pull/92868) ([Michael Kolupaev](https://github.com/al13n321)).
* Optimize postings list compression with simdcomp. [#92871](https://github.com/ClickHouse/ClickHouse/pull/92871) ([Peng Jian](https://github.com/fastio)).
* Fallback to read-write copy for Azure Blob Storage when native copy fails with BadRequest (e.g. invalid block list). Previously this was only done for Unauthorized error which was seen while copying blob to different storage accounts. But we also sometimes see "The specified block list is invalid" error. So now updated the condition to fallback to read & write for all native copy fails. [#92888](https://github.com/ClickHouse/ClickHouse/pull/92888) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Refactor S3Queue Ordered mode processing with buckets. This should also improve performance, reducing the number of keeper requests. [#92889](https://github.com/ClickHouse/ClickHouse/pull/92889) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix EC2 metadata endpoint throttling when running many concurrent S3 queries with EC2 instance profile credentials. Previously, each query created its own `AWSInstanceProfileCredentialsProvider`, causing concurrent requests to the EC2 metadata service which could result in timeouts and `HTTP response code: 403` errors. Now the credentials provider is cached and shared across all queries. [#92891](https://github.com/ClickHouse/ClickHouse/pull/92891) ([Sav](https://github.com/sberss)).
* Rework insert_select_deduplicate setting to add an ability to keep backward compatibility. [#92951](https://github.com/ClickHouse/ClickHouse/pull/92951) ([Sema Checherinda](https://github.com/CheSema)).
* Log background tasks that are slower than average (`background_schedule_pool_log.duration_threshold_milliseconds=30`) to avoid excessive tasks logging. [#92965](https://github.com/ClickHouse/ClickHouse/pull/92965) ([Azat Khuzhin](https://github.com/azat)).
* Support temporary tables in `joinGet` function calls. [#92973](https://github.com/ClickHouse/ClickHouse/pull/92973) ([Eduard Karacharov](https://github.com/korowa)).
* Functions `mapContainsKeyLike` and `mapContainsValueLike` can now leverage a text index on `mapKeys()` or `mapValues()`, respectively. [#93049](https://github.com/ClickHouse/ClickHouse/pull/93049) ([Michael Jarrett](https://github.com/EmeraldShift)).
* In previous versions, some of C++ function names were displayed incorrectly ("mangled") in the `system.trace_log` and `system.symbols`, and the `demangle` function didn't process them well. Closes [#93074](https://github.com/ClickHouse/ClickHouse/issues/93074). [#93075](https://github.com/ClickHouse/ClickHouse/pull/93075) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Introduced the `backup_data_from_refreshable_materialized_view_targets` backup setting to skip back up of refreshable materialized views. RMVs with APPEND refresh strategy which are always backed up. [#93076](https://github.com/ClickHouse/ClickHouse/pull/93076) ([Julia Kartseva](https://github.com/jkartseva)).
* Use minimal debug info instead of no debug info for heavy translation units, such as functions. [#93079](https://github.com/ClickHouse/ClickHouse/pull/93079) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Added MinIO compatibility support to AWS S3 C++ SDK by implementing error code mapping for MinIO-specific errors. This change allows ClickHouse to properly handle and retry MinIO server errors when using MinIO deployments instead of AWS S3, improving reliability for users running object storage on self-hosted MinIO clusters. [#93082](https://github.com/ClickHouse/ClickHouse/pull/93082) ([XiaoBinMu](https://github.com/Binnn-MX)).
* Write symbolized jemalloc profiles (eliminating the need for a binary during heap profile generation). [#93099](https://github.com/ClickHouse/ClickHouse/pull/93099) ([Azat Khuzhin](https://github.com/azat)).
* `system.blob_storage_log` is now available for Azure Blob Storage. [#93105](https://github.com/ClickHouse/ClickHouse/pull/93105) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Implement `blob_storage_log` for Local and HDFS. Fix an error when `S3Queue` used something other than the disk name for logging in `blob_storage_log`. Add `error_code` column to `blob_storage_log`. Split the test configuration file to simplify local testing. [#93106](https://github.com/ClickHouse/ClickHouse/pull/93106) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* `clickhouse-client` and `clickhouse-local` will highlight digit groups (thousands, millions, etc.) inside numeric literals while typing. This closes [#93100](https://github.com/ClickHouse/ClickHouse/issues/93100). [#93108](https://github.com/ClickHouse/ClickHouse/pull/93108) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Adds support in `clickhouse-client` for command-line arguments with a space surrounding the equals sign. Closes [#93077](https://github.com/ClickHouse/ClickHouse/issues/93077). [#93174](https://github.com/ClickHouse/ClickHouse/pull/93174) ([Cole Smith](https://github.com/colesmith54)).
* Resurrect `clickhouse git-import` tool - it was broken on large and invalid commits. See https://presentations.clickhouse.com/2020-matemarketing/. [#93202](https://github.com/ClickHouse/ClickHouse/pull/93202) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Don't show passwords from URL storage in query log. [#93245](https://github.com/ClickHouse/ClickHouse/pull/93245) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Support geometry type for `flipCoordinates`. [#93303](https://github.com/ClickHouse/ClickHouse/pull/93303) ([Bharat Nallan](https://github.com/bharatnc)).
* Improve the UX of SYSTEM INSTRUMENT ADD/REMOVE: use String literals for function names, patch all functions that match and allow using function_name in `REMOVE`. [#93345](https://github.com/ClickHouse/ClickHouse/pull/93345) ([Pablo Marcos](https://github.com/pamarcos)).
* Reduce memory usage on non-Linux systems (enable immediate purging of jemalloc dirty pages). [#93360](https://github.com/ClickHouse/ClickHouse/pull/93360) ([Eduard Karacharov](https://github.com/korowa)).
* Add a new setting `materialize_statistics_on_merge` which enables/disables materializing statistics during merge. The default value is `1`. [#93379](https://github.com/ClickHouse/ClickHouse/pull/93379) ([Han Fei](https://github.com/hanfei1991)).
* Setting `use_skip_indexes_on_data_read` is now enabled by default. This. [#93407](https://github.com/ClickHouse/ClickHouse/pull/93407) ([Shankar Iyer](https://github.com/shankar-iyer)).
* ClickHouse can now parse `SELECT` without parentheses around `DESCRIBE SELECT` queries. Closes [#58382](https://github.com/ClickHouse/ClickHouse/issues/58382). [#93429](https://github.com/ClickHouse/ClickHouse/pull/93429) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Add randomization of cache correctness checks under probability. [#93439](https://github.com/ClickHouse/ClickHouse/pull/93439) ([Kseniia Sumarokova](https://github.com/kssenii)).
* It is now possible to use non-constant IN for scalars (queries like `val1 NOT IN if(cond, val2, val3)`). [#93495](https://github.com/ClickHouse/ClickHouse/pull/93495) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Force purging of jemalloc arenas in case the ratio of dirty pages size to `max_server_memory_usage` exceeds `memory_worker_purge_dirty_pages_threshold_ratio`. [#93500](https://github.com/ClickHouse/ClickHouse/pull/93500) ([Eduard Karacharov](https://github.com/korowa)).
* Make the `test_merges_memory_limit` integration test less flaky. [#93532](https://github.com/ClickHouse/ClickHouse/pull/93532) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Reduce memory usage for AST. [#93601](https://github.com/ClickHouse/ClickHouse/pull/93601) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Add setting type_json_allow_duplicated_key_with_literal_and_nested_object to allow duplicated paths in JSON where one is a literal and another is a nested object, e.g. {"a" : 42, "a" : {"b" : 42}}. Some data could be created before this restriction on duplicated paths was added in https://github.com/ClickHouse/ClickHouse/pull/79317 and further manipulation with this data can lead to errors now. With this setting, such old data cane still be used with no errors. [#93604](https://github.com/ClickHouse/ClickHouse/pull/93604) ([Pavel Kruglov](https://github.com/Avogar)).
* Introduced `backup_data_from_refreshable_materialized_view_targets` backup setting to control whether to back up data of refreshable materialized views. Targets of RMVs with APPEND refresh strategy are always backed up. [#93658](https://github.com/ClickHouse/ClickHouse/pull/93658) ([Julia Kartseva](https://github.com/jkartseva)).
* In some cases we've seen ClickHouse doesn't respect a memory limit when reading from a table. This behaviour is fixed. [#93715](https://github.com/ClickHouse/ClickHouse/pull/93715) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Move `QBit` from Experimental to Beta. [#93816](https://github.com/ClickHouse/ClickHouse/pull/93816) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Don't print values of simple types on separate lines in Pretty JSON. [#93836](https://github.com/ClickHouse/ClickHouse/pull/93836) ([Pavel Kruglov](https://github.com/Avogar)).
* Support deletion vectors in `DeltaLake` table engine. [#93852](https://github.com/ClickHouse/ClickHouse/pull/93852) ([Kseniia Sumarokova](https://github.com/kssenii)).
* When there are many `alter table ... modify setting ...` statements, it's possible not to aquire lock for 5 seconds. better to return `timeout` than `logical error`. [#93856](https://github.com/ClickHouse/ClickHouse/pull/93856) ([Han Fei](https://github.com/hanfei1991)).
* Google cloud storage support for data lakes. [#93866](https://github.com/ClickHouse/ClickHouse/pull/93866) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Prevent excessive output on a syntax error. Before this change, it output the whole SQL script, which could contain a lot of queries. [#93876](https://github.com/ClickHouse/ClickHouse/pull/93876) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable `CHECK_STAT` and `TRY_REMOVE` Keeper extension by default. [#93886](https://github.com/ClickHouse/ClickHouse/pull/93886) ([Mikhail Artemenko](https://github.com/Michicosun)).
* If a skip index used in a `FINAL` query is on a column that is part of the primary key, the additional step to check for primary key intersection in other parts is unnecessary and now not performed. Resolves [#85897](https://github.com/ClickHouse/ClickHouse/issues/85897). [#93899](https://github.com/ClickHouse/ClickHouse/pull/93899) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Do proper byte size calculation of the check request with stats. [#93907](https://github.com/ClickHouse/ClickHouse/pull/93907) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Added `use_hash_table_stats_for_join_reordering` setting to control whether runtime hash table size statistics are used for join reordering. This setting is enabled by default, preserving the existing behavior of `collect_hash_table_stats_during_joins`. [#93912](https://github.com/ClickHouse/ClickHouse/pull/93912) ([Vladimir Cherkasov](https://github.com/vdimir)).
* It is allowed to use deduplication with async inserts when materialized views are involved. [#93957](https://github.com/ClickHouse/ClickHouse/pull/93957) ([Sema Checherinda](https://github.com/CheSema)).
* In this PR we add parsing of information in Iceberg manifest file entries about lower and upper bounds of file names corresponding to position deletes for better selection of corresponding data files. [#93980](https://github.com/ClickHouse/ClickHouse/pull/93980) ([Daniil Ivanik](https://github.com/divanik)).
* Users can now partially view nested global server settings in the `system.server_settings` table (e.g. `logger.level`). This only covers settings with a fixed structure (no lists, enumerations, repetitions etc.). [#94001](https://github.com/ClickHouse/ClickHouse/pull/94001) ([Hechem Selmi](https://github.com/m-selmi)).
* `QBit` can now be compared for equality. [#94078](https://github.com/ClickHouse/ClickHouse/pull/94078) ([Raufs Dunamalijevs](https://github.com/rienath)).
* When Keeper detects broken snapshot or inconsistent changelogs, throw exception instead of manually aborting or cleaning up files automatically. This should lead to a safer behaviour of Keeper relying on manual intervention. [#94168](https://github.com/ClickHouse/ClickHouse/pull/94168) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix leaving possible leftovers in case of `CREATE TABLE` fails. [#94174](https://github.com/ClickHouse/ClickHouse/pull/94174) ([Azat Khuzhin](https://github.com/azat)).
* Fix uninitialized memory access when password protected TLS key is used. [#94182](https://github.com/ClickHouse/ClickHouse/pull/94182) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Add 2 more settings to control maximum number of dynamic subcolumns in JSON column. First is MergeTree setting `merge_max_dynamic_subcolumns_in_compact_part` (simiar to already added `merge_max_dynamic_subcolumns_in_wide_part`) that limits number of dynamic subcolumns created during merge into a Compact part. Second is query level setting `max_dynamic_subcolumns_in_json_type_parsing` that limits number of dynamic subcolumns created during parsing of JSON data, it will allow to specify the limit on insert. [#94184](https://github.com/ClickHouse/ClickHouse/pull/94184) ([Pavel Kruglov](https://github.com/Avogar)).
* Slightly optimize squashing of JSON columns for some cases. [#94247](https://github.com/ClickHouse/ClickHouse/pull/94247) ([Pavel Kruglov](https://github.com/Avogar)).
* Bump chdig to [v26.1.1](https://github.com/azat/chdig/releases/tag/v26.1.1). [#94290](https://github.com/ClickHouse/ClickHouse/pull/94290) ([Azat Khuzhin](https://github.com/azat)).
* Support more generic partitioning for S3Queue ordered mode. [#94321](https://github.com/ClickHouse/ClickHouse/pull/94321) ([Bharat Nallan](https://github.com/bharatnc)).
* Support deletion vectors for deltaLakeCluster. [#94365](https://github.com/ClickHouse/ClickHouse/pull/94365) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Added alias `use_statistics` for setting `allow_statistics_optimize`. This is more consistent with existing settings `use_primary_key` and `use_skip_indexes`. [#94366](https://github.com/ClickHouse/ClickHouse/pull/94366) ([Robert Schulze](https://github.com/rschu1ze)).
* Enabled setting `input_format_numbers_enum_on_conversion_error` for conversion from Numbers to Enums to check whether the element exists. [#94384](https://github.com/ClickHouse/ClickHouse/pull/94384) ([Elmi Ahmadov](https://github.com/ahmadov)).
* In S3(Azure)Queue Ordered mode clean up failed nodes by tracking limits (before that was done only in Unordered mode for both failed and processed, so now this will also be done for Ordered but only for failed nodes). [#94412](https://github.com/ClickHouse/ClickHouse/pull/94412) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Enable access management for `default` user in clickhouse-local. The default user in `clickhouse-local` was missing the access_management privilege, which caused operations like `DROP ROW POLICY IF EXISTS` to fail with `ACCESS_DENIED` error, even though the user should be unrestricted. [#94501](https://github.com/ClickHouse/ClickHouse/pull/94501) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Make the `Hash` output format independent of block sizes. [#94503](https://github.com/ClickHouse/ClickHouse/pull/94503) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Enable named collection for YTsaurus dictionaries and tables. [#94582](https://github.com/ClickHouse/ClickHouse/pull/94582) ([MikhailBurdukov](https://github.com/MikhailBurdukov)).
* Add support for SQL-defined named collections in BACKUP/RESTORE for S3 and Azure Blob Storage. Closes [#94604](https://github.com/ClickHouse/ClickHouse/issues/94604). [#94605](https://github.com/ClickHouse/ClickHouse/pull/94605) ([Pablo Marcos](https://github.com/pamarcos)).
* Lower the thread pool queue sizes based on the production experience. Add an explicit memory consumption check before reading any data from the MergeTree. [#94692](https://github.com/ClickHouse/ClickHouse/pull/94692) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Support bucketing based on partition key for S3Queue in ordered mode. [#94698](https://github.com/ClickHouse/ClickHouse/pull/94698) ([Bharat Nallan](https://github.com/bharatnc)).
* Share thread and memory limits between data file and position delete file readers in Iceberg tables. [#94701](https://github.com/ClickHouse/ClickHouse/pull/94701) ([Yang Jiang](https://github.com/Ted-Jiang)).
* Add an asynchronous metric with the longest running merge elapsed time. [#94825](https://github.com/ClickHouse/ClickHouse/pull/94825) ([Raúl Marín](https://github.com/Algunenano)).
* Fix symbolized jemalloc profile. [#94837](https://github.com/ClickHouse/ClickHouse/pull/94837) ([Azat Khuzhin](https://github.com/azat)).
* Make sure the scheduler would prefer MemoryWorker thread under the CPU starvation, because it protects ClickHouse process from an existential threat. [#94864](https://github.com/ClickHouse/ClickHouse/pull/94864) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* Add belonging file check before apply position delete using IcebergBitmapPositionDeleteTransform. [#94897](https://github.com/ClickHouse/ClickHouse/pull/94897) ([Yang Jiang](https://github.com/Ted-Jiang)).
* Run purging of jemalloc dirty pages in a different thread from main thread of MemoryWorker. If purging is slow, it could delay updates of RSS usage which could lead to out of memory kills of the process. Introduce new config `memory_worker_purge_total_memory_threshold_ratio` to start purging dirty pages based on ratio of total memory usage. [#94902](https://github.com/ClickHouse/ClickHouse/pull/94902) ([Antonio Andelic](https://github.com/antonio2368)).
* Now `view_duration_ms` shows the time when group was active, not the sum of the threads duration in it. [#94966](https://github.com/ClickHouse/ClickHouse/pull/94966) ([Sema Checherinda](https://github.com/CheSema)).
* Remove limit of the max number of search tokens in `hasAnyTokens` and `hasAllTokens` functions which was limited to 64. Example: `SELECT count() FROM table WHERE hasAllTokens(text, ['token_1', 'token_2', [...], 'token_65']]);` The query would result in a `BAD_ARGUMENTS` error because there are 65 search tokens. With this PR, the limit has been removed completely and the same query would run without an error. [#95152](https://github.com/ClickHouse/ClickHouse/pull/95152) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Backported in [#95367](https://github.com/ClickHouse/ClickHouse/issues/95367): Respect `max_parts_to_merge_at_once` in TTL drop part merges. [#95315](https://github.com/ClickHouse/ClickHouse/pull/95315) ([Kseniia Sumarokova](https://github.com/kssenii)).

#### Bug Fix (user-visible misbehavior in an official stable release)
* Add a setting `input_format_numbers_enum_on_conversion_error` for conversion from Numbers to Enums to check whether the element exists. Closes: [#56144](https://github.com/ClickHouse/ClickHouse/issues/56144). [#56240](https://github.com/ClickHouse/ClickHouse/pull/56240) ([Nikolay Degterinsky](https://github.com/evillique)).
* Fixes a bug where predefined query handlers would have trailing whitespace interpreted as data during inserts. [#83604](https://github.com/ClickHouse/ClickHouse/pull/83604) ([Fabian Ponce](https://github.com/FabianPonce)).
* Fix INCOMPATIBLE_TYPE_OF_JOIN error for Join storage and outer to inner join optimization applied. Resolves [#80794](https://github.com/ClickHouse/ClickHouse/issues/80794). [#84292](https://github.com/ClickHouse/ClickHouse/pull/84292) ([Vladimir Cherkasov](https://github.com/vdimir)).
* This PR is intended to resolve this issue: [#85976](https://github.com/ClickHouse/ClickHouse/issues/85976). [#86440](https://github.com/ClickHouse/ClickHouse/pull/86440) ([yanglongwei](https://github.com/ylw510)).
* Always replace file names to hash in MergeTree if filesystem is case insensitive. Previously on systems with case insensitive filesystem (like MacOS) it could lead to data corruption when several column/subcolumn names differs only in the case. [#86559](https://github.com/ClickHouse/ClickHouse/pull/86559) ([Pavel Kruglov](https://github.com/Avogar)).
* Add a full permissions check on the create stage for the underlying query inside a materialized view. [#89180](https://github.com/ClickHouse/ClickHouse/pull/89180) ([pufit](https://github.com/pufit)).
* Fixed crash in `icebergHash` function on constant argument. [#90335](https://github.com/ClickHouse/ClickHouse/pull/90335) ([Michael Kolupaev](https://github.com/al13n321)).
* Fix logical error when mutation without transaction mutates parts in an active transaction, which is rolled back finally. [#90469](https://github.com/ClickHouse/ClickHouse/pull/90469) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Update `system.warnings` correctly after an ordinary database was converted to an atomic database. [#90473](https://github.com/ClickHouse/ClickHouse/pull/90473) ([sdk2](https://github.com/sdk2)).
* Fixes an assertion when reading from Parquet file, and part of a **prewhere** expression is used elsewhere in the query. [#90635](https://github.com/ClickHouse/ClickHouse/pull/90635) ([Max Kainov](https://github.com/maxknv)).
* Fix crash in a single-node cluster when reading from Iceberg in split-by-buckets mode. This closes [#90913](https://github.com/ClickHouse/ClickHouse/issues/90913#issue-3668583963). [#91553](https://github.com/ClickHouse/ClickHouse/pull/91553) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix possible logical error in Log engine during subcolumns reading. Closes [#91710](https://github.com/ClickHouse/ClickHouse/issues/91710). [#91711](https://github.com/ClickHouse/ClickHouse/pull/91711) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix Logical error: 'Storage does not support transaction' during ATTACH AS REPLICATED. [#91772](https://github.com/ClickHouse/ClickHouse/pull/91772) ([Shaohua Wang](https://github.com/tiandiwonder)).
* Fix for runtime filters working incorrectly when LEFT ANTI JOIN has extra post-condition. [#91824](https://github.com/ClickHouse/ClickHouse/pull/91824) ([Alexander Gololobov](https://github.com/davenger)).
* Fixes an error where we have a null-safe comparison involving the Nothing type. Closes [#91834](https://github.com/ClickHouse/ClickHouse/issues/91834). Closes [#84870](https://github.com/ClickHouse/ClickHouse/issues/84870). Closes [#91821](https://github.com/ClickHouse/ClickHouse/issues/91821). [#91884](https://github.com/ClickHouse/ClickHouse/pull/91884) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fix DELTA_BYTE_ARRAY decoding bugs in native Parquet reader affecting highly repetitive string data. [#91929](https://github.com/ClickHouse/ClickHouse/pull/91929) ([Daniel Muino](https://github.com/dmuino)).
* Cache schema only for the file it was inferred from in globs instead of all files during schema inference. Closes [#91745](https://github.com/ClickHouse/ClickHouse/issues/91745). [#92006](https://github.com/ClickHouse/ClickHouse/pull/92006) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix the `Couldn't pack tar archive: Failed to write all bytes` error caused by an incorrect archive entry size header. Fixes [#89075](https://github.com/ClickHouse/ClickHouse/issues/89075). [#92122](https://github.com/ClickHouse/ClickHouse/pull/92122) ([Julia Kartseva](https://github.com/jkartseva)).
* Release request stream in insert select to prevent closing http connection. [#92175](https://github.com/ClickHouse/ClickHouse/pull/92175) ([Sema Checherinda](https://github.com/CheSema)).
* Fix logical error for queries with multiple JOINs with `USING` clause and `join_use_nulls`. [#92251](https://github.com/ClickHouse/ClickHouse/pull/92251) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix logical error while join reordering with join_use_nulls, close https://github.com/clickhouse/clickhouse/issues/90795. [#92289](https://github.com/ClickHouse/ClickHouse/pull/92289) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix inconsistent AST formatting of arrayElement with negate literal. Closes [#92288](https://github.com/ClickHouse/ClickHouse/issues/92288) Closes [#92212](https://github.com/ClickHouse/ClickHouse/issues/92212) Closes [#91832](https://github.com/ClickHouse/ClickHouse/issues/91832) Closes [#91789](https://github.com/ClickHouse/ClickHouse/issues/91789) Closes [#91735](https://github.com/ClickHouse/ClickHouse/issues/91735) Closes [#88495](https://github.com/ClickHouse/ClickHouse/issues/88495) Closes [#92386](https://github.com/ClickHouse/ClickHouse/issues/92386). [#92293](https://github.com/ClickHouse/ClickHouse/pull/92293) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix a possible crash with `join_on_disk_max_files_to_merge` setting. [#92335](https://github.com/ClickHouse/ClickHouse/pull/92335) ([Bharat Nallan](https://github.com/bharatnc)).
* Related issue #https://github.com/ClickHouse/support-escalation/issues/6365. [#92339](https://github.com/ClickHouse/ClickHouse/pull/92339) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Fix missing access check in `SYSTEM SYNC FILE CACHE`. Closes [#92101](https://github.com/ClickHouse/ClickHouse/issues/92101). [#92372](https://github.com/ClickHouse/ClickHouse/pull/92372) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix `count_distinct_optimization` pass over window functions and over multiple arguments. [#92376](https://github.com/ClickHouse/ClickHouse/pull/92376) ([Raúl Marín](https://github.com/Algunenano)).
* ... [#92395](https://github.com/ClickHouse/ClickHouse/pull/92395) ([Jimmy Aguilar Mena](https://github.com/Ergus)).
* Fix logical error with `CREATE TABLE ... AS urlCluster()` and database engine `Replicated`. Closes [#92216](https://github.com/ClickHouse/ClickHouse/issues/92216). [#92418](https://github.com/ClickHouse/ClickHouse/pull/92418) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Inherit source part serialization info settings during mutation in MergeTree. It fixes possible incorrect result of the query over mutated part after changes in data types serialization. [#92419](https://github.com/ClickHouse/ClickHouse/pull/92419) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possible conflict in column and subcolumn with the same name leading in using wrong serialization and query failures. Closes [#90219](https://github.com/ClickHouse/ClickHouse/issues/90219). Closes [#85161](https://github.com/ClickHouse/ClickHouse/issues/85161). [#92453](https://github.com/ClickHouse/ClickHouse/pull/92453) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix a `LOGICAL_ERROR`s that caused by not wanted modification of query plan when converting outer join to inner join. Also relax the requirements of optimization to be able to apply it in cases when injective functions are applied to the aggregating keys during joins. [#92503](https://github.com/ClickHouse/ClickHouse/pull/92503) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Fix possible error `SIZES_OF_COLUMNS_DOESNT_MATCH` during sorting of emty tuple column. Closes [#92422](https://github.com/ClickHouse/ClickHouse/issues/92422). [#92520](https://github.com/ClickHouse/ClickHouse/pull/92520) ([Pavel Kruglov](https://github.com/Avogar)).
* Check for incompatible typed paths in JSON type. Closes [#91577](https://github.com/ClickHouse/ClickHouse/issues/91577). [#92539](https://github.com/ClickHouse/ClickHouse/pull/92539) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix deadlock for SHOW CREATE DATABASE for Backup database. [#92541](https://github.com/ClickHouse/ClickHouse/pull/92541) ([Azat Khuzhin](https://github.com/azat)).
* Use proper error code when validating hypothesis index. [#92559](https://github.com/ClickHouse/ClickHouse/pull/92559) ([Raúl Marín](https://github.com/Algunenano)).
* Fix dynamic subcolumns resolution in column aliases in analyzer. Previously dynamic subcolumn in column alias was wrapped in `getSubcolumn` and in some cases could be not resolved at all. Closes [#91434](https://github.com/ClickHouse/ClickHouse/issues/91434). [#92583](https://github.com/ClickHouse/ClickHouse/pull/92583) ([Pavel Kruglov](https://github.com/Avogar)).
* Prevent crash in tokens() with null second argument. [#92586](https://github.com/ClickHouse/ClickHouse/pull/92586) ([Raúl Marín](https://github.com/Algunenano)).
* Fix potential crash caused by in place mutation of underlying const PREWHERE columns. This could've happened at column shrinking (`IColumn::shrinkToFit`) or filtering (`IColumn::filter`), which could've triggered concurrently from several threads. [#92588](https://github.com/ClickHouse/ClickHouse/pull/92588) ([Arsen Muk](https://github.com/arsenmuk)).
* Creating and materializing text indexes on tables containing large parts (over 4,294,967,295 rows) is temporarily disabled. This limitation prevents incorrect query results, as the current index implementation does not yet support such large parts. [#92644](https://github.com/ClickHouse/ClickHouse/pull/92644) ([Anton Popov](https://github.com/CurtizJ)).
* Fixes a logical error `Too large size (A) passed to allocator` while executing JOINs. Closes [#92043](https://github.com/ClickHouse/ClickHouse/issues/92043). [#92667](https://github.com/ClickHouse/ClickHouse/pull/92667) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Remove a bug that `ngrambf_v1` indexes with ngram length (1st parameter) > 8 would throw an exception. [#92672](https://github.com/ClickHouse/ClickHouse/pull/92672) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix uncaught exception during background named collections reload when zookeeper storage is used. Closes https://github.com/ClickHouse/clickhouse-private/issues/44180. [#92717](https://github.com/ClickHouse/ClickHouse/pull/92717) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Reworks incorrect logic in access grant checks for wildcard grants. The previous attempt https://github.com/ClickHouse/ClickHouse/pull/90928 addressed a critical vulnerability but ended up being too restrictive, resulting in some wildcard `GRANT` statements failing due to unrelated revokes. [#92725](https://github.com/ClickHouse/ClickHouse/pull/92725) ([pufit](https://github.com/pufit)).
* Fix bug in data skipping logic when `not match(...)` is used in `WHERE` causing incorrect results. Closes [#92492](https://github.com/ClickHouse/ClickHouse/issues/92492). [#92726](https://github.com/ClickHouse/ClickHouse/pull/92726) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Do not attempt to delete temporary directories at startup if a MergeTree table is created over a read-only disk. [#92748](https://github.com/ClickHouse/ClickHouse/pull/92748) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix "Cannot add action to empty ExpressionActionsChain" for ALTER TABLE REWRITE PARTS (v2). [#92754](https://github.com/ClickHouse/ClickHouse/pull/92754) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95290](https://github.com/ClickHouse/ClickHouse/issues/95290): Fix query parameter substitution in CREATE USER authentication methods when using ON CLUSTER. Query parameters in authentication methods (e.g., password) were not being replaced, causing UNKNOWN_QUERY_PARAMETER errors on remote nodes. [#92777](https://github.com/ClickHouse/ClickHouse/pull/92777) ([xiaohuanlin](https://github.com/xiaohuanlin)).
* Avoid crash due to reading from a disconnected `Connection`. [#92807](https://github.com/ClickHouse/ClickHouse/pull/92807) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix logical error ` Failed to set file processing within 100 retries` in storgae `S3Queue` in `Ordered` mode. It is now replaced with a warning. This error could happen before 25.10 version if keeper session expired, however it will still be a warning in 25.10+ versions, as it is still theoretically possible to get this error in case of high processing concurrency in `Ordered` mode. [#92814](https://github.com/ClickHouse/ClickHouse/pull/92814) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Previously, some queries that used PK sharding with a false condition were failing. Now they're not. Needed for https://github.com/ClickHouse/ClickHouse/pull/89313. [#92815](https://github.com/ClickHouse/ClickHouse/pull/92815) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fixed calculation of uncompressed sizes of text indexes in the `system.parts` table. [#92832](https://github.com/ClickHouse/ClickHouse/pull/92832) ([Anton Popov](https://github.com/CurtizJ)).
* Fixed usage of primary index in lightweight updates that have an `IN` clause with subqueries in the predicate of the `WHERE` clause. [#92838](https://github.com/ClickHouse/ClickHouse/pull/92838) ([Anton Popov](https://github.com/CurtizJ)).
* Fix creating type hint for path 'skip' in JSON. Closes [#92731](https://github.com/ClickHouse/ClickHouse/issues/92731). [#92842](https://github.com/ClickHouse/ClickHouse/pull/92842) ([Pavel Kruglov](https://github.com/Avogar)).
* In the S3 table engine, we should avoid caching the partition key if there are non-deterministic functions. [#92844](https://github.com/ClickHouse/ClickHouse/pull/92844) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix possible error `FILE_DOESNT_EXIST` after mutation of a sparse column with `ratio_of_defaults_for_sparse_serialization=0.0`. Closes [#92633](https://github.com/ClickHouse/ClickHouse/issues/92633). [#92860](https://github.com/ClickHouse/ClickHouse/pull/92860) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix parquet schema inference in the old parquet reader (not used by default) when a JSON column comes after a Tupe column. Fix the old parquet reader (not used by default) failing on empty tuples. [#92867](https://github.com/ClickHouse/ClickHouse/pull/92867) ([Michael Kolupaev](https://github.com/al13n321)).
* Fix logical error with multiple joins on constant condition and `join_use_nulls`, close [#92640](https://github.com/ClickHouse/ClickHouse/issues/92640). [#92892](https://github.com/ClickHouse/ClickHouse/pull/92892) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix possible error `NOT_FOUND_COLUMN_IN_BLOCK` during insert into a table with subcolumn in partition expression. Closes [#93210](https://github.com/ClickHouse/ClickHouse/issues/93210). Closes [#83406](https://github.com/ClickHouse/ClickHouse/issues/83406). [#92905](https://github.com/ClickHouse/ClickHouse/pull/92905) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix error `NO_SUCH_COLUMN_IN_TABLE` in Merge engine over tables with aliases. Closes [#88665](https://github.com/ClickHouse/ClickHouse/issues/88665). [#92910](https://github.com/ClickHouse/ClickHouse/pull/92910) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix NULL != NULL case for full_sorting_join on LowCardinality(Nullable(T)) column. [#92924](https://github.com/ClickHouse/ClickHouse/pull/92924) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fixed several crashes during merges of text indexes in `MergeTree` tables. [#92925](https://github.com/ClickHouse/ClickHouse/pull/92925) ([Anton Popov](https://github.com/CurtizJ)).
* Restore LowCardinality wrappers on SET expression results if needed during TTL aggregation to prevent exceptions during table optimization. [#92971](https://github.com/ClickHouse/ClickHouse/pull/92971) ([Seva Potapov](https://github.com/seva-potapov)).
* Fix logical error during index analysis when empty array is used in `has` function. Closes [#92906](https://github.com/ClickHouse/ClickHouse/issues/92906). [#92995](https://github.com/ClickHouse/ClickHouse/pull/92995) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix possible hung on terminating background schedule pool (may lead to server hungs on shutdown). [#93008](https://github.com/ClickHouse/ClickHouse/pull/93008) ([Azat Khuzhin](https://github.com/azat)).
* Fix possible error FILE_DOESNT_EXIST after sparse column mutation when setting `ratio_of_defaults_for_sparse_serialization` was changed to `1.0` via alter. [#93016](https://github.com/ClickHouse/ClickHouse/pull/93016) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix bug in data skipping logic when `not materialize(...)` or `not CAST(...)` is used in WHERE causing incorrect results. Closes [#88536](https://github.com/ClickHouse/ClickHouse/issues/88536). [#93017](https://github.com/ClickHouse/ClickHouse/pull/93017) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix possible usage of outdated parts due to TOCTOU race for shared parts. [#93022](https://github.com/ClickHouse/ClickHouse/pull/93022) ([Azat Khuzhin](https://github.com/azat)).
* Fix crash when deserialising malformed `groupConcat` aggregate state with out-of-bounds offsets. [#93028](https://github.com/ClickHouse/ClickHouse/pull/93028) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fix leaving connection in a broken state after preliminary cancellation distributed queries. [#93029](https://github.com/ClickHouse/ClickHouse/pull/93029) ([Azat Khuzhin](https://github.com/azat)).
* Fix join results when the right-side join key is a sparse column. This closes [#92920](https://github.com/ClickHouse/ClickHouse/issues/92920). I can only reproduce the bug with `set compatibility='23.3'`. Not sure if it should be backported. [#93038](https://github.com/ClickHouse/ClickHouse/pull/93038) ([Amos Bird](https://github.com/amosbird)).
* Fix possible `Cannot finalize buffer after cancellation` in `estimateCompressionRatio()`. Fixes: [#87380](https://github.com/ClickHouse/ClickHouse/issues/87380). [#93068](https://github.com/ClickHouse/ClickHouse/pull/93068) ([Azat Khuzhin](https://github.com/azat)).
* Fixed merges of text indexes built on top of the complex expressions (such as `concat(col1, col2)`). [#93073](https://github.com/ClickHouse/ClickHouse/pull/93073) ([Anton Popov](https://github.com/CurtizJ)).
* Fix applying projection when filter contains subcolumns. Closes [#92882](https://github.com/ClickHouse/ClickHouse/issues/92882). [#93141](https://github.com/ClickHouse/ClickHouse/pull/93141) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix logical error in some cases triggered when join runtime filters are added to query plan. It was caused by incorrectly returning duplicated const columns from one of join sides. [#93144](https://github.com/ClickHouse/ClickHouse/pull/93144) ([Alexander Gololobov](https://github.com/davenger)).
* Special function `__applyFilter` used by join runtime filters was returning ILLEGAL_TYPE_OF_ARGUMENT in some valid cases. [#93187](https://github.com/ClickHouse/ClickHouse/pull/93187) ([Alexander Gololobov](https://github.com/davenger)).
* Prevent different interpolated columns from collapse into the same column in a block when interpolated columns are effectively aliases of the same column. [#93197](https://github.com/ClickHouse/ClickHouse/pull/93197) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* Do not add runtime filter when joining with already filled right table. [#93211](https://github.com/ClickHouse/ClickHouse/pull/93211) ([Alexander Gololobov](https://github.com/davenger)).
* Fix keeper persistent watches cleanup after dead session. This closes [#92480](https://github.com/ClickHouse/ClickHouse/issues/92480). [#93213](https://github.com/ClickHouse/ClickHouse/pull/93213) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix order by tuple in iceberg. This closes [#92977](https://github.com/ClickHouse/ClickHouse/issues/92977). [#93225](https://github.com/ClickHouse/ClickHouse/pull/93225) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix bug with S3Queue setting `s3queue_migrate_old_metadata_to_buckets`. Closes [#93392](https://github.com/ClickHouse/ClickHouse/issues/93392), [#93196](https://github.com/ClickHouse/ClickHouse/issues/93196), [#81739](https://github.com/ClickHouse/ClickHouse/issues/81739). [#93232](https://github.com/ClickHouse/ClickHouse/pull/93232) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Remove unused columns when the projection is rebuilt during the merge. It reduces memory usage and creates fewer temporary parts. [#93233](https://github.com/ClickHouse/ClickHouse/pull/93233) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Fix unused columns removal from subqueries in the presence of a scalar correlated subquery. Before the fix column could have been removed if it was used only in the correlated subquery, and the query would fail with `NOT_FOUND_COLUMN_IN_BLOCK` error. [#93273](https://github.com/ClickHouse/ClickHouse/pull/93273) ([Dmitry Novik](https://github.com/novikd)).
* Fix possible missing subcolumn in MV during alter of source table. Closes [#93231](https://github.com/ClickHouse/ClickHouse/issues/93231). [#93276](https://github.com/ClickHouse/ClickHouse/pull/93276) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix the `Merge` table engine query planning with the analyzer that could throw ILLEGAL_COLUMN for `hostName()` when merging local and remote/Distributed tables. Closes [#92059](https://github.com/ClickHouse/ClickHouse/issues/92059). [#93286](https://github.com/ClickHouse/ClickHouse/pull/93286) ([Jinlin](https://github.com/withlin)).
* Fixes a case where NOT IN with non-constant array arguments was returning the wrong value + Support for non-constant Array functions. Closes [#14980](https://github.com/ClickHouse/ClickHouse/issues/14980). [#93314](https://github.com/ClickHouse/ClickHouse/pull/93314) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Fix `Not found column` for `use_top_k_dynamic_filtering` optimization. Fixes [#93186](https://github.com/ClickHouse/ClickHouse/issues/93186). [#93316](https://github.com/ClickHouse/ClickHouse/pull/93316) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Fixed rebuilding of text indexes created on top of subcolumns. [#93326](https://github.com/ClickHouse/ClickHouse/pull/93326) ([Anton Popov](https://github.com/CurtizJ)).
* Fixed handling of empty array as a second argument in `hasAllTokens` and `hasAnyTokens` functions. [#93328](https://github.com/ClickHouse/ClickHouse/pull/93328) ([Anton Popov](https://github.com/CurtizJ)).
* Fix logical error when runtime filters are used in a query with totals for right side table. [#93330](https://github.com/ClickHouse/ClickHouse/pull/93330) ([Alexander Gololobov](https://github.com/davenger)).
* The server no longer crashes if function `tokens` is called with non-const tokenizer parameters (the 2th, 3rd, 4th parameter), e.g., `SELECT tokens(NULL, 1, materialize(1))`. [#93383](https://github.com/ClickHouse/ClickHouse/pull/93383) ([Robert Schulze](https://github.com/rschu1ze)).
* Fixed integer overflow vulnerability in `groupConcat` state deserialisation that could cause memory safety issues with crafted aggregate states. [#93426](https://github.com/ClickHouse/ClickHouse/pull/93426) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Fixed text index analysis on array columns when the index contains no tokens (all arrays are empty or all tokens are skipped by the tokenizer). [#93457](https://github.com/ClickHouse/ClickHouse/pull/93457) ([Anton Popov](https://github.com/CurtizJ)).
* Avoids oauth login in ClickHouse Client when username/password are within the connection string. [#93459](https://github.com/ClickHouse/ClickHouse/pull/93459) ([Krishna Mannem](https://github.com/kcmannem)).
* Fix Azure ADLS Gen2 vended credentials support in DataLakeCatalog - parse `adls.sas-token.*` keys from Iceberg REST catalogs and fix ABFSS URL parsing. [#93477](https://github.com/ClickHouse/ClickHouse/pull/93477) ([Karun Anantharaman](https://github.com/karunmotorq)).
* Fix GLOBAL IN support with analyzer (previously set was created on the remote node again). [#93507](https://github.com/ClickHouse/ClickHouse/pull/93507) ([Azat Khuzhin](https://github.com/azat)).
* Fix extracting subcolumn during deserialization directly into Sparse columns. [#93512](https://github.com/ClickHouse/ClickHouse/pull/93512) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed direct reading from text index with duplicate search queries. [#93516](https://github.com/ClickHouse/ClickHouse/pull/93516) ([Anton Popov](https://github.com/CurtizJ)).
* Fix for NOT_FOUND_COLUMN_IN_BLOCK error when runtime filter is enabled and joined tables have the same column returned multiple times (e.g. SELECT a, a, a FROM t). [#93526](https://github.com/ClickHouse/ClickHouse/pull/93526) ([Alexander Gololobov](https://github.com/davenger)).
* Fix a bug where clickhouse-client would ask for password twice when connecting using ssh. [#93547](https://github.com/ClickHouse/ClickHouse/pull/93547) ([Isak Ellmer](https://github.com/spinojara)).
* Make sure that zookeeper is finalized on shutdown (fix possible hung on shutdown in very unlikely cases). [#93602](https://github.com/ClickHouse/ClickHouse/pull/93602) ([Azat Khuzhin](https://github.com/azat)).
* Fix LOGICAL_ERROR when restoring ReplicatedMergeTree with deduplication race. [#93612](https://github.com/ClickHouse/ClickHouse/pull/93612) ([Pablo Marcos](https://github.com/pamarcos)).
* Fix using Sparse column for TTL update during direct deserialization into Sparse columns in some input formats. It fixes possible logical error `Unexpected type of result TTL column`. [#93619](https://github.com/ClickHouse/ClickHouse/pull/93619) ([Pavel Kruglov](https://github.com/Avogar)).
* Fixed h3 index functions sometimes crashing or getting stuck when called on invalid inputs. [#93657](https://github.com/ClickHouse/ClickHouse/pull/93657) ([Michael Kolupaev](https://github.com/al13n321)).
* Backported in [#95464](https://github.com/ClickHouse/ClickHouse/issues/95464): Backups could crash the server if you do many concurrent backups clashing over the same files. [#93659](https://github.com/ClickHouse/ClickHouse/pull/93659) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* The usage of `ngram_bf` index on a non-UTF-8 data led to an uninitialized memory read, with values that could reside in the resulting index structure. Closes [#92576](https://github.com/ClickHouse/ClickHouse/issues/92576). [#93663](https://github.com/ClickHouse/ClickHouse/pull/93663) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Validate that the decompressed buffer size is as expected. [#93690](https://github.com/ClickHouse/ClickHouse/pull/93690) ([Raúl Marín](https://github.com/Algunenano)).
* Prevent users to get the list of columns from a table without checking `SHOW COLUMNS` permission using the `merge` table engine. [#93695](https://github.com/ClickHouse/ClickHouse/pull/93695) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Fixed materialization of skip indexes created on top of subcolumns. [#93708](https://github.com/ClickHouse/ClickHouse/pull/93708) ([Anton Popov](https://github.com/CurtizJ)).
* We store storages' shared pointers in `QueryPipeline::resources::storage_holders` to make sure that the `IStorage` objects are not destroyed while `PipelineExecutor` is alive. [#93746](https://github.com/ClickHouse/ClickHouse/pull/93746) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix attaching Replicated DBs when the interserver host changed after restarting. [#93779](https://github.com/ClickHouse/ClickHouse/pull/93779) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Fix assert `!read_until_position` in `ReadBufferFromS3` which happened when cache is enabled. [#93809](https://github.com/ClickHouse/ClickHouse/pull/93809) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix logical error in a rare case when empty tuple is used with `Map` column. Closes [#93784](https://github.com/ClickHouse/ClickHouse/issues/93784). [#93814](https://github.com/ClickHouse/ClickHouse/pull/93814) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fixed `_part_offset` corruption when projections are rebuilt during merges, and optimized projection processing by avoiding unnecessary reads of the `_part_offset` column and skipping unneeded columns in projection calculations. This continues the optimizations introduced in [#93233](https://github.com/ClickHouse/ClickHouse/issues/93233). [#93827](https://github.com/ClickHouse/ClickHouse/pull/93827) ([Amos Bird](https://github.com/amosbird)).
* Remove 'Bad version' handling. [#93843](https://github.com/ClickHouse/ClickHouse/pull/93843) ([Anton Ivashkin](https://github.com/ianton-ru)).
* Fix `optimize_inverse_dictionary_lookup` not working with distributed query when key is signed integral type. Closes [#93259](https://github.com/ClickHouse/ClickHouse/issues/93259). [#93848](https://github.com/ClickHouse/ClickHouse/pull/93848) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix `lag`/`lead` not working with distributed `remote()` query. Closes [#90014](https://github.com/ClickHouse/ClickHouse/issues/90014). [#93858](https://github.com/ClickHouse/ClickHouse/pull/93858) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix system instrument dispatch bug. [#93937](https://github.com/ClickHouse/ClickHouse/pull/93937) ([Pablo Marcos](https://github.com/pamarcos)).
* In https://github.com/ClickHouse/ClickHouse/pull/89173, we added an extra field to the structure that `TraceSender` sends through an internal pipe. However, the buffer size was not updated ([here](https://github.com/ClickHouse/ClickHouse/pull/89173/changes#diff-36ecfac5cde34c92c031652d8a77f0d12782cd5d43e68d6ef159e6d46a54224fL44)), therefore we are writting more data to buffer than `buffer_size` which results in multiple flushes. And because `TraceSender::send` is called from different threads, different threads' flushes may interleave which breaks the invariant that the receiving end (`TraceCollector`) relies on. [#93966](https://github.com/ClickHouse/ClickHouse/pull/93966) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix type conversion to super type during the join operation of the storage `Join` with `USING` clause. Fixes [#91672](https://github.com/ClickHouse/ClickHouse/issues/91672). Fixes [#78572](https://github.com/ClickHouse/ClickHouse/issues/78572). [#94000](https://github.com/ClickHouse/ClickHouse/pull/94000) ([Dmitry Novik](https://github.com/novikd)).
* Fix for FilterStep not properly added when join runtime filter is applied over Merge table. [#94021](https://github.com/ClickHouse/ClickHouse/pull/94021) ([Alexander Gololobov](https://github.com/davenger)).
* A `SELECT` query containing a predicate on multiple columns with bloom filter skip indexes and both `OR` and `NOT` conditions are present could return inconsistent results. That is fixed now. [#94026](https://github.com/ClickHouse/ClickHouse/pull/94026) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Fix CLEAR column with dependent indices. [#94057](https://github.com/ClickHouse/ClickHouse/pull/94057) ([Raúl Marín](https://github.com/Algunenano)).
* Fix use-of-uninitialized-value in `ReadWriteBufferFromHTTP`. [#94058](https://github.com/ClickHouse/ClickHouse/pull/94058) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix bad check for typed paths in JSON. Checj was introduced in https://github.com/ClickHouse/ClickHouse/pull/92842 and can lead to error during existing tables startup. [#94070](https://github.com/ClickHouse/ClickHouse/pull/94070) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix the crash during filter analysis in the presence of OUTER JOIN. Fixes [#90979](https://github.com/ClickHouse/ClickHouse/issues/90979). [#94080](https://github.com/ClickHouse/ClickHouse/pull/94080) ([Dmitry Novik](https://github.com/novikd)).
* Fix accuracy of `uniqTheta` when using UInt8 aggregation keys in parallel (`max_threads` > 1 - default). [#94095](https://github.com/ClickHouse/ClickHouse/pull/94095) ([Azat Khuzhin](https://github.com/azat)).
* Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1217. Exception was thrown from a `socket.setBlocking(true)` call inside `SCOPE_EXIT`: [logs](https://grafana.clickhouse-prd.com/a/loghouseapp/sysex?thanos_datasource=LightHouse+Thanos+%28production%29&environment=production&sortOrder=Asc&namespace=ns-olive-ae-66&region=us-central1&limit=500&whereExtra=and+level+%3D+%27Fatal%27&tableName=text_log&groupBy=level&extraCols=level&timeFrom=2025-12-29T01%3A13%3A46Z&timeFromCHFormat=2025-12-29+01%3A13%3A46&timeFromUnix=1766970826&timeTo=2025-12-29T02%3A13%3A51Z&timeToCHFormat=2025-12-29+02%3A13%3A51&timeToUnix=1766974431&dateTo=2025-12-29&dateFrom=2025-12-29). Because `SCOPE_EXIT` creates a scope guard object and runs the provided code in the scope guard's destructor, we can't use `SCOPE_EXIT` with functions that throw exceptions and should use `SCOPE_EXIT_SAFE` instead. [#94100](https://github.com/ClickHouse/ClickHouse/pull/94100) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Related issue: [#80315](https://github.com/ClickHouse/ClickHouse/issues/80315) CIDB: [link](https://play.clickhouse.com/play?user=play#U0VMRUNUIGJhc2VfcmVwbywgcHVsbF9yZXF1ZXN0X251bWJlciBhcyBwciwgY2hlY2tfc3RhcnRfdGltZSwgY2hlY2tfbmFtZSwgdGVzdF9uYW1lLCB0ZXN0X3N0YXR1cywgcmVwb3J0X3VybApGUk9NIGNoZWNrcwpXSEVSRSAxCiAgICBBTkQgdGVzdF9zdGF0dXMgSU4gKCdGQUlMJywgJ0VSUk9SJywgJ0JST0tFTicpCiAgICBBTkQgdG9EYXRlKGNoZWNrX3N0YXJ0X3RpbWUpID4gJzIwMjUtMDYtMDEnCiAgICBBTkQgdGVzdF9uYW1lIGxpa2UgJyUwMTE1NF9tb3ZlX3BhcnRpdGlvbl9sb25nJScKICAgIEFORCB0ZXN0X2NvbnRleHRfcmF3IGxpa2UgJyVyZXN1bHQgZGlmZmVycyB3aXRoIHJlZmVyZW5jZSUnCk9SREVSIEJZIGNoZWNrX3N0YXJ0X3RpbWUgREVTQwpTRVRUSU5HUyByZWFkX3Rocm91Z2hfZGlzdHJpYnV0ZWRfY2FjaGU9MA==). [#94123](https://github.com/ClickHouse/ClickHouse/pull/94123) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Fixed parquet reader v3 incorrectly handling arrays that cross page boundaries. This happens e.g. for files written by Arrow without enabling page statistics or page index. Affects only columns of Array data type. Likely symptom is that one array every ~1 MB of data gets truncated. Before this fix, use this setting as workaround: `input_format_parquet_use_native_reader_v3 = 0`. [#94125](https://github.com/ClickHouse/ClickHouse/pull/94125) ([Michael Kolupaev](https://github.com/al13n321)).
* Fix too many watches in ReplicatedMergeTree while waiting for log entry. [#94133](https://github.com/ClickHouse/ClickHouse/pull/94133) ([Azat Khuzhin](https://github.com/azat)).
* Functions `arrayShuffle`, `arrayPartialShuffle` and `arrayRandomSample` to materialize const columns - so that different rows get different results. [#94134](https://github.com/ClickHouse/ClickHouse/pull/94134) ([Joanna Hulboj](https://github.com/jh0x)).
* Fix data race in evaluating table functions in materialized views. [#94171](https://github.com/ClickHouse/ClickHouse/pull/94171) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix nullptr dereference in `PostgreSQL` database engines (when the query is incorrect). Closes [#92887](https://github.com/ClickHouse/ClickHouse/issues/92887). [#94180](https://github.com/ClickHouse/ClickHouse/pull/94180) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix memory leak in refreshable materialized views using `SELECT` queries with multiple subqueries. [#94200](https://github.com/ClickHouse/ClickHouse/pull/94200) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix data race in `DataPartStorageOnDiskBase::remove` vs `system.parts`. Closes [#49076](https://github.com/ClickHouse/ClickHouse/issues/49076). [#94262](https://github.com/ClickHouse/ClickHouse/pull/94262) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove the wrong `noexcept` specifier at HashTable copy assignment that may lead to crash (`std::terminate`) on memory exceptions. [#94275](https://github.com/ClickHouse/ClickHouse/pull/94275) ([Nikita Taranov](https://github.com/nickitat)).
* Previously, creating a projection with duplicate columns in GROUP BY (e.g., `GROUP BY c0, c0`) and inserting data caused a `std::length_error` if `optimize_row_order` is enabled. Closes [#94065](https://github.com/ClickHouse/ClickHouse/issues/94065). [#94277](https://github.com/ClickHouse/ClickHouse/pull/94277) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix obscure bug in ZooKeeper client on connect which leads to hungs and crashes. [#94320](https://github.com/ClickHouse/ClickHouse/pull/94320) ([Azat Khuzhin](https://github.com/azat)).
* Fix function to subcolumns optimization not applied to subcolumns. [#94323](https://github.com/ClickHouse/ClickHouse/pull/94323) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possibly incorrect result in nested RIGHT JOINs when `enable_lazy_columns_replication` is enabled. The bug caused all rows in replicated columns to incorrectly return the same value instead of their distinct values. Close [#93891](https://github.com/ClickHouse/ClickHouse/issues/93891). [#94339](https://github.com/ClickHouse/ClickHouse/pull/94339) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Fix filter pushdown for SEMI JOIN using equivalence sets. Do not push the filter down if argument types have changed. Fixes [#93264](https://github.com/ClickHouse/ClickHouse/issues/93264). [#94340](https://github.com/ClickHouse/ClickHouse/pull/94340) ([Dmitry Novik](https://github.com/novikd)).
* Fix usage of DeltaLake CDF with database DataLake database engine (delta lake catalogs integration). Closes [#94122](https://github.com/ClickHouse/ClickHouse/issues/94122). [#94342](https://github.com/ClickHouse/ClickHouse/pull/94342) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix incorrect value of current metric `FilesystemCacheSizeLimit` in case `SLRU` cache policy was used. [#94363](https://github.com/ClickHouse/ClickHouse/pull/94363) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Creating a Backup database engine with less than two arguments now returns a more descriptive error message (`Wrong number of arguments` instead of `std::out_of_range: InlinedVector::at(size_type) const failed bounds check.`). [#94374](https://github.com/ClickHouse/ClickHouse/pull/94374) ([Robert Schulze](https://github.com/rschu1ze)).
* Ignores impossible revokes of global grants on the database level for grants with grant option. [#94386](https://github.com/ClickHouse/ClickHouse/pull/94386) ([pufit](https://github.com/pufit)).
* Fix reading sparse offsets from compact parts. Closes [#94385](https://github.com/ClickHouse/ClickHouse/issues/94385) ### Documentation entry for user-facing changes. [#94399](https://github.com/ClickHouse/ClickHouse/pull/94399) ([Pavel Kruglov](https://github.com/Avogar)).
* Don't prevent ALTER of columns using implicit indexes, even if `alter_column_secondary_index_mode`'s `throw` mode is used. [#94425](https://github.com/ClickHouse/ClickHouse/pull/94425) ([Raúl Marín](https://github.com/Algunenano)).
* Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1160. The segfault occurs because `TCPHandler::runImpl` expects that the two `receivePacketsExpectQuery` calls won't both read `Protocol::Client::IgnoredPartUUIDs`, but given repeated crashes there, it's possible. [#94434](https://github.com/ClickHouse/ClickHouse/pull/94434) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fix masking sensitive data in `system.functions`. [#94436](https://github.com/ClickHouse/ClickHouse/pull/94436) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix nullptr dereference with disabled `send_profile_events`. This feature was introduced recently for the ClickHouse Python driver. Closes [#92488](https://github.com/ClickHouse/ClickHouse/issues/92488). [#94466](https://github.com/ClickHouse/ClickHouse/pull/94466) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix text index .mrk incompatibility during merges. [#94494](https://github.com/ClickHouse/ClickHouse/pull/94494) ([Peng Jian](https://github.com/fastio)).
* When `read_in_order_use_virtual_row` is enabled, the code was accessing index columns based on the full primary key size without checking if the index was truncated, leading to use-after-free / uninitialized memory. Closes [#85596](https://github.com/ClickHouse/ClickHouse/issues/85596). [#94500](https://github.com/ClickHouse/ClickHouse/pull/94500) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix an error due to a type mismatch when sending external tables for subqueries with GLOBAL IN if the types are Nullable. Closes [#94097](https://github.com/ClickHouse/ClickHouse/issues/94097). [#94511](https://github.com/ClickHouse/ClickHouse/pull/94511) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* In previous versions, queries with multiple index conditions over the same expression may erroneously throw an exception `Not found column`. Closes [#60660](https://github.com/ClickHouse/ClickHouse/issues/60660). [#94515](https://github.com/ClickHouse/ClickHouse/pull/94515) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix incorrect handling of Nullable join column in runtime filters. [#94555](https://github.com/ClickHouse/ClickHouse/pull/94555) ([Alexander Gololobov](https://github.com/davenger)).
* Creating a workload in another workload that is currently in use no longer causes a crash. [#94599](https://github.com/ClickHouse/ClickHouse/pull/94599) ([Sergei Trifonov](https://github.com/serxa)).
* Fix a crash during ANY LEFT JOIN optimization when `isNotNull` is evaluated on a missing column. [#94600](https://github.com/ClickHouse/ClickHouse/pull/94600) ([Molly](https://github.com/ggmolly)).
* Fix default expression evaluation when referencing other columns with computed defaults. [#94615](https://github.com/ClickHouse/ClickHouse/pull/94615) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix permission issues in BACKUP/RESTORE operations. [#94617](https://github.com/ClickHouse/ClickHouse/pull/94617) ([Pablo Marcos](https://github.com/pamarcos)).
* Fixes https://github.com/ClickHouse/clickhouse-core-incidents/issues/1250. Likely due to a mix-up, `data_type` (which may be `DataTypeNullable*`) is `static_cast`-ed to `DataTypeDateTime64*`. Instead, we should cast `check_type` (the nested type variable). [#94627](https://github.com/ClickHouse/ClickHouse/pull/94627) ([Miсhael Stetsyuk](https://github.com/mstetsyuk)).
* Fixes a bug where certain distributed queries with `ORDER BY` could return `ALIAS` columns with swapped values (i.e., column `a` showing column `b`’s data and vice versa). [#94644](https://github.com/ClickHouse/ClickHouse/pull/94644) ([filimonov](https://github.com/filimonov)).
* Fix storing results of keeper-bench to file. [#94654](https://github.com/ClickHouse/ClickHouse/pull/94654) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix incorrect estimations with MinMax-type statistics when the column contains negative floating-point values. [#94665](https://github.com/ClickHouse/ClickHouse/pull/94665) ([zoomxi](https://github.com/zoomxi)).
* This closes [#92781](https://github.com/ClickHouse/ClickHouse/issues/92781). [#94670](https://github.com/ClickHouse/ClickHouse/pull/94670) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fix possibly incorrect RIGHT join result when using complex ON conditions. Close [#92913](https://github.com/ClickHouse/ClickHouse/issues/92913). [#94680](https://github.com/ClickHouse/ClickHouse/pull/94680) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Preserve constant index granularity (use_const_adaptive_granularity) after Vertical merges. [#94725](https://github.com/ClickHouse/ClickHouse/pull/94725) ([Azat Khuzhin](https://github.com/azat)).
* Fix mutation bug with scalar subqueries and table dependencies. If a table had dependencies (index or projections) over a column, scalar subqueries might be evaluated and cached without data and lead to incorrect changes. [#94731](https://github.com/ClickHouse/ClickHouse/pull/94731) ([Raúl Marín](https://github.com/Algunenano)).
* Fix AsynchronousMetrics cpu_pressure fallback on error. [#94827](https://github.com/ClickHouse/ClickHouse/pull/94827) ([Raúl Marín](https://github.com/Algunenano)).
* The `getURLHostRFC` function was missing bounds checks before dereferencing pointers. When an empty string was passed to `domainRFC`, it would read uninitialized memory, triggering MSan errors. [#94851](https://github.com/ClickHouse/ClickHouse/pull/94851) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix readonlyness of encrypted disks. [#94852](https://github.com/ClickHouse/ClickHouse/pull/94852) ([Azat Khuzhin](https://github.com/azat)).
* Fix logical error in fractional `LIMIT/OFFSET` when using the old analyzer with Distributed tables. Closes [#94712](https://github.com/ClickHouse/ClickHouse/issues/94712). [#94999](https://github.com/ClickHouse/ClickHouse/pull/94999) ([Ahmed Gouda](https://github.com/0xgouda)).
* Fix crash under some conditions when join runtime filters are enabled by default. [#95000](https://github.com/ClickHouse/ClickHouse/pull/95000) ([Alexander Gololobov](https://github.com/davenger)).
* Improve masking passwords in url used in table engine `URL()` and table function `url()`. [#95006](https://github.com/ClickHouse/ClickHouse/pull/95006) ([Vitaly Baranov](https://github.com/vitlibar)).
* Function `toStartOfInterval` now works in the same way as `toStartOfX`, where `X` is `Day, Week, Month, Quarter, Year` when the `enable_extended_results_for_datetime_functions` is on. [#95011](https://github.com/ClickHouse/ClickHouse/pull/95011) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Fix constant string comparisons not respecting the settings `cast_string_to_date_time_mode`, `bool_true_representation`, `bool_false_representation`, and `input_format_null_as_default`. Closes [#91681](https://github.com/ClickHouse/ClickHouse/issues/91681). [#95040](https://github.com/ClickHouse/ClickHouse/pull/95040) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#95304](https://github.com/ClickHouse/ClickHouse/issues/95304): Fixes race in filesystem cache in version 26.1 after [ClickHouse/ClickHouse[#82764](https://github.com/ClickHouse/ClickHouse/issues/82764)](https://github.com/ClickHouse/ClickHouse/pull/82764). [#95042](https://github.com/ClickHouse/ClickHouse/pull/95042) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix data race in the filesystem cache. [#95064](https://github.com/ClickHouse/ClickHouse/pull/95064) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a rare race condition in the Parquet reader. [#95068](https://github.com/ClickHouse/ClickHouse/pull/95068) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix crash in the top K optimization when `LIMIT` is zero. Closes [#93893](https://github.com/ClickHouse/ClickHouse/issues/93893). [#95072](https://github.com/ClickHouse/ClickHouse/pull/95072) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Converting from DateTime/integers to Time64 extracts the time-of-day component using `toTime`, which is not monotonic. The `ToDateTimeMonotonicity` template incorrectly claimed this conversion was monotonic, causing "Invalid binary search result in MergeTreeSetIndex" exception in debug builds. [#95125](https://github.com/ClickHouse/ClickHouse/pull/95125) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Recreated list of manifest file entries only if necessary (previously it was done on each iteration). [#95162](https://github.com/ClickHouse/ClickHouse/pull/95162) ([Daniil Ivanik](https://github.com/divanik)).
* Backported in [#95293](https://github.com/ClickHouse/ClickHouse/issues/95293): Fixed inaccurate memory accounting when applying large patch parts after lightweight updates. Previously, applying large patches could cause excessive memory usage and result in the server process being killed by the OOM killer. [#95231](https://github.com/ClickHouse/ClickHouse/pull/95231) ([Anton Popov](https://github.com/CurtizJ)).
* Backported in [#95324](https://github.com/ClickHouse/ClickHouse/issues/95324): Avoid UB in distributed index analysis on fallback to local replica and there are more then max_parallel_replicas replicas. [#95263](https://github.com/ClickHouse/ClickHouse/pull/95263) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95419](https://github.com/ClickHouse/ClickHouse/issues/95419): Try to rollback the source blob, even if the removal wasn't completed. [#95302](https://github.com/ClickHouse/ClickHouse/pull/95302) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Backported in [#95407](https://github.com/ClickHouse/ClickHouse/issues/95407): The password argument of the `redis` table function now will be masked in the logs and system tables (e.g.: `query_log`). [#95325](https://github.com/ClickHouse/ClickHouse/pull/95325) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Backported in [#95507](https://github.com/ClickHouse/ClickHouse/issues/95507): Fix storage lifetime with distributed plan. [#95356](https://github.com/ClickHouse/ClickHouse/pull/95356) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95553](https://github.com/ClickHouse/ClickHouse/issues/95553): Fix `optimize_syntax_fuse_functions` to not rewrite `sum/count/avg` into `sumCount()` when the aggregate argument is `Nullable`. Closes [#95390](https://github.com/ClickHouse/ClickHouse/issues/95390). [#95441](https://github.com/ClickHouse/ClickHouse/pull/95441) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Backported in [#95551](https://github.com/ClickHouse/ClickHouse/issues/95551): Fix check for encrypted disks over plain_rewritable (Fixes possible `It is not possible to register multiple plain-rewritable disks with the same object storage prefix`). [#95470](https://github.com/ClickHouse/ClickHouse/pull/95470) ([Azat Khuzhin](https://github.com/azat)).
* Backported in [#95492](https://github.com/ClickHouse/ClickHouse/issues/95492): The `mergeTreeProjection` table function was missing an access check, allowing users without SELECT permission on a table (but with permissions for table functions) to read data from its projections. This fix adds the same access check that `mergeTreeIndex` and `mergeTreeAnalyzeIndexes` already have. [#95480](https://github.com/ClickHouse/ClickHouse/pull/95480) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### Build/Testing/Packaging Improvement
* Remove transitive libc++ includes. [#92523](https://github.com/ClickHouse/ClickHouse/pull/92523) ([Raúl Marín](https://github.com/Algunenano)).
* Make sequential tests parallel: https://github.com/ClickHouse/ClickHouse/pull/93030/changes#diff-c3a73510dae653c9bbfa24300b32f5d6ec663fd4e72cc4a3d5daa6e4342915df. [#93030](https://github.com/ClickHouse/ClickHouse/pull/93030) ([Nikita Fomichev](https://github.com/fm4v)).
* Added a tool that simplifies debugging of memory allocations in parser. It uses jemalloc `stats.allocated` metric before and after we parse query to AST representation to show what is allocated. Also it supports memory profiling mode that dumps profile before and after to build reports where allocations occurred. [#93523](https://github.com/ClickHouse/ClickHouse/pull/93523) ([Ilya Yatsishin](https://github.com/qoega)).
* Cleanup some build flags. [#93679](https://github.com/ClickHouse/ClickHouse/pull/93679) ([Raúl Marín](https://github.com/Algunenano)).
* Add a set of tools for profiling memory allocations in the ClickHouse SQL parser using jemalloc's heap profiling capabilities. [#94072](https://github.com/ClickHouse/ClickHouse/pull/94072) ([Ilya Yatsishin](https://github.com/qoega)).
* Bump c-ares from v1.34.5 to v1.34.6. This addresses c-ares' `CVE-2025-62408`, which is not relevant for ClickHouse. [#94129](https://github.com/ClickHouse/ClickHouse/pull/94129) ([Govind R Nair](https://github.com/Revertionist)).
* Use `curl` 8.18.0. [#94742](https://github.com/ClickHouse/ClickHouse/pull/94742) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95246](https://github.com/ClickHouse/ClickHouse/issues/95246): Use `postgres` to REL_18_1. [#95189](https://github.com/ClickHouse/ClickHouse/pull/95189) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Backported in [#95259](https://github.com/ClickHouse/ClickHouse/issues/95259): Use `libexpat` 2.7.3. [#95218](https://github.com/ClickHouse/ClickHouse/pull/95218) ([Konstantin Bogdanov](https://github.com/thevar1able)).

#### NO CL CATEGORY

* Backported in [#95229](https://github.com/ClickHouse/ClickHouse/issues/95229):. [#93983](https://github.com/ClickHouse/ClickHouse/pull/93983) ([Raúl Marín](https://github.com/Algunenano)).

#### NO CL ENTRY

* NO CL ENTRY:  'Fixing error msg typo: "max_key_lenght"'. [#91375](https://github.com/ClickHouse/ClickHouse/pull/91375) ([Jack Danger](https://github.com/JackDanger)).
* NO CL ENTRY:  'Revert "Remove `test_storage_rabbitmq`"'. [#92151](https://github.com/ClickHouse/ClickHouse/pull/92151) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* NO CL ENTRY:  'Revert "Remove `test_storage_nats`"'. [#92155](https://github.com/ClickHouse/ClickHouse/pull/92155) ([Nikita Mikhaylov](https://github.com/nikitamikhaylov)).
* NO CL ENTRY:  'Revert "Consecutive keys optimization for `uniqExact`"'. [#93294](https://github.com/ClickHouse/ClickHouse/pull/93294) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Speed up isValidASCII"'. [#93566](https://github.com/ClickHouse/ClickHouse/pull/93566) ([Dmitry Novik](https://github.com/novikd)).
* NO CL ENTRY:  'Revert "Skip back up of refreshable materialized view targets"'. [#93600](https://github.com/ClickHouse/ClickHouse/pull/93600) ([Alexander Tokmakov](https://github.com/tavplubix)).
* NO CL ENTRY:  'Revert "Revert "Remove `test_storage_nats`""'. [#93616](https://github.com/ClickHouse/ClickHouse/pull/93616) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Improve posix portability for illumos."'. [#93916](https://github.com/ClickHouse/ClickHouse/pull/93916) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Revert "Remove bad test `test_projection_rebuild_with_required_columns`"'. [#93971](https://github.com/ClickHouse/ClickHouse/pull/93971) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* NO CL ENTRY:  'Revert "Surrounding SELECT args with parentheses to avoid formatting inconsistency with EXCEPT"'. [#94431](https://github.com/ClickHouse/ClickHouse/pull/94431) ([Nikolay Degterinsky](https://github.com/evillique)).
* NO CL ENTRY:  'Revert "Don't try to authenticate twice when using ssh"'. [#94688](https://github.com/ClickHouse/ClickHouse/pull/94688) ([Raúl Marín](https://github.com/Algunenano)).
* NO CL ENTRY:  'Revert "Sccache: second attempt"'. [#94962](https://github.com/ClickHouse/ClickHouse/pull/94962) ([Max Kainov](https://github.com/maxknv)).
* NO CL ENTRY:  'Revert "Preserve constant index granularity (use_const_adaptive_granularity) after Vertical merges"'. [#95005](https://github.com/ClickHouse/ClickHouse/pull/95005) ([Azat Khuzhin](https://github.com/azat)).
* NO CL ENTRY:  'Revert "Fix inconsistent formatting of TTL"'. [#95083](https://github.com/ClickHouse/ClickHouse/pull/95083) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* NO CL ENTRY:  'Revert "Fix segfault in `clearCaches` when table is dropped during query"'. [#95120](https://github.com/ClickHouse/ClickHouse/pull/95120) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

#### NOT FOR CHANGELOG / INSIGNIFICANT

* PR reverted. [#66713](https://github.com/ClickHouse/ClickHouse/pull/66713) ([Raúl Marín](https://github.com/Algunenano)).
* Closes [#74671](https://github.com/ClickHouse/ClickHouse/issues/74671) Closes [#79294](https://github.com/ClickHouse/ClickHouse/issues/79294). [#77085](https://github.com/ClickHouse/ClickHouse/pull/77085) ([Pavel Kruglov](https://github.com/Avogar)).
* Simplify the code in `ReadBufferFromEncryptedFile.cpp`, add comments. [#80513](https://github.com/ClickHouse/ClickHouse/pull/80513) ([Vitaly Baranov](https://github.com/vitlibar)).
* ci: limit stateless tests to 5G of RAM and fix tests that exceeds this limit. [#82361](https://github.com/ClickHouse/ClickHouse/pull/82361) ([Azat Khuzhin](https://github.com/azat)).
* Fix UBSan report when reading DateTime or Time types. Closes [#82269](https://github.com/ClickHouse/ClickHouse/issues/82269). [#83212](https://github.com/ClickHouse/ClickHouse/pull/83212) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* Integration tests: Review sequential tests part 2. [#85248](https://github.com/ClickHouse/ClickHouse/pull/85248) ([Nikita Fomichev](https://github.com/fm4v)).
* fixed: apply_random_settings_limits bug. [#88289](https://github.com/ClickHouse/ClickHouse/pull/88289) ([JasonLi](https://github.com/JasonLi-cn)).
* Comment QueryPlanSerializationSettings. [#88719](https://github.com/ClickHouse/ClickHouse/pull/88719) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Clean up thread safety in FunctionConvert. [#90644](https://github.com/ClickHouse/ClickHouse/pull/90644) ([Michael Kolupaev](https://github.com/al13n321)).
* More graceful behavior if a protobuf OneOf has several values. [#90859](https://github.com/ClickHouse/ClickHouse/pull/90859) ([Ilya Golshtein](https://github.com/ilejn)).
* Sync optimizeTree.cpp. [#91288](https://github.com/ClickHouse/ClickHouse/pull/91288) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Randomise AutoPR settings in tests. [#91600](https://github.com/ClickHouse/ClickHouse/pull/91600) ([Nikita Taranov](https://github.com/nickitat)).
* CI: Remove deprecated files. [#91644](https://github.com/ClickHouse/ClickHouse/pull/91644) ([Max Kainov](https://github.com/maxknv)).
* Fix text index crash [#90609](https://github.com/ClickHouse/ClickHouse/issues/90609). [#91988](https://github.com/ClickHouse/ClickHouse/pull/91988) ([Elmi Ahmadov](https://github.com/ahmadov)).
* Fix memory tracker inaccuracy on macOS with jemalloc disabled. [#92039](https://github.com/ClickHouse/ClickHouse/pull/92039) ([Xiaozhe Yu](https://github.com/wudidapaopao)).
* If some files in data part are missing, we can end up with inconsistent in-memory state of some columns which can lead to crashes. It's better to throw logical errors in this case. [#92076](https://github.com/ClickHouse/ClickHouse/pull/92076) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix assertion in DDLLoadingDependencyVisitor. Closes [#85725](https://github.com/ClickHouse/ClickHouse/issues/85725). [#92096](https://github.com/ClickHouse/ClickHouse/pull/92096) ([Vitaly Baranov](https://github.com/vitlibar)).
* Activate checks for harmful functions in sanitizer builds. [#92193](https://github.com/ClickHouse/ClickHouse/pull/92193) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix typo. [#92236](https://github.com/ClickHouse/ClickHouse/pull/92236) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* test_keeper_session: extend coverage for create-with-statistics ([#90741](https://github.com/ClickHouse/ClickHouse/issues/90741)). [#92345](https://github.com/ClickHouse/ClickHouse/pull/92345) ([Mohammad Lareb Zafar](https://github.com/zlareb1)).
* test_keeper_persistent_watches: add coverage for persistent watch event fields. [#92377](https://github.com/ClickHouse/ClickHouse/pull/92377) ([Mohammad Lareb Zafar](https://github.com/zlareb1)).
* Fix watch callback for Keeper integration tests. [#92389](https://github.com/ClickHouse/ClickHouse/pull/92389) ([Antonio Andelic](https://github.com/antonio2368)).
* Make more stateless tests parallel. [#92394](https://github.com/ClickHouse/ClickHouse/pull/92394) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix a few flaky tests. [#92399](https://github.com/ClickHouse/ClickHouse/pull/92399) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Inline isArchSupported. [#92403](https://github.com/ClickHouse/ClickHouse/pull/92403) ([Raúl Marín](https://github.com/Algunenano)).
* Fix unnecessary trailing whitespace in JSONPretty format. [#92421](https://github.com/ClickHouse/ClickHouse/pull/92421) ([Pablo Marcos](https://github.com/pamarcos)).
* Write numeric hint when last column and enough horizontal space. [#92451](https://github.com/ClickHouse/ClickHouse/pull/92451) ([Cole Smith](https://github.com/colesmith54)).
* Add more tests for projection settings. This addresses https://github.com/ClickHouse/ClickHouse/pull/90158#issuecomment-3668341124. [#92479](https://github.com/ClickHouse/ClickHouse/pull/92479) ([Amos Bird](https://github.com/amosbird)).
* Nothing can be "new". [#92489](https://github.com/ClickHouse/ClickHouse/pull/92489) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix FuzzerLogParser to return files list for reproduce commands. [#92490](https://github.com/ClickHouse/ClickHouse/pull/92490) ([Max Kainov](https://github.com/maxknv)).
* Update version after release. [#92512](https://github.com/ClickHouse/ClickHouse/pull/92512) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Speed up Common/Exception.h. [#92514](https://github.com/ClickHouse/ClickHouse/pull/92514) ([Raúl Marín](https://github.com/Algunenano)).
* Disable randomization for 03761_lazy_materialization_split_expr. [#92517](https://github.com/ClickHouse/ClickHouse/pull/92517) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Sccache: second attempt. [#92534](https://github.com/ClickHouse/ClickHouse/pull/92534) ([Mikhail f. Shiryaev](https://github.com/Felixoid)).
* tests: optimize 02126_dist_desc by removing redudant SYSTEM FLUSH LOGS. [#92535](https://github.com/ClickHouse/ClickHouse/pull/92535) ([Azat Khuzhin](https://github.com/azat)).
* Don't run 03735_excessive_buffer_flush in fast tests. [#92538](https://github.com/ClickHouse/ClickHouse/pull/92538) ([Raúl Marín](https://github.com/Algunenano)).
* CI: Fix exception handling in AST fuzzer job. [#92558](https://github.com/ClickHouse/ClickHouse/pull/92558) ([Max Kainov](https://github.com/maxknv)).
* Build fixes for clang 22. [#92562](https://github.com/ClickHouse/ClickHouse/pull/92562) ([Azat Khuzhin](https://github.com/azat)).
* tests: make 03770_min_columns_to_activate_adaptive_write_buffer more light (reduce number of columns). [#92575](https://github.com/ClickHouse/ClickHouse/pull/92575) ([Azat Khuzhin](https://github.com/azat)).
* Mark task based parallel replica settings as production tier. [#92577](https://github.com/ClickHouse/ClickHouse/pull/92577) ([Igor Nikonov](https://github.com/devcrafter)).
* Update version_date.tsv and changelog after v25.12.1.649-stable. [#92589](https://github.com/ClickHouse/ClickHouse/pull/92589) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Manually ping the CPU in docker. [#92594](https://github.com/ClickHouse/ClickHouse/pull/92594) ([Jimmy Aguilar Mena](https://github.com/Ergus)).
* Update version_date.tsv and changelog after v25.9.7.56-stable. [#92630](https://github.com/ClickHouse/ClickHouse/pull/92630) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* tests: make 03770_min_columns_to_activate_adaptive_write_buffer less flaky for encrypted disks. [#92631](https://github.com/ClickHouse/ClickHouse/pull/92631) ([Azat Khuzhin](https://github.com/azat)).
* Setting `allow_experimental_full_text_index` --> `enable_full_text_index`. [#92638](https://github.com/ClickHouse/ClickHouse/pull/92638) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix BuzzHouse CI job. [#92646](https://github.com/ClickHouse/ClickHouse/pull/92646) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix flaky `03737_text_index_materialization.sh`. [#92657](https://github.com/ClickHouse/ClickHouse/pull/92657) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix tuple AST formatting. [#92658](https://github.com/ClickHouse/ClickHouse/pull/92658) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Remove implicit cast for wide integers. [#92663](https://github.com/ClickHouse/ClickHouse/pull/92663) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix `03357_join_pk_sharding` timeouts. [#92704](https://github.com/ClickHouse/ClickHouse/pull/92704) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Stabilise `QBit` performance tests. [#92712](https://github.com/ClickHouse/ClickHouse/pull/92712) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Update exception message. [#92713](https://github.com/ClickHouse/ClickHouse/pull/92713) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Try fix flaky `02246_is_secure_query_log`. [#92714](https://github.com/ClickHouse/ClickHouse/pull/92714) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Make query_log faster under MSAN by disabling it when building Settings.cpp. [#92716](https://github.com/ClickHouse/ClickHouse/pull/92716) ([Raúl Marín](https://github.com/Algunenano)).
* Remove unused code. [#92721](https://github.com/ClickHouse/ClickHouse/pull/92721) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Remove useless thread_id from some log messages. [#92722](https://github.com/ClickHouse/ClickHouse/pull/92722) ([Azat Khuzhin](https://github.com/azat)).
* PR: mark automatic parallel replicas mode as experimental. [#92723](https://github.com/ClickHouse/ClickHouse/pull/92723) ([Igor Nikonov](https://github.com/devcrafter)).
* tests: fix flakiness of 03735_excessive_buffer_flush. [#92724](https://github.com/ClickHouse/ClickHouse/pull/92724) ([Azat Khuzhin](https://github.com/azat)).
* Revert [#62987](https://github.com/ClickHouse/ClickHouse/issues/62987) - Fix possible CHECKSUM_DOESNT_MATCH (and others) during replicated fetches. [#92730](https://github.com/ClickHouse/ClickHouse/pull/92730) ([Azat Khuzhin](https://github.com/azat)).
* ClickHouse can process 100% of TPC-H queries. [#92735](https://github.com/ClickHouse/ClickHouse/pull/92735) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix ProjectionDescription::clone not copying index, which is not released yet. [#92753](https://github.com/ClickHouse/ClickHouse/pull/92753) ([Amos Bird](https://github.com/amosbird)).
* tests: fix flaky 03741_s3_glob_table_path_pushdown. [#92756](https://github.com/ClickHouse/ClickHouse/pull/92756) ([Eduard Karacharov](https://github.com/korowa)).
* Fix bad test `01518_nullable_aggregate_states2`. [#92763](https://github.com/ClickHouse/ClickHouse/pull/92763) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove unused code from `uniq`. [#92775](https://github.com/ClickHouse/ClickHouse/pull/92775) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix BuzzHouse CI job again. [#92785](https://github.com/ClickHouse/ClickHouse/pull/92785) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Small fixes and improvements for e2k arch, continue of https://github.com/clickhouse/clickhouse/pull/90159. [#92793](https://github.com/ClickHouse/ClickHouse/pull/92793) ([Ramil Sattarov](https://github.com/r-a-sattarov)).
* Fix JOIN ON parens formatting. [#92806](https://github.com/ClickHouse/ClickHouse/pull/92806) ([Pervakov Grigorii](https://github.com/GrigoryPervakov)).
* Change log level. [#92810](https://github.com/ClickHouse/ClickHouse/pull/92810) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Minor change in CachedOnDiskReadBufferFromFile. [#92827](https://github.com/ClickHouse/ClickHouse/pull/92827) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Update version_date.tsv and changelog after v25.3.11.20-lts. [#92829](https://github.com/ClickHouse/ClickHouse/pull/92829) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Closes [#91306](https://github.com/ClickHouse/ClickHouse/issues/91306). [#92843](https://github.com/ClickHouse/ClickHouse/pull/92843) ([Pavel Kruglov](https://github.com/Avogar)).
* Update version_date.tsv and changelog after v25.8.13.73-lts. [#92846](https://github.com/ClickHouse/ClickHouse/pull/92846) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* I wonder why it isn't shown in CI, but on my machine, it was as follows:. [#92848](https://github.com/ClickHouse/ClickHouse/pull/92848) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Closes [#83908](https://github.com/ClickHouse/ClickHouse/issues/83908). [#92852](https://github.com/ClickHouse/ClickHouse/pull/92852) ([Pavel Kruglov](https://github.com/Avogar)).
* This patch fixes the behaviour: after `move partition` query, if the part will not be immediately removed from the filesystem, because there is no covering, after reboot, it will be attached once again. [#92853](https://github.com/ClickHouse/ClickHouse/pull/92853) ([Mikhail Artemenko](https://github.com/Michicosun)).
* ci: release aware links to ci-db. [#92859](https://github.com/ClickHouse/ClickHouse/pull/92859) ([Azat Khuzhin](https://github.com/azat)).
* Sync changes. [#92873](https://github.com/ClickHouse/ClickHouse/pull/92873) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Update version_date.tsv and changelog after v25.11.4.19-stable. [#92885](https://github.com/ClickHouse/ClickHouse/pull/92885) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fuzzer defensive lines and new settings. [#92893](https://github.com/ClickHouse/ClickHouse/pull/92893) ([Pedro Ferreira](https://github.com/PedroTadim)).
* tests: make 03770_min_columns_to_activate_adaptive_write_buffer more stable. [#92927](https://github.com/ClickHouse/ClickHouse/pull/92927) ([Azat Khuzhin](https://github.com/azat)).
* Explicitly mark unsupported cases in aggregation and support read in order for AutoPR. [#92947](https://github.com/ClickHouse/ClickHouse/pull/92947) ([Nikita Taranov](https://github.com/nickitat)).
* Improve local fast test run. [#92948](https://github.com/ClickHouse/ClickHouse/pull/92948) ([Konstantin Bogdanov](https://github.com/thevar1able)).
* Ci: reduce number of tests in parallel for msan (from 19 to 12). [#92956](https://github.com/ClickHouse/ClickHouse/pull/92956) ([Azat Khuzhin](https://github.com/azat)).
* tests: fix 02881_system_detached_parts_modification_time flakiness. [#92966](https://github.com/ClickHouse/ClickHouse/pull/92966) ([Azat Khuzhin](https://github.com/azat)).
* Remove unused code. [#92970](https://github.com/ClickHouse/ClickHouse/pull/92970) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* tests: fix 02943_rmt_alter_metadata_merge_checksum_mismatch exit path. [#92978](https://github.com/ClickHouse/ClickHouse/pull/92978) ([Azat Khuzhin](https://github.com/azat)).
* tests: enable 02968_file_log_multiple_read under parallel replicas. [#92992](https://github.com/ClickHouse/ClickHouse/pull/92992) ([Azat Khuzhin](https://github.com/azat)).
* More logs in rest catalogs. [#92993](https://github.com/ClickHouse/ClickHouse/pull/92993) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Fuzz update. [#92997](https://github.com/ClickHouse/ClickHouse/pull/92997) ([Pedro Ferreira](https://github.com/PedroTadim)).
* ci: fix links to cidb. [#93027](https://github.com/ClickHouse/ClickHouse/pull/93027) ([Azat Khuzhin](https://github.com/azat)).
* More respect to memory limit from `AggregateFunctionWindowFunnel`. [#93035](https://github.com/ClickHouse/ClickHouse/pull/93035) ([Nikita Taranov](https://github.com/nickitat)).
* tests: use separate filesystem cache for tests that rely on system.filesystem_cache. [#93036](https://github.com/ClickHouse/ClickHouse/pull/93036) ([Azat Khuzhin](https://github.com/azat)).
* Update version_date.tsv and changelog after v25.11.5.8-stable. [#93069](https://github.com/ClickHouse/ClickHouse/pull/93069) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Closes [#93065](https://github.com/ClickHouse/ClickHouse/issues/93065). [#93072](https://github.com/ClickHouse/ClickHouse/pull/93072) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable dictionary layout settings while fuzzing. [#93083](https://github.com/ClickHouse/ClickHouse/pull/93083) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Resurrect old example. [#93087](https://github.com/ClickHouse/ClickHouse/pull/93087) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* More methods in the parallel aggregation example. [#93092](https://github.com/ClickHouse/ClickHouse/pull/93092) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Closes [#92219](https://github.com/ClickHouse/ClickHouse/issues/92219). [#93102](https://github.com/ClickHouse/ClickHouse/pull/93102) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Do not add MemorySample events for null pointer free. [#93103](https://github.com/ClickHouse/ClickHouse/pull/93103) ([Azat Khuzhin](https://github.com/azat)).
* It failed here: https://s3.amazonaws.com/clickhouse-test-reports/json.html?PR=93092&sha=8ffa8800d1035e5b268249f8feb4e13a8b5dda6e&name_0=PR&name_1=Integration%20tests%20%28arm_binary%2C%20distributed%20plan%2C%204%2F4%29&name_1=Integration%20tests%20%28arm_binary%2C%20distributed%20plan%2C%204%2F4%29. CC @pamarcos CC @antaljanosbenjamin CC @kssenii. [#93107](https://github.com/ClickHouse/ClickHouse/pull/93107) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Sync settings. [#93129](https://github.com/ClickHouse/ClickHouse/pull/93129) ([Nikolay Degterinsky](https://github.com/evillique)).
* tests: fix test_distributed_insert_select_to_rmt_where flakiness (due to deduplication). [#93130](https://github.com/ClickHouse/ClickHouse/pull/93130) ([Azat Khuzhin](https://github.com/azat)).
* CI: Check changelog category for revert PRs. [#93135](https://github.com/ClickHouse/ClickHouse/pull/93135) ([Max Kainov](https://github.com/maxknv)).
* One more fix for vertical merges with text indexes. [#93140](https://github.com/ClickHouse/ClickHouse/pull/93140) ([Anton Popov](https://github.com/CurtizJ)).
* fix src/Common/ProfileEvents.cpp sync. [#93142](https://github.com/ClickHouse/ClickHouse/pull/93142) ([Sema Checherinda](https://github.com/CheSema)).
* Fix logging via fmt::runtime(). [#93143](https://github.com/ClickHouse/ClickHouse/pull/93143) ([Azat Khuzhin](https://github.com/azat)).
* Add a test for logs rotation. This PR adds a simple test for https://github.com/ClickHouse/ClickHouse/pull/87620. [#93156](https://github.com/ClickHouse/ClickHouse/pull/93156) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix test_storage_s3_queue/test_shutdown_order. [#93158](https://github.com/ClickHouse/ClickHouse/pull/93158) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix flaky dynamically_resize_filesystem_cache. [#93164](https://github.com/ClickHouse/ClickHouse/pull/93164) ([Kseniia Sumarokova](https://github.com/kssenii)).
* See https://s3.amazonaws.com/clickhouse-test-reports/json.html?PR=86559&sha=c906909fd4f459fe577801462537155e8c0d6288&name_0=PR&name_1=BuzzHouse%20%28amd_ubsan%29. [#93199](https://github.com/ClickHouse/ClickHouse/pull/93199) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* See https://s3.amazonaws.com/clickhouse-test-reports/json.html?PR=93202&sha=a356f674c813d8ede45f02a9c015535da8c9c281&name_0=PR&name_1=AST%20fuzzer%20%28amd_tsan%29&name_1=AST%20fuzzer%20%28amd_tsan%29. [#93203](https://github.com/ClickHouse/ClickHouse/pull/93203) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Added test for parameterized view with space in the name to verify that restart does not cause issues resolves [#88046](https://github.com/ClickHouse/ClickHouse/issues/88046). [#93205](https://github.com/ClickHouse/ClickHouse/pull/93205) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Add a comment to StrictResizeProcessor. [#93208](https://github.com/ClickHouse/ClickHouse/pull/93208) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* CI: Pytest results: Accumulate fixture duration. [#93212](https://github.com/ClickHouse/ClickHouse/pull/93212) ([Max Kainov](https://github.com/maxknv)).
* CI: Update GH data from API in finish check. [#93214](https://github.com/ClickHouse/ClickHouse/pull/93214) ([Max Kainov](https://github.com/maxknv)).
* CI: Skip stateful data prep for local run in Functional tests. [#93226](https://github.com/ClickHouse/ClickHouse/pull/93226) ([Max Kainov](https://github.com/maxknv)).
* fix 03708_flush_async_insert_queue_for_table. [#93227](https://github.com/ClickHouse/ClickHouse/pull/93227) ([Sema Checherinda](https://github.com/CheSema)).
* WriteBufferFromS3: fix data race on deque. [#93229](https://github.com/ClickHouse/ClickHouse/pull/93229) ([Sema Checherinda](https://github.com/CheSema)).
* PromQL support: Add functions for working with tags (labels): - Add new functions: `timeSeriesTagsToGroup()`, `timeSeriesExtractTag()`, `timeSeriesCopyTags()`, `timeSeriesRemoveTags()`, `timeSeriesJoinTags()`, `timeSeriesReplaceTag()` - Rename functions `timeSeriesTagsGroupToTags()` to `timeSeriesGroupToTags()`, `timeSeriesIdToTagsGroup()` to `timeSeriesIdToGroup()`. [#93234](https://github.com/ClickHouse/ClickHouse/pull/93234) ([Vitaly Baranov](https://github.com/vitlibar)).
* CI: Do not block merge by known failures. [#93237](https://github.com/ClickHouse/ClickHouse/pull/93237) ([Max Kainov](https://github.com/maxknv)).
* Join runtime filters - handle the case with empty header of one of the join sides. [#93238](https://github.com/ClickHouse/ClickHouse/pull/93238) ([Alexander Gololobov](https://github.com/davenger)).
* CI: Actions: fix step order to block the pipeline on checkout failure. [#93239](https://github.com/ClickHouse/ClickHouse/pull/93239) ([Max Kainov](https://github.com/maxknv)).
* Split `01231_operator_null_in` to avoid timouts. [#93242](https://github.com/ClickHouse/ClickHouse/pull/93242) ([Nikita Taranov](https://github.com/nickitat)).
* Sync changes. [#93246](https://github.com/ClickHouse/ClickHouse/pull/93246) ([Nikolay Degterinsky](https://github.com/evillique)).
* Integration tests: Split tests into even batches. [#93265](https://github.com/ClickHouse/ClickHouse/pull/93265) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix inconsistent ast formatting for NOT and IN with repeated aliases. [#93267](https://github.com/ClickHouse/ClickHouse/pull/93267) ([George Larionov](https://github.com/george-larionov)).
* No longer print time on hidden query. [#93270](https://github.com/ClickHouse/ClickHouse/pull/93270) ([Cole Smith](https://github.com/colesmith54)).
* Fix integration test local run on macos. [#93279](https://github.com/ClickHouse/ClickHouse/pull/93279) ([Nikita Fomichev](https://github.com/fm4v)).
* Closes [#92955](https://github.com/ClickHouse/ClickHouse/issues/92955). [#93281](https://github.com/ClickHouse/ClickHouse/pull/93281) ([Pavel Kruglov](https://github.com/Avogar)).
* Slightly increase threshold in `test_normalized_user_cpu`. [#93282](https://github.com/ClickHouse/ClickHouse/pull/93282) ([Nikita Taranov](https://github.com/nickitat)).
* Integration tests: limit number of cpus for external services. [#93285](https://github.com/ClickHouse/ClickHouse/pull/93285) ([Nikita Fomichev](https://github.com/fm4v)).
* Fix `02346_text_index_parallel_replicas`. [#93287](https://github.com/ClickHouse/ClickHouse/pull/93287) ([Nikita Taranov](https://github.com/nickitat)).
* Fuzz update. [#93290](https://github.com/ClickHouse/ClickHouse/pull/93290) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Use natural order for table and database names in the web UI. [#93292](https://github.com/ClickHouse/ClickHouse/pull/93292) ([Cole Smith](https://github.com/colesmith54)).
* Integration tests: fix local runs with cgroupsv2. [#93299](https://github.com/ClickHouse/ClickHouse/pull/93299) ([Nikita Fomichev](https://github.com/fm4v)).
* Update docs and some tests. [#93317](https://github.com/ClickHouse/ClickHouse/pull/93317) ([Robert Schulze](https://github.com/rschu1ze)).
* Update README.md for Delhi and Seoul meetups in January. [#93324](https://github.com/ClickHouse/ClickHouse/pull/93324) ([Cheryl Tuquib](https://github.com/chetuquib)).
* CI: Enable local run for Fuzzer and Stress test jobs. [#93339](https://github.com/ClickHouse/ClickHouse/pull/93339) ([Max Kainov](https://github.com/maxknv)).
* Fix flaky test_scheduler_cpu_preemptive::test_independent_pools. [#93341](https://github.com/ClickHouse/ClickHouse/pull/93341) ([Sergei Trifonov](https://github.com/serxa)).
* Fix timeout in test_scheduler_cpu_preemptive::test_downscaling with TSan. [#93342](https://github.com/ClickHouse/ClickHouse/pull/93342) ([Sergei Trifonov](https://github.com/serxa)).
* Fix flaky test_throttling. [#93344](https://github.com/ClickHouse/ClickHouse/pull/93344) ([Sergei Trifonov](https://github.com/serxa)).
* CI: Allow broader matching for flaky integration test cases. [#93348](https://github.com/ClickHouse/ClickHouse/pull/93348) ([Max Kainov](https://github.com/maxknv)).
* PromQL support: Simplify evaluation test `test_prometheus_protocols/test_evaluation.py`. [#93350](https://github.com/ClickHouse/ClickHouse/pull/93350) ([Vitaly Baranov](https://github.com/vitlibar)).
* tests: fix 03640_load_marks_synchronously flakiness. [#93352](https://github.com/ClickHouse/ClickHouse/pull/93352) ([George Larionov](https://github.com/george-larionov)).
* Continuation of [#93197](https://github.com/ClickHouse/ClickHouse/issues/93197). [#93359](https://github.com/ClickHouse/ClickHouse/pull/93359) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Update README.md. [#93381](https://github.com/ClickHouse/ClickHouse/pull/93381) ([Tyler Hannan](https://github.com/tylerhannan)).
* Docs: Update recommendations about ANN index tuning based on recent cases. [#93387](https://github.com/ClickHouse/ClickHouse/pull/93387) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Fix clickhouse_fuzzer. [#93388](https://github.com/ClickHouse/ClickHouse/pull/93388) ([Yakov Olkhovskiy](https://github.com/yakov-olkhovskiy)).
* CI fixes. [#93390](https://github.com/ClickHouse/ClickHouse/pull/93390) ([Pedro Ferreira](https://github.com/PedroTadim)).
* CI: Fix Fast test binary artifact. [#93391](https://github.com/ClickHouse/ClickHouse/pull/93391) ([Max Kainov](https://github.com/maxknv)).
* Remote throttler sleep time no longer dependent on local socket timeouts and capped at 20 seconds by default. [#93410](https://github.com/ClickHouse/ClickHouse/pull/93410) ([Ilya Andreev](https://github.com/andreev-io)).
* tests: fix 03702_alter_column_update_and_delete_with_secondary_index_drop flakiness. [#93412](https://github.com/ClickHouse/ClickHouse/pull/93412) ([Azat Khuzhin](https://github.com/azat)).
* tests: fix test_dictionaries_update_and_reload flakiness (under database disk). [#93415](https://github.com/ClickHouse/ClickHouse/pull/93415) ([Azat Khuzhin](https://github.com/azat)).
* Fix libarchive-cmake on illumos. [#93418](https://github.com/ClickHouse/ClickHouse/pull/93418) ([Joshua Carp](https://github.com/jmcarp)).
* tests: fix 03770_min_columns_to_activate_adaptive_write_buffer flakiness in private. [#93419](https://github.com/ClickHouse/ClickHouse/pull/93419) ([Azat Khuzhin](https://github.com/azat)).
* Fix system instrument stateless tests. [#93420](https://github.com/ClickHouse/ClickHouse/pull/93420) ([Pablo Marcos](https://github.com/pamarcos)).
* Query condition cache not for tables without UUIDs. [#93423](https://github.com/ClickHouse/ClickHouse/pull/93423) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Needed for unit tests. [#93428](https://github.com/ClickHouse/ClickHouse/pull/93428) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Add additional validations in JSON column. [#93453](https://github.com/ClickHouse/ClickHouse/pull/93453) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix 00634_performance_introspection_and_logging. [#93460](https://github.com/ClickHouse/ClickHouse/pull/93460) ([Nikita Taranov](https://github.com/nickitat)).
* Bump submodules for illumos compatibility. [#93461](https://github.com/ClickHouse/ClickHouse/pull/93461) ([Joshua Carp](https://github.com/jmcarp)).
* CI: Create release script refactoring follow ups. [#93478](https://github.com/ClickHouse/ClickHouse/pull/93478) ([Max Kainov](https://github.com/maxknv)).
* Update version_date.tsv and changelog after v25.8.14.17-lts. [#93479](https://github.com/ClickHouse/ClickHouse/pull/93479) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fix flaky test_embedded_database_and_tables. [#93481](https://github.com/ClickHouse/ClickHouse/pull/93481) ([Shaohua Wang](https://github.com/tiandiwonder)).
* I need this interface; it exists for the regular keeper client. [#93484](https://github.com/ClickHouse/ClickHouse/pull/93484) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Update version_date.tsv and changelog after v25.10.4.104-stable. [#93492](https://github.com/ClickHouse/ClickHouse/pull/93492) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v25.11.6.11-stable. [#93493](https://github.com/ClickHouse/ClickHouse/pull/93493) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Update version_date.tsv and changelog after v25.3.12.8-lts. [#93494](https://github.com/ClickHouse/ClickHouse/pull/93494) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Continuation of https://github.com/ClickHouse/ClickHouse/pull/92584. Closes [#93483](https://github.com/ClickHouse/ClickHouse/issues/93483). [#93496](https://github.com/ClickHouse/ClickHouse/pull/93496) ([Dmitry Novik](https://github.com/novikd)).
* CI: Change runner for flaky check from small to medium. [#93497](https://github.com/ClickHouse/ClickHouse/pull/93497) ([Max Kainov](https://github.com/maxknv)).
* Unflaky test_projection_rebuild_uses_only_required_columns. [#93498](https://github.com/ClickHouse/ClickHouse/pull/93498) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Sets with subqueries support (key IN (SELECT)) in mergeTreeAnalyzeIndexes(). [#93499](https://github.com/ClickHouse/ClickHouse/pull/93499) ([Azat Khuzhin](https://github.com/azat)).
* Handle illumos macro conflicts. [#93501](https://github.com/ClickHouse/ClickHouse/pull/93501) ([Joshua Carp](https://github.com/jmcarp)).
* Fix overflow in parsing/formatting debug check. [#93502](https://github.com/ClickHouse/ClickHouse/pull/93502) ([George Larionov](https://github.com/george-larionov)).
* Fix failed assertion in storage S3Queue in unordered mode. It affected only debug build. Closes [#93163](https://github.com/ClickHouse/ClickHouse/issues/93163). Closes [#93240](https://github.com/ClickHouse/ClickHouse/issues/93240). Closes [#93243](https://github.com/ClickHouse/ClickHouse/issues/93243). [#93503](https://github.com/ClickHouse/ClickHouse/pull/93503) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Update version_date.tsv and changelog after v25.12.2.54-stable. [#93508](https://github.com/ClickHouse/ClickHouse/pull/93508) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Remove flaky test for lazy database. [#93514](https://github.com/ClickHouse/ClickHouse/pull/93514) ([Sergei Trifonov](https://github.com/serxa)).
* Rewrite text index test from .sh to .sql. [#93518](https://github.com/ClickHouse/ClickHouse/pull/93518) ([Robert Schulze](https://github.com/rschu1ze)).
* Miscellaneous (15). [#93525](https://github.com/ClickHouse/ClickHouse/pull/93525) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Miscellaneous (16). [#93527](https://github.com/ClickHouse/ClickHouse/pull/93527) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Unnecessary complication of the interface and constructor. [#93538](https://github.com/ClickHouse/ClickHouse/pull/93538) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix flaky test_strict_reject_with_config. [#93539](https://github.com/ClickHouse/ClickHouse/pull/93539) ([Shaohua Wang](https://github.com/tiandiwonder)).
* In 03652_memory_usage_headers, reduce max_memory_usage of the OOM query from 100MB to 20MB to avoid timeout. [#93541](https://github.com/ClickHouse/ClickHouse/pull/93541) ([Tuan Pham Anh](https://github.com/tuanpach)).
* tests: fix shell syntax in 02935_http_content_type_with_http_headers_progress. [#93544](https://github.com/ClickHouse/ClickHouse/pull/93544) ([Azat Khuzhin](https://github.com/azat)).
* Don't use `allow_suspicious_variant_types` with geom type. [#93548](https://github.com/ClickHouse/ClickHouse/pull/93548) ([Konstantin Vedernikov](https://github.com/scanhex12)).
* Resolves https://github.com/clickhouse/clickhouse/issues/92909. [#93564](https://github.com/ClickHouse/ClickHouse/pull/93564) ([Smita Kulkarni](https://github.com/SmitaRKulkarni)).
* Fuzzer updates. [#93565](https://github.com/ClickHouse/ClickHouse/pull/93565) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Update delta kernel to latest version. [#93572](https://github.com/ClickHouse/ClickHouse/pull/93572) ([Kseniia Sumarokova](https://github.com/kssenii)).
* tests: disable 03778_window_funnel_respects_memory_limit under sanitizers and debug (slow). [#93573](https://github.com/ClickHouse/ClickHouse/pull/93573) ([Azat Khuzhin](https://github.com/azat)).
* Update assert. [#93577](https://github.com/ClickHouse/ClickHouse/pull/93577) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Add randomization for new settings. [#93597](https://github.com/ClickHouse/ClickHouse/pull/93597) ([Alexey Bakharew](https://github.com/alexbakharew)).
* CI: Improve cidb link with failure filtering. [#93603](https://github.com/ClickHouse/ClickHouse/pull/93603) ([Max Kainov](https://github.com/maxknv)).
* Enable implicit-int-conversion check. [#93610](https://github.com/ClickHouse/ClickHouse/pull/93610) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix TCP keepalive socket option for illumos. [#93615](https://github.com/ClickHouse/ClickHouse/pull/93615) ([Joshua Carp](https://github.com/jmcarp)).
* Try remove shared from this from IAST. [#93617](https://github.com/ClickHouse/ClickHouse/pull/93617) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Fix error message in `SELECT tokens('tkn1 tkn2', 'invalid_tokenizer')`. [#93618](https://github.com/ClickHouse/ClickHouse/pull/93618) ([Robert Schulze](https://github.com/rschu1ze)).
* Integration tests: increase cpu limit for ClickHouse containers. [#93625](https://github.com/ClickHouse/ClickHouse/pull/93625) ([Nikita Fomichev](https://github.com/fm4v)).
* Integration tests: raise on fatal and logical errors in clickhouse logs. [#93628](https://github.com/ClickHouse/ClickHouse/pull/93628) ([Nikita Fomichev](https://github.com/fm4v)).
* CI: Remove broken links from perf report. [#93635](https://github.com/ClickHouse/ClickHouse/pull/93635) ([Max Kainov](https://github.com/maxknv)).
* CI: Split MSAN job into 2 batches. [#93637](https://github.com/ClickHouse/ClickHouse/pull/93637) ([Max Kainov](https://github.com/maxknv)).
* CI: Decrease parallelism to stabilize integration tests. [#93647](https://github.com/ClickHouse/ClickHouse/pull/93647) ([Max Kainov](https://github.com/maxknv)).
* Avoid spam from Dependabot. [#93649](https://github.com/ClickHouse/ClickHouse/pull/93649) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove dangerous code. [#93652](https://github.com/ClickHouse/ClickHouse/pull/93652) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Remove legacy performance test docker entry point script. [#93654](https://github.com/ClickHouse/ClickHouse/pull/93654) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* fix test_paimon_rest_catalog. [#93656](https://github.com/ClickHouse/ClickHouse/pull/93656) ([JIaQi Tang](https://github.com/JiaQiTang98)).
* Fix style in `TokenExtractor`. [#93661](https://github.com/ClickHouse/ClickHouse/pull/93661) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix bad test `03238_create_or_replace_view_atomically_with_replicated_engine.sh`. [#93664](https://github.com/ClickHouse/ClickHouse/pull/93664) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Finalize zookeeper client without holding a lock. [#93678](https://github.com/ClickHouse/ClickHouse/pull/93678) ([Azat Khuzhin](https://github.com/azat)).
* CI: Do not extract additional git info in workflow pre hook for PRs. [#93680](https://github.com/ClickHouse/ClickHouse/pull/93680) ([Max Kainov](https://github.com/maxknv)).
* Update CI README to reflect completed migration from legacy system. [#93681](https://github.com/ClickHouse/ClickHouse/pull/93681) ([Max Kainov](https://github.com/maxknv)).
* Update assert. [#93686](https://github.com/ClickHouse/ClickHouse/pull/93686) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Fix previous failures query in targeted job. [#93687](https://github.com/ClickHouse/ClickHouse/pull/93687) ([Max Kainov](https://github.com/maxknv)).
* It is convenient to be able to drop a subtree concurrently with other replicas without checking existence. [#93689](https://github.com/ClickHouse/ClickHouse/pull/93689) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Sync from https://github.com/ClickHouse/clickhouse-private/pull/45500. [#93702](https://github.com/ClickHouse/ClickHouse/pull/93702) ([Han Fei](https://github.com/hanfei1991)).
* Refactor s3queue hive partitioning mode. [#93703](https://github.com/ClickHouse/ClickHouse/pull/93703) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Performance test results in CIDB now include all queries with appropriate status markers (slower/unstable/success), replacing the previous behavior of only recording problematic tests. [#93706](https://github.com/ClickHouse/ClickHouse/pull/93706) ([Raufs Dunamalijevs](https://github.com/rienath)).
* fix data race in DatabaseReplicated. [#93709](https://github.com/ClickHouse/ClickHouse/pull/93709) ([Sema Checherinda](https://github.com/CheSema)).
* Add logs about deletes to Iceberg iterator. [#93711](https://github.com/ClickHouse/ClickHouse/pull/93711) ([Daniil Ivanik](https://github.com/divanik)).
* Make sure dependent views are considered when pulling messages from Kafka. [#93714](https://github.com/ClickHouse/ClickHouse/pull/93714) ([János Benjamin Antal](https://github.com/antaljanosbenjamin)).
* Surrounding SELECT args with parentheses to avoid formatting inconsistency with EXCEPT. [#93716](https://github.com/ClickHouse/ClickHouse/pull/93716) ([George Larionov](https://github.com/george-larionov)).
* Update useless charts on the dashboard. [#93745](https://github.com/ClickHouse/ClickHouse/pull/93745) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Support deploying cloud ci infra via praktika. [#93754](https://github.com/ClickHouse/ClickHouse/pull/93754) ([Max Kainov](https://github.com/maxknv)).
* Fix inconsistent formatting when subquery or tuple in IN or NOT has alias. [#93755](https://github.com/ClickHouse/ClickHouse/pull/93755) ([George Larionov](https://github.com/george-larionov)).
* CI: Upgrade job script: start server fix. [#93781](https://github.com/ClickHouse/ClickHouse/pull/93781) ([Max Kainov](https://github.com/maxknv)).
* Fix support for Prometheus Remote Read protocol. [#93791](https://github.com/ClickHouse/ClickHouse/pull/93791) ([Vitaly Baranov](https://github.com/vitlibar)).
* Clean server fuzzer script. [#93792](https://github.com/ClickHouse/ClickHouse/pull/93792) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Disable CrashWriter for integration tests. [#93808](https://github.com/ClickHouse/ClickHouse/pull/93808) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix flaky test: 03237_insert_sparse_columns_mem. [#93810](https://github.com/ClickHouse/ClickHouse/pull/93810) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Adjust some tests so they work with add_minmax_index_for_numeric_columns=1. [#93818](https://github.com/ClickHouse/ClickHouse/pull/93818) ([Raúl Marín](https://github.com/Algunenano)).
* Use intrusive_ptr for AST. [#93829](https://github.com/ClickHouse/ClickHouse/pull/93829) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* CI: Support job on error hook. [#93847](https://github.com/ClickHouse/ClickHouse/pull/93847) ([Max Kainov](https://github.com/maxknv)).
* Fix: 03776_text_index_compact_token with PR. [#93850](https://github.com/ClickHouse/ClickHouse/pull/93850) ([Igor Nikonov](https://github.com/devcrafter)).
* Fix crash in mergeTreeAnalyzeIndexes() with non existing parts and table with skipping indexes. [#93859](https://github.com/ClickHouse/ClickHouse/pull/93859) ([Azat Khuzhin](https://github.com/azat)).
* tests: make 01460_line_as_string_format less flaky (under slow MSan). [#93865](https://github.com/ClickHouse/ClickHouse/pull/93865) ([Azat Khuzhin](https://github.com/azat)).
* Remove useless optional in ASTWithAlias. [#93868](https://github.com/ClickHouse/ClickHouse/pull/93868) ([Antonio Andelic](https://github.com/antonio2368)).
* tests: fix flaky 03373_named_session_try_recreate_before_timeout. [#93870](https://github.com/ClickHouse/ClickHouse/pull/93870) ([Eduard Karacharov](https://github.com/korowa)).
* Fix rmr for TestKeeper. [#93872](https://github.com/ClickHouse/ClickHouse/pull/93872) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Improve posix portability for illumos. [#93874](https://github.com/ClickHouse/ClickHouse/pull/93874) ([Joshua Carp](https://github.com/jmcarp)).
* Fix suspicious code in projections. [#93875](https://github.com/ClickHouse/ClickHouse/pull/93875) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove bad test `test_projection_rebuild_with_required_columns`. [#93877](https://github.com/ClickHouse/ClickHouse/pull/93877) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix bad test `01459_manual_write_to_replicas_quorum_detach_attach`. [#93885](https://github.com/ClickHouse/ClickHouse/pull/93885) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* I don't know if this helps but this is my desperate attempt to fix bad test. [#93888](https://github.com/ClickHouse/ClickHouse/pull/93888) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* remove patch for geometry type handling in flipCoordinates. [#93889](https://github.com/ClickHouse/ClickHouse/pull/93889) ([Bharat Nallan](https://github.com/bharatnc)).
* Ignore log export errors, so the fuzzer can still run. [#93897](https://github.com/ClickHouse/ClickHouse/pull/93897) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Clarify and enforce empty-state contract in `groupConcat` deserialize. [#93898](https://github.com/ClickHouse/ClickHouse/pull/93898) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Update README.md. [#93900](https://github.com/ClickHouse/ClickHouse/pull/93900) ([Tyler Hannan](https://github.com/tylerhannan)).
* Fix system.zookeeper_info. [#93908](https://github.com/ClickHouse/ClickHouse/pull/93908) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix test_peak_memory_usage flakiness by making logging of peak memory more accurate. [#93910](https://github.com/ClickHouse/ClickHouse/pull/93910) ([Alexey Bakharew](https://github.com/alexbakharew)).
* Fix exception message. [#93915](https://github.com/ClickHouse/ClickHouse/pull/93915) ([Kseniia Sumarokova](https://github.com/kssenii)).
* CI: Improve praktika slack feed. [#93939](https://github.com/ClickHouse/ClickHouse/pull/93939) ([Max Kainov](https://github.com/maxknv)).
* Closes [#93879](https://github.com/ClickHouse/ClickHouse/issues/93879). [#93953](https://github.com/ClickHouse/ClickHouse/pull/93953) ([Pavel Kruglov](https://github.com/Avogar)).
* Closes [#93881](https://github.com/ClickHouse/ClickHouse/issues/93881). [#93954](https://github.com/ClickHouse/ClickHouse/pull/93954) ([Pavel Kruglov](https://github.com/Avogar)).
* Closes [#91982](https://github.com/ClickHouse/ClickHouse/issues/91982). [#93955](https://github.com/ClickHouse/ClickHouse/pull/93955) ([Pavel Kruglov](https://github.com/Avogar)).
* We need to clean up the remote layout under the lock because otherwise, after reboot, the unlink operation can be rolled back, but not the full transaction. [#93956](https://github.com/ClickHouse/ClickHouse/pull/93956) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix free space calculation in self-extracting decompressor. [#93967](https://github.com/ClickHouse/ClickHouse/pull/93967) ([Joshua Carp](https://github.com/jmcarp)).
* CI: Praktika slack feed continue. [#93972](https://github.com/ClickHouse/ClickHouse/pull/93972) ([Max Kainov](https://github.com/maxknv)).
* Improve posix compatibility for illumos. [#93978](https://github.com/ClickHouse/ClickHouse/pull/93978) ([Joshua Carp](https://github.com/jmcarp)).
* Add ability to log only slow requests to zookeeper_log. [#93999](https://github.com/ClickHouse/ClickHouse/pull/93999) ([Azat Khuzhin](https://github.com/azat)).
* Add ./utils/self-extracting-executable/ to the build digest. [#94002](https://github.com/ClickHouse/ClickHouse/pull/94002) ([Raúl Marín](https://github.com/Algunenano)).
* Fix flaky 02346_text_index_materialization.sql. [#94015](https://github.com/ClickHouse/ClickHouse/pull/94015) ([Robert Schulze](https://github.com/rschu1ze)).
* illumos: implement pollPid using libproc. [#94018](https://github.com/ClickHouse/ClickHouse/pull/94018) ([Joshua Carp](https://github.com/jmcarp)).
* Needed for https://github.com/ClickHouse/ClickHouse/pull/93956. [#94024](https://github.com/ClickHouse/ClickHouse/pull/94024) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Sync changes. [#94032](https://github.com/ClickHouse/ClickHouse/pull/94032) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Functional tests: turn on blacklist check for tests with enabled async_inserts. [#94034](https://github.com/ClickHouse/ClickHouse/pull/94034) ([Nikita Fomichev](https://github.com/fm4v)).
* Update version_date.tsv and changelog after v25.12.3.21-stable. [#94036](https://github.com/ClickHouse/ClickHouse/pull/94036) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Allow skipping test validation in targeted checks. [#94037](https://github.com/ClickHouse/ClickHouse/pull/94037) ([Max Kainov](https://github.com/maxknv)).
* Make test_scheduler_cpu_preemptive/test.py::test_downscaling less heavy. [#94061](https://github.com/ClickHouse/ClickHouse/pull/94061) ([Sergei Trifonov](https://github.com/serxa)).
* Fix flaky test `02310_clickhouse_client_INSERT_progress_profile_events.expect`. [#94063](https://github.com/ClickHouse/ClickHouse/pull/94063) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* No idea how to handle this <img width="1334" height="312" alt="image" src="https://github.com/user-attachments/assets/26a900fe-e517-41f2-96d1-403b61ad9ca6" />. [#94068](https://github.com/ClickHouse/ClickHouse/pull/94068) ([alesapin](https://github.com/alesapin)).
* Fix typo 'scrapping' --> 'scraping'. [#94071](https://github.com/ClickHouse/ClickHouse/pull/94071) ([Robert Schulze](https://github.com/rschu1ze)).
* These tests check data correctness and quite heavy. It's not very important to check them with sanitizers. [#94075](https://github.com/ClickHouse/ClickHouse/pull/94075) ([alesapin](https://github.com/alesapin)).
* Update text index docs, minor test fixes. [#94077](https://github.com/ClickHouse/ClickHouse/pull/94077) ([Robert Schulze](https://github.com/rschu1ze)).
* fix test_max_rows_to_read_leaf_with_view. [#94081](https://github.com/ClickHouse/ClickHouse/pull/94081) ([Sema Checherinda](https://github.com/CheSema)).
* Fix some typos in filenames. [#94082](https://github.com/ClickHouse/ClickHouse/pull/94082) ([Raúl Marín](https://github.com/Algunenano)).
* Improve PromQL parser: - Fix parsing numbers in special cases: hexadecimal, inf/nan, underscore between digits (`1_000_000`) - Fix passing the timestamp scale from Prometheus HTTP API - Improve ANTLR4 PromQL grammar - Add test to check parsing of prometheus queries. [#94091](https://github.com/ClickHouse/ClickHouse/pull/94091) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix: integer overflow in Throttler. [#94093](https://github.com/ClickHouse/ClickHouse/pull/94093) ([Sergei Trifonov](https://github.com/serxa)).
* ci: fix bugfix check. [#94099](https://github.com/ClickHouse/ClickHouse/pull/94099) ([Azat Khuzhin](https://github.com/azat)).
* Fix flaky test 03246_alter_from_string_to_json.sql. [#94101](https://github.com/ClickHouse/ClickHouse/pull/94101) ([Pavel Kruglov](https://github.com/Avogar)).
* Revert `Remove dangerous code`. [#94108](https://github.com/ClickHouse/ClickHouse/pull/94108) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix TSAN error in ParquetV3BlockInputFormat::onCancel. [#94109](https://github.com/ClickHouse/ClickHouse/pull/94109) ([Michael Kolupaev](https://github.com/al13n321)).
* Fix parquet writer UBSAN error on invalid bools. [#94113](https://github.com/ClickHouse/ClickHouse/pull/94113) ([Michael Kolupaev](https://github.com/al13n321)).
* ci: reduce memory usage for tests with coverage build. [#94131](https://github.com/ClickHouse/ClickHouse/pull/94131) ([Azat Khuzhin](https://github.com/azat)).
* Fix flaky test 00752_low_cardinality_permute: add missing ORDER BY. [#94137](https://github.com/ClickHouse/ClickHouse/pull/94137) (Copilot).
* CI: Add explicit `--repo` flag to `gh pr` commands in check_ci script. [#94139](https://github.com/ClickHouse/ClickHouse/pull/94139) ([Max Kainov](https://github.com/maxknv)).
* Minimal adjust for async insert tests. [#94141](https://github.com/ClickHouse/ClickHouse/pull/94141) ([Raúl Marín](https://github.com/Algunenano)).
* Fix flaky test_distributed_respect_user_timeouts by: - not running timeout sensitive checks on either debug or sanitizer builds. [#94157](https://github.com/ClickHouse/ClickHouse/pull/94157) ([Arsen Muk](https://github.com/arsenmuk)).
* TL;DR of explanation at [#93451](https://github.com/ClickHouse/ClickHouse/issues/93451#issuecomment-3749454613): There's a flaky tmp fs outage happening rarely, which makes tmp path unavailable. Retrying should fix flakiness of certain tests, the main issue should be investigated further. [#94169](https://github.com/ClickHouse/ClickHouse/pull/94169) ([Arsen Muk](https://github.com/arsenmuk)).
* Miscellaneous. [#94172](https://github.com/ClickHouse/ClickHouse/pull/94172) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Remove attribute `short` from performance tests. [#94173](https://github.com/ClickHouse/ClickHouse/pull/94173) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Closes [#92533](https://github.com/ClickHouse/ClickHouse/issues/92533). [#94177](https://github.com/ClickHouse/ClickHouse/pull/94177) ([Dmitry Novik](https://github.com/novikd)).
* Moved unique filter id from BuildRuntimeFilterStep description to `EXPLAIN actions=1`. [#94183](https://github.com/ClickHouse/ClickHouse/pull/94183) ([Alexander Gololobov](https://github.com/davenger)).
* CI: praktika workflow context refactoring. [#94190](https://github.com/ClickHouse/ClickHouse/pull/94190) ([Max Kainov](https://github.com/maxknv)).
* Adjust some tests so they can run with implicit index for numeric columns. [#94197](https://github.com/ClickHouse/ClickHouse/pull/94197) ([Raúl Marín](https://github.com/Algunenano)).
* fix test_async_insert_adaptive_busy_timeout. [#94199](https://github.com/ClickHouse/ClickHouse/pull/94199) ([Sema Checherinda](https://github.com/CheSema)).
* Fix race in codec initialization of Base64. [#94209](https://github.com/ClickHouse/ClickHouse/pull/94209) ([Robert Schulze](https://github.com/rschu1ze)).
* tests: fix test_max_temporary_data_size_on_disk flakiness. [#94212](https://github.com/ClickHouse/ClickHouse/pull/94212) ([Azat Khuzhin](https://github.com/azat)).
* tests: disable 02473_multistep_split_prewhere under MSan/ASan (too slow). [#94214](https://github.com/ClickHouse/ClickHouse/pull/94214) ([Azat Khuzhin](https://github.com/azat)).
* Make 03753_segfault_with_empty_callback no-parallel. [#94217](https://github.com/ClickHouse/ClickHouse/pull/94217) ([Raúl Marín](https://github.com/Algunenano)).
* Speed up 03753_join_runtime_filter_dynamically_disable on sanitizer builds. [#94238](https://github.com/ClickHouse/ClickHouse/pull/94238) ([Alexander Gololobov](https://github.com/davenger)).
* Closes [#94179](https://github.com/ClickHouse/ClickHouse/issues/94179). [#94239](https://github.com/ClickHouse/ClickHouse/pull/94239) ([Pavel Kruglov](https://github.com/Avogar)).
* tests: fix memory for more tests under coverage. [#94246](https://github.com/ClickHouse/ClickHouse/pull/94246) ([Azat Khuzhin](https://github.com/azat)).
* Update gitignore. [#94248](https://github.com/ClickHouse/ClickHouse/pull/94248) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Sync private changes. [#94249](https://github.com/ClickHouse/ClickHouse/pull/94249) ([Julia Kartseva](https://github.com/jkartseva)).
* Fix test `01201_read_single_thread_in_order`. [#94250](https://github.com/ClickHouse/ClickHouse/pull/94250) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix test `fix-test-00091_prewhere_two_conditions`. [#94251](https://github.com/ClickHouse/ClickHouse/pull/94251) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add timeout and simplify `01174_select_insert_isolation` test. [#94273](https://github.com/ClickHouse/ClickHouse/pull/94273) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03759_join_filterpushdown_granules_read`. [#94274](https://github.com/ClickHouse/ClickHouse/pull/94274) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix something about Docker in CI. [#94278](https://github.com/ClickHouse/ClickHouse/pull/94278) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix typos. [#94279](https://github.com/ClickHouse/ClickHouse/pull/94279) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Give more time to `03746_system_background_schedule_pool_log`. [#94280](https://github.com/ClickHouse/ClickHouse/pull/94280) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Fix constraint for PR number validation. [#94281](https://github.com/ClickHouse/ClickHouse/pull/94281) ([Max Kainov](https://github.com/maxknv)).
* Fix MSan error when sending logs. [#94292](https://github.com/ClickHouse/ClickHouse/pull/94292) ([Antonio Andelic](https://github.com/antonio2368)).
* Set BuzzHouse probabilities for each run for some statements. [#94295](https://github.com/ClickHouse/ClickHouse/pull/94295) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix JIT for `Date32` and `Time64` types. Closes [#93674](https://github.com/ClickHouse/ClickHouse/issues/93674). [#94305](https://github.com/ClickHouse/ClickHouse/pull/94305) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Less flaky test_keeper_reconfig_remove_many. [#94306](https://github.com/ClickHouse/ClickHouse/pull/94306) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix `toDecimalString`. [#94318](https://github.com/ClickHouse/ClickHouse/pull/94318) ([Antonio Andelic](https://github.com/antonio2368)).
* A few improvements to ClickBench performance test. [#94334](https://github.com/ClickHouse/ClickHouse/pull/94334) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Remove unused headers. [#94338](https://github.com/ClickHouse/ClickHouse/pull/94338) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix for runtime filter with unsupported type in BloomFilter. [#94341](https://github.com/ClickHouse/ClickHouse/pull/94341) ([Alexander Gololobov](https://github.com/davenger)).
* Fix race in cJSON between librdkafka and aws-c-common. [#94343](https://github.com/ClickHouse/ClickHouse/pull/94343) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix logical error `ReadBuffer is canceled. Can't read from it` in `TCPHandler::skipData()`. [#94360](https://github.com/ClickHouse/ClickHouse/pull/94360) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix propagating exceptions through `StdStreamFromReadBuffer`. This PR fixes logical error `ReadBuffer is canceled. Can't read from it` in `StdStreamBufFromReadBuffer::xsgetn()`. [#94362](https://github.com/ClickHouse/ClickHouse/pull/94362) ([Vitaly Baranov](https://github.com/vitlibar)).
* Fix logical error `ReadBuffer is canceled. Can't read from it` in `TCPHandler::runImpl()` after preserving canceled connection. [#94373](https://github.com/ClickHouse/ClickHouse/pull/94373) ([Vitaly Baranov](https://github.com/vitlibar)).
* Add missing const qualifier for Context::buildParameterizedViewStorage(). [#94376](https://github.com/ClickHouse/ClickHouse/pull/94376) ([Azat Khuzhin](https://github.com/azat)).
* Add cmake support for illumos. [#94377](https://github.com/ClickHouse/ClickHouse/pull/94377) ([Joshua Carp](https://github.com/jmcarp)).
* query profiler: use feature detection rather than os detection. [#94378](https://github.com/ClickHouse/ClickHouse/pull/94378) ([Joshua Carp](https://github.com/jmcarp)).
* Closes [#92641](https://github.com/ClickHouse/ClickHouse/issues/92641). [#94379](https://github.com/ClickHouse/ClickHouse/pull/94379) ([Arsen Muk](https://github.com/arsenmuk)).
* Fix "Cannot read all data" assert in private ci. [#94402](https://github.com/ClickHouse/ClickHouse/pull/94402) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Disable fuzzing unwanted settings. [#94403](https://github.com/ClickHouse/ClickHouse/pull/94403) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Remove redunant logging in DDLDependencyVisitor about "visitTableExpression for". [#94407](https://github.com/ClickHouse/ClickHouse/pull/94407) ([Azat Khuzhin](https://github.com/azat)).
* Fix "WriteBuffer is neither finalized nor canceled when destructor is called" while pushing to Set. [#94408](https://github.com/ClickHouse/ClickHouse/pull/94408) ([Azat Khuzhin](https://github.com/azat)).
* Disable 02473_multistep_prewhere with sanitizers. [#94409](https://github.com/ClickHouse/ClickHouse/pull/94409) ([Alexander Gololobov](https://github.com/davenger)).
* Add TPC-H as a performance test. [#94410](https://github.com/ClickHouse/ClickHouse/pull/94410) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Update README.md. [#94422](https://github.com/ClickHouse/ClickHouse/pull/94422) ([Zoe Steinkamp](https://github.com/zoesteinkamp)).
* CI: Stateless tests job  fixes. [#94474](https://github.com/ClickHouse/ClickHouse/pull/94474) ([Max Kainov](https://github.com/maxknv)).
* Fix a typo in integration tests. [#94475](https://github.com/ClickHouse/ClickHouse/pull/94475) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* tests: fix 03393_max_merge_delayed_streams_for_parallel_write flakiness. [#94477](https://github.com/ClickHouse/ClickHouse/pull/94477) ([Azat Khuzhin](https://github.com/azat)).
* Reduce SCALE in test `01396_inactive_replica_cleanup_nodes_zookeeper`. [#94479](https://github.com/ClickHouse/ClickHouse/pull/94479) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix build due to conflicting changes. [#94480](https://github.com/ClickHouse/ClickHouse/pull/94480) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Support slack notifications and home view customization. [#94491](https://github.com/ClickHouse/ClickHouse/pull/94491) ([Max Kainov](https://github.com/maxknv)).
* fix flaky test 03238_create_or_replace_view_atomically_with_replicated_engine. [#94492](https://github.com/ClickHouse/ClickHouse/pull/94492) ([Bharat Nallan](https://github.com/bharatnc)).
* Fix `LogicalExpressionOptimizer` in the presense of `GROUPING SETS` and `group_by_use_nulls`. [#94493](https://github.com/ClickHouse/ClickHouse/pull/94493) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a test for [#42653](https://github.com/ClickHouse/ClickHouse/issues/42653). [#94495](https://github.com/ClickHouse/ClickHouse/pull/94495) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* This will reduce noise in CI. [#94496](https://github.com/ClickHouse/ClickHouse/pull/94496) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Update AMQP-CPP to fix nullptr dereference in RabbitMQ. [#94498](https://github.com/ClickHouse/ClickHouse/pull/94498) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix bad test `01040_dictionary_invalidate_query_switchover_long.sh`. [#94502](https://github.com/ClickHouse/ClickHouse/pull/94502) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix strange code in test `01852_dictionary_query_count_long.sql`. [#94505](https://github.com/ClickHouse/ClickHouse/pull/94505) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix bad test `01852_dictionary_query_count_long.sql`. [#94506](https://github.com/ClickHouse/ClickHouse/pull/94506) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Miscellaneous (19). [#94507](https://github.com/ClickHouse/ClickHouse/pull/94507) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Demangle stack trace symbols on MacOS. [#94513](https://github.com/ClickHouse/ClickHouse/pull/94513) ([Eduard Karacharov](https://github.com/korowa)).
* Fix logical error with the `set` index and nested `indexHint` and non-`UInt8` constants. [#94514](https://github.com/ClickHouse/ClickHouse/pull/94514) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Minor readability improvements for client options. [#94516](https://github.com/ClickHouse/ClickHouse/pull/94516) ([Robert Schulze](https://github.com/rschu1ze)).
* Cleanup LLVM submodule history. [#94519](https://github.com/ClickHouse/ClickHouse/pull/94519) ([Robert Schulze](https://github.com/rschu1ze)).
* Fix TSan data race in MergeTreeBackgroundExecutor constructor when the server is misconfigured. [#94535](https://github.com/ClickHouse/ClickHouse/pull/94535) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix data race between ContextSharedPart destructor and background tasks on abnormal server shutdown. [#94536](https://github.com/ClickHouse/ClickHouse/pull/94536) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix overflow in `convertFieldToType`. [#94537](https://github.com/ClickHouse/ClickHouse/pull/94537) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix UBSan report in ProgressTable in client. [#94538](https://github.com/ClickHouse/ClickHouse/pull/94538) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add a test for something old. [#94539](https://github.com/ClickHouse/ClickHouse/pull/94539) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix TSan "unlock of an unlocked mutex" in CHECK TABLE for ReplicatedMergeTree. [#94541](https://github.com/ClickHouse/ClickHouse/pull/94541) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Add Playwright-based tool for fetching CI test reports from Claude. [#94542](https://github.com/ClickHouse/ClickHouse/pull/94542) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* fix flaky test 03734_async_insert_two_db. [#94548](https://github.com/ClickHouse/ClickHouse/pull/94548) ([Bharat Nallan](https://github.com/bharatnc)).
* Disable distributed_index_analysis for non-shared engines. [#94552](https://github.com/ClickHouse/ClickHouse/pull/94552) ([Azat Khuzhin](https://github.com/azat)).
* CI: Fix bugfix validation result handling in functional tests. [#94554](https://github.com/ClickHouse/ClickHouse/pull/94554) ([Max Kainov](https://github.com/maxknv)).
* tests: less flaky test_storage_kafka_sasl. [#94557](https://github.com/ClickHouse/ClickHouse/pull/94557) ([Eduard Karacharov](https://github.com/korowa)).
* tests: stabilize 03622_explain_indexes_distributed_index_analysis_in. [#94564](https://github.com/ClickHouse/ClickHouse/pull/94564) ([Azat Khuzhin](https://github.com/azat)).
* Minor fixes to TPC-H in CI. [#94578](https://github.com/ClickHouse/ClickHouse/pull/94578) ([Raufs Dunamalijevs](https://github.com/rienath)).
* Update README.md. [#94580](https://github.com/ClickHouse/ClickHouse/pull/94580) ([Tyler Hannan](https://github.com/tylerhannan)).
* Fix ubsan exception with HW perf counters. [#94601](https://github.com/ClickHouse/ClickHouse/pull/94601) ([Shankar Iyer](https://github.com/shankar-iyer)).
* Fix TSan "unlock of an unlocked mutex" in CHECK TABLE in SMT. [#94606](https://github.com/ClickHouse/ClickHouse/pull/94606) ([Azat Khuzhin](https://github.com/azat)).
* Fix 03702_alter_column_update_and_delete_with_secondary_index_rebuild flakiness. [#94609](https://github.com/ClickHouse/ClickHouse/pull/94609) ([Raúl Marín](https://github.com/Algunenano)).
* Better fix for non finalized/cancelled WriteBuffer while pushing to Set. [#94610](https://github.com/ClickHouse/ClickHouse/pull/94610) ([Azat Khuzhin](https://github.com/azat)).
* Support runtime filters with grace hash join algorithm. [#94611](https://github.com/ClickHouse/ClickHouse/pull/94611) ([Alexander Gololobov](https://github.com/davenger)).
* Currently we have some obscure and rare error happening while running test `test_postgresql_replica_database_engine/test_1.py::test_abrupt_connection_loss_while_heavy_replication`:. [#94614](https://github.com/ClickHouse/ClickHouse/pull/94614) ([Kirill Kopnev](https://github.com/Fgrtue)).
* Sync src/Common/FailPoint.cpp. [#94631](https://github.com/ClickHouse/ClickHouse/pull/94631) ([Tuan Pham Anh](https://github.com/tuanpach)).
* Update README.md for Melbourne meetup in February. [#94640](https://github.com/ClickHouse/ClickHouse/pull/94640) ([Cheryl Tuquib](https://github.com/chetuquib)).
* Enable implicit-int-float-conversion check. [#94643](https://github.com/ClickHouse/ClickHouse/pull/94643) ([Antonio Andelic](https://github.com/antonio2368)).
* Save updated access entity after name collision check. [#94646](https://github.com/ClickHouse/ClickHouse/pull/94646) ([Kirill](https://github.com/kirillgarbar)).
* Update version_date.tsv and changelog after v25.3.13.19-lts. [#94648](https://github.com/ClickHouse/ClickHouse/pull/94648) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Do a proper fix for `row_order_optimize`. Continuation of https://github.com/ClickHouse/ClickHouse/pull/94277. [#94649](https://github.com/ClickHouse/ClickHouse/pull/94649) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Update version_date.tsv and changelog after v25.11.7.41-stable. [#94652](https://github.com/ClickHouse/ClickHouse/pull/94652) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Skip nullptr check for TCP connection. [#94653](https://github.com/ClickHouse/ClickHouse/pull/94653) ([Antonio Andelic](https://github.com/antonio2368)).
* Update log message. [#94655](https://github.com/ClickHouse/ClickHouse/pull/94655) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Update version_date.tsv and changelog after v25.10.5.40-stable. [#94660](https://github.com/ClickHouse/ClickHouse/pull/94660) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* CI: Remove deprecated fields from workflow context. [#94666](https://github.com/ClickHouse/ClickHouse/pull/94666) ([Max Kainov](https://github.com/maxknv)).
* Enhance estimation reliability for `max_estimated_execution_time`. [#94668](https://github.com/ClickHouse/ClickHouse/pull/94668) ([Sergei Trifonov](https://github.com/serxa)).
* Update 02841_check_table_progress to make less flaky. [#94669](https://github.com/ClickHouse/ClickHouse/pull/94669) ([Vladimir Cherkasov](https://github.com/vdimir)).
* Follow up to [#82764](https://github.com/ClickHouse/ClickHouse/issues/82764). [#94673](https://github.com/ClickHouse/ClickHouse/pull/94673) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Fix stack size for architectures with 64kb pages (arm64, power, etc). [#94674](https://github.com/ClickHouse/ClickHouse/pull/94674) ([Nikita Taranov](https://github.com/nickitat)).
* Set `automatic_parallel_replicas_min_bytes_per_replica` to 1Mi by default. [#94675](https://github.com/ClickHouse/ClickHouse/pull/94675) ([Nikita Taranov](https://github.com/nickitat)).
* Improve build time of setting classes. [#94676](https://github.com/ClickHouse/ClickHouse/pull/94676) ([Raúl Marín](https://github.com/Algunenano)).
* Introduce `no-sanitizers` tag to disable test under all sanitizers altogether. [#94691](https://github.com/ClickHouse/ClickHouse/pull/94691) ([Nikita Taranov](https://github.com/nickitat)).
* illumos: miscellaneous compatibility fixes. [#94694](https://github.com/ClickHouse/ClickHouse/pull/94694) ([Joshua Carp](https://github.com/jmcarp)).
* Fix reference to part name in ReplicatedMergeTreePartCheckThread. [#94703](https://github.com/ClickHouse/ClickHouse/pull/94703) ([Antonio Andelic](https://github.com/antonio2368)).
* Update version_date.tsv and changelog after v25.8.15.35-lts. [#94710](https://github.com/ClickHouse/ClickHouse/pull/94710) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Fixing MutationCommand::parse. [#94733](https://github.com/ClickHouse/ClickHouse/pull/94733) ([Nikolai Kochetov](https://github.com/KochetovNicolai)).
* Fix concurrent Check thread pausing. [#94734](https://github.com/ClickHouse/ClickHouse/pull/94734) ([Antonio Andelic](https://github.com/antonio2368)).
* DROP CACHE --> CLEAR CACHE. [#94738](https://github.com/ClickHouse/ClickHouse/pull/94738) ([Robert Schulze](https://github.com/rschu1ze)).
* Tell AI agents how to run stateless tests. [#94741](https://github.com/ClickHouse/ClickHouse/pull/94741) ([Raúl Marín](https://github.com/Algunenano)).
* Fix race. [#94749](https://github.com/ClickHouse/ClickHouse/pull/94749) ([Kseniia Sumarokova](https://github.com/kssenii)).
* Disable runtime filters in some tests that check EXPLAINs. [#94751](https://github.com/ClickHouse/ClickHouse/pull/94751) ([Alexander Gololobov](https://github.com/davenger)).
* Fix assert. [#94753](https://github.com/ClickHouse/ClickHouse/pull/94753) ([Kseniia Sumarokova](https://github.com/kssenii)).
* ci: remove unused script. [#94777](https://github.com/ClickHouse/ClickHouse/pull/94777) ([Azat Khuzhin](https://github.com/azat)).
* This patch adds the possibility to execute a non-failing remove request. In the event of an error, nothing will be changed in the Keeper data. [#94817](https://github.com/ClickHouse/ClickHouse/pull/94817) ([Mikhail Artemenko](https://github.com/Michicosun)).
* CI: Move stateless tests in PR pipeline. [#94822](https://github.com/ClickHouse/ClickHouse/pull/94822) ([Max Kainov](https://github.com/maxknv)).
* Add assertions and dummy column in BuzzHouse. [#94823](https://github.com/ClickHouse/ClickHouse/pull/94823) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Update version_date.tsv and changelog after v25.12.4.35-stable. [#94824](https://github.com/ClickHouse/ClickHouse/pull/94824) ([robot-clickhouse](https://github.com/robot-clickhouse)).
* Slightly speed up `multi` requests. [#94830](https://github.com/ClickHouse/ClickHouse/pull/94830) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Small code cleanup. [#94833](https://github.com/ClickHouse/ClickHouse/pull/94833) ([Antonio Andelic](https://github.com/antonio2368)).
* Fix for runtime filter when joining on Dynamic column. [#94850](https://github.com/ClickHouse/ClickHouse/pull/94850) ([Alexander Gololobov](https://github.com/davenger)).
* Add index out of range check in advanced shared data in JSON. [#94855](https://github.com/ClickHouse/ClickHouse/pull/94855) ([Pavel Kruglov](https://github.com/Avogar)).
* Fix possible deadlock in case of exception during disks initialization. [#94880](https://github.com/ClickHouse/ClickHouse/pull/94880) ([Azat Khuzhin](https://github.com/azat)).
* unflake test_storage_s3_queue/test_6.py::test_bucketing_mode_with_regex_partitioning. [#94895](https://github.com/ClickHouse/ClickHouse/pull/94895) ([Bharat Nallan](https://github.com/bharatnc)).
* Disable runtime filters to allow PK sharding to kick in. [#94923](https://github.com/ClickHouse/ClickHouse/pull/94923) ([Alexander Gololobov](https://github.com/davenger)).
* Some optimizations to reduce IAST size in memory. [#94940](https://github.com/ClickHouse/ClickHouse/pull/94940) ([Raúl Marín](https://github.com/Algunenano)).
* Disable heavy 02473_multistep_prewhere with sanitizers. [#94956](https://github.com/ClickHouse/ClickHouse/pull/94956) ([Alexander Gololobov](https://github.com/davenger)).
* CI: Limit targeted job run time. [#94959](https://github.com/ClickHouse/ClickHouse/pull/94959) ([Max Kainov](https://github.com/maxknv)).
* Remove extra slash in URL for CI report. [#94960](https://github.com/ClickHouse/ClickHouse/pull/94960) ([Antonio Andelic](https://github.com/antonio2368)).
* Closes [#11085](https://github.com/ClickHouse/ClickHouse/issues/11085). [#94961](https://github.com/ClickHouse/ClickHouse/pull/94961) ([Nihal Z. Miaji](https://github.com/nihalzp)).
* Fix `TryRemove` request `zookeeper_log` serialization. [#94977](https://github.com/ClickHouse/ClickHouse/pull/94977) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fixes a bug where the `date_trunc` function was returning wrong values for pre-epoch `Date32` arguments. Closes [#70529](https://github.com/ClickHouse/ClickHouse/issues/70529). [#94996](https://github.com/ClickHouse/ClickHouse/pull/94996) ([Yarik Briukhovetskyi](https://github.com/yariks5s)).
* If the table was not started due to a broken zk metadata check, the check thread should not be run. I was debugging this https://s3.amazonaws.com/clickhouse-test-reports/json.html?PR=94977&sha=latest&name_0=PR, and exactly in this case, the problem is that during the restore metadata query, `CONNECTION_LOSS` error was thrown, which triggered background parts check from the sink, and because the check thread was enabled in this configuration, eventually got into this logical error. [#95001](https://github.com/ClickHouse/ClickHouse/pull/95001) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix build. [#95002](https://github.com/ClickHouse/ClickHouse/pull/95002) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix nullptr dereference in parser (unreleased). [#95004](https://github.com/ClickHouse/ClickHouse/pull/95004) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix undefined behavior when casting out-of-range float to enum. [#95008](https://github.com/ClickHouse/ClickHouse/pull/95008) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix transaction mutation race. [#95009](https://github.com/ClickHouse/ClickHouse/pull/95009) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* CI: Force GH reauth in Config Workflow job. [#95012](https://github.com/ClickHouse/ClickHouse/pull/95012) ([Max Kainov](https://github.com/maxknv)).
* Fix assertion failure in Parquet writer when row group write is interrupted. [#95016](https://github.com/ClickHouse/ClickHouse/pull/95016) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error when using LIMIT BY with distributed tables and optimize_const_name_size. [#95017](https://github.com/ClickHouse/ClickHouse/pull/95017) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix peekable read buffer canceled flag. [#95024](https://github.com/ClickHouse/ClickHouse/pull/95024) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Relax test `03300_merge_parts_metric.sh`. [#95025](https://github.com/ClickHouse/ClickHouse/pull/95025) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Modernize time limit, and set it for CI runs. [#95041](https://github.com/ClickHouse/ClickHouse/pull/95041) ([Pedro Ferreira](https://github.com/PedroTadim)).
* Fix logical error in `ReadFromMerge::addFilter` when child plan is not initialized. [#95047](https://github.com/ClickHouse/ClickHouse/pull/95047) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix a logical error exception that occurs when createEmptyPartInsteadOfLost is called on a readonly replica. [#95048](https://github.com/ClickHouse/ClickHouse/pull/95048) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* After this patch, system tables will be saved in the CI record regardless of the number of rows. [#95050](https://github.com/ClickHouse/ClickHouse/pull/95050) ([Mikhail Artemenko](https://github.com/Michicosun)).
* Fix BuzzHouse exception when table has no insertable columns. [#95051](https://github.com/ClickHouse/ClickHouse/pull/95051) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix function cache incorrectly reusing `function_base` for lambda functions. [#95053](https://github.com/ClickHouse/ClickHouse/pull/95053) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix deduplication log write buffer cancel. [#95054](https://github.com/ClickHouse/ClickHouse/pull/95054) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception in `adjustLastGranule` with constant PREWHERE and patch parts. [#95056](https://github.com/ClickHouse/ClickHouse/pull/95056) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Allow parentheses around the SELECT part of INSERT SELECT to fix the "Inconsistent formatting" problem. [#95057](https://github.com/ClickHouse/ClickHouse/pull/95057) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03339_native_reader_exact_rows`. [#95058](https://github.com/ClickHouse/ClickHouse/pull/95058) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent formatting of CREATE DICTIONARY. [#95060](https://github.com/ClickHouse/ClickHouse/pull/95060) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02435_rollback_cancelled_queries`. [#95061](https://github.com/ClickHouse/ClickHouse/pull/95061) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix (something about) flaky Kafka integration tests. [#95062](https://github.com/ClickHouse/ClickHouse/pull/95062) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent formatting of TTL. [#95063](https://github.com/ClickHouse/ClickHouse/pull/95063) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix logical error in tuple IN set with mixed types. [#95065](https://github.com/ClickHouse/ClickHouse/pull/95065) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable flaky test `01583_parallel_parsing_exception_with_offset` in debug/sanitizer builds. [#95066](https://github.com/ClickHouse/ClickHouse/pull/95066) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_ttl_compatibility` in `test_ttl_replicated`. [#95067](https://github.com/ClickHouse/ClickHouse/pull/95067) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* tests: fix flaky 02350_views_max_insert_threads. [#95070](https://github.com/ClickHouse/ClickHouse/pull/95070) ([Eduard Karacharov](https://github.com/korowa)).
* Fix exception when finding minimum size column during merge. [#95073](https://github.com/ClickHouse/ClickHouse/pull/95073) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* [Reverted] Fix segfault in `clearCaches` when table is dropped during query. [#95074](https://github.com/ClickHouse/ClickHouse/pull/95074) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable long test `03593_backup_with_broken_projection` under MSan. [#95075](https://github.com/ClickHouse/ClickHouse/pull/95075) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix text index direct read optimization with Nullable function arguments. [#95078](https://github.com/ClickHouse/ClickHouse/pull/95078) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix stress tests always reporting success. [#95081](https://github.com/ClickHouse/ClickHouse/pull/95081) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_auto_close_connection`. [#95082](https://github.com/ClickHouse/ClickHouse/pull/95082) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Disable test `03211_nested_json_merges` on debug builds. [#95084](https://github.com/ClickHouse/ClickHouse/pull/95084) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix "Block structure mismatch in UnionStep" exception. [#95085](https://github.com/ClickHouse/ClickHouse/pull/95085) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix exception when processing duplicate aliases in nested scopes. [#95100](https://github.com/ClickHouse/ClickHouse/pull/95100) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* clickhouse-test: check for trace_log existence. [#95101](https://github.com/ClickHouse/ClickHouse/pull/95101) ([Azat Khuzhin](https://github.com/azat)).
* Fix inconsistent formatting of INDEX, TTL, and DICTIONARY attributes. [#95102](https://github.com/ClickHouse/ClickHouse/pull/95102) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Increase S3 file cache size to fix flaky test. [#95103](https://github.com/ClickHouse/ClickHouse/pull/95103) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_rmv_append_backup`. [#95104](https://github.com/ClickHouse/ClickHouse/pull/95104) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky "Kafka bad" test `test_missing_mv_transitive_target` in TSan. [#95105](https://github.com/ClickHouse/ClickHouse/pull/95105) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_failure_in_the_middle` in S3Queue integration test. [#95106](https://github.com/ClickHouse/ClickHouse/pull/95106) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_backup_restore_system_tables_with_plain_rewritable_disk`. [#95107](https://github.com/ClickHouse/ClickHouse/pull/95107) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `test_refreshable_mv_in_system_db`. [#95108](https://github.com/ClickHouse/ClickHouse/pull/95108) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix S3Queue server restart failure with regex partitioning, leading to batch failures of integration tests. [#95109](https://github.com/ClickHouse/ClickHouse/pull/95109) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03794_read_in_order_virtual_row_and_sparse_primary_key_msan`. [#95110](https://github.com/ClickHouse/ClickHouse/pull/95110) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_simple_alter_table` for `Replicated` databases by adding explicit replica synchronization. [#95111](https://github.com/ClickHouse/ClickHouse/pull/95111) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_scheduler_cpu_preemptive::test_independent_pools`. [#95114](https://github.com/ClickHouse/ClickHouse/pull/95114) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky `test_quorum_inserts` tests. [#95115](https://github.com/ClickHouse/ClickHouse/pull/95115) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03300_merge_parts_metric`. [#95118](https://github.com/ClickHouse/ClickHouse/pull/95118) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `03644_explain_indices`. [#95119](https://github.com/ClickHouse/ClickHouse/pull/95119) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix typo. [#95124](https://github.com/ClickHouse/ClickHouse/pull/95124) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix inconsistent formatting of CONSTRAINT CHECK expressions and DEFAULT/MATERIALIZED/EPHEMERAL/ALIAS with aliases. [#95126](https://github.com/ClickHouse/ClickHouse/pull/95126) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Fix flaky test `02844_max_backup_bandwidth_s3`. [#95127](https://github.com/ClickHouse/ClickHouse/pull/95127) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Support preFinalize for fork buffer. [#95155](https://github.com/ClickHouse/ClickHouse/pull/95155) ([Mikhail Artemenko](https://github.com/Michicosun)).
* fix typo in enum name. [#95159](https://github.com/ClickHouse/ClickHouse/pull/95159) ([Sema Checherinda](https://github.com/CheSema)).
* Fix flaky test `02896_leading_zeroes_no_octal`. [#95179](https://github.com/ClickHouse/ClickHouse/pull/95179) ([Alexey Milovidov](https://github.com/alexey-milovidov)).
* Backported in [#95277](https://github.com/ClickHouse/ClickHouse/issues/95277): CI: BackportCI to check PR content is valid. [#95190](https://github.com/ClickHouse/ClickHouse/pull/95190) ([Max Kainov](https://github.com/maxknv)).
* Backported in [#95558](https://github.com/ClickHouse/ClickHouse/issues/95558): Revert "Merge pull request [#93542](https://github.com/ClickHouse/ClickHouse/issues/93542) from scanhex12/multistage_prewhere". [#95496](https://github.com/ClickHouse/ClickHouse/pull/95496) ([Alexey Milovidov](https://github.com/alexey-milovidov)).

