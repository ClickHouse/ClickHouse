<clickhouse>
    <logger>
        <level>trace</level>
        <size>1000M</size>
        <count>10</count>
    </logger>

    <http_port>8123</http_port>
    <tcp_port>9000</tcp_port>

    <storage>
        <servers>
            <server>
                <key>server-1</key>
                <host>127.0.0.1</host>
                <http-port>8124</http-port>
                <tcp-port>9001</tcp-port>
            </server>
            <server>
                <key>server-2</key>
                <host>127.0.0.1</host>
                <http-port>8125</http-port>
                <tcp-port>9002</tcp-port>
            </server>
        </servers>
    </storage>

    <routing>
        <rules>
            <rule>
                <user>admin</user>
                <action>
                    <route_to>
                        <server>server-2</server>
                    </route_to>
                </action>
            </rule>
            <rule>
                <database>test_database</database>
                <!-- <host>test.clickhouse.cloud</host> -->
                <user>test_user</user>
                <action>
                    <route_to>
                        <server>server-1</server>
                    </route_to>
                </action>
            </rule>
            <rule>
                <user>test_user</user>
                <!-- <host>test-1.clickhouse.cloud</host> -->
                <action>
                    <route_to>
                        <server>server-1</server>
                        <server>server-2</server>
                    </route_to>
                    <policy>
                        round_robin
                    </policy>
                </action>
            </rule>
            <rule>
                <database>deprecated_database</database>
                <!-- <host>test.clickhouse.cloud</host> -->
                <action>
                    <reject>true</reject>
                </action>
            </rule>
        </rules>
        <default>
             <action>
                <reject>true</reject>
            </action>
        </default>
    </routing>
</clickhouse>