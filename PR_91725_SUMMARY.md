# PR #91725 Summary: Update S3Queue Engine Documentation

## Overview

**PR Title**: [DOCS] - update s3 queue engine docs  
**PR Number**: #91725  
**Branch**: `update-s3queue-engine-docs`  
**Merge Commit**: 2884e4afddfc276f023e882c37dad861fa72a2b1

## What This PR Does

This PR adds comprehensive documentation for the **S3Queue table engine** in ClickHouse. The PR creates two new documentation files that were previously missing from the ClickHouse documentation.

## Files Added

### 1. S3Queue Table Engine Documentation
**File**: `docs/en/engines/table-engines/integrations/s3queue.md` (536 lines)

This is a complete reference guide for the S3Queue table engine that includes:

#### Key Sections:

**Introduction & Overview**
- Description of S3Queue as an integration with Amazon S3 ecosystem
- Comparison with similar engines (Kafka, RabbitMQ)
- Important behavioral notes about MATERIALIZED VIEW integration

**Table Creation Syntax**
- Complete CREATE TABLE syntax with all available settings
- Engine parameters (path, authentication, format, compression)
- Example usage with both direct parameters and named collections
- Version-specific warnings (e.g., `s3queue_` prefix requirements before v24.7)

**Comprehensive Settings Documentation** (30+ settings)
The documentation covers all S3Queue settings in detail:

- **Mode settings**: `mode` (ordered/unordered processing)
- **After-processing actions**: `after_processing` (keep/delete/move/tag)
  - Move-related settings: prefixes, URIs, access keys
  - Tag-related settings: tag keys and values
- **Keeper/ZooKeeper settings**: `keeper_path`
- **Processing settings**:
  - `loading_retries` - retry configuration
  - `processing_threads_num` - thread pool size
  - `parallel_inserts` - parallel INSERT capability
- **Logging settings**: `enable_logging_to_s3queue_log`
- **Polling settings**:
  - `polling_min_timeout_ms`
  - `polling_max_timeout_ms`
  - `polling_backoff_ms`
- **File tracking settings**:
  - `tracked_files_limit`
  - `tracked_file_ttl_sec`
  - `last_processed_path`
- **Cleanup settings**:
  - `cleanup_interval_min_ms`
  - `cleanup_interval_max_ms`
- **Performance settings**:
  - `buckets`
  - `list_objects_batch_size`
  - `enable_hash_ring_filtering`
- **Commit settings**:
  - `max_processed_files_before_commit`
  - `max_processed_rows_before_commit`
  - `max_processed_bytes_before_commit`
  - `max_processing_time_sec_before_commit`
- **Advanced settings**: `use_persistent_processing_nodes`

**Virtual Columns**
- `_path`, `_file`, `_size`, `_time` with descriptions

**Wildcards Support**
- Detailed explanation of wildcard patterns (`*`, `**`, `?`, `{}`, `{N..M}`)

**Limitations**
- Documents potential duplicate row scenarios
- Explains limitations with multiple servers and ordered mode
- Version-specific fixes (e.g., v25.8 improvements)

**Introspection**
- Complete documentation for `system.s3queue` table (in-memory state)
- Complete documentation for `system.s3queue_log` table (persistent logs)
- Table schemas with all columns
- Configuration examples
- Query examples with sample output

### 2. S3Queue Settings System Table Documentation
**File**: `docs/en/operations/system-tables/s3_queue_settings.md` (17 lines)

A concise system table reference that:
- Documents the `system.s3_queue_settings` table
- Notes availability from server version 24.10
- Links back to the main S3Queue engine documentation
- Includes placeholder for autogenerated column documentation

## Impact & Value

### Documentation Coverage
- Fills a significant gap in ClickHouse documentation by providing complete S3Queue reference
- Provides users with comprehensive guidance on all 30+ configuration options
- Includes practical examples for common use cases

### User Benefits
1. **Discoverability**: Users can now easily find S3Queue documentation
2. **Completeness**: All settings are documented with descriptions, possible values, and defaults
3. **Version Awareness**: Clear indicators of version-specific features and changes
4. **Practical Guidance**: Examples show real-world usage patterns
5. **Troubleshooting**: Introspection section helps users monitor and debug S3Queue operations

### Technical Scope
- **Total Lines Added**: 553 lines (536 + 17)
- **Documentation Type**: User-facing reference documentation
- **Format**: Markdown with frontmatter metadata
- **Language**: English
- **Documentation Areas**: Table engines, System tables

## Notable Features Documented

1. **Dual Syntax Support**: Documents both modern (24.7+) and legacy setting naming conventions
2. **Multi-bucket Support**: Documents moving files between S3 buckets and Azure containers
3. **Flexible Processing Modes**: Ordered vs Unordered with detailed tradeoffs
4. **Advanced Monitoring**: Two-tier introspection with in-memory and persistent tables
5. **Cloud & OSS Compatibility**: Documentation applies to both deployment types

## Related Changes

The PR references several related features in the codebase:
- PR #49086: Original S3Queue implementation
- Version 24.7: Setting name simplification
- Version 24.10: `system.s3_queue_settings` table introduction
- Version 25.8: `use_persistent_processing_nodes` improvements

## Conclusion

This PR provides essential documentation for the S3Queue table engine, making it accessible and understandable for ClickHouse users who need to stream data from S3 into their databases. The documentation is comprehensive, well-structured, and includes practical examples that will help users quickly get started with this integration.
